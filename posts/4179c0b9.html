<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta http-equiv="Cache-Control" content="no-siteapp"><meta http-equiv="Cache-Control" content="no-transform"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="apple-mobile-web-app-capable" content="Hå¤šçœ‹æºç å¤šè¯»ä¹¦ - å‹¤äºæ€è€ƒå–„é¢†æ‚Ÿ"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="browsermode" content="application"><meta name="screen-orientation" content="portrait"><meta name="theme-version" content="1.3.0"><meta name="root" content="/"><link rel="dns-prefetch" href="http://example.com"><meta name="keywords" content="react18"><meta name="description" content="React åˆå­¦è€…å®Œå…¨æŒ‡å— (React 18 &amp; 19)
ğŸ“š æœ¬æŒ‡å—æ—¨åœ¨å¸®åŠ©åˆå­¦è€…å¿«é€ŸæŒæ¡ React çš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€æ–°ç‰¹æ€§


ç›®å½•
React ç®€ä»‹
ç¯å¢ƒæ­å»º
æ ¸å¿ƒæ¦‚å¿µ
Reac..."><meta name="robots" content="all"><meta name="google" content="all"><meta name="googlebot" content="all"><meta name="verify" content="all"><title>React å®Œå…¨æŒ‡å— (React 18 &amp; 19) | Hå¤šçœ‹æºç å¤šè¯»ä¹¦ - å‹¤äºæ€è€ƒå–„é¢†æ‚Ÿ</title><link rel="alternate" href="/atom.xml" title="Hå¤šçœ‹æºç å¤šè¯»ä¹¦ - å‹¤äºæ€è€ƒå–„é¢†æ‚Ÿ" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/bootstrap.min.css?rev=1d1bccdabbf21f3604f985399285f5cf"><link rel="stylesheet" href="/css/font-awesome.min.css?rev=17d35b1ddb5a58cc19379d19f22b9fdc"><link rel="stylesheet" href="/css/style.css?rev=f6b0bdce3ea7068df1dbc7875d278b05"><div class="hide"><script type="text/javascript">!function(){var t="https:"===document.location.protocol?"https://":"http://",c=document.createElement("script");c.src="https://s95.cnzz.com/z_stat.php?web_id=1272564536",c.async=!0,document.body.appendChild(c);var e=document.createElement("script");e.src=t+"s19.cnzz.com/z_stat.php?id=1263868967&show=pic1",e.async=!0,document.body.appendChild(e)}()</script></div><meta name="generator" content="Hexo 7.3.0"></head><!--[if lte IE 8]><style>
    html{ font-size: 1em }
</style><![endif]--><!--[if lte IE 9]><div style="ie">ä½ ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬è¿‡ä½ï¼Œä¸ºäº†ä½ æ›´å¥½çš„é˜…è¯»ä½“éªŒï¼Œè¯·æ›´æ–°æµè§ˆå™¨çš„ç‰ˆæœ¬æˆ–è€…ä½¿ç”¨å…¶ä»–ç°ä»£æµè§ˆå™¨ï¼Œæ¯”å¦‚Chromeã€Firefoxã€Safariç­‰ã€‚</div><![endif]--><body><header class="main-header" style="background-image:url(https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/banner.webp)"><div class="main-header-box"><a class="header-avatar" href="/" title="ZHB"><img src="/img/avatar.webp" alt="logoå¤´åƒ" class="img-responsive center-block"></a><div class="branding"><img src="/img/branding.png" alt="Snippet åšå®¢ä¸»é¢˜" class="img-responsive center-block"></div></div></header><nav class="main-navigation"><div class="container"><div class="row"><div class="col-sm-12"><div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav"><span class="sr-only"></span><i class="fa fa-bars"></i></span> <a class="navbar-brand" href="http://example.com">Hå¤šçœ‹æºç å¤šè¯»ä¹¦ - å‹¤äºæ€è€ƒå–„é¢†æ‚Ÿ</a></div><div class="collapse navbar-collapse" id="main-menu"><ul class="menu"><li role="presentation" class="text-center"><a href="/"><i class="fa"></i> é¦–é¡µ</a></li><li role="presentation" class="text-center"><a href="/categories/"><i class="fa"></i> åˆ†ç±»</a></li><li role="presentation" class="text-center"><a href="/tags/"><i class="fa"></i> æ ‡ç­¾</a></li><li role="presentation" class="text-center"><a href="/archives/"><i class="fa"></i> æ—¶é—´è½´</a></li><li role="presentation" class="text-center"><a href="/about/"><i class="fa"></i> å…³äº</a></li></ul></div></div></div></div></nav><section class="content-wrap"><div class="container"><div class="row"><main class="col-md-9 main-content m-post"><p id="process"></p><article class="post"><div class="post-head"><h1 id="React å®Œå…¨æŒ‡å— (React 18 &amp; 19)">React å®Œå…¨æŒ‡å— (React 18 &amp; 19)</h1><div class="post-meta"><span class="categories-meta fa-wrap"><i class="fa fa-folder-open-o"></i> <a class="category-link" href="/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/">æ¡†æ¶ä¸ç”Ÿæ€</a></span><span class="fa-wrap"><i class="fa fa-tags"></i> <span class="tags-meta"><a class="tag-none-link" href="/tags/react18/" rel="tag">react18</a></span></span><span class="fa-wrap"><i class="fa fa-clock-o"></i> <span class="date-meta">2025/12/02</span></span></div></div><div class="post-body post-content"><h1 id="React-åˆå­¦è€…å®Œå…¨æŒ‡å—-React-18-19"><a href="#React-åˆå­¦è€…å®Œå…¨æŒ‡å—-React-18-19" class="headerlink" title="React åˆå­¦è€…å®Œå…¨æŒ‡å— (React 18 &amp; 19)"></a>React åˆå­¦è€…å®Œå…¨æŒ‡å— (React 18 &amp; 19)</h1><blockquote><p>ğŸ“š æœ¬æŒ‡å—æ—¨åœ¨å¸®åŠ©åˆå­¦è€…å¿«é€ŸæŒæ¡ React çš„æ ¸å¿ƒæ¦‚å¿µå’Œæœ€æ–°ç‰¹æ€§</p></blockquote><hr><h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ol><li><a href="#%E4%B8%80-react-%E7%AE%80%E4%BB%8B">React ç®€ä»‹</a></li><li><a href="#%E4%BA%8C-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">ç¯å¢ƒæ­å»º</a></li><li><a href="#%E4%B8%89-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">æ ¸å¿ƒæ¦‚å¿µ</a></li><li><a href="#%E5%9B%9B-react-hooks-%E8%AF%A6%E8%A7%A3">React Hooks è¯¦è§£</a></li><li><a href="#%E4%BA%94-hoc-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6">HOC é«˜é˜¶ç»„ä»¶</a></li><li><a href="#5-react-18-%E6%96%B0%E7%89%B9%E6%80%A7">React 18 æ–°ç‰¹æ€§</a></li><li><a href="#6-react-19-%E6%96%B0%E7%89%B9%E6%80%A7">React 19 æ–°ç‰¹æ€§</a></li><li><a href="#7-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a></li><li><a href="#8-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</a></li><li><a href="#9-%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90%E6%8E%A8%E8%8D%90">å­¦ä¹ èµ„æºæ¨è</a></li></ol><br><h2 id="ä¸€ã€React-ç®€ä»‹"><a href="#ä¸€ã€React-ç®€ä»‹" class="headerlink" title="ä¸€ã€React ç®€ä»‹"></a><strong>ä¸€ã€React ç®€ä»‹</strong></h2><h3 id="1-1-ä»€ä¹ˆæ˜¯-Reactï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯-Reactï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯ Reactï¼Ÿ"></a><strong><font color="red">1.1 ä»€ä¹ˆæ˜¯ Reactï¼Ÿ</font></strong></h3><p>React æ˜¯ç”± Facebookï¼ˆç° Metaï¼‰å¼€å‘çš„ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p><ul><li><strong>ç»„ä»¶åŒ–</strong>ï¼šå°† UI æ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶</li><li><strong>å£°æ˜å¼</strong>ï¼šæè¿° UI åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ï¼Œè€Œä¸æ˜¯å¦‚ä½•æ”¹å˜å®ƒ</li><li><strong>å•å‘æ•°æ®æµ</strong>ï¼šæ•°æ®ä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶ï¼Œä½¿åº”ç”¨æ›´å¯é¢„æµ‹</li></ul><h3 id="1-2-ä¸ºä»€ä¹ˆé€‰æ‹©-Reactï¼Ÿ"><a href="#1-2-ä¸ºä»€ä¹ˆé€‰æ‹©-Reactï¼Ÿ" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Reactï¼Ÿ"></a><strong><font color="red">1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Reactï¼Ÿ</font></strong></h3><table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸš€ é«˜æ€§èƒ½</td><td>è™šæ‹Ÿ DOM æœ€å°åŒ–çœŸå® DOM æ“ä½œ</td></tr><tr><td>ğŸ§© ç»„ä»¶å¤ç”¨</td><td>ä¸€æ¬¡ç¼–å†™ï¼Œå¤šå¤„ä½¿ç”¨</td></tr><tr><td>ğŸŒ ç”Ÿæ€ä¸°å¯Œ</td><td>å¤§é‡ç¬¬ä¸‰æ–¹åº“å’Œå·¥å…·æ”¯æŒ</td></tr><tr><td>ğŸ“± è·¨å¹³å°</td><td>React Native å¯å¼€å‘ç§»åŠ¨åº”ç”¨</td></tr><tr><td>ğŸ‘¥ ç¤¾åŒºæ´»è·ƒ</td><td>ä¸°å¯Œçš„å­¦ä¹ èµ„æºå’Œè§£å†³æ–¹æ¡ˆ</td></tr></tbody></table><hr><br><h2 id="äºŒã€-ç¯å¢ƒæ­å»º"><a href="#äºŒã€-ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€ ç¯å¢ƒæ­å»º"></a><strong>äºŒã€ ç¯å¢ƒæ­å»º</strong></h2><h3 id="2-1-ä½¿ç”¨-Vite-åˆ›å»ºé¡¹ç›®ï¼ˆæ¨èï¼‰"><a href="#2-1-ä½¿ç”¨-Vite-åˆ›å»ºé¡¹ç›®ï¼ˆæ¨èï¼‰" class="headerlink" title="2.1 ä½¿ç”¨ Vite åˆ›å»ºé¡¹ç›®ï¼ˆæ¨èï¼‰"></a><strong><font color="red">2.1 ä½¿ç”¨ Vite åˆ›å»ºé¡¹ç›®ï¼ˆæ¨èï¼‰</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ npm</span></span><br><span class="line">npm create vite@latest vite-react-app -- --template react</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ pnpm</span></span><br><span class="line">pnpm create vite vite-react-app --template react</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ yarn</span></span><br><span class="line">yarn create vite vite-react-app --template react</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥é¡¹ç›®ç›®å½•å¹¶å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vite-react-app</span><br><span class="line">npm/pnpm/yarn install</span><br><span class="line">npm/pnpm/yarn run dev</span><br></pre></td></tr></table></figure><h3 id="2-2-ä½¿ç”¨-Create-React-App"><a href="#2-2-ä½¿ç”¨-Create-React-App" class="headerlink" title="2.2 ä½¿ç”¨ Create React App"></a><strong><font color="red">2.2 ä½¿ç”¨ Create React App</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app webpack-react-app</span><br><span class="line"><span class="built_in">cd</span> webpack-react-app</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure><h3 id="2-3-é¡¹ç›®ç»“æ„"><a href="#2-3-é¡¹ç›®ç»“æ„" class="headerlink" title="2.3 é¡¹ç›®ç»“æ„"></a><strong><font color="red">2.3 é¡¹ç›®ç»“æ„</font></strong></h3><p><strong>vite</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vite-react-app/</span><br><span class="line">â”œâ”€â”€ ğŸ“ public/                 # å…¬å…±èµ„æºç›®å½•</span><br><span class="line">â”‚   â””â”€â”€ vite.svg               # Vite é¡¹ç›®é»˜è®¤ SVG å›¾æ ‡</span><br><span class="line">â”œâ”€â”€ ğŸ“ src/                    # æºä»£ç ç›®å½•</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“ assets/             # é™æ€èµ„æºç›®å½•</span><br><span class="line">â”‚   â”œâ”€â”€ App.jsx                # æ ¹ç»„ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ App.css                # App ç»„ä»¶æ ·å¼æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ main.jsx               # åº”ç”¨å…¥å£æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ index.css              # å…¨å±€æ ·å¼æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ .gitignore                 # Git å¿½ç•¥é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£</span><br><span class="line">â”œâ”€â”€ eslint.config.js           # ESLint é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ index.html                 # HTML å…¥å£æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ package.json               # é¡¹ç›®é…ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ pnpm-lock.yaml             # pnpm ä¾èµ–é”å®šæ–‡ä»¶</span><br><span class="line">â””â”€â”€ vite.config.js             # Vite é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><p><strong>webpack</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">webpack-react-app/</span><br><span class="line">â”œâ”€â”€ ğŸ“ public/                 # å…¬å…±èµ„æºç›®å½• </span><br><span class="line">â”‚   â”œâ”€â”€ favicon.ico            # ç½‘ç«™å›¾æ ‡</span><br><span class="line">â”‚   â”œâ”€â”€ index.html             # HTML å…¥å£æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ manifest.json          # Web App æ¸…å•æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ robots.txt             # æœç´¢å¼•æ“çˆ¬è™«è§„åˆ™</span><br><span class="line">â”œâ”€â”€ ğŸ“ src/                    # æºä»£ç ç›®å½• </span><br><span class="line">â”‚   â”œâ”€â”€ App.css                # App ç»„ä»¶æ ·å¼æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ App.js                 # æ ¹ç»„ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ App.test.js            # App ç»„ä»¶æµ‹è¯•æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ index.css              # å…¨å±€æ ·å¼æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ index.js               # åº”ç”¨å…¥å£æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ reportWebVitals.js     # æ€§èƒ½æ£€æµ‹æ–‡ä»¶</span><br><span class="line">â”‚   â””â”€â”€ setupTests.js          # æµ‹è¯•è®¾ç½®æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ .gitignore                 # Git å¿½ç•¥é…ç½®æ–‡ä»¶ </span><br><span class="line">â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£ </span><br><span class="line">â”œâ”€â”€ package-lock.json          # npm ä¾èµ–é”å®šæ–‡ä»¶</span><br><span class="line">â””â”€â”€ package.json               # é¡¹ç›®é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><hr><br><h2 id="ä¸‰ã€-æ ¸å¿ƒæ¦‚å¿µ"><a href="#ä¸‰ã€-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ä¸‰ã€ æ ¸å¿ƒæ¦‚å¿µ"></a><strong>ä¸‰ã€ æ ¸å¿ƒæ¦‚å¿µ</strong></h2><h3 id="3-1-JSX-è¯­æ³•"><a href="#3-1-JSX-è¯­æ³•" class="headerlink" title="3.1 JSX è¯­æ³•"></a><strong><font color="red">3.1 JSX è¯­æ³•</font></strong></h3><p>JSX æ˜¯ JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œè®©ä½ å¯ä»¥åœ¨ JS ä¸­ç¼–å†™ç±»ä¼¼ HTML çš„ä»£ç ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSX åŸºç¡€è¯­æ³•</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> name = <span class="string">&quot;React&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> isLoggedIn = <span class="literal">true</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;welcome&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* ä½¿ç”¨èŠ±æ‹¬å·åµŒå…¥è¡¨è¾¾å¼ */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      &#123;/* æ¡ä»¶æ¸²æŸ“ */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;isLoggedIn ? <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ¬¢è¿å›æ¥<span class="tag">&lt;/<span class="name">p</span>&gt;</span> : <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¯·ç™»å½•<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      &#123;/* æ³¨æ„ï¼šclass è¦å†™æˆ className */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1ï¼‰JSX-è§„åˆ™é€Ÿè®°"><a href="#1ï¼‰JSX-è§„åˆ™é€Ÿè®°" class="headerlink" title="1ï¼‰JSX è§„åˆ™é€Ÿè®°"></a><strong><font color="#10c300">1ï¼‰JSX è§„åˆ™é€Ÿè®°</font></strong></h4><table><thead><tr><th>HTML</th><th>JSX</th></tr></thead><tbody><tr><td><code>class</code></td><td><code>className</code></td></tr><tr><td><code>for</code></td><td><code>htmlFor</code></td></tr><tr><td><code>onclick</code></td><td><code>onClick</code></td></tr><tr><td><code>tabindex</code></td><td><code>tabIndex</code></td></tr></tbody></table><br><h3 id="3-2-ç»„ä»¶"><a href="#3-2-ç»„ä»¶" class="headerlink" title="3.2 ç»„ä»¶"></a><strong><font color="red">3.2 ç»„ä»¶</font></strong></h3><h4 id="1ï¼‰å‡½æ•°ç»„ä»¶ï¼ˆæ¨èï¼‰"><a href="#1ï¼‰å‡½æ•°ç»„ä»¶ï¼ˆæ¨èï¼‰" class="headerlink" title="1ï¼‰å‡½æ•°ç»„ä»¶ï¼ˆæ¨èï¼‰"></a><strong><font color="#10c300">1ï¼‰å‡½æ•°ç»„ä»¶ï¼ˆæ¨èï¼‰</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°ç»„ä»¶æ˜¯ React æ¨èçš„ç¼–å†™æ–¹å¼</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Greeting</span>(<span class="params">&#123; name &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä½ å¥½, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°å†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Greeting</span> = (<span class="params">&#123; name &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä½ å¥½, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2ï¼‰ç±»ç»„ä»¶ï¼ˆäº†è§£å³å¯ï¼‰"><a href="#2ï¼‰ç±»ç»„ä»¶ï¼ˆäº†è§£å³å¯ï¼‰" class="headerlink" title="2ï¼‰ç±»ç»„ä»¶ï¼ˆäº†è§£å³å¯ï¼‰"></a><strong><font color="#10c300">2ï¼‰ç±»ç»„ä»¶ï¼ˆäº†è§£å³å¯ï¼‰</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greeting</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä½ å¥½, &#123;this.props.name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-3-Propsï¼ˆå±æ€§ï¼‰"><a href="#3-3-Propsï¼ˆå±æ€§ï¼‰" class="headerlink" title="3.3 Propsï¼ˆå±æ€§ï¼‰"></a><strong><font color="red">3.3 Propsï¼ˆå±æ€§ï¼‰</font></strong></h3><p>Props æ˜¯çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">UserCard</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">name</span>=<span class="string">&quot;å¼ ä¸‰&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">age</span>=<span class="string">&#123;25&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">isAdmin</span>=<span class="string">&#123;true&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">hobbies</span>=<span class="string">&#123;[</span>&#x27;<span class="attr">è¯»ä¹¦</span>&#x27;, &#x27;<span class="attr">æ¸¸æˆ</span>&#x27;]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UserCard</span>(<span class="params">&#123; name, age, isAdmin, hobbies &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹´é¾„: &#123;age&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>èº«ä»½: &#123;isAdmin ? &#x27;ç®¡ç†å‘˜&#x27; : &#x27;æ™®é€šç”¨æˆ·&#x27;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;hobbies.map((hobby, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;hobby&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1ï¼‰Props-é»˜è®¤å€¼"><a href="#1ï¼‰Props-é»˜è®¤å€¼" class="headerlink" title="1ï¼‰Props é»˜è®¤å€¼"></a><strong><font color="#10c300">1ï¼‰Props é»˜è®¤å€¼</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; text = <span class="string">&quot;ç‚¹å‡»&quot;</span>, type = <span class="string">&quot;primary&quot;</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">btn-</span>$&#123;<span class="attr">type</span>&#125;`&#125;&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-4-Stateï¼ˆçŠ¶æ€ï¼‰"><a href="#3-4-Stateï¼ˆçŠ¶æ€ï¼‰" class="headerlink" title="3.4 Stateï¼ˆçŠ¶æ€ï¼‰"></a><strong><font color="red">3.4 Stateï¼ˆçŠ¶æ€ï¼‰</font></strong></h3><p>State æ˜¯ç»„ä»¶å†…éƒ¨çš„å¯å˜æ•°æ®ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// å£°æ˜çŠ¶æ€ï¼š[å½“å‰å€¼, æ›´æ–°å‡½æ•°] = useState(åˆå§‹å€¼)</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å½“å‰è®¡æ•°: &#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count - 1)&#125;&gt;-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(0)&#125;&gt;é‡ç½®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1ï¼‰State-æ›´æ–°æ³¨æ„äº‹é¡¹"><a href="#1ï¼‰State-æ›´æ–°æ³¨æ„äº‹é¡¹" class="headerlink" title="1ï¼‰State æ›´æ–°æ³¨æ„äº‹é¡¹"></a><strong><font color="#10c300">1ï¼‰State æ›´æ–°æ³¨æ„äº‹é¡¹</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// âŒ é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">wrongUpdate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    user.<span class="property">age</span> = <span class="number">26</span>; <span class="comment">// ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“</span></span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// âœ… æ­£ç¡®ï¼šåˆ›å»ºæ–°å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">correctUpdate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setUser</span>(&#123; ...user, <span class="attr">age</span>: <span class="number">26</span> &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// âœ… ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼ˆåŸºäºå‰ä¸€ä¸ªçŠ¶æ€ï¼‰</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(<span class="function"><span class="params">prevCount</span> =&gt;</span> prevCount + <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-5-äº‹ä»¶å¤„ç†"><a href="#3-5-äº‹ä»¶å¤„ç†" class="headerlink" title="3.5 äº‹ä»¶å¤„ç†"></a><strong><font color="red">3.5 äº‹ä»¶å¤„ç†</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">EventExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æŒ‰é’®è¢«ç‚¹å‡»&#x27;</span>, e);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¸¦å‚æ•°çš„äº‹ä»¶å¤„ç†</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleDelete</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åˆ é™¤é¡¹ç›®:&#x27;</span>, id);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è¡¨å•è¾“å…¥</span></span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleChange</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setValue</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> handleDelete(123)&#125;&gt;åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-6-æ¡ä»¶æ¸²æŸ“"><a href="#3-6-æ¡ä»¶æ¸²æŸ“" class="headerlink" title="3.6 æ¡ä»¶æ¸²æŸ“"></a><strong><font color="red">3.6 æ¡ä»¶æ¸²æŸ“</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ConditionalExample</span>(<span class="params">&#123; isLoggedIn, messages &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* æ–¹å¼1: ä¸‰å…ƒè¿ç®—ç¬¦ */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;isLoggedIn ? <span class="tag">&lt;<span class="name">LogoutButton</span> /&gt;</span> : <span class="tag">&lt;<span class="name">LoginButton</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      &#123;/* æ–¹å¼2: &amp;&amp; çŸ­è·¯è¿ç®— */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;messages.length &gt; 0 &amp;&amp; <span class="tag">&lt;<span class="name">Badge</span> <span class="attr">count</span>=<span class="string">&#123;messages.length&#125;</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      &#123;/* æ–¹å¼3: if-else æå‰è¿”å› */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        if (messages.length === 0) return <span class="tag">&lt;<span class="name">p</span>&gt;</span>æš‚æ— æ¶ˆæ¯<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">        if (messages.length &lt; 5) return <span class="tag">&lt;<span class="name">p</span>&gt;</span>å°‘é‡æ¶ˆæ¯<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">        return <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¤§é‡æ¶ˆæ¯<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">      &#125;)()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-7-åˆ—è¡¨æ¸²æŸ“"><a href="#3-7-åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="3.7 åˆ—è¡¨æ¸²æŸ“"></a><strong><font color="red">3.7 åˆ—è¡¨æ¸²æŸ“</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> todos = [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">&#x27;å­¦ä¹  React&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">&#x27;å†™ä»£ç &#x27;</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">&#x27;çœ‹æ–‡æ¡£&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  ];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;todos.map(todo =&gt; (</span></span><br><span class="line"><span class="language-xml">        // key å¿…é¡»æ˜¯å”¯ä¸€ä¸”ç¨³å®šçš„æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">className</span>=<span class="string">&#123;todo.done</span> ? &#x27;<span class="attr">completed</span>&#x27; <span class="attr">:</span> &#x27;&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;todo.text&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>âš ï¸ <strong>key çš„é‡è¦æ€§</strong>ï¼škey å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ æ”¹å˜äº†ï¼Œé¿å…ä½¿ç”¨æ•°ç»„ç´¢å¼•ä½œä¸º keyï¼ˆé™¤éåˆ—è¡¨æ˜¯é™æ€çš„ï¼‰</p></blockquote><hr><br><h2 id="å››ã€-React-Hooks-è¯¦è§£"><a href="#å››ã€-React-Hooks-è¯¦è§£" class="headerlink" title="å››ã€ React Hooks è¯¦è§£"></a><strong>å››ã€ React Hooks è¯¦è§£</strong></h2><p>Hooks æ˜¯ React 16.8 å¼•å…¥çš„ç‰¹æ€§ï¼Œè®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€å’Œå…¶ä»– React ç‰¹æ€§ã€‚</p><h3 id="4-1-useState-çŠ¶æ€ç®¡ç†"><a href="#4-1-useState-çŠ¶æ€ç®¡ç†" class="headerlink" title="4.1 useState - çŠ¶æ€ç®¡ç†"></a><strong><font color="red">4.1 useState - çŠ¶æ€ç®¡ç†</font></strong></h3><p><code>useState</code> æ˜¯ä¸€ä¸ª React Hookï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­å£°æ˜å’Œç®¡ç†<strong>çŠ¶æ€ï¼ˆstateï¼‰</strong>ï¼ˆ ä¸€å®šè¦åœ¨**<code>ç»„ä»¶é¡¶å±‚</code>**è°ƒç”¨ï¼‰</p><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(initialValue);</span><br></pre></td></tr></table></figure><ul><li>initialArgï¼šå®šä¹‰çš„åˆå§‹å€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„æ•°æ®ï¼Œåƒæ•°å­—ï¼Œå­—ç¬¦ä¸²æˆ–è€…æ•°ç»„å’Œå¯¹è±¡ã€‚</li><li>useState ()æ–¹æ³•çš„è¿”å›å€¼ä¸ºç”±ä¸¤ä¸ªå€¼ç»„æˆçš„æ•°ç»„<ol><li><code>state</code>ï¼šå½“å‰çŠ¶æ€å€¼ï¼šåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œå®ƒå°†ä¸ä½ ä¼ é€’çš„ <code>initialArg</code> ç›¸åŒ¹é…ã€‚</li><li><code>setState</code>ï¼šæ›´æ–°çŠ¶æ€çš„å‡½æ•°ï¼šå®ƒå¯ä»¥è®©ä½ å°† state æ›´æ–°ä¸ºä¸åŒçš„å€¼å¹¶è§¦å‘é‡æ–°æ¸²æŸ“ã€‚</li></ol></li></ul><h4 id="2ï¼‰ç¤ºä¾‹ï¼šè®¡æ•°å™¨"><a href="#2ï¼‰ç¤ºä¾‹ï¼šè®¡æ•°å™¨" class="headerlink" title="2ï¼‰ç¤ºä¾‹ï¼šè®¡æ•°å™¨"></a><strong><font color="#10c300">2ï¼‰ç¤ºä¾‹ï¼šè®¡æ•°å™¨</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>&#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>); <span class="comment">// å£°æ˜çŠ¶æ€å˜é‡ count</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>); <span class="comment">// æ›´æ–°çŠ¶æ€ï¼ˆè§¦å‘é‡æ–°æ¸²æŸ“ï¼‰</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å½“å‰è®¡æ•°ï¼š&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>ç‚¹å‡» +1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure><p><strong>ğŸ” è¿è¡ŒåŸç†ï¼š</strong></p><ul><li>åˆæ¬¡æ¸²æŸ“ï¼š<code>count = 0</code></li><li>æ¯æ¬¡ç‚¹å‡» <code>button</code> â†’ è°ƒç”¨ <code>setCount(count + 1)</code></li><li>React æ£€æµ‹åˆ°çŠ¶æ€æ›´æ–° â†’ é‡æ–°æ¸²æŸ“ UIï¼ˆå¦‚çŠ¶æ€å’Œä¸Šä¸€æ¬¡ä¸€æ ·åˆ™ä¸ä¼šé‡æ–°æ¸²æŸ“UIï¼‰</li></ul><h4 id="3ï¼‰æ›´æ–°çŠ¶æ€çš„ä¸¤ç§æ–¹å¼"><a href="#3ï¼‰æ›´æ–°çŠ¶æ€çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="3ï¼‰æ›´æ–°çŠ¶æ€çš„ä¸¤ç§æ–¹å¼"></a><strong><font color="#10c300">3ï¼‰æ›´æ–°çŠ¶æ€çš„ä¸¤ç§æ–¹å¼</font></strong></h4><p><strong><font color="#00A6ED">1ï¸âƒ£ ç›´æ¥èµ‹å€¼</font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setCount</span>(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><p><strong><font color="#00A6ED">2ï¸âƒ£ å‡½æ•°å¼æ›´æ–°ï¼ˆæ¨èåœ¨ä¾èµ–æ—§å€¼æ—¶ï¼‰</font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setCount</span>(<span class="function"><span class="params">prevCount</span> =&gt;</span> prevCount + <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>âš ï¸ è¿™ä¸ªå†™æ³•æ›´å®‰å…¨ï¼Œå› ä¸º React çš„çŠ¶æ€æ›´æ–°æ˜¯<strong>å¼‚æ­¥æ‰¹å¤„ç†çš„</strong>ï¼Œç›´æ¥ç”¨æ—§çš„ <code>count</code> å¯èƒ½ä¸æ˜¯æœ€æ–°å€¼ã€‚</p><h4 id="4ï¼‰å„æ•°æ®ç±»å‹æ›´æ–°æ–¹å¼"><a href="#4ï¼‰å„æ•°æ®ç±»å‹æ›´æ–°æ–¹å¼" class="headerlink" title="4ï¼‰å„æ•°æ®ç±»å‹æ›´æ–°æ–¹å¼"></a><strong><font color="#10c300">4ï¼‰å„æ•°æ®ç±»å‹æ›´æ–°æ–¹å¼</font></strong></h4><p>ä¸è¦ç›´æ¥å¯¹å¯¹è±¡å’Œæ•°ç»„è¿›è¡Œèµ‹å€¼ï¼Œè¦å§‹ç»ˆç¡®ä¿ä½ çš„setå‡½æ•°é‡Œæ˜¯ä¸€ä»½å…¨æ–°çš„æ•°æ®ï¼Œè¿™æ ·Reactæ‰èƒ½å¤Ÿæ£€æµ‹åˆ°çŠ¶æ€å˜åŒ–ï¼Œå¹¶æŒ‰é¢„æœŸè¿›è¡Œæ›´æ–°å’Œé‡æ–°æ¸²æŸ“æ“ä½œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// åŸºç¡€ç±»å‹</span></span><br><span class="line">  <span class="keyword">const</span> [name, setName] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [age, setAge] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">    </span><br><span class="line">  <span class="comment">// å¯¹è±¡ç±»å‹</span></span><br><span class="line">  <span class="keyword">const</span> [form, setForm] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">updateUsername</span> = (<span class="params">e</span>) =&gt; &#123; <span class="comment">// æ›´æ–°å¯¹è±¡çš„æŸä¸ªå­—æ®µ</span></span><br><span class="line">    <span class="title function_">setForm</span>(<span class="function"><span class="params">prev</span> =&gt;</span> (&#123;</span><br><span class="line">      ...prev,</span><br><span class="line">      <span class="attr">username</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">    </span><br><span class="line">  <span class="comment">// æ•°ç»„ç±»å‹</span></span><br><span class="line">  <span class="keyword">const</span> [items, setItems] = <span class="title function_">useState</span>([]);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addItem</span> = (<span class="params">item</span>) =&gt; &#123; <span class="comment">// æ·»åŠ é¡¹ç›®</span></span><br><span class="line">    <span class="title function_">setItems</span>(<span class="function"><span class="params">prev</span> =&gt;</span> [...prev, item]);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">removeItem</span> = (<span class="params">id</span>) =&gt; &#123; <span class="comment">// åˆ é™¤é¡¹ç›®</span></span><br><span class="line">    <span class="title function_">setItems</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> !== id));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Form</span>;</span><br></pre></td></tr></table></figure><h4 id="5ï¼‰æ›´æ–°æ˜¯å¼‚æ­¥ä¸”å¯èƒ½åˆå¹¶"><a href="#5ï¼‰æ›´æ–°æ˜¯å¼‚æ­¥ä¸”å¯èƒ½åˆå¹¶" class="headerlink" title="5ï¼‰æ›´æ–°æ˜¯å¼‚æ­¥ä¸”å¯èƒ½åˆå¹¶"></a><strong><font color="#10c300">5ï¼‰æ›´æ–°æ˜¯å¼‚æ­¥ä¸”å¯èƒ½åˆå¹¶</font></strong></h4><p>useState è¿”å›çš„æ›´æ–°å¯¹è±¡çš„æ–¹æ³•æ˜¯<strong>å¼‚æ­¥çš„</strong>ï¼Œè¦åœ¨ä¸‹æ¬¡é‡ç»˜æ‰èƒ½è·å–æ–°å€¼ï¼Œä¸è¦è¯•å›¾åœ¨æ›´æ”¹çŠ¶æ€ä¹‹åç«‹å³è·å–çŠ¶æ€ï¼Œè¿ç»­ä¿®æ”¹stateä¼šåˆå¹¶ï¼Œåªæ‰§è¡Œæœ€åä¸€æ¬¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> [num, setNum] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">fn1</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">4</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">3</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">2</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// ç¬¬ä¸€æ¬¡ç‚¹å‡»æ˜¯0ï¼Œè¯´æ˜setNumæ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”å¤šæ¬¡è°ƒç”¨åªä¼šç”Ÿæ•ˆæœ€åä¸€æ¬¡</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>è®¡æ•°å™¨ï¼š&#123; num &#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">fn1</span> &#125;&gt;</span>è®¡æ•°å™¨ä¿®æ”¹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h4 id="6ï¼‰æ³¨æ„ç‚¹"><a href="#6ï¼‰æ³¨æ„ç‚¹" class="headerlink" title="6ï¼‰æ³¨æ„ç‚¹"></a><strong><font color="#10c300">6ï¼‰æ³¨æ„ç‚¹</font></strong></h4><table><thead><tr><th>æ³¨æ„äº‹é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ›´æ–°çŠ¶æ€ä¼šè§¦å‘é‡æ–°æ¸²æŸ“</td><td>æ¯æ¬¡ <code>setState</code> éƒ½ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶</td></tr><tr><td>æ›´æ–°æ˜¯å¼‚æ­¥ä¸”å¯èƒ½åˆå¹¶</td><td>React ä¼šä¼˜åŒ–æ›´æ–°ï¼Œå¤šæ¬¡ setState å¯èƒ½åˆå¹¶ä¸ºä¸€æ¬¡</td></tr><tr><td>åˆå§‹å€¼åªåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ç”Ÿæ•ˆ</td><td>ä¹‹åä¸ä¼šå› ä¸º props æ”¹å˜è€Œé‡æ–°è®¾ç½®</td></tr><tr><td>å¯ä»¥ä¼ å…¥å‡½æ•°åˆå§‹åŒ–ï¼ˆæƒ°æ€§åˆå§‹åŒ–ï¼‰</td><td><code>useState(() =&gt; è®¡ç®—åˆå§‹å€¼)</code>ï¼Œåªæ‰§è¡Œä¸€æ¬¡</td></tr></tbody></table><h4 id="6ï¼‰æƒ°æ€§åˆå§‹åŒ–ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰"><a href="#6ï¼‰æƒ°æ€§åˆå§‹åŒ–ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰" class="headerlink" title="6ï¼‰æƒ°æ€§åˆå§‹åŒ–ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰"></a><strong><font color="#10c300">6ï¼‰æƒ°æ€§åˆå§‹åŒ–ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰</font></strong></h4><p>å¦‚æœåˆå§‹å€¼è®¡ç®—å¾ˆè€—æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <strong>å‡½æ•°æƒ°æ€§åˆå§‹åŒ–</strong>ï¼ˆä¼ å…¥ä¸€ä¸ªå‡½æ•°å¯ä»¥é¿å…æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åªæ‰§è¡Œä¸€æ¬¡åˆå§‹åŒ–é€»è¾‘&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">complexComputeInitialData</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="7ï¼‰useState-å°ç»“"><a href="#7ï¼‰useState-å°ç»“" class="headerlink" title="7ï¼‰useState å°ç»“"></a><strong><font color="#10c300">7ï¼‰useState å°ç»“</font></strong></h4><table><thead><tr><th>ç‰¹æ€§</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>Hook å</td><td><code>useState</code></td></tr><tr><td>å‚æ•°</td><td>åˆå§‹å€¼ï¼ˆæˆ–è¿”å›åˆå§‹å€¼çš„å‡½æ•°ï¼‰</td></tr><tr><td>è¿”å›å€¼</td><td><code>[state, setState]</code></td></tr><tr><td>æ˜¯å¦è§¦å‘ç»„ä»¶æ¸²æŸ“</td><td>âœ… æ˜¯</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>ä¿å­˜çŠ¶æ€ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰</td></tr><tr><td>æ›´æ–°è§„åˆ™</td><td>è°ƒç”¨ <code>setState</code> æ›´æ–°å¹¶è§¦å‘é‡æ–°æ¸²æŸ“</td></tr></tbody></table><br><h3 id="4-2-useEffect-å‰¯ä½œç”¨å¤„ç†"><a href="#4-2-useEffect-å‰¯ä½œç”¨å¤„ç†" class="headerlink" title="4.2 useEffect-å‰¯ä½œç”¨å¤„ç†"></a><strong><font color="red">4.2 useEffect-å‰¯ä½œç”¨å¤„ç†</font></strong></h3><p>å®ƒè®©å‡½æ•°ç»„ä»¶èƒ½å¤Ÿåœ¨<strong>æ¸²æŸ“åæ‰§è¡Œå‰¯ä½œç”¨æ“ä½œï¼ˆside effectsï¼‰</strong>ï¼Œæ¯”å¦‚ï¼šç½‘ç»œè¯·æ±‚ã€DOM æ“ä½œã€äº‹ä»¶ç›‘å¬ã€å®šæ—¶å™¨ã€æ•°æ®è®¢é˜…ç­‰ã€‚</p><p>å‡½æ•°ç»„ä»¶é‡Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆåƒç±»ç»„ä»¶çš„ <code>componentDidMount</code>ã€<code>componentWillUnmount</code>ï¼‰ï¼›React æä¾› <code>useEffect</code> æ¥æ›¿ä»£å®ƒä»¬ã€‚</p><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-1"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-1" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ‰§è¡Œå‰¯ä½œç”¨é€»è¾‘</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ¸…ç†å‰¯ä½œç”¨é€»è¾‘ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [dependencies]);</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°1 (å‡½æ•°)ï¼šå®šä¹‰çš„åˆå§‹å€¼ï¼Œå¯ä»¥æ˜¯ä»»æ„æ•°æ®ï¼Œåƒæ•°å­—ï¼Œå­—ç¬¦ä¸²æˆ–è€…æ•°ç»„å’Œå¯¹è±¡ã€‚</li><li>å‚æ•°2 (ä¾èµ–é¡¹)ï¼š<ol><li><code>æ— å‚æ•°</code>ï¼šæ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œã€‚</li><li><code>ç©ºæ•°ç»„</code>ï¼šä»…åœ¨æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚</li><li><code>ä¾èµ–å‚æ•°</code>ï¼šä¾èµ–å‚æ•°å˜åŒ–æ—¶æ‰§è¡Œã€‚</li></ol></li></ul><h4 id="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"><a href="#2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹" class="headerlink" title="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</font></strong></h4><p><strong><font color="#00A6ED">1ï¸âƒ£ ä¸å¸¦ä¾èµ– â†’ æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ</font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œ&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸å†™ä¾èµ–æ•°ç»„æ—¶ï¼Œæ„å‘³ç€ï¼š</p><ul><li>æ¯æ¬¡ç»„ä»¶<strong>æŒ‚è½½å’Œæ›´æ–°</strong>éƒ½ä¼šè¿è¡Œã€‚<br>âš ï¸ å¦‚æ— å¿…è¦ï¼Œä¸å»ºè®®çœç•¥ä¾èµ–æ•°ç»„ï¼Œä¼šå½±å“æ€§èƒ½ã€‚</li></ul><p><strong><font color="#00A6ED">2ï¸âƒ£ ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç»„ä»¶æŒ‚è½½&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç»„ä»¶å¸è½½&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, []); <span class="comment">// ç©ºæ•°ç»„ â†’ åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello React!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ğŸ” è§£é‡Šï¼š</strong></p><ul><li><code>[]</code> è¡¨ç¤ºè¯¥å‰¯ä½œç”¨æ²¡æœ‰ä¾èµ–ï¼Œåªåœ¨ç»„ä»¶<strong>é¦–æ¬¡æ¸²æŸ“</strong>å’Œ<strong>å¸è½½</strong>æ—¶æ‰§è¡Œï¼›</li><li>æ¸…ç†å‡½æ•°è¿”å›éƒ¨åˆ† (<code>return () =&gt; â€¦</code>) ä¼šåœ¨ç»„ä»¶å¸è½½æ—¶è°ƒç”¨ã€‚</li></ul><p>å¯ç±»æ¯”äºï¼š</p><ul><li>æŒ‚è½½æ—¶æ‰§è¡Œï¼š<code>componentDidMount</code></li><li>å¸è½½æ—¶æ¸…ç†ï¼š<code>componentWillUnmount</code></li></ul><p><strong><font color="#00A6ED">3ï¸âƒ£ ä¾èµ–ç‰¹å®šçŠ¶æ€æ›´æ–°æ—¶æ‰§è¡Œ</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`count æ›´æ–°äº†ï¼š<span class="subst">$&#123;count&#125;</span>`</span>);</span><br><span class="line">  &#125;, [count]); <span class="comment">// ğŸ‘ˆ å½“ count æ”¹å˜æ—¶è§¦å‘</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>è®¡æ•°ï¼š&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… å½“ <code>count</code> æ”¹å˜æ—¶ï¼Œ<code>useEffect</code> ä¼šé‡æ–°è¿è¡Œå‰¯ä½œç”¨é€»è¾‘ã€‚</p><h4 id="3ï¼‰æ¸…ç†å‰¯ä½œç”¨ï¼ˆå¦‚äº‹ä»¶ã€å®šæ—¶å™¨ï¼‰"><a href="#3ï¼‰æ¸…ç†å‰¯ä½œç”¨ï¼ˆå¦‚äº‹ä»¶ã€å®šæ—¶å™¨ï¼‰" class="headerlink" title="3ï¼‰æ¸…ç†å‰¯ä½œç”¨ï¼ˆå¦‚äº‹ä»¶ã€å®šæ—¶å™¨ï¼‰"></a><strong><font color="#10c300">3ï¼‰æ¸…ç†å‰¯ä½œç”¨ï¼ˆå¦‚äº‹ä»¶ã€å®šæ—¶å™¨ï¼‰</font></strong></h4><p>å½“å‰¯ä½œç”¨æ¶‰åŠ<strong>è®¢é˜…æˆ–æ³¨å†Œèµ„æº</strong>æ—¶ï¼Œåº”è¯¥åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…ç†ï¼Œä»¥é˜²æ­¢å†…å­˜æ³„æ¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å®šæ—¶å™¨åœ¨è¿è¡Œ&#x27;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸…ç†å‡½æ•°ï¼ˆç»„ä»¶å¸è½½æ—¶è°ƒç”¨ï¼‰</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰å¸¸è§ç”¨é€”æ€»ç»“"><a href="#4ï¼‰å¸¸è§ç”¨é€”æ€»ç»“" class="headerlink" title="4ï¼‰å¸¸è§ç”¨é€”æ€»ç»“"></a><strong><font color="#10c300">4ï¼‰å¸¸è§ç”¨é€”æ€»ç»“</font></strong></h4><table><thead><tr><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ•°æ®è¯·æ±‚</td><td><code>fetch(url)</code>ã€<code>axios.get(...)</code></td></tr><tr><td>äº‹ä»¶ç›‘å¬</td><td><code>window.addEventListener(&#39;scroll&#39;, ...)</code></td></tr><tr><td>DOM æ“ä½œ</td><td><code>document.title = ...</code></td></tr><tr><td>å®šæ—¶å™¨</td><td><code>setInterval()</code> &#x2F; <code>setTimeout()</code></td></tr><tr><td>è®¢é˜…&#x2F;æ¸…ç†</td><td>WebSocketã€Observer æ¨¡å¼ç­‰</td></tr></tbody></table><h4 id="5ï¼‰å¸¸è§å‘å’Œæ³¨æ„äº‹é¡¹"><a href="#5ï¼‰å¸¸è§å‘å’Œæ³¨æ„äº‹é¡¹" class="headerlink" title="5ï¼‰å¸¸è§å‘å’Œæ³¨æ„äº‹é¡¹"></a><strong><font color="#10c300">5ï¼‰å¸¸è§å‘å’Œæ³¨æ„äº‹é¡¹</font></strong></h4><ol><li>ä¾èµ–é—æ¼ä¼šå¯¼è‡´é€»è¾‘é”™è¯¯ã€‚<ul><li>æ¨èä½¿ç”¨ ESLint æ’ä»¶ï¼š<code>eslint-plugin-react-hooks</code> è‡ªåŠ¨æ£€æŸ¥ä¾èµ–ã€‚</li></ul></li><li>æ¸…ç†å‡½æ•°éå¸¸é‡è¦ã€‚<ul><li>ä¸æ¸…ç†å®šæ—¶å™¨æˆ–ç›‘å¬å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ã€‚</li></ul></li><li>ä¸è¦åœ¨ useEffect å†…ç›´æ¥ä¿®æ”¹çŠ¶æ€å¯¼è‡´æ— é™å¾ªç¯ã€‚<ul><li>React ä¼šé‡å¤æ¸²æŸ“ï¼›å¿…é¡»æ§åˆ¶å¥½æ¡ä»¶ã€‚</li></ul></li></ol><h4 id="6ï¼‰æ€»ç»“å¯¹æ¯”"><a href="#6ï¼‰æ€»ç»“å¯¹æ¯”" class="headerlink" title="6ï¼‰æ€»ç»“å¯¹æ¯”"></a><strong><font color="#10c300">6ï¼‰æ€»ç»“å¯¹æ¯”</font></strong></h4><table><thead><tr><th>ç”Ÿå‘½å‘¨æœŸè¡Œä¸º</th><th>ç±»ç»„ä»¶å†™æ³•</th><th>å‡½æ•°ç»„ä»¶å†™æ³•</th></tr></thead><tbody><tr><td>ç»„ä»¶æŒ‚è½½</td><td><code>componentDidMount</code></td><td><code>useEffect(() =&gt; &#123;&#125;, [])</code></td></tr><tr><td>ç»„ä»¶æ›´æ–°</td><td><code>componentDidUpdate</code></td><td><code>useEffect(() =&gt; &#123;&#125;, [æŸçŠ¶æ€])</code></td></tr><tr><td>ç»„ä»¶å¸è½½</td><td><code>componentWillUnmount</code></td><td><code>useEffect(() =&gt; &#123; return () =&gt; &#123;&#125; &#125;, [])</code></td></tr></tbody></table><br><h3 id="4-3-useContext-è·¨ç»„ä»¶å…±äº«çŠ¶æ€"><a href="#4-3-useContext-è·¨ç»„ä»¶å…±äº«çŠ¶æ€" class="headerlink" title="4.3 useContext - è·¨ç»„ä»¶å…±äº«çŠ¶æ€"></a><strong><font color="red">4.3 useContext - è·¨ç»„ä»¶å…±äº«çŠ¶æ€</font></strong></h3><p>å®ƒä¸»è¦ç”¨äºåœ¨ç»„ä»¶æ ‘ä¸­<strong>å…±äº«æ•°æ®</strong>ï¼Œ<strong>é¿å…å±‚å±‚ä¼ é€’ propsï¼ˆâ€œprops drillingâ€ï¼‰çš„é—®é¢˜</strong>ã€‚</p><p>åœ¨ React åº”ç”¨ä¸­ï¼Œå¦‚æœå¾ˆå¤šå±‚ç»„ä»¶ä¹‹é—´éƒ½éœ€è¦å…±äº«æŸä¸ªæ•°æ®ï¼ˆæ¯”å¦‚ä¸»é¢˜ã€è¯­è¨€ã€ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œç›´æ¥é€šè¿‡ props ä¸€å±‚å±‚å¾€ä¸‹ä¼ ä¼šéå¸¸éº»çƒ¦ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">App</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> <span class="attr">theme</span>=<span class="string">&#123;theme&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Content</span> <span class="attr">theme</span>=<span class="string">&#123;theme&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">theme</span>=<span class="string">&#123;theme&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">App</span>&gt;</span><br></pre></td></tr></table></figure><p>ğŸ‘† æ¯å±‚éƒ½è¦ä¼  <code>theme</code>ï¼Œè¿™å°±æ˜¯ <strong>props drilling</strong>ã€‚</p><p>React æä¾› <strong>Context</strong>ï¼Œå¯ä»¥è®©ä½ åœ¨ç»„ä»¶æ ‘é—´<strong>ç›´æ¥å…±äº«æ•°æ®ï¼Œä¸å¿…å±‚å±‚ä¼ é€’</strong>ã€‚</p><h4 id="1ï¼‰ä½¿ç”¨æ­¥éª¤"><a href="#1ï¼‰ä½¿ç”¨æ­¥éª¤" class="headerlink" title="1ï¼‰ä½¿ç”¨æ­¥éª¤"></a><strong><font color="#10c300">1ï¼‰ä½¿ç”¨æ­¥éª¤</font></strong></h4><p><strong>Step 1ï¸âƒ£ï¼šåˆ›å»º Context</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src\context\index.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123;createContext&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">	<span class="title class_">MyContext</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Step 2ï¸âƒ£ï¼šä¸Šå±‚ç»„ä»¶æä¾›æ•°æ®</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./components/Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">GrandChild</span> <span class="keyword">from</span> <span class="string">&quot;./components/GrandChild&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyContext</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./context/index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [data] = <span class="title function_">useState</span>(<span class="string">&quot;å¤§é±¼æµ·æ£ &quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">MyContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;data&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯çˆ¶ç»„ä»¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">GrandChild</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">MyContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><strong>Step 3ï¸âƒ£ï¼šå­ç»„ä»¶</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123;children&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯å­ç»„ä»¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Child</span></span><br></pre></td></tr></table></figure><p><strong>Step 4ï¸âƒ£ï¼šå­™ç»„ä»¶ä½¿ç”¨ <code>useContext</code> è·å–å€¼</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useContext&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyContext</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../context/index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GrandChild</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// è¿™æ˜¯app.jsxä¸­ä¼ æ¥çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> data = <span class="title function_">useContext</span>(<span class="title class_">MyContext</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯å­™ç»„ä»¶ï¼Œçº¢è‰²éƒ¨åˆ†æ˜¯é¡¶çº§ç»„ä»¶æ•°æ®ï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span> &#x27;<span class="attr">red</span>&#x27;&#125;&#125;&gt;</span>&#123;data&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> defau lt <span class="title class_">GrandChild</span></span><br></pre></td></tr></table></figure><h4 id="2ï¼‰è¯­æ³•æ€»ç»“"><a href="#2ï¼‰è¯­æ³•æ€»ç»“" class="headerlink" title="2ï¼‰è¯­æ³•æ€»ç»“"></a><strong><font color="#10c300">2ï¼‰è¯­æ³•æ€»ç»“</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = <span class="title function_">useContext</span>(<span class="title class_">MyContext</span>);</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°ï¼šä½ åˆ›å»ºçš„ context å¯¹è±¡ï¼ˆç”± <code>React.createContext()</code> ç”Ÿæˆï¼‰</li><li>è¿”å›å€¼ï¼šæœ€è¿‘ä¸€å±‚åŒ¹é…çš„ <code>MyContext.Provider</code> ä¸­çš„ <code>value</code></li></ul><p>React ä¼šè‡ªåŠ¨ï¼š</p><ul><li>æ‰¾åˆ°ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ Providerï¼›</li><li>è¯»å–å®ƒçš„ <code>value</code>ï¼›</li><li>å¦‚æœæ‰¾ä¸åˆ° Providerï¼Œè¿”å› <code>createContext(defaultValue)</code> é‡Œå®šä¹‰çš„é»˜è®¤å€¼ã€‚</li></ul><h4 id="3ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"><a href="#3ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹" class="headerlink" title="3ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a><strong><font color="#10c300">3ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</font></strong></h4><p><strong><font color="#00A6ED">1ï¸âƒ£ çŠ¶æ€å…±äº«ç¤ºä¾‹</font></strong></p><p>å¯ä»¥ç»“åˆ <code>useState</code> åœ¨é¡¶å±‚å®šä¹‰å…±äº«çŠ¶æ€ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; createContext, useContext, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">UserContext</span> = <span class="title function_">createContext</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">UserContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">user</span>, <span class="attr">setUser</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">UserContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; user, setUser &#125; = <span class="title function_">useContext</span>(<span class="title class_">UserContext</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š&#123;user.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setUser(&#123; ...user, name: &#x27;Bob&#x27; &#125;)&#125;&gt;æ”¹å<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â¡ï¸ å­ç»„ä»¶ä¸ä»…èƒ½è¯»åˆ°çŠ¶æ€ï¼Œè¿˜èƒ½è°ƒç”¨ <code>setUser()</code> ä¿®æ”¹å®ƒï¼Œæ‰€æœ‰ä½¿ç”¨æ­¤ä¸Šä¸‹æ–‡çš„ç»„ä»¶éƒ½ä¼šåŒæ­¥æ›´æ–°ã€‚</p><br><p><strong><font color="#00A6ED">2ï¸âƒ£ ä¸»é¢˜åˆ‡æ¢ç¤ºä¾‹</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useContext, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. åˆ›å»º Context</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. åˆ›å»º Provider ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ThemeProvider</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(children);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> [theme, setTheme] = <span class="title function_">useState</span>(<span class="string">&#x27;light&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">toggleTheme</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setTheme</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev === <span class="string">&#x27;light&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">theme</span>, <span class="attr">toggleTheme</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ThemedButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; theme, toggleTheme &#125; = <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onClick</span>=<span class="string">&#123;toggleTheme&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">background:</span> <span class="attr">theme</span> === <span class="string">&#x27;dark&#x27;</span> ? &#x27;#<span class="attr">333</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">fff</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">color:</span> <span class="attr">theme</span> === <span class="string">&#x27;dark&#x27;</span> ? &#x27;#<span class="attr">fff</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">333</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">            å½“å‰ä¸»é¢˜: &#123;theme&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. åœ¨ App ä¸­ä½¿ç”¨ Provider åŒ…è£¹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ThemedButton</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰åº”ç”¨åœºæ™¯"><a href="#4ï¼‰åº”ç”¨åœºæ™¯" class="headerlink" title="4ï¼‰åº”ç”¨åœºæ™¯"></a><strong><font color="#10c300">4ï¼‰åº”ç”¨åœºæ™¯</font></strong></h4><p><code>useContext</code> å¸¸ç”¨äºï¼š</p><table><thead><tr><th>åœºæ™¯</th><th>ä¸¾ä¾‹</th></tr></thead><tbody><tr><td>ä¸»é¢˜åˆ‡æ¢</td><td>æ·±è‰² &#x2F; æµ…è‰²ä¸»é¢˜</td></tr><tr><td>ç”¨æˆ·ç™»å½•ä¿¡æ¯</td><td>å…¨å±€ç”¨æˆ·çŠ¶æ€</td></tr><tr><td>å¤šè¯­è¨€ï¼ˆå›½é™…åŒ–ï¼‰</td><td>å½“å‰è¯­è¨€ã€ç¿»è¯‘å‡½æ•°</td></tr><tr><td>å…¨å±€è®¾ç½®</td><td>æ¯”å¦‚ App é…ç½®å¯¹è±¡</td></tr></tbody></table><p>é€šå¸¸é…åˆï¼š</p><ul><li><code>createContext()</code> åˆ›å»ºä¸Šä¸‹æ–‡ï¼›</li><li><code>&lt;Context.Provider&gt;</code> æä¾›æ•°æ®ï¼›</li><li><code>useContext()</code> æ¶ˆè´¹æ•°æ®ã€‚</li></ul><h4 id="5ï¼‰æ³¨æ„äº‹é¡¹"><a href="#5ï¼‰æ³¨æ„äº‹é¡¹" class="headerlink" title="5ï¼‰æ³¨æ„äº‹é¡¹"></a><strong><font color="#10c300">5ï¼‰æ³¨æ„äº‹é¡¹</font></strong></h4><table><thead><tr><th>æ³¨æ„ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¿…é¡»åœ¨ Provider èŒƒå›´å†…ä½¿ç”¨</td><td>å¦åˆ™è¿”å›é»˜è®¤å€¼ï¼ˆä¸æ˜¯æŠ¥é”™ï¼‰</td></tr><tr><td>ä¸è¦æ»¥ç”¨ Context</td><td>å¤ªå¤šå…¨å±€çŠ¶æ€ä¼šé™ä½å¯ç»´æŠ¤æ€§</td></tr><tr><td>æ¯å½“ Provider çš„ value æ”¹å˜æ—¶</td><td>æ‰€æœ‰ä½¿ç”¨è¯¥ Context çš„ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“</td></tr><tr><td>ä¸æ”¯æŒé€‰æ‹©æ€§è®¢é˜…</td><td>æ‰€ä»¥å¤§å‹çŠ¶æ€å¯ä»¥è€ƒè™‘ä½¿ç”¨ Zustandã€Redux ç­‰æ–¹æ¡ˆ</td></tr></tbody></table><h4 id="6ï¼‰æ€»ç»“"><a href="#6ï¼‰æ€»ç»“" class="headerlink" title="6ï¼‰æ€»ç»“"></a><strong><font color="#10c300">6ï¼‰æ€»ç»“</font></strong></h4><table><thead><tr><th>é¡¹ç›®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Hook å</td><td><code>useContext(MyContext)</code></td></tr><tr><td>åŠŸèƒ½</td><td>åœ¨ç»„ä»¶æ ‘ä¸­ç›´æ¥è·å– Context æ•°æ®</td></tr><tr><td>æ›¿ä»£äº†</td><td>ç±»ç»„ä»¶çš„ <code>contextType</code> &#x2F; <code>&lt;Context.Consumer&gt;</code></td></tr><tr><td>æ­é…ä½¿ç”¨</td><td><code>createContext()</code> + <code>&lt;Context.Provider&gt;</code></td></tr><tr><td>åœºæ™¯</td><td>å…¨å±€çŠ¶æ€å…±äº«ï¼ˆä¸»é¢˜ã€ç”¨æˆ·ã€è¯­è¨€ç­‰ï¼‰</td></tr></tbody></table><br><h3 id="4-4-useMemo-ç¼“å­˜è®¡ç®—ç»“æœ"><a href="#4-4-useMemo-ç¼“å­˜è®¡ç®—ç»“æœ" class="headerlink" title="4.4 useMemo- ç¼“å­˜è®¡ç®—ç»“æœ"></a><strong><font color="red">4.4 useMemo- ç¼“å­˜è®¡ç®—ç»“æœ</font></strong></h3><p><strong>è®© React è®°ä½ä¸€ä¸ªè®¡ç®—å€¼ï¼ˆmemoized valueï¼‰</strong>ï¼Œåªæœ‰åœ¨ä¾èµ–é¡¹å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—ã€‚</p><p>æ¢å¥è¯è¯´ï¼š</p><ul><li>å¦‚æœä¾èµ–æ²¡å˜ â†’ ç›´æ¥ç”¨ä¸Šæ¬¡è®¡ç®—çš„ç»“æœï¼›</li><li>å¦‚æœä¾èµ–å˜äº† â†’ é‡æ–°è®¡ç®—å¹¶è¿”å›æ–°ç»“æœã€‚</li></ul><p>å®ƒå¯ä»¥å¸®ä½ æ˜¾è‘—å‡å°‘ä¸å¿…è¦çš„è®¡ç®—æˆ–å¯¹è±¡é‡å»ºã€‚</p><p><code>useMemo</code>çš„ç†å¿µæ˜¯åŒæ­¥çš„ï¼ŒuseMemoä¸èƒ½è¿›è¡Œä¸€äº›é¢å¤–çš„å‰¯æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ç­‰ã€‚</p><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-2"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-2" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useMemo</span>(<span class="function">()=&gt;</span>&#123;<span class="keyword">return</span> å€¼&#125;,[ä¾èµ–é¡¹])</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°1 (å‡½æ•°)ï¼šä¸€ä¸ªè¿”å›å€¼çš„å‡½æ•°ï¼ˆæ‰§è¡Œè®¡ç®—ï¼‰</li><li>å‚æ•°2 (ä¾èµ–é¡¹)ï¼šä¾èµ–æ•°ç»„ï¼Œå½“å…¶ä¸­æŸé¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—</li></ul><p>è¿”å›å€¼ï¼š<strong>ç¼“å­˜çš„è®¡ç®—ç»“æœ</strong>ã€‚</p><h4 id="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-1"><a href="#2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-1" class="headerlink" title="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</font></strong></h4><p><strong><font color="#00A6ED">1ï¸âƒ£ è®¡ç®—ç¼“å­˜</font></strong></p><p>æœªä½¿ç”¨<code>useMemo</code>çš„æ—¶å€™æ”¹å˜é¢œè‰²ï¼Œä¹Ÿä¼šæ‰§è¡ŒComputeTotalä»·æ ¼çš„è®¡ç®—ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useState, useMemo &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">function ComputeTotal(price, count) &#123;</span><br><span class="line">    console.log(&quot;å‡½æ•°è¿è¡Œäº†&quot;);</span><br><span class="line">    return price * count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">    const [price, setPrice] = useState(100);</span><br><span class="line">    const [count] = useState(1);</span><br><span class="line">    const [color, setColor] = useState(&quot;red&quot;);</span><br><span class="line"></span><br><span class="line">    // ğŸ‘‰ åªæœ‰ price å˜åŒ–æ—¶ï¼Œæ‰é‡æ–°è®¡ç®—</span><br><span class="line">    const totalPrice = useMemo(() =&gt; ComputeTotal(price, count),[price]);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;p&gt;æ€»ä»·ï¼š&#123;totalPrice&#125;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&#123;color&#125;&lt;/p&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setColor(&quot;blue&quot;)&#125;&gt;ä¿®æ”¹é¢œè‰²&lt;/button&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setPrice(price + 100)&#125;&gt;ä¿®æ”¹ä»·æ ¼&lt;/button&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure><p>âœ… å½“ä½ æ”¹å˜é¢œè‰²çš„æ—¶å€™ï¼Œä¸ä¼šé‡æ–°æ‰§è¡ŒComputeTotalã€‚åªæœ‰priceå˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ã€‚</p><p><strong><font color="#00A6ED">2ï¸âƒ£ ç¼“å­˜ç»„ä»¶(ä¸å¸¸ç”¨)</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [price, setPrice] = <span class="title function_">useState</span>(<span class="number">100</span>);</span><br><span class="line">    <span class="keyword">const</span> [count] = <span class="title function_">useState</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">const</span> [color, setColor] = <span class="title function_">useState</span>(<span class="string">&quot;red&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> memoizedChild = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// ç¼“å­˜ç»„ä»¶</span></span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">price</span>=<span class="string">&#123;price&#125;</span> /&gt;</span></span>;</span><br><span class="line">    &#125;, [count, price]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;color&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setColor(&quot;blue&quot;)&#125;&gt;ä¿®æ”¹é¢œè‰²<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setPrice(price + 100)&#125;&gt;ä¿®æ”¹ä»·æ ¼<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* ä½¿ç”¨ç»„ä»¶ */&#125;</span></span><br><span class="line"><span class="language-xml">            &#123;memoizedChild&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h4 id="3ï¼‰æ ¸å¿ƒç”¨é€”"><a href="#3ï¼‰æ ¸å¿ƒç”¨é€”" class="headerlink" title="3ï¼‰æ ¸å¿ƒç”¨é€”"></a><strong><font color="#10c300">3ï¼‰æ ¸å¿ƒç”¨é€”</font></strong></h4><table><thead><tr><th>ç”¨é€”</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç¼“å­˜å¤æ‚è®¡ç®—</td><td>é¿å…æ¯æ¬¡æ¸²æŸ“éƒ½è¿›è¡Œé«˜è€—æ—¶æ“ä½œ</td></tr><tr><td>ç¼“å­˜å¯¹è±¡æˆ–æ•°ç»„</td><td>é¿å…å¯¹è±¡å¼•ç”¨å˜åŒ–å¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“</td></tr><tr><td>ä¸ <code>React.memo</code> é…åˆ</td><td>ä¿æŒ props ç¨³å®šï¼Œé˜²æ­¢å­ç»„ä»¶è¯¯é‡æ¸²æŸ“</td></tr></tbody></table><h4 id="4ï¼‰ç¼“å­˜å¼•ç”¨ï¼ˆé¿å…é‡æ¸²æŸ“ï¼‰"><a href="#4ï¼‰ç¼“å­˜å¼•ç”¨ï¼ˆé¿å…é‡æ¸²æŸ“ï¼‰" class="headerlink" title="4ï¼‰ç¼“å­˜å¼•ç”¨ï¼ˆé¿å…é‡æ¸²æŸ“ï¼‰"></a><strong><font color="#10c300">4ï¼‰ç¼“å­˜å¼•ç”¨ï¼ˆé¿å…é‡æ¸²æŸ“ï¼‰</font></strong></h4><p>ä¾‹å¦‚å­ç»„ä»¶ä½¿ç”¨ <code>React.memo</code>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123; options &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Child render&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;options.join(&quot;, &quot;)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoChild</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¸ç¼“å­˜ï¼Œæ•°ç»„æ¯æ¬¡æ¸²æŸ“éƒ½æ–°å»ºï¼Œå¯¼è‡´ Child é‡æ–°æ¸²æŸ“</span></span><br><span class="line">    <span class="keyword">const</span> options = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>], []); <span class="comment">// ğŸ‘ˆ ç¼“å­˜æ•°ç»„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">MemoChild</span> <span class="attr">options</span>=<span class="string">&#123;options&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><p>â¡ï¸ <code>useMemo</code> ä¿è¯æ¯æ¬¡æ¸²æŸ“ä¸­ <code>options</code> çš„å¼•ç”¨ç¨³å®šï¼Œ<code>React.memo</code> ä¼šè®¤ä¸º props æ²¡å˜ï¼Œä»è€Œè·³è¿‡é‡æ–°æ¸²æŸ“ã€‚</p><h4 id="4ï¼‰å¸¸è§æ³¨æ„äº‹é¡¹"><a href="#4ï¼‰å¸¸è§æ³¨æ„äº‹é¡¹" class="headerlink" title="4ï¼‰å¸¸è§æ³¨æ„äº‹é¡¹"></a><strong><font color="#10c300">4ï¼‰å¸¸è§æ³¨æ„äº‹é¡¹</font></strong></h4><table><thead><tr><th>æ³¨æ„ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¸è¦æ»¥ç”¨</td><td>å¦‚æœè®¡ç®—å¾ˆè½»é‡çº§ï¼Œæ²¡å¿…è¦ç”¨ <code>useMemo</code>ï¼ˆä¼šå¢åŠ å¤æ‚åº¦ï¼‰</td></tr><tr><td>ä¾èµ–å¿…é¡»å®Œæ•´</td><td>æ¼æ‰ä¾èµ–å¯èƒ½å¯¼è‡´å€¼ä¸åŒæ­¥ï¼ˆæ¨èä½¿ç”¨ ESLint æ£€æŸ¥ï¼‰</td></tr><tr><td>ç¼“å­˜æ˜¯åŸºäºå¼•ç”¨æ¯”è¾ƒ</td><td>æ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°å¼•ç”¨å˜åŒ– â†’ ä¼šé‡æ–°è®¡ç®—</td></tr><tr><td>ä»…ç¼“å­˜è®¡ç®—ç»“æœï¼Œä¸å½±å“çŠ¶æ€æ›´æ–°</td><td>çŠ¶æ€å˜åŒ–ä»ç„¶è§¦å‘é‡æ–°æ¸²æŸ“</td></tr></tbody></table><h4 id="5ï¼‰useMemo-vs-useCallback"><a href="#5ï¼‰useMemo-vs-useCallback" class="headerlink" title="5ï¼‰useMemo vs useCallback"></a><strong><font color="#10c300">5ï¼‰useMemo vs useCallback</font></strong></h4><table><thead><tr><th>é¡¹ç›®</th><th><code>useMemo</code></th><th><code>useCallback</code></th></tr></thead><tbody><tr><td>è¿”å›å€¼</td><td>ç¼“å­˜<strong>è®¡ç®—ç»“æœ</strong></td><td>ç¼“å­˜<strong>å‡½æ•°å¼•ç”¨</strong></td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>é«˜å¼€é”€è®¡ç®—ã€ç¼“å­˜å¯¹è±¡</td><td>ä¿æŒå›è°ƒå‡½æ•°å¼•ç”¨ç¨³å®š</td></tr><tr><td>ç¤ºä¾‹</td><td><code>const result = useMemo(() =&gt; heavyFn(x), [x])</code></td><td><code>const fn = useCallback(() =&gt; doSomething(x), [x])</code></td></tr></tbody></table><p>ä¸¤è€…éƒ½æ˜¯æ€§èƒ½ä¼˜åŒ– Hookï¼Œä½†è¿”å›ç›®æ ‡ä¸åŒã€‚</p><h4 id="6ï¼‰æ€»ç»“-1"><a href="#6ï¼‰æ€»ç»“-1" class="headerlink" title="6ï¼‰æ€»ç»“"></a><strong><font color="#10c300">6ï¼‰æ€»ç»“</font></strong></h4><table><thead><tr><th>é¡¹ç›®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Hook å</td><td><code>useMemo</code></td></tr><tr><td>åŠŸèƒ½</td><td>ç¼“å­˜è®¡ç®—ç»“æœï¼Œä¾èµ–æ”¹å˜æ—¶é‡æ–°è®¡ç®—</td></tr><tr><td>è¿”å›å€¼</td><td>ä¸Šæ¬¡è®¡ç®—çš„ç»“æœï¼ˆmemoized valueï¼‰</td></tr><tr><td>ä¸»è¦ç”¨é€”</td><td>é«˜æ€§èƒ½è®¡ç®—ç¼“å­˜ã€ç¨³å®šå¯¹è±¡å¼•ç”¨</td></tr><tr><td>å¸¸ä¸æ­é…</td><td><code>React.memo</code>ã€<code>useCallback</code></td></tr><tr><td>æ³¨æ„</td><td>ä¸è¦æ»¥ç”¨ï¼Œç¡®å®æœ‰æ€§èƒ½é—®é¢˜æ—¶å†ç”¨</td></tr></tbody></table><hr><p>ğŸŒŸ <strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p><p><code>useMemo(fn, deps)</code> &#x3D; â€œè®°ä½ fn çš„è¿”å›å€¼â€ï¼Œå½“ deps ä¸å˜æ—¶ï¼Œä¸å†é‡æ–°æ‰§è¡Œ fnã€‚</p><br><h3 id="4-5-useCallback-ç¼“å­˜å‡½æ•°å¼•ç”¨"><a href="#4-5-useCallback-ç¼“å­˜å‡½æ•°å¼•ç”¨" class="headerlink" title="4.5 useCallback- ç¼“å­˜å‡½æ•°å¼•ç”¨"></a><strong><font color="red">4.5 useCallback- ç¼“å­˜å‡½æ•°å¼•ç”¨</font></strong></h3><p>åœ¨ React ä¸­ï¼Œæ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½ä¼šé‡æ–°æ‰§è¡Œç»„ä»¶å‡½æ•°ä½“ï¼Œ<strong>é‡Œé¢å®šä¹‰çš„å‡½æ•°ä¹Ÿä¼šè¢«â€œé‡æ–°åˆ›å»ºâ€</strong>ã€‚<br>å¦‚æœè¿™äº›å‡½æ•°ä½œä¸º props ä¼ ç»™å­ç»„ä»¶ï¼Œå³ä½¿å‡½æ•°é€»è¾‘æ²¡æœ‰å˜ï¼Œæ ¹æ® <strong>å¼•ç”¨åœ°å€æ¯”è¾ƒ</strong>ï¼Œå­ç»„ä»¶ä¼šè®¤ä¸º props å˜äº†è€Œé‡æ–°æ¸²æŸ“ã€‚</p><p><code>useCallback</code> è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p><blockquote><p>âœ… <strong>è®©å‡½æ•°å¼•ç”¨åœ¨ä¾èµ–ä¸å˜æ—¶ä¿æŒç¨³å®šï¼ˆä¸å˜ï¼‰</strong>ã€‚</p></blockquote><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-3"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-3" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedCallback = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å‡½æ•°é€»è¾‘</span></span><br><span class="line">&#125;, [dependencies]);</span><br></pre></td></tr></table></figure><ul><li><strong>ç¬¬ä¸€ä¸ªå‚æ•°</strong>ï¼šè¦ç¼“å­˜çš„å›è°ƒå‡½æ•°</li><li><strong>ç¬¬äºŒä¸ªå‚æ•°</strong>ï¼šä¾èµ–æ•°ç»„ï¼Œå½“ä¾èµ–ä¸­æœ‰å€¼å˜åŒ–æ—¶ï¼Œè¿”å›çš„æ–°å‡½æ•°å¼•ç”¨ä¼šæ›´æ–°</li></ul><h4 id="2ï¼‰åŸºæœ¬ç¤ºä¾‹"><a href="#2ï¼‰åŸºæœ¬ç¤ºä¾‹" class="headerlink" title="2ï¼‰åŸºæœ¬ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰åŸºæœ¬ç¤ºä¾‹</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useCallback &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123; onClick &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å­ç»„ä»¶æ¸²æŸ“äº†&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>å­ç»„ä»¶æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoChild</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>); <span class="comment">// ğŸ‘ˆ åªæœ‰ props å˜äº†æ‰æ¸²æŸ“</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åªæœ‰ count å˜åŒ–æ—¶æ‰ä¼šæ›´æ–°å‡½æ•°å¼•ç”¨(å­ç»„ä»¶æ¸²æŸ“)</span></span><br><span class="line">    <span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked:&quot;</span>, count);</span><br><span class="line">    &#125;, [count]); <span class="comment">// ğŸ‘ˆ ç¼“å­˜å‡½æ•°å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;count +1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;text&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setText(e.target.value)&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">MemoChild</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><strong>ğŸ” åˆ†æï¼š</strong></p><ul><li>å¦‚æœä¸ç”¨ <code>useCallback</code>ï¼Œæ¯æ¬¡ App æ¸²æŸ“éƒ½ä¼šâ€œæ–°å»ºâ€ä¸€ä¸ª <code>handleClick</code> å‡½æ•°å¼•ç”¨ï¼›</li><li><code>MemoChild</code> ä¼šè®¤ä¸º props (<code>onClick</code>) æ”¹äº† â†’ é‡æ–°æ¸²æŸ“ï¼›</li><li>ç”¨äº† <code>useCallback</code> åï¼Œåœ¨ä¾èµ–ä¸å˜åŒ–æ—¶ï¼Œå‡½æ•°å¼•ç”¨ä¿æŒç¨³å®š â†’ ç»„ä»¶ä¸é‡æ¸²æŸ“ã€‚</li></ul><h4 id="3ï¼‰ä»€ä¹ˆæ—¶å€™ç”¨-useCallback"><a href="#3ï¼‰ä»€ä¹ˆæ—¶å€™ç”¨-useCallback" class="headerlink" title="3ï¼‰ä»€ä¹ˆæ—¶å€™ç”¨ useCallback"></a><strong><font color="#10c300">3ï¼‰ä»€ä¹ˆæ—¶å€™ç”¨ useCallback</font></strong></h4><ol><li>å­ç»„ä»¶ä½¿ç”¨äº† <code>React.memo</code><ul><li>é¿å…å› ä¸ºå›è°ƒå‡½æ•°å¼•ç”¨å˜åŒ–å¯¼è‡´å­ç»„ä»¶é‡æ¸²æŸ“</li></ul></li><li>å‡½æ•°ä¼ é€’ç»™æ·±å±‚å­ç»„ä»¶<ul><li>ä¸å¸Œæœ›æ¯æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“éƒ½æ”¹å˜å‡½æ•°å¼•ç”¨</li></ul></li><li>ä¾èµ–ç¨³å®šçš„å‡½æ•°<ul><li>å½“å‡½æ•°ä¾èµ–çš„çŠ¶æ€&#x2F;å˜é‡ä¸ç»å¸¸å˜åŒ–æ—¶ï¼Œç¼“å­˜å¼•ç”¨æ„ä¹‰æ›´å¤§</li></ul></li></ol><h4 id="4ï¼‰ä¾èµ–æ•°ç»„æ³¨æ„äº‹é¡¹"><a href="#4ï¼‰ä¾èµ–æ•°ç»„æ³¨æ„äº‹é¡¹" class="headerlink" title="4ï¼‰ä¾èµ–æ•°ç»„æ³¨æ„äº‹é¡¹"></a><strong><font color="#10c300">4ï¼‰ä¾èµ–æ•°ç»„æ³¨æ„äº‹é¡¹</font></strong></h4><ul><li><strong>ä¾èµ–å¿…é¡»åŒ…å«å›è°ƒå†…éƒ¨ç”¨åˆ°çš„å˜é‡</strong>ï¼ˆé—­åŒ…å˜é‡ï¼‰</li><li>æ¨èä½¿ç”¨ ESLint æ’ä»¶ <code>eslint-plugin-react-hooks</code> è‡ªåŠ¨åˆ†æä¾èµ–</li><li>å¦‚æœä¾èµ–æ•°ç»„ä¸ºç©º<code>[]</code>ï¼š<ul><li>è¿”å›çš„å‡½æ•°å¼•ç”¨å°†<strong>æ°¸è¿œä¸ä¼šå˜åŒ–</strong></li><li>é€‚ç”¨äºé‚£äº›ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨å˜é‡çš„å›è°ƒ</li></ul></li></ul><h4 id="5ï¼‰ç»“åˆ-React-memoçš„ä¼˜åŒ–æ¨¡å¼"><a href="#5ï¼‰ç»“åˆ-React-memoçš„ä¼˜åŒ–æ¨¡å¼" class="headerlink" title="5ï¼‰ç»“åˆ React.memoçš„ä¼˜åŒ–æ¨¡å¼"></a><strong><font color="#10c300">5ï¼‰ç»“åˆ React.memoçš„ä¼˜åŒ–æ¨¡å¼</font></strong></h4><p>å¸¸è§æ¨¡å¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MemoChild</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123; ... &#125;, []);</span><br><span class="line"> 	<span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">MemoChild</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… å­ç»„ä»¶ <code>MemoChild</code> åªåœ¨çœŸæ­£éœ€è¦æ›´æ–°æ—¶æ‰æ¸²æŸ“ã€‚</p><h4 id="6ï¼‰å¸¸è§è¯¯åŒº"><a href="#6ï¼‰å¸¸è§è¯¯åŒº" class="headerlink" title="6ï¼‰å¸¸è§è¯¯åŒº"></a><strong><font color="#10c300">6ï¼‰å¸¸è§è¯¯åŒº</font></strong></h4><ol><li><strong>ä¸è¦æ»¥ç”¨</strong><br>å¦‚æœå­ç»„ä»¶æ²¡æœ‰ <code>React.memo</code> æˆ–ä¸æ˜¯æ€§èƒ½ç“¶é¢ˆï¼Œæ²¡å¿…è¦åŠ  <code>useCallback</code>ï¼ˆå¢åŠ å¤æ‚åº¦ï¼‰</li><li><strong>ç¼“å­˜ä¸æ˜¯å‡å°‘æ¸²æŸ“æ¬¡æ•°çš„ä¸‡èƒ½é’¥åŒ™</strong><br><code>useCallback</code> åªé˜²æ­¢ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œä½†çŠ¶æ€æ›´æ–°è§¦å‘çš„æ¸²æŸ“ä»ä¼šå‘ç”Ÿ</li><li><strong>ä¾èµ–ä¸æ­£ç¡®ä¼šå¯¼è‡´é€»è¾‘é”™è¯¯</strong><br>ç¼ºå°‘ä¾èµ–å¯èƒ½è®©å‡½æ•°å†…éƒ¨æ‹¿åˆ°æ—§çš„çŠ¶æ€</li></ol><h4 id="7ï¼‰æ€»ç»“"><a href="#7ï¼‰æ€»ç»“" class="headerlink" title="7ï¼‰æ€»ç»“"></a><strong><font color="#10c300">7ï¼‰æ€»ç»“</font></strong></h4><table><thead><tr><th>é¡¹ç›®</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>Hook å</td><td><code>useCallback</code></td></tr><tr><td>ä½œç”¨</td><td>ç¼“å­˜å›è°ƒå‡½æ•°å¼•ç”¨ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“</td></tr><tr><td>å‚æ•°</td><td><code>(fn, [deps])</code></td></tr><tr><td>è¿”å›å€¼</td><td>ç¨³å®šçš„å‡½æ•°å¼•ç”¨</td></tr><tr><td>å¸¸æ­é…</td><td><code>React.memo</code>, <code>useMemo</code></td></tr><tr><td>æ³¨æ„</td><td>ä¾èµ–å®Œæ•´æ€§ã€å‹¿æ»¥ç”¨</td></tr></tbody></table><hr><p>ğŸŒŸ <strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p><blockquote><p>å½“ä½ éœ€è¦æŠŠå›è°ƒå‡½æ•°ä½œä¸º props ä¼ é€’ç»™ <code>React.memo</code> å­ç»„ä»¶æ—¶ï¼Œç”¨ <code>useCallback</code> å¯ä»¥é¿å…å› ä¸ºå‡½æ•°å¼•ç”¨å˜åŒ–å¯¼è‡´å­ç»„ä»¶é‡å¤æ¸²æŸ“ã€‚</p></blockquote><br><h3 id="4-6-useReducer-å¤æ‚çŠ¶æ€ç®¡ç†"><a href="#4-6-useReducer-å¤æ‚çŠ¶æ€ç®¡ç†" class="headerlink" title="4.6 useReducer-å¤æ‚çŠ¶æ€ç®¡ç†"></a><strong><font color="red">4.6 useReducer-å¤æ‚çŠ¶æ€ç®¡ç†</font></strong></h3><blockquote><p>âœ… <code>useReducer</code> æ˜¯ <code>useState</code> çš„é«˜çº§æ›¿ä»£æ–¹æ¡ˆã€‚<br>å½“çŠ¶æ€å˜åŒ–é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œæˆ–è€…æ–°çŠ¶æ€ä¾èµ–æ—§çŠ¶æ€æ—¶ï¼Œç”¨ <code>useReducer</code> ä¼šæ›´æ™°ã€‚</p></blockquote><p>å®ƒå’Œ Redux çš„æ ¸å¿ƒæ€æƒ³ä¸€æ ·ï¼š<br><strong>é€šè¿‡ â€œåŠ¨ä½œï¼ˆactionï¼‰â€ å’Œ â€œçŠ¶æ€æ›´æ–°å‡½æ•°ï¼ˆreducerï¼‰â€ æ¥æ§åˆ¶çŠ¶æ€å˜åŒ–ã€‚</strong></p><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-4"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-4" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, initialArg, init?)</span><br></pre></td></tr></table></figure><ul><li><strong><code>state</code></strong>ï¼šå½“å‰çŠ¶æ€</li><li><strong><code>dispatch</code></strong>ï¼šè§¦å‘çŠ¶æ€æ›´æ–°çš„å‡½æ•°</li><li><strong><code>reducer</code></strong>ï¼šä¸€ä¸ªå‡½æ•°ï¼Œè´Ÿè´£â€œæ¥æ”¶æ—§çŠ¶æ€ + åŠ¨ä½œï¼ˆactionï¼‰â€ï¼Œè¿”å›æ–°çŠ¶æ€</li><li><strong><code>initialArg</code></strong>ï¼šåˆå§‹çŠ¶æ€</li><li><strong><code>initï¼ˆå¯é€‰ï¼‰</code></strong>ï¼š<em>æƒ°æ€§åˆå§‹åŒ–å‡½æ•°</em>ï¼Œç”¨äºåœ¨åˆå§‹æ¸²æŸ“æ—¶å¯¹ <code>initialArg</code> è¿›è¡ŒåŠ å·¥æˆ–è®¡ç®—ï¼Œè¿”å›çœŸæ­£çš„åˆå§‹çŠ¶æ€ï¼Œåªä¼šåœ¨åˆå§‹åŒ–æ‰§è¡Œä¸€æ¬¡</li></ul><h4 id="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-2"><a href="#2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-2" class="headerlink" title="2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</font></strong></h4><p><strong><font color="#00A6ED">1ï¸âƒ£ è®¡æ•°å™¨</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ reducer</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;decrement&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state; <span class="comment">// è¿”å›åŸçŠ¶æ€ï¼ˆé˜²æ­¢æŠ¥é”™ï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>è®¡æ•°ï¼š&#123;state.count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;increment&quot; &#125;)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;decrement&quot; &#125;)&#125;&gt;-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure><p>âœ… <code>dispatch</code> ç±»ä¼¼äºè°ƒç”¨ <code>setState</code>ï¼Œä½†è¯­ä¹‰æ›´æ¸…æ™°ã€é€»è¾‘é›†ä¸­ã€‚</p><p><strong><font color="#00A6ED">2ï¸âƒ£ å¤æ‚çŠ¶æ€ç¤ºä¾‹ï¼šè¡¨å•ç®¡ç†</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialForm = &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formReducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;CHANGE_FIELD&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; ...state, [action.<span class="property">field</span>]: action.<span class="property">value</span> &#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;RESET&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> initialForm;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [form, dispatch] = <span class="title function_">useReducer</span>(formReducer, initialForm);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">value</span>=<span class="string">&#123;form.username&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                    dispatch(&#123; type: &#x27;CHANGE_FIELD&#x27;, field: &#x27;username&#x27;, value: e.target.value &#125;)</span></span><br><span class="line"><span class="language-xml">                &#125;</span></span><br><span class="line"><span class="language-xml">                placeholder=&quot;ç”¨æˆ·å&quot;</span></span><br><span class="line"><span class="language-xml">            /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">value</span>=<span class="string">&#123;form.age&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                    dispatch(&#123; type: &#x27;CHANGE_FIELD&#x27;, field: &#x27;age&#x27;, value: e.target.value &#125;)</span></span><br><span class="line"><span class="language-xml">                &#125;</span></span><br><span class="line"><span class="language-xml">                placeholder=&quot;å¹´é¾„&quot;</span></span><br><span class="line"><span class="language-xml">            /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;RESET&#x27; &#125;)&#125;&gt;é‡ç½®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;JSON.stringify(form)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Form</span>;</span><br></pre></td></tr></table></figure><p>âœ… ä¼˜åŠ¿ï¼š</p><ul><li>æ‰€æœ‰çŠ¶æ€æ›´æ–°é€»è¾‘é›†ä¸­åœ¨ <code>reducer</code>ï¼›</li><li>æ›´å®¹æ˜“ç»´æŠ¤ã€æµ‹è¯•ã€è°ƒè¯•ã€‚</li></ul><h4 id="3ï¼‰useReducer-çš„æ‰§è¡Œæµç¨‹å›¾"><a href="#3ï¼‰useReducer-çš„æ‰§è¡Œæµç¨‹å›¾" class="headerlink" title="3ï¼‰useReducer çš„æ‰§è¡Œæµç¨‹å›¾"></a><strong><font color="#10c300">3ï¼‰useReducer çš„æ‰§è¡Œæµç¨‹å›¾</font></strong></h4><p>1ï¸âƒ£ ç»„ä»¶æ¸²æŸ“æ—¶ï¼š</p><ul><li>React æŒ‰ <code>initialArg</code> åˆå§‹åŒ–çŠ¶æ€ã€‚</li></ul><p>2ï¸âƒ£ è°ƒç”¨ <code>dispatch(action)</code>ï¼š</p><ul><li>React ä¼šæ‰§è¡Œ <code>reducer(state, action)</code>ï¼›</li><li>å¾—åˆ°æ–°çš„ stateï¼›</li><li>é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">dispatch</span>(action)</span><br><span class="line">   â†“</span><br><span class="line"><span class="title function_">reducer</span>(state, action)</span><br><span class="line">   â†“</span><br><span class="line">newState â†’ è§¦å‘é‡æ–°æ¸²æŸ“</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰ç›¸æ¯”-useState-çš„ä¼˜åŠ¿"><a href="#4ï¼‰ç›¸æ¯”-useState-çš„ä¼˜åŠ¿" class="headerlink" title="4ï¼‰ç›¸æ¯” useState çš„ä¼˜åŠ¿"></a><strong><font color="#10c300">4ï¼‰ç›¸æ¯” useState çš„ä¼˜åŠ¿</font></strong></h4><table><thead><tr><th>ç‰¹ç‚¹</th><th>useState</th><th>useReducer</th></tr></thead><tbody><tr><td>é€‚ç”¨åœºæ™¯</td><td>çŠ¶æ€ç®€å•ï¼ˆä¸€ä¸ªå€¼ï¼‰</td><td>çŠ¶æ€ç»“æ„å¤æ‚ï¼Œå¤šé€»è¾‘åˆ†æ”¯</td></tr><tr><td>æ›´æ–°æ–¹å¼</td><td>ç›´æ¥ä¼ å€¼æˆ–å‡½æ•°</td><td>æ´¾å‘ actionï¼Œç”± reducer å¤„ç†</td></tr><tr><td>çŠ¶æ€ç»“æ„</td><td>é€šå¸¸æ˜¯å•ä¸ªå€¼</td><td>å¸¸ä¸ºå¯¹è±¡ï¼ˆå¤šä¸ªå­—æ®µï¼‰</td></tr><tr><td>æ€ç»´æ–¹å¼</td><td>â€œæˆ‘æƒ³è¦ä¸€ä¸ªæ–°å€¼â€</td><td>â€œæˆ‘æ´¾å‘ä¸€ä¸ªæ„å›¾ï¼ˆactionï¼‰â€</td></tr></tbody></table><h4 id="5ï¼‰ã€ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰"><a href="#5ï¼‰ã€ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰" class="headerlink" title="5ï¼‰ã€ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰"></a><strong><font color="#10c300">5ï¼‰ã€ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰</font></strong></h4><p><code>useReducer</code> è¿˜æ”¯æŒä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå»¶è¿Ÿè®¡ç®—åˆå§‹çŠ¶æ€ï¼ˆé¿å…åˆå§‹åŒ–å¼€é”€ï¼‰ğŸ‘‡</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params">initialCount</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">count</span>: initialCount &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;reset&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">init</span>(action.<span class="property">payload</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;increment&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, <span class="number">0</span>, init);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>è®¡æ•°: &#123;state.count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;increment&#x27; &#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;reset&#x27;, payload: 5 &#125;)&#125;&gt;é‡ç½®ä¸º 5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼é€‚ç”¨äºåˆå§‹çŠ¶æ€è®¡ç®—éå¸¸å¤æ‚çš„æƒ…å†µã€‚</p><h4 id="6ï¼‰ã€ä¸-Context-ç»“åˆï¼šå…¨å±€çŠ¶æ€ï¼ˆRedux-æ€æƒ³ï¼‰"><a href="#6ï¼‰ã€ä¸-Context-ç»“åˆï¼šå…¨å±€çŠ¶æ€ï¼ˆRedux-æ€æƒ³ï¼‰" class="headerlink" title="6ï¼‰ã€ä¸ Context ç»“åˆï¼šå…¨å±€çŠ¶æ€ï¼ˆRedux æ€æƒ³ï¼‰"></a><strong><font color="#10c300">6ï¼‰ã€ä¸ Context ç»“åˆï¼šå…¨å±€çŠ¶æ€ï¼ˆRedux æ€æƒ³ï¼‰</font></strong></h4><p><code>useReducer</code> å¸¸é…åˆ <code>useContext</code> ä½¿ç”¨ï¼Œæ„å»ºè½»é‡â€œå…¨å±€çŠ¶æ€ç®¡ç†â€ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useReducer, useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CounterContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>: <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">        <span class="attr">default</span>: <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CounterProvider</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [count, dispatch] = <span class="title function_">useReducer</span>(reducer, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">CounterContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">count</span>, <span class="attr">dispatch</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">CounterContext.Provider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; count, dispatch &#125; = <span class="title function_">useContext</span>(<span class="title class_">CounterContext</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;add&#x27; &#125;)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">CounterProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">CounterProvider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… ç›¸å½“äºä¸€ä¸ªå°å‹ Reduxã€‚</p><h4 id="7ï¼‰ã€æ³¨æ„äº‹é¡¹"><a href="#7ï¼‰ã€æ³¨æ„äº‹é¡¹" class="headerlink" title="7ï¼‰ã€æ³¨æ„äº‹é¡¹"></a><strong><font color="#10c300">7ï¼‰ã€æ³¨æ„äº‹é¡¹</font></strong></h4><table><thead><tr><th>æ³¨æ„ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>reducer</code> å¿…é¡»æ˜¯çº¯å‡½æ•°</td><td>ä¸è¦ç›´æ¥ä¿®æ”¹ state æˆ–æ‰§è¡Œå‰¯ä½œç”¨</td></tr><tr><td>ä¸è¦é¢‘ç¹é‡å»º reducer</td><td>é€šå¸¸å®šä¹‰åœ¨ç»„ä»¶å¤–æˆ– <code>useCallback</code> ä¸­</td></tr><tr><td>ä¸ Redux æ€æƒ³ç›¸åŒ</td><td>ä½†æ›´è½»é‡ä¸éœ€è¦ä¸­é—´ä»¶</td></tr><tr><td>å¯ç»“åˆ <code>useContext</code></td><td>å®ç°å…¨å±€çŠ¶æ€å…±äº«</td></tr></tbody></table><h4 id="8ï¼‰ã€æ€»ç»“"><a href="#8ï¼‰ã€æ€»ç»“" class="headerlink" title="8ï¼‰ã€æ€»ç»“"></a><strong><font color="#10c300">8ï¼‰ã€æ€»ç»“</font></strong></h4><table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Hook å</td><td><code>useReducer</code></td></tr><tr><td>ä½œç”¨</td><td>ç®¡ç†å¤æ‚çš„ç»„ä»¶çŠ¶æ€å’Œå˜åŒ–é€»è¾‘</td></tr><tr><td>è¿”å›å€¼</td><td><code>[state, dispatch]</code></td></tr><tr><td>ä¸ useState å¯¹æ¯”</td><td>çŠ¶æ€é€»è¾‘æ›´é›†ä¸­ã€å¯æ‰©å±•æ€§æ›´å¼º</td></tr><tr><td>å¸¸æ­é…</td><td><code>useContext</code>ï¼ˆå…¨å±€çŠ¶æ€ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å¤æ‚çŠ¶æ€æ›´æ–°ï¼ˆè¡¨å•ã€å¼‚æ­¥æµç¨‹ã€å…¨å±€ç®¡ç†ï¼‰</td></tr></tbody></table><hr><p>ğŸŒŸ <strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p><blockquote><p><code>useReducer</code> &#x3D; â€œå¤æ‚ç‰ˆ useStateâ€<br>å½“çŠ¶æ€é€»è¾‘å¤æ‚æˆ–å¤šæ­¥éª¤æ›´æ–°æ—¶ï¼Œç”¨ reducer ç®¡ç†æ›´å¹²å‡€ã€æ›´å¯é ã€‚</p></blockquote><h3 id="4-20-Hooks-ç»„åˆå®æˆ˜"><a href="#4-20-Hooks-ç»„åˆå®æˆ˜" class="headerlink" title="4.20 Hooks ç»„åˆå®æˆ˜"></a><strong><font color="red">4.20 Hooks ç»„åˆå®æˆ˜</font></strong></h3><h4 id="1ï¼‰useReducer-useContext"><a href="#1ï¼‰useReducer-useContext" class="headerlink" title="1ï¼‰useReducer + useContext"></a><strong><font color="#10c300">1ï¼‰useReducer + useContext</font></strong></h4><p>ç”¨ <strong><code>useReducer</code> + <code>useContext</code></strong> å®ç°ä¸€ä¸ª<strong>å…¨å±€çŠ¶æ€ç®¡ç†ç³»ç»Ÿ</strong>ï¼Œå°±åƒä¸€ä¸ªè½»é‡ç‰ˆ Reduxã€‚</p><p>æˆ‘ä»¬ä»¥â€œä¸»é¢˜åˆ‡æ¢ï¼ˆæ·±è‰² &#x2F; æµ…è‰²ï¼‰â€ä¸ºä¾‹ ğŸ‘‡</p><h5 id="ğŸ¯-åŠŸèƒ½ç›®æ ‡"><a href="#ğŸ¯-åŠŸèƒ½ç›®æ ‡" class="headerlink" title="ğŸ¯ åŠŸèƒ½ç›®æ ‡"></a><strong><font color="cornflowerblue">ğŸ¯ åŠŸèƒ½ç›®æ ‡</font></strong></h5><ul><li>é¡µé¢ä¸Šæœ‰å¤šä¸ªç»„ä»¶ï¼›</li><li>è¿™äº›ç»„ä»¶éƒ½èƒ½æ„ŸçŸ¥å½“å‰ä¸»é¢˜ï¼›</li><li>ç‚¹å‡»æŒ‰é’®å¯ä»¥åœ¨æµ…è‰²&#x2F;æ·±è‰²æ¨¡å¼ä¹‹é—´åˆ‡æ¢ï¼›</li><li>æ‰€æœ‰ç»„ä»¶è‡ªåŠ¨æ›´æ–°ï¼Œ<strong>ä¸ç”¨æ‰‹åŠ¨ä¼  props</strong>ã€‚</li></ul><h5 id="ğŸ§±é¡¹ç›®ç»“æ„"><a href="#ğŸ§±é¡¹ç›®ç»“æ„" class="headerlink" title="ğŸ§±é¡¹ç›®ç»“æ„"></a><strong><font color="cornflowerblue">ğŸ§±é¡¹ç›®ç»“æ„</font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ ğŸ“ components/                   # ç»„ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ Header.jsx               # å­ç»„ä»¶ï¼Œè¯»å–ä¸»é¢˜å¹¶å±•ç¤º</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ Content.jsx              # å­ç»„ä»¶ï¼Œè¯»å–ä¸»é¢˜å¹¶å±•ç¤º</span><br><span class="line">â”œâ”€â”€ ğŸ“ context/                      # Context</span><br><span class="line">â”‚   â”œâ”€â”€ ğŸ“„ index.js                 # åˆ›å»º Context + Reducer</span><br><span class="line">â””â”€â”€ ğŸ“„ App.jsx            </span><br></pre></td></tr></table></figure><p><code>src\App.jsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ThemeProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./context/index&#x27;</span>; <span class="comment">// å¼•å…¥ä¸Šé¢çš„ Provider</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Header&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Content</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Content&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Header</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Content</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><code>src\context\index.js</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useReducer, useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ï¸âƒ£ åˆå§‹çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> initialState = &#123; <span class="attr">theme</span>: <span class="string">&#x27;light&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ï¸âƒ£ å®šä¹‰ reducerï¼šæ ¹æ® action.type å†³å®šå¦‚ä½•æ›´æ–°çŠ¶æ€</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">themeReducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;TOGGLE_THEME&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">theme</span>: state.<span class="property">theme</span> === <span class="string">&#x27;light&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span> &#125;;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3ï¸âƒ£ åˆ›å»º Context</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title function_">createContext</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4ï¸âƒ£ åˆ›å»º Provider ç»„ä»¶ï¼ˆçŠ¶æ€æä¾›è€…ï¼‰</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">ThemeProvider</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(themeReducer, initialState);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">state</span>, <span class="attr">dispatch</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5ï¸âƒ£ è‡ªå®šä¹‰ Hookï¼Œæ–¹ä¾¿å­ç»„ä»¶ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useTheme</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src\components\Header.jsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useTheme &#125; <span class="keyword">from</span> <span class="string">&#x27;../context/index&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Header</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; state, dispatch &#125; = <span class="title function_">useTheme</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">header</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">background:</span> <span class="attr">state.theme</span> === <span class="string">&#x27;light&#x27;</span> ? &#x27;#<span class="attr">f0f0f0</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">222</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">color:</span> <span class="attr">state.theme</span> === <span class="string">&#x27;light&#x27;</span> ? &#x27;#<span class="attr">000</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">fff</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">padding:</span> &#x27;<span class="attr">10px</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å½“å‰ä¸»é¢˜ï¼š&#123;state.theme&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;TOGGLE_THEME&#x27; &#125;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                åˆ‡æ¢ä¸»é¢˜</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src\components\Content.jsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useTheme &#125; <span class="keyword">from</span> <span class="string">&#x27;../context/index&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Content</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; state &#125; = <span class="title function_">useTheme</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">background:</span> <span class="attr">state.theme</span> === <span class="string">&#x27;light&#x27;</span> ? &#x27;#<span class="attr">fff</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">333</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">color:</span> <span class="attr">state.theme</span> === <span class="string">&#x27;light&#x27;</span> ? &#x27;#<span class="attr">000</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">fff</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">padding:</span> &#x27;<span class="attr">20px</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™é‡Œæ˜¯ä¸»è¦å†…å®¹åŒº â€”â€” å½“å‰æ˜¯ &#123;state.theme&#125; æ¨¡å¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="äº”ã€-HOC-é«˜é˜¶ç»„ä»¶"><a href="#äº”ã€-HOC-é«˜é˜¶ç»„ä»¶" class="headerlink" title="äº”ã€ HOC é«˜é˜¶ç»„ä»¶"></a>äº”ã€ HOC é«˜é˜¶ç»„ä»¶</h2><h3 id="5-1-React-memo"><a href="#5-1-React-memo" class="headerlink" title="5.1 React.memo"></a><strong><font color="red">5.1 React.memo</font></strong></h3><p><code>memo</code> æ˜¯ä¸€ä¸ª <strong>é«˜é˜¶ç»„ä»¶</strong>ï¼Œç”¨äº<strong>ä¼˜åŒ–å‡½æ•°ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</strong>ã€‚åªæœ‰å½“å®ƒçš„ <strong>props å‘ç”Ÿå˜åŒ–</strong> æ—¶ï¼ŒReact æ‰ä¼šé‡æ–°æ¸²æŸ“è¿™ä¸ªç»„ä»¶ã€‚å¦åˆ™ï¼Œå®ƒä¼šç›´æ¥å¤ç”¨ä¸Šä¸€æ¬¡çš„æ¸²æŸ“ç»“æœï¼Œæé«˜æ€§èƒ½ã€‚</p><h4 id="1ï¼‰åŸºæœ¬è¯­æ³•-5"><a href="#1ï¼‰åŸºæœ¬è¯­æ³•-5" class="headerlink" title="1ï¼‰åŸºæœ¬è¯­æ³•"></a><strong><font color="#10c300">1ï¼‰åŸºæœ¬è¯­æ³•</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥åœ¨çˆ¶ç»„ä»¶å°†å¼•å…¥çš„å­ç»„ä»¶MyComponentä½¿ç”¨memoç¼“å­˜</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoizedComponent</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">MyComponent</span>);</span><br></pre></td></tr></table></figure><p>æˆ–è€…å®šä¹‰æ—¶ç›´æ¥ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥åœ¨å­ç»„ä»¶å¯¼å‡ºçš„æ—¶å€™å°±å¯¹å½“å‰ç»„ä»¶MyComponentä½¿ç”¨memoç¼“å­˜</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">MyComponent</span>);</span><br></pre></td></tr></table></figure><h4 id="2ï¼‰åŸºæœ¬ç¤ºä¾‹-1"><a href="#2ï¼‰åŸºæœ¬ç¤ºä¾‹-1" class="headerlink" title="2ï¼‰åŸºæœ¬ç¤ºä¾‹"></a><strong><font color="#10c300">2ï¼‰åŸºæœ¬ç¤ºä¾‹</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./components/Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="string">&quot;çˆ¶ç»„ä»¶æ•°æ®&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> [b] = <span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;çˆ¶ç»„ä»¶æ¸²æŸ“äº†&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setData(`æ–°æ•°æ®$&#123;new Date().getTime()&#125;`)&#125;&gt;æˆ‘æ˜¯Appï¼š&#123;data&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Child</span> <span class="attr">b</span>=<span class="string">&#123;b&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br><span class="line">============================================åˆ†å‰²çº¿==============================================</span><br><span class="line">    </span><br><span class="line"><span class="comment">// Child.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; memo &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å­ç»„ä»¶æ¸²æŸ“äº†&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯å­ç»„ä»¶: &#123;props.b&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ React.memo åŒ…è£…ç»„ä»¶ï¼Œåªæœ‰å½“ props å‘ç”Ÿå˜åŒ–æ—¶æ‰é‡æ–°æ¸²æŸ“</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">memo</span>(<span class="title class_">Child</span>);</span><br></pre></td></tr></table></figure><p><strong>ğŸ” è¾“å‡ºç»“æœï¼š</strong></p><ul><li>åˆå§‹åŒ–çš„æ—¶å€™çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶éƒ½æ¸²æŸ“</li><li>è§¦å‘çˆ¶ç»„ä»¶çš„ç‚¹å‡»äº‹ä»¶ï¼ŒdataçŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ŒbçŠ¶æ€æœªå˜ï¼Œå­ç»„ä»¶æœªè§¦å‘æ¸²æŸ“</li></ul><p>å¦‚æœç”¨çš„æ˜¯æ™®é€šç»„ä»¶ï¼Œå“ªæ€• props ä¸€æ ·ï¼Œä¹Ÿä¼šé‡æ–°æ¸²æŸ“ã€‚</p><h4 id="3ï¼‰å·¥ä½œåŸç†"><a href="#3ï¼‰å·¥ä½œåŸç†" class="headerlink" title="3ï¼‰å·¥ä½œåŸç†"></a><strong><font color="#10c300">3ï¼‰å·¥ä½œåŸç†</font></strong></h4><p><code>React.memo</code> åœ¨æ¸²æŸ“åï¼Œä¼š <strong>ä¿å­˜ä¸Šä¸€æ¬¡çš„ props</strong>ã€‚<br>ä¸‹ä¸€æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå®ƒä¼šåšä¸€ä¸ª <strong>æµ…æ¯”è¾ƒï¼ˆshallow compareï¼‰</strong>ï¼š</p><ul><li>å¦‚æœæ—§çš„ props ä¸æ–°çš„ props å†…å®¹ä¸€è‡´ â†’ è·³è¿‡æ¸²æŸ“ï¼›</li><li>å¦‚æœä¸åŒ â†’ é‡æ–°æ¸²æŸ“ã€‚</li></ul><blockquote><p>é»˜è®¤æ¯”è¾ƒæ˜¯æµ…å±‚ï¼ˆåªæ¯”è¾ƒåŸºç¡€ç±»å‹æˆ–å¼•ç”¨æ˜¯å¦ç›¸åŒï¼‰ï¼Œ<br>å¯¹è±¡&#x2F;æ•°ç»„ç±»å‹çš„ props å¦‚æœæ–°å»ºäº†å¯¹è±¡ï¼Œå°±ä¼šè®¤ä¸ºä¸åŒã€‚</p></blockquote><h4 id="4ï¼‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°"><a href="#4ï¼‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°" class="headerlink" title="4ï¼‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°"></a><strong><font color="#10c300">4ï¼‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</font></strong></h4><p>æœ‰æ—¶å€™ä½ å¸Œæœ›æ§åˆ¶â€œä»€ä¹ˆç®—å˜â€ï¼Œå¯ä»¥åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Memoized</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(</span><br><span class="line">  <span class="title class_">MyComponent</span>,</span><br><span class="line">  <span class="function">(<span class="params">prevProps, nextProps</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿”å› true è¡¨ç¤ºä¸éœ€è¦é‡æ–°æ¸²æŸ“ï¼ˆprops ç›¸ç­‰ï¼‰</span></span><br><span class="line">    <span class="comment">// è¿”å› false è¡¨ç¤ºéœ€è¦é‡æ¸²æŸ“</span></span><br><span class="line">    <span class="keyword">return</span> prevProps.<span class="property">id</span> === nextProps.<span class="property">id</span>;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="5ï¼‰å¸¸è§ä¼˜åŒ–åœºæ™¯"><a href="#5ï¼‰å¸¸è§ä¼˜åŒ–åœºæ™¯" class="headerlink" title="5ï¼‰å¸¸è§ä¼˜åŒ–åœºæ™¯"></a><strong><font color="#10c300">5ï¼‰å¸¸è§ä¼˜åŒ–åœºæ™¯</font></strong></h4><table><thead><tr><th>åœºæ™¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åˆ—è¡¨é¡¹ç»„ä»¶</td><td>åˆ—è¡¨ä¸­æœ‰å¤§é‡å­ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶é¢‘ç¹æ›´æ–°</td></tr><tr><td>è¡¨å•ç»„ä»¶</td><td>è¾“å…¥å˜åŒ–å¯¼è‡´æ•´ä¸ªé¡µé¢é‡æ¸²æŸ“</td></tr><tr><td>å¤æ‚ç»„ä»¶</td><td>å†…éƒ¨æ¸²æŸ“ä»£ä»·é«˜ä½† props å¾ˆç¨³å®š</td></tr><tr><td>ä¸ useCallback æ­é…</td><td>ä¿æŒä¼ å…¥å‡½æ•°å¼•ç”¨ä¸€è‡´ï¼Œé¿å…è¯¯è§¦æ›´æ–°</td></tr></tbody></table><h4 id="6ï¼‰ä¸-useCallback-å’Œ-useMemo-çš„é…åˆ"><a href="#6ï¼‰ä¸-useCallback-å’Œ-useMemo-çš„é…åˆ" class="headerlink" title="6ï¼‰ä¸ useCallback å’Œ useMemo çš„é…åˆ"></a><strong><font color="#10c300">6ï¼‰ä¸ useCallback å’Œ useMemo çš„é…åˆ</font></strong></h4><p><code>React.memo</code> åªå…³å¿ƒ props æ˜¯å¦å˜åŒ–ã€‚ä½†æ˜¯å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¯æ¬¡æ¸²æŸ“å‡½æ•°éƒ½æ˜¯æ–°å¼•ç”¨ï¼Œå°±ä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“ã€‚å‡½æ•°ä½œä¸º <code>props</code> çš„â€œå¼•ç”¨ä¸ç¨³å®šâ€é—®é¢˜</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Child render&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;clicked&#x27;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><p>ä½ æœŸæœ›çš„æ˜¯ï¼šåªè¦ <code>count</code> æ²¡å˜ï¼Œ<code>Child</code> ä¸åº”è¯¥é‡æ–°æ¸²æŸ“ã€‚ä½†å®é™…ä¸Šï¼Œ<strong>æ¯æ¬¡çˆ¶ç»„ä»¶é‡æ¸²æŸ“ï¼Œ<code>Child</code> éƒ½ä¼šé‡æ–°æ¸²æŸ“</strong>ã€‚</p><p><strong><font color="#00A6ED">ğŸŒˆåŸå› ï¼šå‡½æ•°çš„å¼•ç”¨æ¯æ¬¡éƒ½å˜</font></strong></p><p>åœ¨ React ä¸­ï¼Œå‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œè€Œå¯¹è±¡&#x2F;å‡½æ•°çš„ã€Œå¼•ç”¨åœ°å€ã€æ¯æ¬¡éƒ½ä¼šå˜ã€‚å½“çˆ¶ç»„ä»¶é‡æ–°è¿è¡Œæ—¶ éƒ½ä¼šåˆ›å»ºä¸€ä¸ª <strong>æ–°å‡½æ•°å¯¹è±¡</strong>ï¼Œå’Œä¹‹å‰çš„ä¸æ˜¯åŒä¸€ä¸ªå¼•ç”¨ã€‚</p><p>React.memo çš„é»˜è®¤æ¯”è¾ƒæ–¹å¼æ˜¯æµ…æ¯”è¾ƒï¼ˆshallow compareï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">oldProps.<span class="property">onClick</span> === newProps.<span class="property">onClick</span></span><br></pre></td></tr></table></figure><p>è€Œå› ä¸ºæ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶ï¼Œè¿™ä¸ªå‡½æ•°éƒ½æ˜¯æ–°å»ºçš„ï¼Œæ‰€ä»¥ç»“æœæ˜¯ <code>false</code>ï¼Œå¯¼è‡´ <code>Child</code> æ— è®º props å†…å®¹æ˜¯å¦é€»è¾‘ç›¸åŒï¼Œéƒ½ä¼šè¢«è®¤ä¸ºå˜åŠ¨äº†ã€‚</p><p>ğŸ¤**è§£å†³æ–¹æ¡ˆï¼š**é€šè¿‡ <code>useCallback</code> æ¥è®©å‡½æ•°åœ¨ä¾èµ–ä¸å˜çš„æƒ…å†µä¸‹ï¼Œä¿æŒåŒä¸€ä¸ªå¼•ç”¨</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useCallback, useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line">unction <span class="title class_">Parent</span>() &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;clicked&#x27;</span>);</span><br><span class="line">  &#125;, []) <span class="comment">// ğŸ‘ˆ å¼•ç”¨ç¨³å®š</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><h4 id="7ï¼‰æ³¨æ„äº‹é¡¹"><a href="#7ï¼‰æ³¨æ„äº‹é¡¹" class="headerlink" title="7ï¼‰æ³¨æ„äº‹é¡¹"></a><strong><font color="#10c300">7ï¼‰æ³¨æ„äº‹é¡¹</font></strong></h4><table><thead><tr><th>é¡¹ç›®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¯”è¾ƒæ–¹å¼</td><td>æµ…æ¯”è¾ƒï¼ˆå¯¹è±¡æˆ–å‡½æ•°éœ€æ³¨æ„å¼•ç”¨å˜åŒ–ï¼‰</td></tr><tr><td>ä¸é€‚åˆæ»¥ç”¨</td><td>è‹¥ç»„ä»¶å¾ˆè½»é‡ï¼Œæ¯”è¾ƒæˆæœ¬å¯èƒ½é«˜äºæ¸²æŸ“æ”¶ç›Š</td></tr><tr><td>useContext æ›´æ–°ä»ä¼šè§¦å‘</td><td>Context æ›´æ–°æ—¶ä¼šé‡æ–°æ¸²æŸ“å­èŠ‚ç‚¹</td></tr><tr><td>ä¸ç¼“å­˜ state</td><td>ä»…ç¼“å­˜æ¸²æŸ“ç»“æœï¼Œä¸å†…éƒ¨çŠ¶æ€æ— å…³</td></tr></tbody></table><h4 id="8ï¼‰æ€»ç»“"><a href="#8ï¼‰æ€»ç»“" class="headerlink" title="8ï¼‰æ€»ç»“"></a><strong><font color="#10c300">8ï¼‰æ€»ç»“</font></strong></h4><table><thead><tr><th>é¡¹ç›®</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>ä½œç”¨</td><td>ç¼“å­˜ç»„ä»¶æ¸²æŸ“ç»“æœï¼Œé¿å…ä¸å¿…è¦æ¸²æŸ“</td></tr><tr><td>ç±»å‹</td><td>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰</td></tr><tr><td>æ¯”è¾ƒæœºåˆ¶</td><td>æµ…å±‚æ¯”è¾ƒ propsï¼ˆå¯è‡ªå®šä¹‰ï¼‰</td></tr><tr><td>æ¨èæ­é…</td><td><code>useCallback</code>, <code>useMemo</code> ä¿æŒ props å¼•ç”¨ç¨³å®š</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å­ç»„ä»¶ç¨³å®šã€çˆ¶ç»„ä»¶é¢‘ç¹æ¸²æŸ“ã€æ€§èƒ½ä¼˜åŒ–</td></tr></tbody></table><hr><p>ğŸŒŸ <strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong></p><blockquote><p><code>React.memo</code> å°±åƒæ˜¯å‡½æ•°ç»„ä»¶çš„â€œPureComponentâ€ã€‚<br>å½“ props æ²¡å˜æ—¶ï¼Œè·³è¿‡æ¸²æŸ“ï¼Œæé«˜æ€§èƒ½ã€‚</p></blockquote></div><div class="post-footer"><div>è½¬è½½å£°æ˜ï¼š å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒ,éå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ Â© <a href="" target="_blank">ZHB</a></div><div></div></div></article><div class="article-nav prev-next-wrap clearfix"><a href="/posts/hyper-v-install.html" class="pre-post btn btn-default" title="Hyper-Vè™šæ‹Ÿæœºè¯¦ç»†å®‰è£…æ•™ç¨‹"><i class="fa fa-angle-left fa-fw"></i> <span class="hidden-lg">ä¸Šä¸€ç¯‡</span> <span class="hidden-xs">Hyper-Vè™šæ‹Ÿæœºè¯¦ç»†å®‰è£…æ•™ç¨‹</span></a> <a href="/posts/4179c0b95435.html" class="next-post btn btn-default" title="React18"><span class="hidden-lg">ä¸‹ä¸€ç¯‡</span> <span class="hidden-xs">React18</span><i class="fa fa-angle-right fa-fw"></i></a></div><div id="comments"><div class="utteranc"><script src="https://utteranc.es/client.js" repo="shenliyang/snippet-comment" issue-term="pathname" issue-number="" theme="github-light" label="" crossorigin="anonymous" async></script></div></div></main><aside id="article-toc" role="navigation" class="col-md-3"><div class="widget"><h3 class="title">æ–‡ç« ç›®å½•</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React-%E5%88%9D%E5%AD%A6%E8%80%85%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97-React-18-19"><span class="toc-text">React åˆå­¦è€…å®Œå…¨æŒ‡å— (React 18 &amp; 19)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-text">ç›®å½•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81React-%E7%AE%80%E4%BB%8B"><span class="toc-text">ä¸€ã€React ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AF-React%EF%BC%9F"><span class="toc-text">1.1 ä»€ä¹ˆæ˜¯ Reactï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-React%EF%BC%9F"><span class="toc-text">1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Reactï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">äºŒã€ ç¯å¢ƒæ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E4%BD%BF%E7%94%A8-Vite-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">2.1 ä½¿ç”¨ Vite åˆ›å»ºé¡¹ç›®ï¼ˆæ¨èï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E4%BD%BF%E7%94%A8-Create-React-App"><span class="toc-text">2.2 ä½¿ç”¨ Create React App</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-text">2.3 é¡¹ç›®ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">ä¸‰ã€ æ ¸å¿ƒæ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-JSX-%E8%AF%AD%E6%B3%95"><span class="toc-text">3.1 JSX è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89JSX-%E8%A7%84%E5%88%99%E9%80%9F%E8%AE%B0"><span class="toc-text">1ï¼‰JSX è§„åˆ™é€Ÿè®°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E7%BB%84%E4%BB%B6"><span class="toc-text">3.2 ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-text">1ï¼‰å‡½æ•°ç»„ä»¶ï¼ˆæ¨èï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E7%B1%BB%E7%BB%84%E4%BB%B6%EF%BC%88%E4%BA%86%E8%A7%A3%E5%8D%B3%E5%8F%AF%EF%BC%89"><span class="toc-text">2ï¼‰ç±»ç»„ä»¶ï¼ˆäº†è§£å³å¯ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Props%EF%BC%88%E5%B1%9E%E6%80%A7%EF%BC%89"><span class="toc-text">3.3 Propsï¼ˆå±æ€§ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89Props-%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">1ï¼‰Props é»˜è®¤å€¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-State%EF%BC%88%E7%8A%B6%E6%80%81%EF%BC%89"><span class="toc-text">3.4 Stateï¼ˆçŠ¶æ€ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89State-%E6%9B%B4%E6%96%B0%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">1ï¼‰State æ›´æ–°æ³¨æ„äº‹é¡¹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-text">3.5 äº‹ä»¶å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-text">3.6 æ¡ä»¶æ¸²æŸ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-text">3.7 åˆ—è¡¨æ¸²æŸ“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81-React-Hooks-%E8%AF%A6%E8%A7%A3"><span class="toc-text">å››ã€ React Hooks è¯¦è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-useState-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">4.1 useState - çŠ¶æ€ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E7%A4%BA%E4%BE%8B%EF%BC%9A%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="toc-text">2ï¼‰ç¤ºä¾‹ï¼šè®¡æ•°å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">3ï¼‰æ›´æ–°çŠ¶æ€çš„ä¸¤ç§æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E5%90%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%9B%B4%E6%96%B0%E6%96%B9%E5%BC%8F"><span class="toc-text">4ï¼‰å„æ•°æ®ç±»å‹æ›´æ–°æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E6%9B%B4%E6%96%B0%E6%98%AF%E5%BC%82%E6%AD%A5%E4%B8%94%E5%8F%AF%E8%83%BD%E5%90%88%E5%B9%B6"><span class="toc-text">5ï¼‰æ›´æ–°æ˜¯å¼‚æ­¥ä¸”å¯èƒ½åˆå¹¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-text">6ï¼‰æ³¨æ„ç‚¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E6%83%B0%E6%80%A7%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%88%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%89"><span class="toc-text">6ï¼‰æƒ°æ€§åˆå§‹åŒ–ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%89useState-%E5%B0%8F%E7%BB%93"><span class="toc-text">7ï¼‰useState å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-useEffect-%E5%89%AF%E4%BD%9C%E7%94%A8%E5%A4%84%E7%90%86"><span class="toc-text">4.2 useEffect-å‰¯ä½œç”¨å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-1"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B"><span class="toc-text">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E6%B8%85%E7%90%86%E5%89%AF%E4%BD%9C%E7%94%A8%EF%BC%88%E5%A6%82%E4%BA%8B%E4%BB%B6%E3%80%81%E5%AE%9A%E6%97%B6%E5%99%A8%EF%BC%89"><span class="toc-text">3ï¼‰æ¸…ç†å‰¯ä½œç”¨ï¼ˆå¦‚äº‹ä»¶ã€å®šæ—¶å™¨ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E5%B8%B8%E8%A7%81%E7%94%A8%E9%80%94%E6%80%BB%E7%BB%93"><span class="toc-text">4ï¼‰å¸¸è§ç”¨é€”æ€»ç»“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E5%B8%B8%E8%A7%81%E5%9D%91%E5%92%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">5ï¼‰å¸¸è§å‘å’Œæ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E6%80%BB%E7%BB%93%E5%AF%B9%E6%AF%94"><span class="toc-text">6ï¼‰æ€»ç»“å¯¹æ¯”</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-useContext-%E8%B7%A8%E7%BB%84%E4%BB%B6%E5%85%B1%E4%BA%AB%E7%8A%B6%E6%80%81"><span class="toc-text">4.3 useContext - è·¨ç»„ä»¶å…±äº«çŠ¶æ€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-text">1ï¼‰ä½¿ç”¨æ­¥éª¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93"><span class="toc-text">2ï¼‰è¯­æ³•æ€»ç»“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B"><span class="toc-text">3ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">4ï¼‰åº”ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">5ï¼‰æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E6%80%BB%E7%BB%93"><span class="toc-text">6ï¼‰æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-useMemo-%E7%BC%93%E5%AD%98%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C"><span class="toc-text">4.4 useMemo- ç¼“å­˜è®¡ç®—ç»“æœ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-2"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B-1"><span class="toc-text">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E6%A0%B8%E5%BF%83%E7%94%A8%E9%80%94"><span class="toc-text">3ï¼‰æ ¸å¿ƒç”¨é€”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E7%BC%93%E5%AD%98%E5%BC%95%E7%94%A8%EF%BC%88%E9%81%BF%E5%85%8D%E9%87%8D%E6%B8%B2%E6%9F%93%EF%BC%89"><span class="toc-text">4ï¼‰ç¼“å­˜å¼•ç”¨ï¼ˆé¿å…é‡æ¸²æŸ“ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E5%B8%B8%E8%A7%81%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">4ï¼‰å¸¸è§æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89useMemo-vs-useCallback"><span class="toc-text">5ï¼‰useMemo vs useCallback</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E6%80%BB%E7%BB%93-1"><span class="toc-text">6ï¼‰æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-useCallback-%E7%BC%93%E5%AD%98%E5%87%BD%E6%95%B0%E5%BC%95%E7%94%A8"><span class="toc-text">4.5 useCallback- ç¼“å­˜å‡½æ•°å¼•ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-3"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E5%9F%BA%E6%9C%AC%E7%A4%BA%E4%BE%8B"><span class="toc-text">2ï¼‰åŸºæœ¬ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E7%94%A8-useCallback"><span class="toc-text">3ï¼‰ä»€ä¹ˆæ—¶å€™ç”¨ useCallback</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E4%BE%9D%E8%B5%96%E6%95%B0%E7%BB%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">4ï¼‰ä¾èµ–æ•°ç»„æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E7%BB%93%E5%90%88-React-memo%E7%9A%84%E4%BC%98%E5%8C%96%E6%A8%A1%E5%BC%8F"><span class="toc-text">5ï¼‰ç»“åˆ React.memoçš„ä¼˜åŒ–æ¨¡å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E5%B8%B8%E8%A7%81%E8%AF%AF%E5%8C%BA"><span class="toc-text">6ï¼‰å¸¸è§è¯¯åŒº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%89%E6%80%BB%E7%BB%93"><span class="toc-text">7ï¼‰æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-useReducer-%E5%A4%8D%E6%9D%82%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-text">4.6 useReducer-å¤æ‚çŠ¶æ€ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-4"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B-2"><span class="toc-text">2ï¼‰ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89useReducer-%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-text">3ï¼‰useReducer çš„æ‰§è¡Œæµç¨‹å›¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E7%9B%B8%E6%AF%94-useState-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-text">4ï¼‰ç›¸æ¯” useState çš„ä¼˜åŠ¿</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E3%80%81%E4%BD%BF%E7%94%A8%E6%83%B0%E6%80%A7%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%88%E7%AC%AC%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%89"><span class="toc-text">5ï¼‰ã€ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E3%80%81%E4%B8%8E-Context-%E7%BB%93%E5%90%88%EF%BC%9A%E5%85%A8%E5%B1%80%E7%8A%B6%E6%80%81%EF%BC%88Redux-%E6%80%9D%E6%83%B3%EF%BC%89"><span class="toc-text">6ï¼‰ã€ä¸ Context ç»“åˆï¼šå…¨å±€çŠ¶æ€ï¼ˆRedux æ€æƒ³ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%89%E3%80%81%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">7ï¼‰ã€æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%EF%BC%89%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-text">8ï¼‰ã€æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-20-Hooks-%E7%BB%84%E5%90%88%E5%AE%9E%E6%88%98"><span class="toc-text">4.20 Hooks ç»„åˆå®æˆ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89useReducer-useContext"><span class="toc-text">1ï¼‰useReducer + useContext</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%8A%9F%E8%83%BD%E7%9B%AE%E6%A0%87"><span class="toc-text">ğŸ¯ åŠŸèƒ½ç›®æ ‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%F0%9F%A7%B1%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-text">ğŸ§±é¡¹ç›®ç»“æ„</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81-HOC-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6"><span class="toc-text">äº”ã€ HOC é«˜é˜¶ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-React-memo"><span class="toc-text">5.1 React.memo</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-5"><span class="toc-text">1ï¼‰åŸºæœ¬è¯­æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E5%9F%BA%E6%9C%AC%E7%A4%BA%E4%BE%8B-1"><span class="toc-text">2ï¼‰åŸºæœ¬ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%EF%BC%89%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">3ï¼‰å·¥ä½œåŸç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%EF%BC%89%E8%87%AA%E5%AE%9A%E4%B9%89%E6%AF%94%E8%BE%83%E5%87%BD%E6%95%B0"><span class="toc-text">4ï¼‰è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%EF%BC%89%E5%B8%B8%E8%A7%81%E4%BC%98%E5%8C%96%E5%9C%BA%E6%99%AF"><span class="toc-text">5ï¼‰å¸¸è§ä¼˜åŒ–åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%EF%BC%89%E4%B8%8E-useCallback-%E5%92%8C-useMemo-%E7%9A%84%E9%85%8D%E5%90%88"><span class="toc-text">6ï¼‰ä¸ useCallback å’Œ useMemo çš„é…åˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%EF%BC%89%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">7ï¼‰æ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%EF%BC%89%E6%80%BB%E7%BB%93"><span class="toc-text">8ï¼‰æ€»ç»“</span></a></li></ol></li></ol></li></ol></li></ol></div></aside></div></div></section><footer class="main-footer"><div class="container"><div class="row"></div></div></footer><a id="back-to-top" class="icon-btn hide"><i class="fa fa-chevron-up"></i></a><div class="copyright"><div class="container"><div class="row"><div class="col-sm-12"><div class="busuanzi"></div></div><div class="col-sm-12"><span>Copyright &copy; 2017</span> | <span>Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a></span> | <span>Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a></span></div></div></div></div><script src="/js/app.js?rev=2f9097f8c1d5adfecd923b78b47be31b"></script></body></html>