<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>H多看源码多读书 - 勤于思考善领悟</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2026-01-27T15:41:13.663Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>ZHB</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【置顶】超级有用的html/css/js/vue等技巧 持续更新中</title>
    <link href="http://example.com/posts/8e2e021e.html"/>
    <id>http://example.com/posts/8e2e021e.html</id>
    <published>2030-08-22T11:22:13.000Z</published>
    <updated>2026-01-27T15:41:13.663Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、HTML"><a href="#一、HTML" class="headerlink" title="一、HTML"></a><strong>一、HTML</strong></h2><p>暂无</p><br><h2 id="二、CSS"><a href="#二、CSS" class="headerlink" title="二、CSS"></a><strong>二、CSS</strong></h2><h3 id="1、清除浮动"><a href="#1、清除浮动" class="headerlink" title="1、清除浮动"></a><strong><font color='red'>1、清除浮动</font></strong></h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 清除浮动（双伪元素）</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br><span class="line">// ie6 <span class="number">7</span> 专门清除浮动的样式</span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">  *<span class="attribute">zoom</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>清除浮动的原理</strong></p><p><code>clear:both</code>清除浮动的关键</p><p><code>clear</code>是CSS中的定位属性，规定元素的哪一侧不允许其他浮动元素。那么<code>clear:both</code>就是规定在左右两侧均不允许浮动元素。</p><p><code>clear</code>属性只能在块级元素上其作用，这就是清除浮动样式中<code>display:table</code>的作用。</p><br><h2 id="三、JavaScript"><a href="#三、JavaScript" class="headerlink" title="三、JavaScript"></a><strong>三、JavaScript</strong></h2><h3 id="1、基于URLSearchParams或URL获取queryString的值"><a href="#1、基于URLSearchParams或URL获取queryString的值" class="headerlink" title="1、基于URLSearchParams或URL获取queryString的值"></a><strong><font color='red'>1、基于URLSearchParams或URL获取queryString的值</font></strong></h3><p>测试链接：</p><p><a href="https://cf.cmpay.com/mpl/credit_orderResult.html?orderNo=50620520605&orderDate=2052">https://cf.cmpay.com/mpl/credit_orderResult.html?orderNo=50620520605&amp;orderDate=2052</a></p><p><strong>URLSearchParams</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// location.search 取到的是&quot;?orderNo=50620520605&amp;orderDate=2052&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> urlSP = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(location.<span class="property">search</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getQueryString</span>(<span class="params">key</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> urlSP.<span class="title function_">get</span>(key)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getQueryString</span>(<span class="string">&#x27;orderNo&#x27;</span>) <span class="comment">// 50620520605</span></span><br></pre></td></tr></table></figure><p><strong>URL</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> urlObj = <span class="keyword">new</span> <span class="title function_">URL</span>(location.<span class="property">href</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getQueryString</span>(<span class="params">key</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> urlObj.<span class="property">searchParams</span>.<span class="title function_">get</span>(key)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getQueryString</span>(<span class="string">&#x27;orderNo&#x27;</span>) <span class="comment">// 50620520605</span></span><br></pre></td></tr></table></figure><br><h3 id="2、基于atob和btoa的base64编码和解码"><a href="#2、基于atob和btoa的base64编码和解码" class="headerlink" title="2、基于atob和btoa的base64编码和解码"></a><strong><font color='red'>2、基于atob和btoa的base64编码和解码</font></strong></h3><p>浏览器内置了base64编码和解码的能力</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># <span class="built_in">encodeURIComponent</span>() 函数可把字符串作为 <span class="variable constant_">URI</span> 组件进行编码</span><br><span class="line"># <span class="built_in">unescape</span>() 函数可对通过 <span class="built_in">escape</span>() 编码的字符串进行解码</span><br><span class="line"># <span class="title function_">btoa</span>() 方法用于创建一个 base-<span class="number">64</span> 编码的字符串</span><br><span class="line"># <span class="title function_">atob</span>() 方法用于解码使用 base-<span class="number">64</span> 编码的字符串</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">utf8_to_b64</span>(<span class="params"> str </span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">window</span>.<span class="title function_">btoa</span>(<span class="built_in">unescape</span>(<span class="built_in">encodeURIComponent</span>( str )));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b64_to_utf8</span>(<span class="params"> str </span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>(<span class="built_in">escape</span>(<span class="variable language_">window</span>.<span class="title function_">atob</span>( str )));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">utf8_to_b64</span>(<span class="string">&#x27;✓ à la mode&#x27;</span>); <span class="comment">// &quot;4pyTIMOgIGxhIG1vZGU=&quot;</span></span><br><span class="line"><span class="title function_">b64_to_utf8</span>(<span class="string">&#x27;4pyTIMOgIGxhIG1vZGU=&#x27;</span>); <span class="comment">// &quot;✓ à la mode&quot;</span></span><br></pre></td></tr></table></figure><br><h3 id="3、相对地址转换为绝对地址"><a href="#3、相对地址转换为绝对地址" class="headerlink" title="3、相对地址转换为绝对地址"></a><strong><font color='red'>3、相对地址转换为绝对地址</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">realativeToAbs</span>(<span class="params">href</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> aEl = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    aEl.<span class="property">href</span> = href;</span><br><span class="line">    <span class="keyword">const</span> result = aEl.<span class="property">href</span>;</span><br><span class="line">    aEl = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">realativeToAbs</span>(<span class="string">&quot;../a/b/b/index.html&quot;</span>) <span class="comment">// http://127.0.0.1:5500/a/b/b/index.html</span></span><br></pre></td></tr></table></figure><br><h3 id="4-、禁止图片拖拽、禁止右键、禁止选择、禁止复制"><a href="#4-、禁止图片拖拽、禁止右键、禁止选择、禁止复制" class="headerlink" title="4 、禁止图片拖拽、禁止右键、禁止选择、禁止复制"></a><strong><font color='red'>4 、禁止图片拖拽、禁止右键、禁止选择、禁止复制</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;dragstart&#x27;</span>,<span class="string">&#x27;contextmenu&#x27;</span>, <span class="string">&#x27;selectstart&#x27;</span>, <span class="string">&#x27;copy&#x27;</span>].<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">ev</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(ev, <span class="keyword">function</span> (<span class="params">ev</span>) &#123;</span><br><span class="line">        ev.<span class="title function_">preventDefault</span>();</span><br><span class="line">        ev.<span class="property">returnValue</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br><h3 id="5、es6的解构赋值"><a href="#5、es6的解构赋值" class="headerlink" title="5、es6的解构赋值"></a><strong><font color='red'>5、es6的解构赋值</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>:<span class="number">2</span>,</span><br><span class="line">    <span class="attr">c</span>:<span class="number">3</span>,</span><br><span class="line">    <span class="attr">d</span>:<span class="number">4</span>,</span><br><span class="line">    <span class="attr">e</span>:<span class="number">5</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">const</span> a = obj.<span class="property">a</span>;</span><br><span class="line"><span class="keyword">const</span> b = obj.<span class="property">b</span>;</span><br><span class="line"><span class="keyword">const</span> c = obj.<span class="property">c</span>;</span><br><span class="line"><span class="keyword">const</span> d = obj.<span class="property">d</span>;</span><br><span class="line"><span class="keyword">const</span> e = obj.<span class="property">e</span>;</span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">const</span> &#123;a,b,c,d,e&#125; = obj;</span><br><span class="line"></span><br><span class="line">#其他：</span><br><span class="line"><span class="comment">// 属性名和变量名不一样时</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">a</span>: f, <span class="attr">b</span>: l &#125; = obj;</span><br><span class="line">f <span class="comment">// 1</span></span><br><span class="line">l <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定默认值</span></span><br><span class="line"><span class="keyword">let</span> &#123; x = <span class="number">11</span> &#125; = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> [a = <span class="number">66</span>] = [];</span><br><span class="line">x <span class="comment">// 11</span></span><br><span class="line">a <span class="comment">// 66</span></span><br></pre></td></tr></table></figure><p>注意解构的对象不能为<code>undefined</code>、<code>null</code>。否则会报错，故要给被解构的对象一个默认值。</p><p><strong>const {a,b,c,d,e} &#x3D; obj || {};</strong></p><br><h3 id="6、合并数据"><a href="#6、合并数据" class="headerlink" title="6、合并数据"></a><strong><font color='red'>6、合并数据</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> b = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> c = a.<span class="title function_">concat</span>(b);<span class="comment">//[1,2,3,1,5,6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">33</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">66</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, obj1, obj2) <span class="comment">//&#123;a: 1, b: 2, c: 66&#125; 属性名相同最后对象覆盖前面对象</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">const</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> b = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> c = [...a, ...b] <span class="comment">//[1,2,3,1,5,6] 不去重</span></span><br><span class="line"><span class="keyword">const</span> c = [...<span class="keyword">new</span> <span class="title class_">Set</span>([...a, ...b])] <span class="comment">//[1,2,3,5,6] 去重</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">33</span> &#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">66</span> &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(&#123;...obj1, ...obj2&#125;); <span class="comment">//&#123;a: 1, b: 2, c: 66&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="7、关于拼接字符串"><a href="#7、关于拼接字符串" class="headerlink" title="7、关于拼接字符串"></a><strong><font color='red'>7、关于拼接字符串</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;小明&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> score = <span class="number">59</span>;</span><br><span class="line"></span><br><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">let</span> result = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(score &gt; <span class="number">60</span>)&#123;</span><br><span class="line">  result = <span class="string">`<span class="subst">$&#123;name&#125;</span>的考试成绩及格`</span>; </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  result = <span class="string">`<span class="subst">$&#123;name&#125;</span>的考试成绩不及格`</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">const</span> result = <span class="string">`<span class="subst">$&#123;name&#125;</span><span class="subst">$&#123;score &gt; <span class="number">60</span>?<span class="string">&#x27;的考试成绩及格&#x27;</span>:<span class="string">&#x27;的考试成绩不及格&#x27;</span>&#125;</span>`</span>; <span class="comment">// 小明的考试成绩不及格</span></span><br></pre></td></tr></table></figure><br><h3 id="8、扁平化数组"><a href="#8、扁平化数组" class="headerlink" title="8、扁平化数组"></a><strong><font color='red'>8、扁平化数组</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deps = &#123;</span><br><span class="line">    <span class="string">&#x27;采购部&#x27;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">    <span class="string">&#x27;人事部&#x27;</span>:[<span class="number">5</span>,<span class="number">8</span>,<span class="number">12</span>],</span><br><span class="line">    <span class="string">&#x27;行政部&#x27;</span>:[<span class="number">5</span>,<span class="number">14</span>,<span class="number">79</span>],</span><br><span class="line">    <span class="string">&#x27;运输部&#x27;</span>:[<span class="number">3</span>,<span class="number">64</span>,<span class="number">105</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">let</span> member = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">in</span> deps)&#123;</span><br><span class="line">    <span class="keyword">const</span> value = deps[item];</span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(value))&#123;</span><br><span class="line">        member = [...member,...value]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">member = [...<span class="keyword">new</span> <span class="title class_">Set</span>(member)]  <span class="comment">// [1, 2, 3, 5, 8, 12, 14, 79, 64, 105]</span></span><br><span class="line"></span><br><span class="line">#改进：</span><br><span class="line"><span class="keyword">let</span> member = <span class="title class_">Object</span>.<span class="title function_">values</span>(deps).<span class="title function_">flat</span>(<span class="title class_">Infinity</span>); <span class="comment">// [1, 2, 3, 5, 8, 12, 14, 79, 64, 105]</span></span><br></pre></td></tr></table></figure><br><h3 id="9、添加对象属性"><a href="#9、添加对象属性" class="headerlink" title="9、添加对象属性"></a><strong><font color='red'>9、添加对象属性</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> index = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> key = <span class="string">`topic<span class="subst">$&#123;index&#125;</span>`</span>;</span><br><span class="line">obj[key] = <span class="string">&#x27;话题内容&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#改进：es6</span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> index = <span class="number">1</span>;</span><br><span class="line">obj[<span class="string">`topic<span class="subst">$&#123;index&#125;</span>`</span>] = <span class="string">&#x27;话题内容&#x27;</span>;</span><br></pre></td></tr></table></figure><br><h3 id="10、非空的判断"><a href="#10、非空的判断" class="headerlink" title="10、非空的判断"></a><strong><font color='red'>10、非空的判断</font></strong></h3><p><strong>空值合并操作符</strong>（<strong><code>??</code></strong>）</p><p>只有当左侧为null和undefined时，才会返回右侧的值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a === <span class="literal">null</span> || a === <span class="literal">undefined</span>) &#123;    </span><br><span class="line"><span class="title function_">doSomething</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也就是如果需要验证一个值是否等于null或者undefined，可以使用null合并操作符来简化上面的代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a ?? <span class="title function_">doSomething</span>()</span><br></pre></td></tr></table></figure><p>这样，仅当 a 未定义或为空时，才会执行控制合并运算符之后的代码。空合并运算符 ??是一个逻辑运算符，当左侧操作数为 null 或未定义时返回其右侧操作数，否则返回左侧操作数。</p><p>例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nullValue = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> emptyText = <span class="string">&quot;&quot;</span>; <span class="comment">// 空字符串，是一个假值，Boolean(&quot;&quot;) === false</span></span><br><span class="line"><span class="keyword">const</span> someNumber = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> valA = nullValue ?? <span class="string">&quot;valA 的默认值&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> valB = emptyText ?? <span class="string">&quot;valB 的默认值&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> valC = someNumber ?? <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(valA); <span class="comment">// &quot;valA 的默认值&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(valB); <span class="comment">// &quot;&quot;（空字符串虽然是假值，但不是 null 或者 undefined）</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(valC); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure><br><h3 id="11、获取对象属性值"><a href="#11、获取对象属性值" class="headerlink" title="11、获取对象属性值"></a><strong><font color='red'>11、获取对象属性值</font></strong></h3><p>可选链操作符 （?.）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"><span class="keyword">const</span> name = obj &amp;&amp; obj.<span class="property">name</span>;</span><br><span class="line"></span><br><span class="line">#改进：es6</span><br><span class="line"><span class="keyword">const</span> name = obj?.<span class="property">name</span>;</span><br></pre></td></tr></table></figure><br><h3 id="12、html编码和解码"><a href="#12、html编码和解码" class="headerlink" title="12、html编码和解码"></a><strong><font color='red'>12、html编码和解码</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">1.</span>用浏览器内部转换器实现html编码（转义）</span><br><span class="line"><span class="attr">htmlEncode</span>: <span class="keyword">function</span> (<span class="params">html</span>) &#123;</span><br><span class="line">    <span class="comment">//1.首先动态创建一个容器标签元素，如DIV</span></span><br><span class="line">    <span class="keyword">var</span> temp = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    <span class="comment">//2.然后将要转换的字符串设置为这个元素的innerText或者textContent</span></span><br><span class="line">    (temp.<span class="property">textContent</span> != <span class="literal">undefined</span>) ? (temp.<span class="property">textContent</span> = html) : (temp.<span class="property">innerText</span> = html);</span><br><span class="line">    <span class="comment">//3.最后返回这个元素的innerHTML，即得到经过HTML编码转换的字符串了</span></span><br><span class="line">    <span class="keyword">var</span> output = temp.<span class="property">innerHTML</span>;</span><br><span class="line">    temp = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">htmlEncode</span>(<span class="string">&quot;&lt;div class=&#x27;demo&#x27;&gt;测试&lt;/div&gt;&quot;</span>));</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>用浏览器内部转换器实现html解码（反转义）</span><br><span class="line"><span class="attr">htmlDecode</span>: <span class="keyword">function</span> (<span class="params">text</span>) &#123;</span><br><span class="line">    <span class="comment">//1.首先动态创建一个容器标签元素，如DIV</span></span><br><span class="line">    <span class="keyword">var</span> temp = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    <span class="comment">//2.然后将要转换的字符串设置为这个元素的innerHTML(ie，火狐，google都支持)</span></span><br><span class="line">    temp.<span class="property">innerHTML</span> = text;</span><br><span class="line">    <span class="comment">//3.最后返回这个元素的innerText或者textContent，即得到经过HTML解码的字符串了。</span></span><br><span class="line">    <span class="keyword">var</span> output = temp.<span class="property">innerText</span> || temp.<span class="property">textContent</span>;</span><br><span class="line">    temp = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">htmlDecode</span>(<span class="string">&quot;&amp;lt;div class=&#x27;demo&#x27;&amp;gt;测试&amp;lt;/div&amp;gt;&quot;</span>));</span><br></pre></td></tr></table></figure><br><h3 id="13、箭头函数"><a href="#13、箭头函数" class="headerlink" title="13、箭头函数"></a><strong><font color='red'>13、箭头函数</font></strong></h3><p>var func &#x3D; () &#x3D;&gt; ({ foo: 1 });  返回的是括号里面的对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> age = <span class="title function_">prompt</span>(<span class="string">&quot;What is your age?&quot;</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> welcome = (age &lt; <span class="number">18</span>) ? <span class="function">() =&gt;</span> <span class="title function_">alert</span>(<span class="string">&#x27;Hello&#x27;</span>) : <span class="function">() =&gt;</span> <span class="title function_">alert</span>(<span class="string">&quot;Greetings!&quot;</span>);</span><br><span class="line"><span class="title function_">welcome</span>();</span><br></pre></td></tr></table></figure><p><strong><font color='red' size="3">重要特性</font></strong></p><p><strong><font color='cornflowerblue' size="3">1）没有arguments </font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># <span class="number">1</span>、普通函数中的<span class="variable language_">arguments</span>正确使用：</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">n</span>) &#123;   </span><br><span class="line"> <span class="comment">// arguments[0] 表示传给foo函数的第一个参数，也就是n    </span></span><br><span class="line">    <span class="keyword">var</span> <span class="title function_">f</span> = (<span class="params"></span>) =&gt; <span class="variable language_">arguments</span>[<span class="number">0</span>] + n;    </span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">f</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>(<span class="number">1</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="title function_">foo</span>(<span class="number">3</span>); <span class="comment">// 6</span></span><br><span class="line"><span class="title function_">foo</span>(<span class="number">3</span>, <span class="number">2</span>);<span class="comment">//6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="number">2</span>、箭头函数中无法使用<span class="variable language_">arguments</span></span><br><span class="line"><span class="comment">// ReferenceError: arguments is not defined</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">func</span> = (<span class="params">a, b</span>) =&gt; &#123;<span class="keyword">return</span> <span class="variable language_">arguments</span>[<span class="number">0</span>];&#125;</span><br></pre></td></tr></table></figure><p><strong><font color='cornflowerblue' size="3">2）没有prototype属性 </font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">Foo</span> = (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p><strong><font color='cornflowerblue' size="3">3）不能使用new </font></strong></p><p>箭头函数没有this，不能用作构造函数，也就无法使用 new</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">Foo</span> = (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> <span class="title class_">Foo</span>(); <span class="comment">// TypeError: Foo is not a constructor</span></span><br></pre></td></tr></table></figure><br><h3 id="14、初始化一个数组"><a href="#14、初始化一个数组" class="headerlink" title="14、初始化一个数组"></a><strong><font color='red'>14、初始化一个数组</font></strong></h3><p>如果你想初始化一个指定长度的一维数组并指定默认值，你可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = <span class="title class_">Array</span>(<span class="number">6</span>).<span class="title function_">fill</span>(<span class="string">&#x27;&#x27;</span>); </span><br><span class="line"><span class="comment">// [&#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;]</span></span><br></pre></td></tr></table></figure><p>如果你想初始化一个指定长度的二维数组并指定默认值，你可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> matrix = <span class="title class_">Array</span>(<span class="number">6</span>).<span class="title function_">fill</span>(<span class="number">0</span>).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="title class_">Array</span>(<span class="number">5</span>).<span class="title function_">fill</span>(<span class="number">0</span>)); </span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// [0, 0, 0, 0, 0],</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><br><h3 id="15、数组求和-最大值-最小值"><a href="#15、数组求和-最大值-最小值" class="headerlink" title="15、数组求和&#x2F;最大值&#x2F;最小值"></a><strong><font color='red'>15、数组求和&#x2F;最大值&#x2F;最小值</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array  = [<span class="number">5</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">2</span>];</span><br></pre></td></tr></table></figure><p><font color='orange'>1）求和 </font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a+b);</span><br></pre></td></tr></table></figure><p><font color='orange'>2）寻找最大值</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a &gt; b ? a : b);  <span class="title class_">Math</span>.<span class="title function_">max</span>(...array)</span><br></pre></td></tr></table></figure><p><font color='orange'>2）寻找最小值</font></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a &lt; b ? a : b);  <span class="title class_">Math</span>.<span class="title function_">min</span>(...array)</span><br></pre></td></tr></table></figure><p>请记住：数组的reduce方法可以用来解决很多数组求值问题。</p><br><h3 id="16、滤错误值"><a href="#16、滤错误值" class="headerlink" title="16、滤错误值"></a><strong><font color='red'>16、滤错误值</font></strong></h3><p>如果要过滤数组中的值，例如 false、0、null、undefined 等，可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="number">1</span>, <span class="number">0</span>, <span class="literal">undefined</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="string">&#x27;&#x27;</span>, <span class="literal">false</span>];</span><br><span class="line">array.<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line"><span class="comment">// [1, 6, 7]</span></span><br></pre></td></tr></table></figure><br><h3 id="17、空数组"><a href="#17、空数组" class="headerlink" title="17、空数组"></a><strong><font color='red'>17、空数组</font></strong></h3><p>如果要清空数组，可以将数组的长度设置为 0。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;E&quot;</span>, <span class="string">&quot;F&quot;</span>]</span><br><span class="line">array.<span class="property">length</span> = <span class="number">0</span> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array)  <span class="comment">// []</span></span><br></pre></td></tr></table></figure><br><h3 id="18、计算性能"><a href="#18、计算性能" class="headerlink" title="18、计算性能"></a><strong><font color='red'>18、计算性能</font></strong></h3><p>以下操作可用于计算代码的性能。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> startTime = performance.<span class="title function_">now</span>(); </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;    </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> endTime = performance.<span class="title function_">now</span>();</span><br><span class="line"><span class="keyword">const</span> totaltime = endTime - startTime;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(totaltime); <span class="comment">// 10.3333333</span></span><br></pre></td></tr></table></figure><br><h3 id="19、将数组元素转换为数字"><a href="#19、将数组元素转换为数字" class="headerlink" title="19、将数组元素转换为数字"></a><strong><font color='red'>19、将数组元素转换为数字</font></strong></h3><p>如果有一个数组，并且你想将数组的元素转换为数字，你可以使用 map 方法来完成。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;3.1415&#x27;</span>, <span class="string">&#x27;-10.01&#x27;</span>];</span><br><span class="line">array.<span class="title function_">map</span>(<span class="title class_">Number</span>);  <span class="comment">// [12, 1, 3.1415, -10.01]</span></span><br></pre></td></tr></table></figure><p>这样，map 对数组的每个元素执行 Number 构造函数，并在遍历数组时返回结果。</p><br><h3 id="20、将类数组转换为数组"><a href="#20、将类数组转换为数组" class="headerlink" title="20、将类数组转换为数组"></a><strong><font color='red'>20、将类数组转换为数组</font></strong></h3><p>可以使用以下方法将类数组转换为数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>);</span><br></pre></td></tr></table></figure><p>此外，还可以使用扩展运算符来实现。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...<span class="variable language_">arguments</span>]</span><br></pre></td></tr></table></figure><br><h3 id="21、对象属性的动态声明"><a href="#21、对象属性的动态声明" class="headerlink" title="21、对象属性的动态声明"></a><strong><font color='red'>21、对象属性的动态声明</font></strong></h3><p>如果你想动态地为一个对象声明属性，你可以这样做。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dynamic = <span class="string">&#x27;color&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> item = &#123;    </span><br><span class="line"><span class="attr">brand</span>: <span class="string">&#x27;Ford&#x27;</span>,</span><br><span class="line">    [dynamic]: <span class="string">&#x27;Blue&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(item); <span class="comment">// &#123; brand: &quot;Ford&quot;, color: &quot;Blue&quot; &#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="22、缩短console-log"><a href="#22、缩短console-log" class="headerlink" title="22、缩短console.log()"></a><strong><font color='red'>22、缩短console.log()</font></strong></h3><p>每次debug都要写很多console.log()会比较麻烦，可以用下面的形式来简化这段代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> c = <span class="variable language_">console</span>.<span class="property">log</span>.<span class="title function_">bind</span>(<span class="variable language_">document</span>) </span><br><span class="line"><span class="title function_">c</span>(<span class="number">222</span>) </span><br><span class="line"><span class="title function_">c</span>(<span class="string">&quot;hello world&quot;</span>)</span><br></pre></td></tr></table></figure><p>这将每次只执行 c 方法。</p><br><h3 id="23、删除数组元素"><a href="#23、删除数组元素" class="headerlink" title="23、删除数组元素"></a><strong><font color='red'>23、删除数组元素</font></strong></h3><p>如果我们想删除一个数组的元素，可以使用delete来完成，但是删除后元素会变成undefined，不会消失，而且执行会消耗很多时间，所以大部分情况下不会满足我们的需求。所以我们可以使用数组的 slice() 方法来删除数组的元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>]</span><br><span class="line"><span class="keyword">const</span> arrayRemoveed = array.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(array)  <span class="comment">// [&quot;c&quot;, &quot;d&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arrayRemoveed)  <span class="comment">// [&quot;a&quot;, &quot;b&quot;]</span></span><br></pre></td></tr></table></figure><br><h3 id="24、检查对象是否为空"><a href="#24、检查对象是否为空" class="headerlink" title="24、检查对象是否为空"></a><strong><font color='red'>24、检查对象是否为空</font></strong></h3><p>如果我们想检查对象是否为空，我们可以使用以下内容。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(&#123;&#125;).<span class="property">length</span>  <span class="comment">// 0</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(&#123;<span class="attr">key</span>: <span class="number">1</span>&#125;).<span class="property">length</span>  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>Object.keys() 方法用于获取对象的键，它将返回一个包含这些键值的数组。如果返回数组的长度为 0，则该对象必须为空。</p><br><h3 id="25、获取数组中的最后一项"><a href="#25、获取数组中的最后一项" class="headerlink" title="25、获取数组中的最后一项"></a><strong><font color='red'>25、获取数组中的最后一项</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br></pre></td></tr></table></figure><p>1、如果要获取数组中的最后一项，通常会这样编写代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr[arr.<span class="property">length</span> - <span class="number">1</span>]  <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>2、我们也可以使用数组的 slice 方法来获取最后一个元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">slice</span>(-<span class="number">1</span>) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p>当我们将 slice 方法的参数设置为负值时，它会从数组后面开始截取数组值，如果要截取最后两个值，则传入参数-2。</p><p>3、使用“at方法”读取</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">at</span>(-<span class="number">1</span>) <span class="comment">// 5</span></span><br><span class="line">array.<span class="title function_">at</span>(<span class="number">0</span>) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><br><h3 id="26、数组元素的随机排序"><a href="#26、数组元素的随机排序" class="headerlink" title="26、数组元素的随机排序"></a><strong><font color='red'>26、数组元素的随机排序</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">11</span>,<span class="number">99</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">7</span>,]</span><br><span class="line"><span class="keyword">const</span> newArr = arr.<span class="title function_">map</span>(<span class="function"><span class="params">val</span> =&gt;</span> (&#123; <span class="attr">v</span>: val, <span class="attr">r</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() &#125;));</span><br><span class="line">newArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.<span class="property">r</span> - b.<span class="property">r</span>);</span><br><span class="line"><span class="keyword">const</span> showList = newArr.<span class="title function_">map</span>(<span class="function"><span class="params">val</span> =&gt;</span> val.<span class="property">v</span>).<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">6</span>); <span class="comment">// 截取长度未6的随机数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(showList)</span><br></pre></td></tr></table></figure><br><h2 id="四、Vue"><a href="#四、Vue" class="headerlink" title="四、Vue"></a><strong>四、Vue</strong></h2><h3 id="1、computed中使用this？"><a href="#1、computed中使用this？" class="headerlink" title="1、computed中使用this？"></a><strong><font color='red'>1、computed中使用this？</font></strong></h3><p>我们通过this能访问到的数据，在computed的第一个参数上都能结构出来</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">address</span>: <span class="string">&#x27;黄山&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="title function_">haha</span>(<span class="params">&#123; address, $attrs, $route, $store, $listeners, $ref &#125;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(address) <span class="comment">// 黄山</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">111</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="2、避免v-if和v-for一起使用"><a href="#2、避免v-if和v-for一起使用" class="headerlink" title="2、避免v-if和v-for一起使用"></a><strong><font color='red'>2、避免v-if和v-for一起使用</font></strong></h3><p>在vue的源码中有一段代码是对指令的优先级的处理</p><p><strong>不好的</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#吐槽：</span><br><span class="line"># 这段代码是先处理v-<span class="keyword">for</span>再处理v-<span class="keyword">if</span>的</span><br><span class="line"><span class="comment">// 比如这个列表有一百条数据，再某种情况下，它们都不需要显示，当vue还是会循环这个100条数据显示，再去判断v-if，因此，我们应该避免这种情况的出现。</span></span><br><span class="line"></span><br><span class="line">&lt;h3 v-<span class="keyword">if</span>=<span class="string">&quot;status&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;item in 100&quot;</span> :key=<span class="string">&quot;item&quot;</span>&gt;&#123;&#123;item&#125;&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">#优化</span><br><span class="line">&lt;template v-<span class="keyword">if</span>=<span class="string">&quot;status&quot;</span> &gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-for</span>=<span class="string">&quot;item in 100&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><br><h3 id="3、修饰符sync"><a href="#3、修饰符sync" class="headerlink" title="3、修饰符sync"></a><strong><font color='red'>3、修饰符sync</font></strong></h3><p>vue 修饰符sync的功能是：当一个子组件改变了一个 prop 的值时，这个变化也会同步到父组件中所绑定</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Toggle</span> <span class="attr">:show.sync</span> = <span class="string">&#x27;isShow&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="title function_">data</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">isShow</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;script&gt;  </span><br><span class="line"> </span><br><span class="line"># 等同于上面的写法</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父组件</span></span><br><span class="line">template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Toggle</span> <span class="attr">:show</span> = <span class="string">&#x27;isShow&#x27;</span> @<span class="attr">update:show</span>=<span class="string">&quot;change&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">            <span class="attr">isShow</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="title class_">Boolean</span></span><br><span class="line">        &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="title function_">data</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">isShow</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">        <span class="attr">method</span>: &#123;</span><br><span class="line">            <span class="title function_">change</span>(<span class="params">val</span>) &#123; <span class="comment">// 子组件传来的false</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">isShow</span> = val</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;show&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    展示和隐藏组件</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span>隐藏组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">props</span>:[<span class="string">&#x27;show&#x27;</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:show&#x27;</span>,<span class="literal">false</span>) <span class="comment">//触发 input 事件，并传入新值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br><h2 id="五、IOS和安卓踩坑"><a href="#五、IOS和安卓踩坑" class="headerlink" title="五、IOS和安卓踩坑"></a><strong>五、IOS和安卓踩坑</strong></h2><h3 id="1、IOS滑动不流畅"><a href="#1、IOS滑动不流畅" class="headerlink" title="1、IOS滑动不流畅"></a><strong><font color='red'>1、IOS滑动不流畅</font></strong></h3><p><strong><font color='#10c300'>表现</font></strong></p><p>上下滑动页面会产生卡顿，手指离开页面，页面立即停止运动。整体表现就是滑动不流畅，没有滑动惯性。</p><br><p><strong><font color='#10c300'>为什么 iOS 的 webview 中 滑动不流畅，它是如何定义的？</font></strong></p><p>原来在 iOS 5.0 以及之后的版本，滑动 -webkit-overflow-scrolling 有定义有两个值 <code>auto</code> 和 <code>touch</code>，默认值为 <code>auto</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-webkit-<span class="attribute">overflow</span>-scrolling: touch; <span class="comment">/* 当手指从触摸屏上移开，会保持一段时间的滚动 */</span></span><br><span class="line"></span><br><span class="line">-webkit-<span class="attribute">overflow</span>-scrolling: auto; <span class="comment">/* 当手指从触摸屏上移开，滚动会立即停止 */</span></span><br></pre></td></tr></table></figure><br><p><strong><font color='#10c300'>解决方案</font></strong></p><p><strong><font color='cornflowerblue' size="3">1）在 滚动容器上 增加滚动 touch 方法 </font></strong></p><p>将<code>-webkit-overflow-scrolling</code> 值设置为 <code>touch</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    -webkit-<span class="attribute">overflow</span>-scrolling: touch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>设置滚动条隐藏： <code>.container ::-webkit-scrollbar &#123;display: none;&#125;</code></p></blockquote><p>可能会导致使用<code>position:fixed;</code> 固定定位的元素，随着页面一起滚动</p><p><strong><font color='cornflowerblue' size="3">2）设置 overflow</font></strong></p><p>设置外部 <code>overflow</code> 为 <code>hidden</code>,设置内容元素 <code>overflow</code> 为 <code>auto</code>。内部元素超出 body 即产生滚动，超出的部分 body 隐藏。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-y</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>两者结合使用更佳！</p><br><h3 id="2、click-点击事件延时与穿透"><a href="#2、click-点击事件延时与穿透" class="headerlink" title="2、click 点击事件延时与穿透"></a><strong><font color='red'>2、click 点击事件延时与穿透</font></strong></h3><p><strong><font color='#10c300'>表现</font></strong></p><p>监听元素 <code>click</code> 事件，点击元素触发时间延迟约 <code>300ms</code>。点击蒙层，蒙层消失后，下层元素点击触发。</p><br><p><strong><font color='#10c300'>为什么会产生 click 延时？</font></strong></p><p>iOS 中的 safari，为了实现双击缩放操作，在单击 300ms 之后，如果未进行第二次点击，则执行 <code>click</code> 单击操作。也就是说来判断用户行为是否为双击产生的。但是，在 App 中，无论是否需要双击缩放这种行为，<code>click</code> 单击都会产生 300ms 延迟。</p><br><p><strong><font color='#10c300'>为什么会产生 click 点击穿透？</font></strong></p><p>双层元素叠加时，在上层元素上绑定 <code>touch</code> 事件，下层元素绑定 <code>click</code> 事件。由于 <code>click</code> 发生在 <code>touch</code> 之后，点击上层元素，元素消失，下层元素会触发 <code>click</code> 事件，由此产生了点击穿透的效果</p><br><p><strong><font color='#10c300'>原理与解决方案</font></strong></p><p><strong><font color='cornflowerblue' size="3">1）使用 touchstart 替换 click</font></strong></p><p>移动设备不仅支持点击还支持触摸事件。那么我们现在基本思路就是用 <code>touch</code> 事件代替<code>click</code> 事件。</p><p>将 <code>click</code> 替换成 <code>touchstart</code> 不仅解决了 <code>click</code> 事件延时问题，还解决了穿透问题。因为穿透问题是在 <code>touch</code> 和 <code>click</code> 混用时产生。</p><p>在原生中使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">el.addEventListener(&quot;touchstart&quot;, () =&gt; &#123; console.log(&quot;ok&quot;); &#125;, false);</span><br></pre></td></tr></table></figure><p>在 vue 中使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @touchstart=&quot;handleTouchstart()&quot;&gt;点击&lt;/button&gt;</span><br></pre></td></tr></table></figure><p>开源解决方案中，也是既提供了 <code>click</code> 事件，又提供了<code>touchstart</code> 事件。如 vant 中的 <code>button</code> 组件</p><p><strong><font color='cornflowerblue' size="3">2）使用 fastclick 库</font></strong></p><p>使用 <code>npm/yarn</code> 安装后使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import FastClick from &#x27;fastclick&#x27;;</span><br><span class="line"></span><br><span class="line">FastClick.attach(document.body, options);</span><br></pre></td></tr></table></figure><p>同样，使用<code>fastclick</code>库后，<code>click</code> 延时和穿透问题都没了</p><br><h3 id="3、软键盘将页面顶起来、收起未回落问题"><a href="#3、软键盘将页面顶起来、收起未回落问题" class="headerlink" title="3、软键盘将页面顶起来、收起未回落问题"></a><strong><font color='red'>3、软键盘将页面顶起来、收起未回落问题</font></strong></h3><p><strong><font color='#10c300'>表现</font></strong></p><p>Android 手机中，点击 <code>input</code> 框时，键盘弹出，将页面顶起来，导致页面样式错乱。</p><p>移开焦点时，键盘收起，键盘区域空白，未回落。</p><br><p><strong><font color='#10c300'>产生原因</font></strong></p><p>我们在app 布局中会有个固定的底部。安卓一些版本中，输入弹窗出来，会将解压 <code>absolute</code> 和 <code>fixed</code> 定位的元素。导致可视区域变小，布局错乱。</p><br><p><strong><font color='#10c300'>原理与解决方案</font></strong></p><p>软键盘将页面顶起来的解决方案，主要是通过监听页面高度变化，强制恢复成弹出前的高度。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 记录原有的视口高度</span></span><br><span class="line"><span class="keyword">const</span> originalHeight = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span> || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> resizeHeight = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>;</span><br><span class="line">  <span class="keyword">if</span>(resizeHeight &lt; originalHeight )&#123;</span><br><span class="line">    <span class="comment">// 恢复内容区域高度</span></span><br><span class="line">    <span class="comment">// const container = document.getElementById(&quot;container&quot;)</span></span><br><span class="line">    <span class="comment">// 例如 container.style.height = originalHeight;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>键盘不能回落问题出现在 iOS 12+ 和 wechat 6.7.4+ 中，而在微信 H5 开发中是比较常见的 Bug。</p><p>兼容原理，1.判断版本类型 2.更改滚动的可视区域</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isWechat = <span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/MicroMessenger\/([\d\.]+)/i</span>);</span><br><span class="line"><span class="keyword">if</span> (!isWechat) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">const</span> wechatVersion = wechatInfo[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">const</span> version = (navigator.<span class="property">appVersion</span>).<span class="title function_">match</span>(<span class="regexp">/OS (\d+)_(\d+)_?(\d+)?/</span>);</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// 如果设备类型为iOS 12+ 和wechat 6.7.4+，恢复成原来的视口</span></span><br><span class="line"><span class="keyword">if</span> (+wechatVersion.<span class="title function_">replace</span>(<span class="regexp">/\./g</span>, <span class="string">&#x27;&#x27;</span>) &gt;= <span class="number">674</span> &amp;&amp; +version[<span class="number">1</span>] &gt;= <span class="number">12</span>) &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>, <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>window.scrollTo(x-coord, y-coord)</code>，其中<code>window.scrollTo(0, clientHeight)</code>恢复成原来的视口</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、HTML&quot;&gt;&lt;a href=&quot;#一、HTML&quot; class=&quot;headerlink&quot; title=&quot;一、HTML&quot;&gt;&lt;/a&gt;&lt;strong&gt;一、HTML&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;暂无&lt;/p&gt;
&lt;br&gt;

&lt;h2 id=&quot;二、CSS&quot;&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="其他" scheme="http://example.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="css" scheme="http://example.com/tags/css/"/>
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
    <category term="html" scheme="http://example.com/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>WSL2安装与使用指南</title>
    <link href="http://example.com/posts/wsl2534guide6.html"/>
    <id>http://example.com/posts/wsl2534guide6.html</id>
    <published>2026-01-21T17:53:00.000Z</published>
    <updated>2026-01-27T15:41:13.667Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、WSL2安装与卸载"><a href="#一、WSL2安装与卸载" class="headerlink" title="一、WSL2安装与卸载"></a><strong><font color='red'>一、WSL2安装与卸载</font></strong></h3><h4 id="1-1、安装WSL"><a href="#1-1、安装WSL" class="headerlink" title="1-1、安装WSL"></a><strong><font color='#10c300'>1-1、安装WSL</font></strong></h4><h5 id="一键安装（推荐）"><a href="#一键安装（推荐）" class="headerlink" title="一键安装（推荐）"></a><strong><font color='cornflowerblue'>一键安装（推荐）</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --install</span><br></pre></td></tr></table></figure><p>此命令会自动完成：</p><ul><li>启用必要的 Windows 功能</li><li>安装最新的 Linux 内核</li><li>默认安装 Ubuntu 发行版</li></ul><p><strong>安装完成后需要重启计算机</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260120235112242.png" alt="image-20260120235112242"></p><br><h4 id="1-2、WSL常用命令"><a href="#1-2、WSL常用命令" class="headerlink" title="1-2、WSL常用命令"></a><strong><font color='#10c300'>1-2、WSL常用命令</font></strong></h4><table><thead><tr><th align="left">命令</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left"><code>wsl</code></td><td align="left">启动默认发行版</td></tr><tr><td align="left"><code>wsl --list --online</code></td><td align="left">查看可安装的发行版</td></tr><tr><td align="left"><code>wsl --list</code></td><td align="left">查看已安装的发行版名称</td></tr><tr><td align="left"><code>wsl --list --verbose</code></td><td align="left">显示已安装的发行版名称、运行状态和WSL版本</td></tr><tr><td align="left"><code>wsl -d Ubuntu-22.04</code></td><td align="left">启动指定发行版</td></tr><tr><td align="left"><code>wsl --shutdown</code></td><td align="left">关闭所有正在运行的发行版</td></tr><tr><td align="left"><code>wsl --update</code></td><td align="left">更新 WSL</td></tr><tr><td align="left"><code>wsl --version</code></td><td align="left">查看 WSL 版本</td></tr><tr><td align="left"><code>wsl --set-default Ubuntu-22.04</code></td><td align="left">设置默认发行版</td></tr><tr><td align="left"><code>wsl --set-version Ubuntu-22.04 2</code></td><td align="left">转换发行版版本（WSL 1 ↔ WSL 2）</td></tr></tbody></table><br><h4 id="1-3、卸载WSL2"><a href="#1-3、卸载WSL2" class="headerlink" title="1-3、卸载WSL2"></a><strong><font color='#10c300'>1-3、卸载WSL2</font></strong></h4><h5 id="方法1：卸载特定-Linux-发行版（推荐）"><a href="#方法1：卸载特定-Linux-发行版（推荐）" class="headerlink" title="方法1：卸载特定 Linux 发行版（推荐）"></a><strong><font color='cornflowerblue'>方法1：卸载特定 Linux 发行版（推荐）</font></strong></h5><p>在 **PowerShell（管理员）**中执行：</p><p><strong>1️⃣ 查看已安装的发行版</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wsl <span class="literal">--list</span> <span class="literal">--verbose</span></span><br><span class="line">或</span><br><span class="line">wsl <span class="literal">-l</span> <span class="literal">-v</span>       </span><br></pre></td></tr></table></figure><p><strong>2️⃣ 注销并卸载（特定发行版）</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl <span class="literal">--unregister</span> Ubuntu</span><br></pre></td></tr></table></figure><p>根据你安装的具体发行版名称，例如：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl <span class="literal">--unregister</span> Ubuntu<span class="literal">-22</span>.<span class="number">04</span></span><br><span class="line">wsl <span class="literal">--unregister</span> Debian</span><br></pre></td></tr></table></figure><p>⚠️ <strong>注意</strong>：这会删除该发行版的所有数据！</p><br><h5 id="方法2：通过-Windows-设置卸载"><a href="#方法2：通过-Windows-设置卸载" class="headerlink" title="方法2：通过 Windows 设置卸载"></a><strong><font color='cornflowerblue'>方法2：通过 Windows 设置卸载</font></strong></h5><p><strong>卸载 Linux 发行版：</strong></p><ol><li>打开 <strong>设置</strong> → <strong>应用</strong> → <strong>应用和功能</strong></li><li>搜索 <code>Ubuntu</code>（或其他发行版名称）</li><li>点击 <strong>卸载</strong></li></ol><p><strong>禁用 WSL 功能：</strong></p><ol><li>打开 <strong>控制面板</strong> → <strong>程序</strong> → <strong>启用或关闭 Windows 功能</strong></li><li>取消勾选：<ul><li>☑ <strong>适用于 Linux 的 Windows 子系统</strong></li><li>☑ <strong>虚拟机平台</strong></li></ul></li><li>点击 <strong>确定</strong></li><li>重启计算机</li></ol><br><h5 id="验证卸载"><a href="#验证卸载" class="headerlink" title="验证卸载"></a><strong><font color='cornflowerblue'>验证卸载</font></strong></h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查是否还有发行版</span></span><br><span class="line">wsl <span class="literal">--list</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 WSL 版本</span></span><br><span class="line">wsl <span class="literal">--version</span></span><br></pre></td></tr></table></figure><p>如果显示为空或报错，说明卸载成功。</p><br><h4 id="1-4、注意事项"><a href="#1-4、注意事项" class="headerlink" title="1-4、注意事项"></a><strong><font color='#10c300'>1-4、注意事项</font></strong></h4><ul><li>安装 WSL 需要管理员权限</li><li>卸载发行版会<strong>完全删除</strong>所有数据，卸载前请备份</li><li>WSL 2 性能更好，推荐使用</li></ul><br><h4 id="1-4、常见问题排查"><a href="#1-4、常见问题排查" class="headerlink" title="1-4、常见问题排查"></a><strong><font color='#10c300'>1-4、常见问题排查</font></strong></h4><h5 id="❌-问题1：计算机不支持WSL2"><a href="#❌-问题1：计算机不支持WSL2" class="headerlink" title="❌ 问题1：计算机不支持WSL2"></a><strong><font color='cornflowerblue'>❌ 问题1：计算机不支持WSL2</font></strong></h5><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260123111656607.png" alt="image-20260123111656607"></p><p>在powershell下输入wsl -l -v 也不显示版本</p><p>首先确保Hyper-v和适用于linux的windows子系统以及虚拟机平台是开启的</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260123111934330.png" alt="image-20260123111934330"></p><p>如果这些都没问题，在powershell（管理员模式）下输入如下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /enum | findstr -i hypervisorlaunchtype</span><br></pre></td></tr></table></figure><p>应该会显示off，那就说明有问题，那就再输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /set hypervisorlaunchtype Auto</span><br></pre></td></tr></table></figure><p>即可解决</p><br><hr><h3 id="二、WSL2基础操作"><a href="#二、WSL2基础操作" class="headerlink" title="二、WSL2基础操作"></a><strong><font color='red'>二、WSL2基础操作</font></strong></h3><h4 id="2-1、查看IP地址"><a href="#2-1、查看IP地址" class="headerlink" title="2-1、查看IP地址"></a><strong><font color='#10c300'>2-1、查看IP地址</font></strong></h4><h5 id="方法一：使用-ip-命令"><a href="#方法一：使用-ip-命令" class="headerlink" title="方法一：使用 ip 命令"></a><strong><font color='cornflowerblue'>方法一：使用 <code>ip</code> 命令</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip addr show eth0</span><br><span class="line">简写</span><br><span class="line">ip a</span><br></pre></td></tr></table></figure><br><h5 id="方法二：使用-hostname-命令（推荐）"><a href="#方法二：使用-hostname-命令（推荐）" class="headerlink" title="方法二：使用 hostname 命令（推荐）"></a><strong><font color='cornflowerblue'>方法二：使用 <code>hostname</code> 命令（推荐）</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname -I</span><br></pre></td></tr></table></figure><br><h5 id="方法三：使用-ifconfig-命令"><a href="#方法三：使用-ifconfig-命令" class="headerlink" title="方法三：使用 ifconfig 命令"></a><strong><font color='cornflowerblue'>方法三：使用 <code>ifconfig</code> 命令</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0</span><br></pre></td></tr></table></figure><p><em>注意：此方法需要先安装 <code>net-tools</code></em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install net-tools</span><br></pre></td></tr></table></figure><p><strong>卸载某个软件包：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 卸载指定软件包，但保留配置文件和数据文件</span></span><br><span class="line"><span class="built_in">sudo</span> apt remove net-tools</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将配置文件一起删除，彻底清除，之后 `ifconfig` 命令就完全不能使用了</span></span><br><span class="line"><span class="built_in">sudo</span> apt purge net-tools</span><br></pre></td></tr></table></figure><br><h5 id="关于-IP-地址说明"><a href="#关于-IP-地址说明" class="headerlink" title="关于 IP 地址说明"></a><strong><font color='cornflowerblue'>关于 IP 地址说明</font></strong></h5><ul><li><strong>eth0</strong>: WSL2 虚拟网络接口，通常在 <code>172.x.x.x</code> 段</li><li><strong>lo</strong>: 本地回环地址 <code>127.0.0.1</code></li></ul><p><strong>示例输出：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hostname -I</span><br><span class="line">172.24.240.100</span><br></pre></td></tr></table></figure><p>这个 IP 地址可以用于从 Windows 访问 WSL2 中的服务</p><br><h4 id="2-2、查看用户信息"><a href="#2-2、查看用户信息" class="headerlink" title="2-2、查看用户信息"></a><strong><font color='#10c300'>2-2、查看用户信息</font></strong></h4><h5 id="查看用户信息"><a href="#查看用户信息" class="headerlink" title="查看用户信息"></a><strong><font color='cornflowerblue'>查看用户信息</font></strong></h5><p><strong>查看当前用户</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">whoami</span></span><br></pre></td></tr></table></figure><p><strong>查看所有用户</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/passwd</span><br></pre></td></tr></table></figure><p><strong>查看所有普通用户（UID &gt;&#x3D; 1000）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&#x27;$3 &gt;= 1000 &#123;print $1&#125;&#x27;</span> /etc/passwd</span><br></pre></td></tr></table></figure><p><strong>查看当前登录用户的详细信息</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">finger $(<span class="built_in">whoami</span>)  <span class="comment"># 需要安装 finger</span></span><br></pre></td></tr></table></figure><br><h5 id="密码管理"><a href="#密码管理" class="headerlink" title="密码管理"></a><strong><font color='cornflowerblue'>密码管理</font></strong></h5><p><strong>⚠️ 重要说明</strong><br><strong>无法直接查看密码</strong>，因为密码是加密存储的，在 <code>/etc/shadow</code> 文件中</p><p><strong>查看密码状态</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> passwd -S username</span><br></pre></td></tr></table></figure><p>会显示状态：</p><ul><li><code>P</code> &#x3D; 已设置密码</li><li><code>NP</code> &#x3D; 未设置密码</li><li><code>L</code> &#x3D; 账户被锁定</li></ul><br><h5 id="设置-修改密码"><a href="#设置-修改密码" class="headerlink" title="设置&#x2F;修改密码"></a><strong><font color='cornflowerblue'>设置&#x2F;修改密码</font></strong></h5><p><strong>修改当前用户密码</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure><p><strong>修改其他用户密码（需要 root 权限）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> passwd username</span><br></pre></td></tr></table></figure><p><strong>从 Windows 重置 WSL 用户密码</strong></p><p>如果忘记了密码，可以在 <strong>PowerShell</strong> 或 <strong>CMD</strong> 中执行：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 以 root 为默认用户</span></span><br><span class="line">wsl <span class="literal">-u</span> root</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 在 WSL 中重置密码</span></span><br><span class="line">passwd your_username</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 退出并恢复默认用户（可选）</span></span><br><span class="line"><span class="comment"># 编辑 /etc/wsl.conf 来使用默认用户</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><p>或者一条命令：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl <span class="literal">-u</span> root passwd your_username</span><br></pre></td></tr></table></figure><br><h5 id="查看-sudo-权限用户"><a href="#查看-sudo-权限用户" class="headerlink" title="查看 sudo 权限用户"></a><strong><font color='cornflowerblue'>查看 sudo 权限用户</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看 sudo 组成员</span></span><br><span class="line">getent group <span class="built_in">sudo</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">grep <span class="string">&#x27;^sudo:&#x27;</span> /etc/group</span><br></pre></td></tr></table></figure><br><h5 id="管理用户和权限"><a href="#管理用户和权限" class="headerlink" title="管理用户和权限"></a><strong><font color='cornflowerblue'>管理用户和权限</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建新用户</span></span><br><span class="line"><span class="built_in">sudo</span> adduser newuser</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除用户</span></span><br><span class="line"><span class="built_in">sudo</span> deluser username</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将用户添加到 sudo 组</span></span><br><span class="line"><span class="built_in">sudo</span> usermod -aG <span class="built_in">sudo</span> username</span><br></pre></td></tr></table></figure><p><strong>提示</strong>：WSL2 首次安装时需要你创建用户和密码，如果忘记需要重置用户账号。</p><br><hr><h3 id="三、使用FinalShell连接WSL2"><a href="#三、使用FinalShell连接WSL2" class="headerlink" title="三、使用FinalShell连接WSL2"></a><strong><font color='red'>三、使用FinalShell连接WSL2</font></strong></h3><h4 id="3-1、连接原理"><a href="#3-1、连接原理" class="headerlink" title="3-1、连接原理"></a><strong><font color='#10c300'>3-1、连接原理</font></strong></h4><p>WSL2 默认<strong>没有开启 SSH 服务</strong>，需要手动安装和配置。</p><br><h4 id="3-2、安装和配置SSH服务"><a href="#3-2、安装和配置SSH服务" class="headerlink" title="3-2、安装和配置SSH服务"></a><strong><font color='#10c300'>3-2、安装和配置SSH服务</font></strong></h4><h5 id="1️⃣-在-WSL2-中安装-SSH-服务"><a href="#1️⃣-在-WSL2-中安装-SSH-服务" class="headerlink" title="1️⃣ 在 WSL2 中安装 SSH 服务"></a><strong><font color='cornflowerblue'>1️⃣ 在 WSL2 中安装 SSH 服务</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更新软件包列表</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 OpenSSH 服务器</span></span><br><span class="line"><span class="built_in">sudo</span> apt install openssh-server -y</span><br></pre></td></tr></table></figure><br><h5 id="2️⃣-配置-SSH-服务"><a href="#2️⃣-配置-SSH-服务" class="headerlink" title="2️⃣ 配置 SSH 服务"></a><strong><font color='cornflowerblue'>2️⃣ 配置 SSH 服务</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑 SSH 配置文件</span></span><br><span class="line"><span class="built_in">sudo</span> nano /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p><strong>修改以下配置项</strong>（使用 <code>Ctrl+W</code> 搜索）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Port 22                          <span class="comment"># 确认端口</span></span><br><span class="line">PermitRootLogin no               <span class="comment"># 禁止 root 登录（推荐）</span></span><br><span class="line">PasswordAuthentication <span class="built_in">yes</span>       <span class="comment"># 启用密码认证</span></span><br></pre></td></tr></table></figure><p><strong>保存</strong>：<br>按 <code>Ctrl + O</code>(屏幕底部会提示 <code>File Name to Write:</code>)<br>然后按 <strong>Enter</strong> 确认保存。</p><p><strong>退出</strong>：<br>按 <code>Ctrl + X</code>。</p><br><h5 id="3️⃣-启动-SSH-服务"><a href="#3️⃣-启动-SSH-服务" class="headerlink" title="3️⃣ 启动 SSH 服务"></a><strong><font color='cornflowerblue'>3️⃣ 启动 SSH 服务</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动 SSH 服务</span></span><br><span class="line"><span class="built_in">sudo</span> service ssh start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查 SSH 服务状态</span></span><br><span class="line"><span class="built_in">sudo</span> service ssh status</span><br></pre></td></tr></table></figure><p>如果看到以下输出，说明 SSH 服务已成功启动：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Active: active (running) since Sat 2026-01-17 19:50:01 CST; 4s ago</span><br></pre></td></tr></table></figure><p><strong>状态是 <code>active (running)</code></strong>，说明服务正在运行。</p><p>关键信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Server listening on 0.0.0.0 port 22.</span><br><span class="line">Server listening on :: port 22.</span><br></pre></td></tr></table></figure><p><strong>SSH 服务正在监听 22 端口</strong>，可以接受连接了。</p><br><h5 id="4️⃣-设置-SSH-自动启动（可选）"><a href="#4️⃣-设置-SSH-自动启动（可选）" class="headerlink" title="4️⃣ 设置 SSH 自动启动（可选）"></a><strong><font color='cornflowerblue'>4️⃣ 设置 SSH 自动启动（可选）</font></strong></h5><p>每次启动 WSL2 时自动启动 SSH：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑或创建 /etc/wsl.conf</span></span><br><span class="line"><span class="built_in">sudo</span> nano /etc/wsl.conf</span><br></pre></td></tr></table></figure><p>添加以下内容：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[boot]</span></span><br><span class="line"><span class="attr">command</span>=<span class="string">&quot;service ssh start&quot;</span></span><br></pre></td></tr></table></figure><br><h5 id="5️⃣-获取-WSL2-的-IP-地址"><a href="#5️⃣-获取-WSL2-的-IP-地址" class="headerlink" title="5️⃣ 获取 WSL2 的 IP 地址"></a><strong><font color='cornflowerblue'>5️⃣ 获取 WSL2 的 IP 地址</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname -I</span><br></pre></td></tr></table></figure><p>记录这个 IP，例如：<code>172.24.240.100</code></p><br><h5 id="6️⃣-在-FinalShell-中创建连接"><a href="#6️⃣-在-FinalShell-中创建连接" class="headerlink" title="6️⃣ 在 FinalShell 中创建连接"></a><strong><font color='cornflowerblue'>6️⃣ 在 FinalShell 中创建连接</font></strong></h5><ol><li><p><strong>打开 FinalShell</strong></p></li><li><p><strong>新建连接</strong> → 选择 <strong>SSH</strong></p></li><li><p>填写信息：</p><ul><li><strong>名称</strong>：WSL2-Ubuntu（自定义）</li><li><strong>主机</strong>：<code>172.x.x.x</code>（你的 WSL2 IP）</li><li><strong>端口</strong>：<code>22</code></li><li><strong>认证方式</strong>：密码</li><li><strong>用户名</strong>：你的 WSL2 用户名</li><li><strong>密码</strong>：你的 WSL2 密码</li></ul></li><li><p><strong>保存并连接</strong></p></li></ol><br><h4 id="3-3、常见问题排查"><a href="#3-3、常见问题排查" class="headerlink" title="3-3、常见问题排查"></a><strong><font color='#10c300'>3-3、常见问题排查</font></strong></h4><h5 id="❌-问题1：连接超时"><a href="#❌-问题1：连接超时" class="headerlink" title="❌ 问题1：连接超时"></a><strong><font color='cornflowerblue'>❌ 问题1：连接超时</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查 SSH 是否运行</span></span><br><span class="line"><span class="built_in">sudo</span> service ssh status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果没有运行，启动服务</span></span><br><span class="line"><span class="built_in">sudo</span> service ssh start</span><br></pre></td></tr></table></figure><br><h5 id="❌-问题2：端口被占用"><a href="#❌-问题2：端口被占用" class="headerlink" title="❌ 问题2：端口被占用"></a><strong><font color='cornflowerblue'>❌ 问题2：端口被占用</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查 22 端口是否占用</span></span><br><span class="line"><span class="built_in">sudo</span> netstat -tlnp | grep :22</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果使用其他端口，如 2222</span></span><br><span class="line"><span class="built_in">sudo</span> nano /etc/ssh/sshd_config</span><br><span class="line"><span class="comment"># 修改 Port 为 2222</span></span><br><span class="line"><span class="built_in">sudo</span> service ssh restart</span><br></pre></td></tr></table></figure><br><h5 id="❌-问题3：防火墙阻拦"><a href="#❌-问题3：防火墙阻拦" class="headerlink" title="❌ 问题3：防火墙阻拦"></a><strong><font color='cornflowerblue'>❌ 问题3：防火墙阻拦</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看防火墙状态</span></span><br><span class="line"><span class="built_in">sudo</span> ufw status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果已启用，允许 SSH</span></span><br><span class="line"><span class="built_in">sudo</span> ufw allow 22/tcp</span><br></pre></td></tr></table></figure><br><h5 id="❌-问题4：IP-地址变化"><a href="#❌-问题4：IP-地址变化" class="headerlink" title="❌ 问题4：IP 地址变化"></a><strong><font color='cornflowerblue'>❌ 问题4：IP 地址变化</font></strong></h5><p><strong>问题原因：</strong></p><p>WSL2 使用虚拟网络适配器，每次重启 WSL2 或 Windows 时，WSL2 的 IP 地址可能会发生变化（例如从 <code>172.17.114.127</code> 变成 <code>172.24.240.100</code>）。这会导致 FinalShell 中保存的连接配置失效，需要频繁更新 IP 地址。</p><p><strong>解决方案A：使用 localhost + 端口转发（推荐）</strong></p><p>通过 Windows 的端口转发功能，将 Windows 的某个端口映射到 WSL2 的 SSH 端口，这样无论 WSL2 的 IP 如何变化，都可以通过 <code>localhost</code> 连接。</p><p><strong>步骤：</strong></p><ol><li><strong>获取当前 WSL2 的 IP 地址</strong></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 WSL2 中执行</span></span><br><span class="line">hostname -I</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>在 Windows PowerShell（管理员）中配置端口转发</strong></li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将 Windows 的 2222 端口转发到 WSL2 的 22 端口</span></span><br><span class="line"><span class="comment"># 注意：需要替换 172.x.x.x 为实际的 WSL2 IP</span></span><br><span class="line">netsh interface portproxy add v4tov4 listenport=<span class="number">2222</span> listenaddress=<span class="number">0.0</span>.<span class="number">0.0</span> connectport=<span class="number">22</span> connectaddress=<span class="number">172</span>.x.x.x</span><br></pre></td></tr></table></figure><ol start="3"><li><strong>在 FinalShell 中使用固定地址连接</strong><ul><li><strong>主机</strong>：<code>localhost</code> 或 <code>127.0.0.1</code></li><li><strong>端口</strong>：<code>2222</code></li></ul></li></ol><p>**⚠️ 注意：**每次 WSL2 IP 变化后，需要重新执行端口转发命令。可以创建一个 PowerShell 脚本自动获取 IP 并配置转发。</p><p><strong>解决方案B：使用 Windows Terminal（最简单）</strong></p><p>Windows Terminal 是 Windows 10&#x2F;11 自带的终端工具，可以直接启动 WSL2，无需 SSH 连接。</p><p><strong>优点：</strong></p><ul><li>✅ 无需配置 SSH</li><li>✅ 无需担心 IP 变化</li><li>✅ 启动速度快</li><li>✅ 集成度高</li></ul><p><strong>使用方法：</strong></p><ol><li>打开 <strong>Windows Terminal</strong></li><li>点击下拉箭头，选择 <strong>Ubuntu</strong>（或你的发行版）</li><li>直接使用，就像使用 SSH 客户端一样</li></ol><p><strong>解决方案C：配置静态 IP（高级）</strong></p><p>可以配置 WSL2 使用固定 IP，但需要修改 Windows 和 WSL2 的网络配置，比较复杂，不推荐普通用户使用。</p><br><h5 id="❌-问题5：密码认证失败"><a href="#❌-问题5：密码认证失败" class="headerlink" title="❌ 问题5：密码认证失败"></a><strong><font color='cornflowerblue'>❌ 问题5：密码认证失败</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 确认密码认证已启用</span></span><br><span class="line">grep <span class="string">&quot;PasswordAuthentication&quot;</span> /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置密码</span></span><br><span class="line">passwd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启 SSH 服务</span></span><br><span class="line"><span class="built_in">sudo</span> service ssh restart</span><br></pre></td></tr></table></figure><br><h4 id="3-4、快速测试连接"><a href="#3-4、快速测试连接" class="headerlink" title="3-4、快速测试连接"></a><strong><font color='#10c300'>3-4、快速测试连接</font></strong></h4><p>在 <strong>Windows CMD</strong> 或 <strong>PowerShell</strong> 中测试：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh your_username@172.x.x.x</span><br></pre></td></tr></table></figure><p>如果能够连接，说明 SSH 配置正确，FinalShell 也应该能连接。</p><p><strong>SSH 连接格式说明：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh 用户名@IP地址</span><br><span class="line">ssh 用户名@IP地址 -p 端口号</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh zheng_hb@172.17.114.127</span><br><span class="line">ssh zheng_hb@172.17.114.127 -p 22</span><br><span class="line">ssh root@192.168.1.100 -p 2222</span><br></pre></td></tr></table></figure><br><hr><h3 id="四、关于IP地址变化的详细说明"><a href="#四、关于IP地址变化的详细说明" class="headerlink" title="四、关于IP地址变化的详细说明"></a><strong><font color='red'>四、关于IP地址变化的详细说明</font></strong></h3><h4 id="4-1、为什么WSL2的IP地址会变化？"><a href="#4-1、为什么WSL2的IP地址会变化？" class="headerlink" title="4-1、为什么WSL2的IP地址会变化？"></a><strong><font color='#10c300'>4-1、为什么WSL2的IP地址会变化？</font></strong></h4><p>WSL2 使用虚拟网络适配器（Virtual Network Adapter）来创建独立的网络环境。每次：</p><ul><li>重启 Windows</li><li>重启 WSL2（<code>wsl --shutdown</code> 后重新启动）</li><li>Windows 网络适配器重置</li></ul><p>WSL2 的虚拟网络可能会重新分配 IP 地址，导致 IP 地址发生变化。</p><p><strong>示例：</strong></p><ul><li>第一次启动：<code>172.17.114.127</code></li><li>重启后：<code>172.24.240.100</code></li><li>再次重启：<code>172.18.56.89</code></li></ul><br><h4 id="4-2、IP地址变化的影响"><a href="#4-2、IP地址变化的影响" class="headerlink" title="4-2、IP地址变化的影响"></a><strong><font color='#10c300'>4-2、IP地址变化的影响</font></strong></h4><p><strong>影响场景：</strong></p><ul><li>❌ FinalShell 中保存的连接配置失效</li><li>❌ 需要频繁更新 IP 地址</li><li>❌ 如果使用 IP 地址访问 WSL2 中的服务（如 Web 服务器），需要重新配置</li></ul><p><strong>不受影响：</strong></p><ul><li>✅ Windows Terminal 直接启动 WSL2（不依赖 IP）</li><li>✅ 在 Windows 中通过 <code>localhost</code> 访问 WSL2 服务（Windows 会自动处理）</li></ul><br><h4 id="4-3、推荐解决方案对比"><a href="#4-3、推荐解决方案对比" class="headerlink" title="4-3、推荐解决方案对比"></a><strong><font color='#10c300'>4-3、推荐解决方案对比</font></strong></h4><table><thead><tr><th align="left">方案</th><th align="left">优点</th><th align="left">缺点</th><th align="left">适用场景</th></tr></thead><tbody><tr><td align="left"><strong>Windows Terminal</strong></td><td align="left">无需配置、稳定可靠、启动快</td><td align="left">界面相对简单</td><td align="left">日常开发使用（最推荐）</td></tr><tr><td align="left"><strong>端口转发</strong></td><td align="left">可以使用 FinalShell 等专业工具</td><td align="left">需要手动配置、IP变化后需重新配置</td><td align="left">需要 FinalShell 的高级功能</td></tr><tr><td align="left"><strong>静态IP</strong></td><td align="left">IP 固定不变</td><td align="left">配置复杂、容易出错</td><td align="left">特殊需求场景</td></tr></tbody></table><br><h4 id="4-4、自动端口转发脚本（可选）"><a href="#4-4、自动端口转发脚本（可选）" class="headerlink" title="4-4、自动端口转发脚本（可选）"></a><strong><font color='#10c300'>4-4、自动端口转发脚本（可选）</font></strong></h4><p>如果你坚持使用 FinalShell，可以创建一个 PowerShell 脚本自动配置端口转发：</p><p><strong>创建脚本 <code>wsl-port-forward.ps1</code>：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取 WSL2 IP 地址</span></span><br><span class="line"><span class="variable">$wslIp</span> = (wsl hostname <span class="literal">-I</span>).Trim()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除旧的端口转发规则</span></span><br><span class="line">netsh interface portproxy delete v4tov4 listenport=<span class="number">2222</span> listenaddress=<span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加新的端口转发规则</span></span><br><span class="line">netsh interface portproxy add v4tov4 listenport=<span class="number">2222</span> listenaddress=<span class="number">0.0</span>.<span class="number">0.0</span> connectport=<span class="number">22</span> connectaddress=<span class="variable">$wslIp</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Write-Host</span> <span class="string">&quot;端口转发已配置: localhost:2222 -&gt; <span class="variable">$wslIp:22</span>&quot;</span></span><br></pre></td></tr></table></figure><p><strong>使用方法：</strong><br>每次启动 WSL2 后，以管理员身份运行此脚本即可。</p><br><hr><h3 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a><strong><font color='red'>五、总结</font></strong></h3><p>本指南涵盖了 WSL2 的安装、卸载、基础操作和远程连接配置，帮助你快速上手使用 WSL2 开发环境。</p><p><strong>主要功能：</strong></p><ul><li>✅ WSL2 安装与卸载</li><li>✅ IP 地址查看</li><li>✅ 用户管理</li><li>✅ SSH 服务配置</li><li>✅ FinalShell 远程连接</li></ul><p><strong>注意事项：</strong></p><ul><li>安装和卸载操作需要管理员权限</li><li>卸载发行版会删除所有数据，请提前备份</li><li><strong>WSL2 的 IP 地址可能会变化</strong>：<ul><li><strong>推荐方案</strong>：直接使用 <strong>Windows Terminal</strong>，无需配置，稳定可靠</li><li><strong>备选方案</strong>：使用端口转发 + FinalShell，但需要处理 IP 变化问题</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、WSL2安装与卸载&quot;&gt;&lt;a href=&quot;#一、WSL2安装与卸载&quot; class=&quot;headerlink&quot; title=&quot;一、WSL2安装与卸载&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、WSL2安装与卸载&lt;/font&gt;&lt;/strong&gt;</summary>
      
    
    
    
    <category term="后端与运维" scheme="http://example.com/categories/%E5%90%8E%E7%AB%AF%E4%B8%8E%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="Windows" scheme="http://example.com/tags/Windows/"/>
    
    <category term="WSL2" scheme="http://example.com/tags/WSL2/"/>
    
    <category term="Linux" scheme="http://example.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Git使用SSH拉取代码配置指南</title>
    <link href="http://example.com/posts/65464545tryt435.html"/>
    <id>http://example.com/posts/65464545tryt435.html</id>
    <published>2026-01-19T00:00:00.000Z</published>
    <updated>2026-01-27T15:41:13.666Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、配置-Git-用户信息"><a href="#一、配置-Git-用户信息" class="headerlink" title="一、配置 Git 用户信息"></a><strong><font color='red'>一、配置 Git 用户信息</font></strong></h3><p>这些信息会记录在**每次 Git 提交（commit）**中，用于标识”谁提交了这段代码”。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&#x27;zhenghong&#x27;</span></span><br><span class="line">git config --global user.email <span class="string">&#x27;772198520@qq.com&#x27;</span></span><br></pre></td></tr></table></figure><br><p><strong>验证当前配置</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global --list</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260119231528481.png" alt="image-20260119231528481"></p><br><h3 id="二、生成-SSH-密钥"><a href="#二、生成-SSH-密钥" class="headerlink" title="二、生成 SSH 密钥"></a><strong><font color='red'>二、生成 SSH 密钥</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&#x27;772198520@qq.com&#x27;</span></span><br><span class="line"><span class="comment"># 或使用更安全的 ed25519 算法（推荐）</span></span><br><span class="line">ssh-keygen -t ed25519 -C <span class="string">&#x27;772198520@qq.com&#x27;</span></span><br></pre></td></tr></table></figure><p>连续按 3 次回车（使用默认路径和空密码）</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260119231535380.png" alt="image-20260119231535380"></p><br><h3 id="三、查看并复制公钥"><a href="#三、查看并复制公钥" class="headerlink" title="三、查看并复制公钥"></a><strong><font color='red'>三、查看并复制公钥</font></strong></h3><p>默认生成秘钥的位置C:\Users\zheng_hb.ssh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> C:\Users\zheng_hb\.ssh\id_rsa.pub</span><br><span class="line"><span class="comment"># 或（如果用 ed25519）</span></span><br><span class="line"><span class="built_in">type</span> C:\Users\zheng_hb\.ssh\id_ed25519.pub</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260119232637916.png" alt="image-20260119232637916"></p><br><h3 id="四、添加公钥到-Git-平台"><a href="#四、添加公钥到-Git-平台" class="headerlink" title="四、添加公钥到 Git 平台"></a><strong><font color='red'>四、添加公钥到 Git 平台</font></strong></h3><p><strong>以GitHub为例</strong></p><ol><li>登录 GitHub</li><li>点击头像 → Settings → SSH and GPG keys</li><li>点击 “New SSH key”</li><li>粘贴公钥内容，保存</li></ol><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260119232647077.png" alt="image-20260119232647077"></p><br><h3 id="五、测试连接"><a href="#五、测试连接" class="headerlink" title="五、测试连接"></a><strong><font color='red'>五、测试连接</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GitHub</span></span><br><span class="line">ssh -T git@github.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># GitLab</span></span><br><span class="line">ssh -T git@gitlab.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># Gitee</span></span><br><span class="line">ssh -T git@gitee.com            </span><br></pre></td></tr></table></figure><p>成功返回示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi zhbCloud! You<span class="string">&#x27;ve successfully authenticated...</span></span><br></pre></td></tr></table></figure><br><h3 id="六、克隆代码"><a href="#六、克隆代码" class="headerlink" title="六、克隆代码"></a><strong><font color='red'>六、克隆代码</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:username/repository.git</span><br></pre></td></tr></table></figure><br><h3 id="七、如果之前克隆的是-HTTPS-仓库"><a href="#七、如果之前克隆的是-HTTPS-仓库" class="headerlink" title="七、如果之前克隆的是 HTTPS 仓库"></a><strong><font color='red'>七、如果之前克隆的是 HTTPS 仓库</font></strong></h3><p>需要将远程地址改为 SSH 格式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前远程地址</span></span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看结果</span></span><br><span class="line">origin  https://github.com/zhbCloud/仓库名.git (fetch)</span><br><span class="line">origin  https://github.com/zhbCloud/仓库名.git (push)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改为 SSH</span></span><br><span class="line">git remote set-url origin git@github.com:zhbCloud/仓库名.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证修改</span></span><br><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改成功</span></span><br><span class="line">origin  git@github.com:zhbCloud/仓库名.git (fetch)</span><br><span class="line">origin  git@github.com:zhbCloud/仓库名.git (push)</span><br></pre></td></tr></table></figure><br><p><strong>TortoiseGit中修改</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260119232657035.png" alt="image-20260119232657035"></p><br><h3 id="八、解决-TortoiseGit-SSH-认证问题"><a href="#八、解决-TortoiseGit-SSH-认证问题" class="headerlink" title="八、解决 TortoiseGit SSH 认证问题"></a><strong><font color='red'>八、解决 TortoiseGit SSH 认证问题</font></strong></h3><p>TortoiseGit 使用的是 <strong>PuTTY</strong> 的 SSH 客户端，而命令行用的是 <strong>OpenSSH</strong>，它们的密钥格式不兼容！</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260119232701820.png" alt="image-20260119232701820"></p><br><p><strong>让 TortoiseGit 使用 OpenSSH</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置 TortoiseGit 使用 Git 的 SSH</span></span><br><span class="line">右键 → TortoiseGit → Settings</span><br><span class="line">→ Network</span><br><span class="line">→ SSH Client: 修改为 Git 的 ssh.exe 路径</span><br></pre></td></tr></table></figure><br><p><strong>常见ssh.exe路径</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\Git\usr\bin\ssh.exe</span><br><span class="line"><span class="comment"># 或者直接写</span></span><br><span class="line">ssh.exe</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260119232709254.png" alt="image-20260119232709254"></p><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、配置-Git-用户信息&quot;&gt;&lt;a href=&quot;#一、配置-Git-用户信息&quot; class=&quot;headerlink&quot; title=&quot;一、配置 Git 用户信息&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、配置 Git 用户信息&lt;/font&gt;&lt;</summary>
      
    
    
    
    <category term="工具" scheme="http://example.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Git" scheme="http://example.com/tags/Git/"/>
    
    <category term="SSH" scheme="http://example.com/tags/SSH/"/>
    
    <category term="版本控制" scheme="http://example.com/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>Hyper-V虚拟机详细安装教程</title>
    <link href="http://example.com/posts/hyper-v-install.html"/>
    <id>http://example.com/posts/hyper-v-install.html</id>
    <published>2026-01-18T19:00:00.000Z</published>
    <updated>2026-01-27T15:41:13.666Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、Hyper-V简介"><a href="#一、Hyper-V简介" class="headerlink" title="一、Hyper-V简介 "></a><strong><font color='red'>一、Hyper-V简介 </font></strong></h3><h4 id="1-1、什么是Hyper-V"><a href="#1-1、什么是Hyper-V" class="headerlink" title="1-1、什么是Hyper-V"></a><strong><font color='#10c300'>1-1、什么是Hyper-V</font></strong></h4><p>Hyper-V 是微软开发的原生虚拟化平台，内置于 Windows 专业版、企业版和教育版系统中。它允许用户在单台物理计算机上创建和管理多个虚拟机，每个虚拟机都可以运行独立的操作系统。</p><br><h4 id="1-2、虚拟机软件对比"><a href="#1-2、虚拟机软件对比" class="headerlink" title="1-2、虚拟机软件对比"></a><strong><font color='#10c300'>1-2、虚拟机软件对比</font></strong></h4><p>下表对比了目前主流的虚拟机软件，帮助您选择合适的虚拟化解决方案：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260118191245387.png" alt="image-20260118191245387"></p><p><strong><code>注意：Hyper-V 作为 Windows 系统自带的虚拟化工具，无需额外安装第三方软件，性能优秀且与 Windows 系统集成度高。</code></strong></p><br><h3 id="二、系统要求与准备"><a href="#二、系统要求与准备" class="headerlink" title="二、系统要求与准备 "></a><strong><font color='red'>二、系统要求与准备 </font></strong></h3><h4 id="2-1、Windows版本要求"><a href="#2-1、Windows版本要求" class="headerlink" title="2-1、Windows版本要求"></a><strong><font color='#10c300'>2-1、Windows版本要求</font></strong></h4><p>Hyper-V 功能仅支持以下 Windows 版本：</p><ul><li>Windows 10 专业版&#x2F;企业版&#x2F;教育版</li><li>Windows 11 专业版&#x2F;企业版&#x2F;教育版</li><li>Windows Server 2016 及以上版本</li></ul><p><strong><code>注意：Windows 家庭版不支持 Hyper-V 功能。如果您使用的是家庭版，需要升级到专业版。可以从官方渠道或电商平台购买升级密钥。</code></strong></p><p>查看当前系统版本：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260118191729848.png" alt="image-20260118191729848"></p><br><h4 id="2-2、硬件要求"><a href="#2-2、硬件要求" class="headerlink" title="2-2、硬件要求"></a><strong><font color='#10c300'>2-2、硬件要求</font></strong></h4><p>使用 Hyper-V 需要满足以下硬件条件：</p><ul><li><strong>处理器：</strong> 64位处理器，支持二级地址转换（SLAT）</li><li><strong>内存：</strong> 至少 4GB RAM（建议 8GB 以上）</li><li><strong>存储空间：</strong> 根据虚拟机数量和用途，建议预留 50GB 以上</li><li><strong>BIOS设置：</strong> 需要在 BIOS 中启用虚拟化技术（Intel VT-x 或 AMD-V）</li></ul><br><h4 id="2-3、准备安装镜像"><a href="#2-3、准备安装镜像" class="headerlink" title="2-3、准备安装镜像"></a><strong><font color='#10c300'>2-3、准备安装镜像</font></strong></h4><p>在创建虚拟机之前，需要下载操作系统的 ISO 镜像文件。本教程以 Windows 10 为例：</p><ul><li><a href="https://www.microsoft.com/zh-cn/software-download/windows10">下载 Windows 10 官方镜像</a></li><li><a href="https://www.microsoft.com/zh-cn/software-download/windows11">下载 Windows 11 官方镜像</a></li></ul><p>也可以下载 Linux 发行版（如 Ubuntu、CentOS）的 ISO 镜像文件用于安装。</p><br><h3 id="三、启用Hyper-V功能"><a href="#三、启用Hyper-V功能" class="headerlink" title="三、启用Hyper-V功能 "></a><strong><font color='red'>三、启用Hyper-V功能 </font></strong></h3><h4 id="3-1、通过Windows功能启用"><a href="#3-1、通过Windows功能启用" class="headerlink" title="3-1、通过Windows功能启用"></a><strong><font color='#10c300'>3-1、通过Windows功能启用</font></strong></h4><h5 id="1）打开Windows功能"><a href="#1）打开Windows功能" class="headerlink" title="1）打开Windows功能"></a><strong><font color='cornflowerblue'>1）打开Windows功能</font></strong></h5><p>在 Windows 搜索框中输入”<strong>启用或关闭Windows功能</strong>“或”<strong>功能</strong>“，打开 Windows 功能设置窗口。</p><br><h5 id="2）勾选Hyper-V选项"><a href="#2）勾选Hyper-V选项" class="headerlink" title="2）勾选Hyper-V选项"></a><strong><font color='cornflowerblue'>2）勾选Hyper-V选项</font></strong></h5><p>在 Windows 功能列表中，找到并勾选以下选项：</p><ul><li><strong>Hyper-V</strong><ul><li>Hyper-V 管理工具</li><li>Hyper-V 平台</li></ul></li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260118191918620.png" alt="image-20260118191918620"></p><p>点击”<strong>确定</strong>“按钮，系统将自动安装 Hyper-V 相关组件。</p><br><h5 id="3）重启计算机"><a href="#3）重启计算机" class="headerlink" title="3）重启计算机"></a><strong><font color='cornflowerblue'>3）重启计算机</font></strong></h5><p>安装完成后，系统会提示重启计算机。点击”<strong>立即重启</strong>“使 Hyper-V 功能生效。</p><p><strong><code>注意：重启后 Hyper-V 服务会自动启动，您可以在开始菜单中找到&quot;Hyper-V 管理器&quot;。</code></strong></p><br><h4 id="3-2、通过PowerShell启用（可选）"><a href="#3-2、通过PowerShell启用（可选）" class="headerlink" title="3-2、通过PowerShell启用（可选）"></a><strong><font color='#10c300'>3-2、通过PowerShell启用（可选）</font></strong></h4><p>也可以使用 PowerShell 命令快速启用 Hyper-V：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Enable-WindowsOptionalFeature</span> <span class="literal">-Online</span> <span class="literal">-FeatureName</span> Microsoft<span class="literal">-Hyper-V</span> <span class="literal">-All</span></span><br></pre></td></tr></table></figure><p>执行命令后，同样需要重启计算机。</p><br><h3 id="四、创建和配置虚拟机"><a href="#四、创建和配置虚拟机" class="headerlink" title="四、创建和配置虚拟机 "></a><strong><font color='red'>四、创建和配置虚拟机 </font></strong></h3><h4 id="4-1、打开Hyper-V管理器"><a href="#4-1、打开Hyper-V管理器" class="headerlink" title="4-1、打开Hyper-V管理器"></a><strong><font color='#10c300'>4-1、打开Hyper-V管理器</font></strong></h4><p>在开始菜单中搜索并打开”<strong>Hyper-V 管理器</strong>“。Hyper-V 管理器是管理所有虚拟机的控制台。</p><br><h4 id="4-2、新建虚拟机"><a href="#4-2、新建虚拟机" class="headerlink" title="4-2、新建虚拟机"></a><strong><font color='#10c300'>4-2、新建虚拟机</font></strong></h4><h5 id="1）启动新建虚拟机向导"><a href="#1）启动新建虚拟机向导" class="headerlink" title="1）启动新建虚拟机向导"></a><strong><font color='cornflowerblue'>1）启动新建虚拟机向导</font></strong></h5><p>在 Hyper-V 管理器中，点击右侧的”<strong>新建</strong>“ &gt; “<strong>虚拟机</strong>“，启动新建虚拟机向导。</p><br><h5 id="2）指定名称和位置"><a href="#2）指定名称和位置" class="headerlink" title="2）指定名称和位置"></a><strong><font color='cornflowerblue'>2）指定名称和位置</font></strong></h5><p>为虚拟机指定一个有意义的名称（如”Win10-Dev”），并选择虚拟机文件的存储位置。</p><p><strong><code>建议：选择空间充足的磁盘驱动器存储虚拟机文件。</code></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260118193131223.png" alt="image-20260118193131223"></p><br><h5 id="3）指定代数"><a href="#3）指定代数" class="headerlink" title="3）指定代数"></a><strong><font color='cornflowerblue'>3）指定代数</font></strong></h5><p>选择虚拟机代数：</p><ul><li><strong>第一代：</strong> 适用于较旧的操作系统（如 Windows 7、Windows Server 2008 及更早版本）</li><li><strong>第二代：</strong> 适用于较新的操作系统（如 Windows 8.1、Windows 10、Windows 11 及 Windows Server 2012 以上版本），支持 UEFI 启动</li></ul><p><strong>本教程以安装 Windows 10 为例，选择”第一代”以获得更好的兼容性。</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260118193237778.png" alt="image-20260118193237778"></p><p><strong><code>注意：如果要安装 Windows 11，建议选择&quot;第二代&quot;虚拟机，因为 Windows 11 需要 UEFI 和 TPM 2.0 支持。</code></strong></p><br><h5 id="4）分配内存"><a href="#4）分配内存" class="headerlink" title="4）分配内存"></a><strong><font color='cornflowerblue'>4）分配内存</font></strong></h5><p>为虚拟机分配内存。根据要安装的操作系统和用途决定内存大小：</p><ul><li><strong>Windows 10：</strong> 建议至少 4GB（4096MB）</li><li><strong>Windows Server：</strong> 建议至少 4GB</li><li><strong>Linux桌面版：</strong> 建议至少 2GB</li></ul><p>可以勾选”<strong>为此虚拟机使用动态内存</strong>“选项，让 Hyper-V 自动调整内存分配。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260118193445956.png" alt="image-20260118193445956"></p><br><h5 id="5）配置网络"><a href="#5）配置网络" class="headerlink" title="5）配置网络"></a><strong><font color='cornflowerblue'>5）配置网络</font></strong></h5><p>选择默认的虚拟交换机。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260118193500644.png" alt="image-20260118193500644"></p><br><h5 id="6）连接虚拟硬盘"><a href="#6）连接虚拟硬盘" class="headerlink" title="6）连接虚拟硬盘"></a><strong><font color='cornflowerblue'>6）连接虚拟硬盘</font></strong></h5><p>配置虚拟硬盘：</p><ul><li><strong>创建虚拟硬盘：</strong> 指定虚拟硬盘大小（建议至少 60GB）和存储位置</li><li><strong>使用现有虚拟硬盘：</strong> 选择已有的 VHD&#x2F;VHDX 文件</li><li><strong>稍后附加虚拟硬盘：</strong> 跳过此步骤，稍后再添加</li></ul><p>本教程选择”<strong>创建虚拟硬盘</strong>“，设置大小为 60GB。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260118193653514.png" alt="image-20260118193653514"></p><br><h5 id="7）安装选项"><a href="#7）安装选项" class="headerlink" title="7）安装选项"></a><strong><font color='cornflowerblue'>7）安装选项</font></strong></h5><p>选择操作系统的安装方式：</p><ul><li><strong>从可启动的 CD&#x2F;DVD-ROM 安装操作系统：</strong> 选择之前下载的 ISO 镜像文件</li><li><strong>从网络安装操作系统：</strong> 通过 PXE 网络启动安装</li><li><strong>稍后安装操作系统：</strong> 先创建虚拟机，稍后再安装</li></ul><p>本教程选择”<strong>从映像文件(.iso)安装操作系统</strong>“，并浏览选择 Windows 10 的 ISO 镜像文件。</p><br><h5 id="8）完成创建"><a href="#8）完成创建" class="headerlink" title="8）完成创建"></a><strong><font color='cornflowerblue'>8）完成创建</font></strong></h5><p>检查所有配置信息，确认无误后点击”<strong>完成</strong>“按钮。虚拟机创建成功！</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20260118193735999.png" alt="image-20260118193735999"></p><p><strong><code>注意：此时虚拟机仅创建完成，还需要启动虚拟机并安装操作系统。</code></strong></p><br><h3 id="五、启动和安装操作系统"><a href="#五、启动和安装操作系统" class="headerlink" title="五、启动和安装操作系统 "></a><strong><font color='red'>五、启动和安装操作系统 </font></strong></h3><h4 id="5-1、启动虚拟机"><a href="#5-1、启动虚拟机" class="headerlink" title="5-1、启动虚拟机"></a><strong><font color='#10c300'>5-1、启动虚拟机</font></strong></h4><p>在 Hyper-V 管理器中，右键点击新创建的虚拟机，选择”<strong>启动</strong>“。然后右键选择”<strong>连接</strong>“打开虚拟机控制台窗口。</p><br><h4 id="5-2、安装操作系统"><a href="#5-2、安装操作系统" class="headerlink" title="5-2、安装操作系统"></a><strong><font color='#10c300'>5-2、安装操作系统</font></strong></h4><p>虚拟机启动后，会自动从 ISO 镜像文件引导，进入操作系统安装程序。按照安装向导的提示完成操作系统安装：</p><ol><li>选择语言、时间和键盘输入法</li><li>点击”<strong>现在安装</strong>“</li><li>输入产品密钥（或选择”<strong>我没有产品密钥</strong>“跳过）</li><li>选择操作系统版本</li><li>接受许可条款</li><li>选择”<strong>自定义：仅安装 Windows（高级）</strong>“</li><li>选择虚拟硬盘并进行分区</li><li>等待安装完成</li></ol><br><h4 id="5-3、安装集成服务（可选）"><a href="#5-3、安装集成服务（可选）" class="headerlink" title="5-3、安装集成服务（可选）"></a><strong><font color='#10c300'>5-3、安装集成服务（可选）</font></strong></h4><p>对于 Windows 虚拟机，Hyper-V 集成服务通常会自动安装。集成服务提供了增强功能，如：</p><ul><li>鼠标集成</li><li>时间同步</li><li>数据交换</li><li>心跳检测</li></ul><p>对于 Linux 虚拟机，可能需要手动安装集成服务组件。</p><br><h3 id="六、常见问题与解决方案"><a href="#六、常见问题与解决方案" class="headerlink" title="六、常见问题与解决方案 "></a><strong><font color='red'>六、常见问题与解决方案 </font></strong></h3><h4 id="6-1、无法启用Hyper-V"><a href="#6-1、无法启用Hyper-V" class="headerlink" title="6-1、无法启用Hyper-V"></a><strong><font color='#10c300'>6-1、无法启用Hyper-V</font></strong></h4><p><strong>问题：</strong> 勾选 Hyper-V 选项后提示无法安装。</p><p><strong>解决方案：</strong></p><ol><li>检查 Windows 版本是否为专业版&#x2F;企业版&#x2F;教育版</li><li>确认 CPU 支持虚拟化技术（Intel VT-x 或 AMD-V）</li><li>进入 BIOS 设置，启用虚拟化功能（通常在 CPU Configuration 或 Advanced 选项中）</li></ol><br><h4 id="6-2、虚拟机无法联网"><a href="#6-2、虚拟机无法联网" class="headerlink" title="6-2、虚拟机无法联网"></a><strong><font color='#10c300'>6-2、虚拟机无法联网</font></strong></h4><p><strong>问题：</strong> 虚拟机创建后无法访问网络。</p><p><strong>解决方案：</strong></p><ol><li>检查虚拟机网络适配器是否连接到虚拟交换机</li><li>创建外部虚拟交换机并绑定到物理网络适配器</li><li>检查虚拟机内部的网络配置（IP地址、DNS等）</li></ol><br><h4 id="6-3、虚拟机性能较差"><a href="#6-3、虚拟机性能较差" class="headerlink" title="6-3、虚拟机性能较差"></a><strong><font color='#10c300'>6-3、虚拟机性能较差</font></strong></h4><p><strong>问题：</strong> 虚拟机运行缓慢，响应速度慢。</p><p><strong>解决方案：</strong></p><ol><li>增加虚拟机分配的内存和处理器核心数</li><li>启用动态内存功能</li><li>将虚拟硬盘存储在 SSD 固态硬盘上</li><li>确保主机系统有足够的可用资源</li></ol><br><h4 id="6-4、与其他虚拟化软件冲突"><a href="#6-4、与其他虚拟化软件冲突" class="headerlink" title="6-4、与其他虚拟化软件冲突"></a><strong><font color='#10c300'>6-4、与其他虚拟化软件冲突</font></strong></h4><p><strong>问题：</strong> 启用 Hyper-V 后，VMware 或 VirtualBox 无法使用。</p><p><strong>解决方案：</strong></p><p>Hyper-V 会独占虚拟化功能，无法与其他虚拟化软件同时运行。如需使用其他虚拟化软件，需要暂时禁用 Hyper-V：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Disable-WindowsOptionalFeature</span> <span class="literal">-Online</span> <span class="literal">-FeatureName</span> Microsoft<span class="literal">-Hyper-V-Hypervisor</span></span><br></pre></td></tr></table></figure><p>禁用后需要重启计算机。</p><br><h3 id="七、进阶配置与优化"><a href="#七、进阶配置与优化" class="headerlink" title="七、进阶配置与优化 "></a><strong><font color='red'>七、进阶配置与优化 </font></strong></h3><h4 id="7-1、快照功能"><a href="#7-1、快照功能" class="headerlink" title="7-1、快照功能"></a><strong><font color='#10c300'>7-1、快照功能</font></strong></h4><p>Hyper-V 支持虚拟机快照（检查点）功能，可以保存虚拟机的某个时刻的状态。在进行重要操作前创建快照，出现问题时可以快速恢复。</p><p><strong>创建快照：</strong> 在虚拟机上右键选择”<strong>检查点</strong>“。</p><br><h4 id="7-2、导出和导入虚拟机"><a href="#7-2、导出和导入虚拟机" class="headerlink" title="7-2、导出和导入虚拟机"></a><strong><font color='#10c300'>7-2、导出和导入虚拟机</font></strong></h4><p>可以导出虚拟机用于备份或迁移到其他主机：</p><p><strong>导出：</strong> 右键虚拟机 &gt; “<strong>导出</strong>“ &gt; 选择导出路径</p><p><strong>导入：</strong> 在 Hyper-V 管理器中选择”<strong>导入虚拟机</strong>“，选择导出的虚拟机文件夹。</p><br><h4 id="7-3、增强会话模式"><a href="#7-3、增强会话模式" class="headerlink" title="7-3、增强会话模式"></a><strong><font color='#10c300'>7-3、增强会话模式</font></strong></h4><p>启用增强会话模式可以获得更好的用户体验，支持剪贴板共享、文件拖放、USB 重定向等功能。</p><p>在虚拟机设置中启用”<strong>增强会话模式</strong>“选项即可。</p><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、Hyper-V简介&quot;&gt;&lt;a href=&quot;#一、Hyper-V简介&quot; class=&quot;headerlink&quot; title=&quot;一、Hyper-V简介 &quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、Hyper-V简介 &lt;/font&gt;&lt;/stron</summary>
      
    
    
    
    <category term="后端与运维" scheme="http://example.com/categories/%E5%90%8E%E7%AB%AF%E4%B8%8E%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="虚拟机" scheme="http://example.com/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
    <category term="Hyper-V" scheme="http://example.com/tags/Hyper-V/"/>
    
    <category term="Windows" scheme="http://example.com/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>React 完全指南 (React 18 &amp; 19)</title>
    <link href="http://example.com/posts/4179c0b9.html"/>
    <id>http://example.com/posts/4179c0b9.html</id>
    <published>2025-12-02T10:28:38.000Z</published>
    <updated>2026-01-27T15:41:13.666Z</updated>
    
    <content type="html"><![CDATA[<h1 id="React-初学者完全指南-React-18-19"><a href="#React-初学者完全指南-React-18-19" class="headerlink" title="React 初学者完全指南 (React 18 &amp; 19)"></a>React 初学者完全指南 (React 18 &amp; 19)</h1><blockquote><p>📚 本指南旨在帮助初学者快速掌握 React 的核心概念和最新特性</p></blockquote><hr><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol><li><a href="#%E4%B8%80-react-%E7%AE%80%E4%BB%8B">React 简介</a></li><li><a href="#%E4%BA%8C-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">环境搭建</a></li><li><a href="#%E4%B8%89-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">核心概念</a></li><li><a href="#%E5%9B%9B-react-hooks-%E8%AF%A6%E8%A7%A3">React Hooks 详解</a></li><li><a href="#%E4%BA%94-hoc-%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6">HOC 高阶组件</a></li><li><a href="#5-react-18-%E6%96%B0%E7%89%B9%E6%80%A7">React 18 新特性</a></li><li><a href="#6-react-19-%E6%96%B0%E7%89%B9%E6%80%A7">React 19 新特性</a></li><li><a href="#7-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">最佳实践</a></li><li><a href="#8-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">常见问题与解决方案</a></li><li><a href="#9-%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90%E6%8E%A8%E8%8D%90">学习资源推荐</a></li></ol><br><h2 id="一、React-简介"><a href="#一、React-简介" class="headerlink" title="一、React 简介"></a><strong>一、React 简介</strong></h2><h3 id="1-1-什么是-React？"><a href="#1-1-什么是-React？" class="headerlink" title="1.1 什么是 React？"></a><strong><font color='red'>1.1 什么是 React？</font></strong></h3><p>React 是由 Facebook（现 Meta）开发的一个用于构建用户界面的 JavaScript 库。它的核心思想是：</p><ul><li><strong>组件化</strong>：将 UI 拆分成独立、可复用的组件</li><li><strong>声明式</strong>：描述 UI 应该是什么样子，而不是如何改变它</li><li><strong>单向数据流</strong>：数据从父组件流向子组件，使应用更可预测</li></ul><h3 id="1-2-为什么选择-React？"><a href="#1-2-为什么选择-React？" class="headerlink" title="1.2 为什么选择 React？"></a><strong><font color='red'>1.2 为什么选择 React？</font></strong></h3><table><thead><tr><th>优势</th><th>说明</th></tr></thead><tbody><tr><td>🚀 高性能</td><td>虚拟 DOM 最小化真实 DOM 操作</td></tr><tr><td>🧩 组件复用</td><td>一次编写，多处使用</td></tr><tr><td>🌐 生态丰富</td><td>大量第三方库和工具支持</td></tr><tr><td>📱 跨平台</td><td>React Native 可开发移动应用</td></tr><tr><td>👥 社区活跃</td><td>丰富的学习资源和解决方案</td></tr></tbody></table><hr><br><h2 id="二、-环境搭建"><a href="#二、-环境搭建" class="headerlink" title="二、 环境搭建"></a><strong>二、 环境搭建</strong></h2><h3 id="2-1-使用-Vite-创建项目（推荐）"><a href="#2-1-使用-Vite-创建项目（推荐）" class="headerlink" title="2.1 使用 Vite 创建项目（推荐）"></a><strong><font color='red'>2.1 使用 Vite 创建项目（推荐）</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 npm</span></span><br><span class="line">npm create vite@latest vite-react-app -- --template react</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 pnpm</span></span><br><span class="line">pnpm create vite vite-react-app --template react</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 yarn</span></span><br><span class="line">yarn create vite vite-react-app --template react</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入项目目录并启动</span></span><br><span class="line"><span class="built_in">cd</span> vite-react-app</span><br><span class="line">npm/pnpm/yarn install</span><br><span class="line">npm/pnpm/yarn run dev</span><br></pre></td></tr></table></figure><h3 id="2-2-使用-Create-React-App"><a href="#2-2-使用-Create-React-App" class="headerlink" title="2.2 使用 Create React App"></a><strong><font color='red'>2.2 使用 Create React App</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app webpack-react-app</span><br><span class="line"><span class="built_in">cd</span> webpack-react-app</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure><h3 id="2-3-项目结构"><a href="#2-3-项目结构" class="headerlink" title="2.3 项目结构"></a><strong><font color='red'>2.3 项目结构</font></strong></h3><p><strong>vite</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vite-react-app/</span><br><span class="line">├── 📁 public/                 # 公共资源目录</span><br><span class="line">│   └── vite.svg               # Vite 项目默认 SVG 图标</span><br><span class="line">├── 📁 src/                    # 源代码目录</span><br><span class="line">│   ├── 📁 assets/             # 静态资源目录</span><br><span class="line">│   ├── App.jsx                # 根组件</span><br><span class="line">│   ├── App.css                # App 组件样式文件</span><br><span class="line">│   ├── main.jsx               # 应用入口文件</span><br><span class="line">│   └── index.css              # 全局样式文件</span><br><span class="line">├── .gitignore                 # Git 忽略配置文件</span><br><span class="line">├── README.md                  # 项目说明文档</span><br><span class="line">├── eslint.config.js           # ESLint 配置文件</span><br><span class="line">├── index.html                 # HTML 入口文件</span><br><span class="line">├── package.json               # 项目配置文件</span><br><span class="line">├── pnpm-lock.yaml             # pnpm 依赖锁定文件</span><br><span class="line">└── vite.config.js             # Vite 配置文件</span><br></pre></td></tr></table></figure><p><strong>webpack</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">webpack-react-app/</span><br><span class="line">├── 📁 public/                 # 公共资源目录 </span><br><span class="line">│   ├── favicon.ico            # 网站图标</span><br><span class="line">│   ├── index.html             # HTML 入口文件</span><br><span class="line">│   ├── manifest.json          # Web App 清单文件</span><br><span class="line">│   └── robots.txt             # 搜索引擎爬虫规则</span><br><span class="line">├── 📁 src/                    # 源代码目录 </span><br><span class="line">│   ├── App.css                # App 组件样式文件</span><br><span class="line">│   ├── App.js                 # 根组件</span><br><span class="line">│   ├── App.test.js            # App 组件测试文件</span><br><span class="line">│   ├── index.css              # 全局样式文件</span><br><span class="line">│   ├── index.js               # 应用入口文件</span><br><span class="line">│   ├── reportWebVitals.js     # 性能检测文件</span><br><span class="line">│   └── setupTests.js          # 测试设置文件</span><br><span class="line">├── .gitignore                 # Git 忽略配置文件 </span><br><span class="line">├── README.md                  # 项目说明文档 </span><br><span class="line">├── package-lock.json          # npm 依赖锁定文件</span><br><span class="line">└── package.json               # 项目配置文件</span><br></pre></td></tr></table></figure><hr><br><h2 id="三、-核心概念"><a href="#三、-核心概念" class="headerlink" title="三、 核心概念"></a><strong>三、 核心概念</strong></h2><h3 id="3-1-JSX-语法"><a href="#3-1-JSX-语法" class="headerlink" title="3.1 JSX 语法"></a><strong><font color='red'>3.1 JSX 语法</font></strong></h3><p>JSX 是 JavaScript 的语法扩展，让你可以在 JS 中编写类似 HTML 的代码：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSX 基础语法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> name = <span class="string">&quot;React&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> isLoggedIn = <span class="literal">true</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;welcome&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 使用花括号嵌入表达式 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      &#123;/* 条件渲染 */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;isLoggedIn ? <span class="tag">&lt;<span class="name">p</span>&gt;</span>欢迎回来<span class="tag">&lt;/<span class="name">p</span>&gt;</span> : <span class="tag">&lt;<span class="name">p</span>&gt;</span>请登录<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      &#123;/* 注意：class 要写成 className */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1）JSX-规则速记"><a href="#1）JSX-规则速记" class="headerlink" title="1）JSX 规则速记"></a><strong><font color='#10c300'>1）JSX 规则速记</font></strong></h4><table><thead><tr><th>HTML</th><th>JSX</th></tr></thead><tbody><tr><td><code>class</code></td><td><code>className</code></td></tr><tr><td><code>for</code></td><td><code>htmlFor</code></td></tr><tr><td><code>onclick</code></td><td><code>onClick</code></td></tr><tr><td><code>tabindex</code></td><td><code>tabIndex</code></td></tr></tbody></table><br><h3 id="3-2-组件"><a href="#3-2-组件" class="headerlink" title="3.2 组件"></a><strong><font color='red'>3.2 组件</font></strong></h3><h4 id="1）函数组件（推荐）"><a href="#1）函数组件（推荐）" class="headerlink" title="1）函数组件（推荐）"></a><strong><font color='#10c300'>1）函数组件（推荐）</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数组件是 React 推荐的编写方式</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Greeting</span>(<span class="params">&#123; name &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 箭头函数写法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Greeting</span> = (<span class="params">&#123; name &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="2）类组件（了解即可）"><a href="#2）类组件（了解即可）" class="headerlink" title="2）类组件（了解即可）"></a><strong><font color='#10c300'>2）类组件（了解即可）</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greeting</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好, &#123;this.props.name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-3-Props（属性）"><a href="#3-3-Props（属性）" class="headerlink" title="3.3 Props（属性）"></a><strong><font color='red'>3.3 Props（属性）</font></strong></h3><p>Props 是父组件传递给子组件的数据：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">UserCard</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">name</span>=<span class="string">&quot;张三&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">age</span>=<span class="string">&#123;25&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">isAdmin</span>=<span class="string">&#123;true&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">hobbies</span>=<span class="string">&#123;[</span>&#x27;<span class="attr">读书</span>&#x27;, &#x27;<span class="attr">游戏</span>&#x27;]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UserCard</span>(<span class="params">&#123; name, age, isAdmin, hobbies &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄: &#123;age&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>身份: &#123;isAdmin ? &#x27;管理员&#x27; : &#x27;普通用户&#x27;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;hobbies.map((hobby, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;hobby&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1）Props-默认值"><a href="#1）Props-默认值" class="headerlink" title="1）Props 默认值"></a><strong><font color='#10c300'>1）Props 默认值</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; text = <span class="string">&quot;点击&quot;</span>, type = <span class="string">&quot;primary&quot;</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">btn-</span>$&#123;<span class="attr">type</span>&#125;`&#125;&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-4-State（状态）"><a href="#3-4-State（状态）" class="headerlink" title="3.4 State（状态）"></a><strong><font color='red'>3.4 State（状态）</font></strong></h3><p>State 是组件内部的可变数据：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 声明状态：[当前值, 更新函数] = useState(初始值)</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>当前计数: &#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count - 1)&#125;&gt;-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(0)&#125;&gt;重置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1）State-更新注意事项"><a href="#1）State-更新注意事项" class="headerlink" title="1）State 更新注意事项"></a><strong><font color='#10c300'>1）State 更新注意事项</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ❌ 错误：直接修改状态</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">wrongUpdate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    user.<span class="property">age</span> = <span class="number">26</span>; <span class="comment">// 不会触发重新渲染</span></span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ✅ 正确：创建新对象</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">correctUpdate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setUser</span>(&#123; ...user, <span class="attr">age</span>: <span class="number">26</span> &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ✅ 使用函数式更新（基于前一个状态）</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(<span class="function"><span class="params">prevCount</span> =&gt;</span> prevCount + <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-5-事件处理"><a href="#3-5-事件处理" class="headerlink" title="3.5 事件处理"></a><strong><font color='red'>3.5 事件处理</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">EventExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 点击事件</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;按钮被点击&#x27;</span>, e);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 带参数的事件处理</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleDelete</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除项目:&#x27;</span>, id);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 表单输入</span></span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleChange</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setValue</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> handleDelete(123)&#125;&gt;删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-6-条件渲染"><a href="#3-6-条件渲染" class="headerlink" title="3.6 条件渲染"></a><strong><font color='red'>3.6 条件渲染</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ConditionalExample</span>(<span class="params">&#123; isLoggedIn, messages &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* 方式1: 三元运算符 */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;isLoggedIn ? <span class="tag">&lt;<span class="name">LogoutButton</span> /&gt;</span> : <span class="tag">&lt;<span class="name">LoginButton</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      &#123;/* 方式2: &amp;&amp; 短路运算 */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;messages.length &gt; 0 &amp;&amp; <span class="tag">&lt;<span class="name">Badge</span> <span class="attr">count</span>=<span class="string">&#123;messages.length&#125;</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      &#123;/* 方式3: if-else 提前返回 */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        if (messages.length === 0) return <span class="tag">&lt;<span class="name">p</span>&gt;</span>暂无消息<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">        if (messages.length &lt; 5) return <span class="tag">&lt;<span class="name">p</span>&gt;</span>少量消息<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">        return <span class="tag">&lt;<span class="name">p</span>&gt;</span>大量消息<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</span></span><br><span class="line"><span class="language-xml">      &#125;)()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="3-7-列表渲染"><a href="#3-7-列表渲染" class="headerlink" title="3.7 列表渲染"></a><strong><font color='red'>3.7 列表渲染</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> todos = [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">&#x27;学习 React&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">&#x27;写代码&#x27;</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">text</span>: <span class="string">&#x27;看文档&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  ];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;todos.map(todo =&gt; (</span></span><br><span class="line"><span class="language-xml">        // key 必须是唯一且稳定的标识符</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">className</span>=<span class="string">&#123;todo.done</span> ? &#x27;<span class="attr">completed</span>&#x27; <span class="attr">:</span> &#x27;&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;todo.text&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>⚠️ <strong>key 的重要性</strong>：key 帮助 React 识别哪些元素改变了，避免使用数组索引作为 key（除非列表是静态的）</p></blockquote><hr><br><h2 id="四、-React-Hooks-详解"><a href="#四、-React-Hooks-详解" class="headerlink" title="四、 React Hooks 详解"></a><strong>四、 React Hooks 详解</strong></h2><p>Hooks 是 React 16.8 引入的特性，让你在函数组件中使用状态和其他 React 特性。</p><h3 id="4-1-useState-状态管理"><a href="#4-1-useState-状态管理" class="headerlink" title="4.1 useState - 状态管理"></a><strong><font color='red'>4.1 useState - 状态管理</font></strong></h3><p><code>useState</code> 是一个 React Hook，用于在函数组件中声明和管理<strong>状态（state）</strong>（ 一定要在**<code>组件顶层</code>**调用）</p><h4 id="1）基本语法"><a href="#1）基本语法" class="headerlink" title="1）基本语法"></a><strong><font color='#10c300'>1）基本语法</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(initialValue);</span><br></pre></td></tr></table></figure><ul><li>initialArg：定义的初始值，可以是任意数据，像数字，字符串或者数组和对象。</li><li>useState ()方法的返回值为由两个值组成的数组<ol><li><code>state</code>：当前状态值：在首次渲染时，它将与你传递的 <code>initialArg</code> 相匹配。</li><li><code>setState</code>：更新状态的函数：它可以让你将 state 更新为不同的值并触发重新渲染。</li></ol></li></ul><h4 id="2）示例：计数器"><a href="#2）示例：计数器" class="headerlink" title="2）示例：计数器"></a><strong><font color='#10c300'>2）示例：计数器</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>&#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>); <span class="comment">// 声明状态变量 count</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>); <span class="comment">// 更新状态（触发重新渲染）</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>当前计数：&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>点击 +1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure><p><strong>🔍 运行原理：</strong></p><ul><li>初次渲染：<code>count = 0</code></li><li>每次点击 <code>button</code> → 调用 <code>setCount(count + 1)</code></li><li>React 检测到状态更新 → 重新渲染 UI（如状态和上一次一样则不会重新渲染UI）</li></ul><h4 id="3）更新状态的两种方式"><a href="#3）更新状态的两种方式" class="headerlink" title="3）更新状态的两种方式"></a><strong><font color='#10c300'>3）更新状态的两种方式</font></strong></h4><p><strong><font color='#00A6ED'>1️⃣ 直接赋值</font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setCount</span>(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><p><strong><font color='#00A6ED'>2️⃣ 函数式更新（推荐在依赖旧值时）</font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setCount</span>(<span class="function"><span class="params">prevCount</span> =&gt;</span> prevCount + <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>⚠️ 这个写法更安全，因为 React 的状态更新是<strong>异步批处理的</strong>，直接用旧的 <code>count</code> 可能不是最新值。</p><h4 id="4）各数据类型更新方式"><a href="#4）各数据类型更新方式" class="headerlink" title="4）各数据类型更新方式"></a><strong><font color='#10c300'>4）各数据类型更新方式</font></strong></h4><p>不要直接对对象和数组进行赋值，要始终确保你的set函数里是一份全新的数据，这样React才能够检测到状态变化，并按预期进行更新和重新渲染操作。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 基础类型</span></span><br><span class="line">  <span class="keyword">const</span> [name, setName] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [age, setAge] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 对象类型</span></span><br><span class="line">  <span class="keyword">const</span> [form, setForm] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">updateUsername</span> = (<span class="params">e</span>) =&gt; &#123; <span class="comment">// 更新对象的某个字段</span></span><br><span class="line">    <span class="title function_">setForm</span>(<span class="function"><span class="params">prev</span> =&gt;</span> (&#123;</span><br><span class="line">      ...prev,</span><br><span class="line">      <span class="attr">username</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 数组类型</span></span><br><span class="line">  <span class="keyword">const</span> [items, setItems] = <span class="title function_">useState</span>([]);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addItem</span> = (<span class="params">item</span>) =&gt; &#123; <span class="comment">// 添加项目</span></span><br><span class="line">    <span class="title function_">setItems</span>(<span class="function"><span class="params">prev</span> =&gt;</span> [...prev, item]);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">removeItem</span> = (<span class="params">id</span>) =&gt; &#123; <span class="comment">// 删除项目</span></span><br><span class="line">    <span class="title function_">setItems</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> !== id));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Form</span>;</span><br></pre></td></tr></table></figure><h4 id="5）更新是异步且可能合并"><a href="#5）更新是异步且可能合并" class="headerlink" title="5）更新是异步且可能合并"></a><strong><font color='#10c300'>5）更新是异步且可能合并</font></strong></h4><p>useState 返回的更新对象的方法是<strong>异步的</strong>，要在下次重绘才能获取新值，不要试图在更改状态之后立即获取状态，连续修改state会合并，只执行最后一次。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> [num, setNum] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">fn1</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">4</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">3</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">2</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// 第一次点击是0，说明setNum是异步的，并且多次调用只会生效最后一次</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>计数器：&#123; num &#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">fn1</span> &#125;&gt;</span>计数器修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h4 id="6）注意点"><a href="#6）注意点" class="headerlink" title="6）注意点"></a><strong><font color='#10c300'>6）注意点</font></strong></h4><table><thead><tr><th>注意事项</th><th>说明</th></tr></thead><tbody><tr><td>更新状态会触发重新渲染</td><td>每次 <code>setState</code> 都会重新渲染组件</td></tr><tr><td>更新是异步且可能合并</td><td>React 会优化更新，多次 setState 可能合并为一次</td></tr><tr><td>初始值只在第一次渲染时生效</td><td>之后不会因为 props 改变而重新设置</td></tr><tr><td>可以传入函数初始化（惰性初始化）</td><td><code>useState(() =&gt; 计算初始值)</code>，只执行一次</td></tr></tbody></table><h4 id="6）惰性初始化（性能优化）"><a href="#6）惰性初始化（性能优化）" class="headerlink" title="6）惰性初始化（性能优化）"></a><strong><font color='#10c300'>6）惰性初始化（性能优化）</font></strong></h4><p>如果初始值计算很耗时，可以使用 <strong>函数惰性初始化</strong>（传入一个函数可以避免每次渲染都执行）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;只执行一次初始化逻辑&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">complexComputeInitialData</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="7）useState-小结"><a href="#7）useState-小结" class="headerlink" title="7）useState 小结"></a><strong><font color='#10c300'>7）useState 小结</font></strong></h4><table><thead><tr><th>特性</th><th>内容</th></tr></thead><tbody><tr><td>Hook 名</td><td><code>useState</code></td></tr><tr><td>参数</td><td>初始值（或返回初始值的函数）</td></tr><tr><td>返回值</td><td><code>[state, setState]</code></td></tr><tr><td>是否触发组件渲染</td><td>✅ 是</td></tr><tr><td>使用场景</td><td>保存状态（数字、字符串、对象、数组等）</td></tr><tr><td>更新规则</td><td>调用 <code>setState</code> 更新并触发重新渲染</td></tr></tbody></table><br><h3 id="4-2-useEffect-副作用处理"><a href="#4-2-useEffect-副作用处理" class="headerlink" title="4.2 useEffect-副作用处理"></a><strong><font color='red'>4.2 useEffect-副作用处理</font></strong></h3><p>它让函数组件能够在<strong>渲染后执行副作用操作（side effects）</strong>，比如：网络请求、DOM 操作、事件监听、定时器、数据订阅等。</p><p>函数组件里没有生命周期方法（像类组件的 <code>componentDidMount</code>、<code>componentWillUnmount</code>）；React 提供 <code>useEffect</code> 来替代它们。</p><h4 id="1）基本语法-1"><a href="#1）基本语法-1" class="headerlink" title="1）基本语法"></a><strong><font color='#10c300'>1）基本语法</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 执行副作用逻辑</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 清理副作用逻辑（可选）</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [dependencies]);</span><br></pre></td></tr></table></figure><ul><li>参数1 (函数)：定义的初始值，可以是任意数据，像数字，字符串或者数组和对象。</li><li>参数2 (依赖项)：<ol><li><code>无参数</code>：每次渲染后都执行。</li><li><code>空数组</code>：仅在挂载时执行一次。</li><li><code>依赖参数</code>：依赖参数变化时执行。</li></ol></li></ul><h4 id="2）使用场景示例"><a href="#2）使用场景示例" class="headerlink" title="2）使用场景示例"></a><strong><font color='#10c300'>2）使用场景示例</font></strong></h4><p><strong><font color='#00A6ED'>1️⃣ 不带依赖 → 每次渲染都执行</font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;每次渲染都执行&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>不写依赖数组时，意味着：</p><ul><li>每次组件<strong>挂载和更新</strong>都会运行。<br>⚠️ 如无必要，不建议省略依赖数组，会影响性能。</li></ul><p><strong><font color='#00A6ED'>2️⃣ 组件挂载时执行（只执行一次）</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件挂载&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件卸载&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, []); <span class="comment">// 空数组 → 只执行一次</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello React!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>🔍 解释：</strong></p><ul><li><code>[]</code> 表示该副作用没有依赖，只在组件<strong>首次渲染</strong>和<strong>卸载</strong>时执行；</li><li>清理函数返回部分 (<code>return () =&gt; …</code>) 会在组件卸载时调用。</li></ul><p>可类比于：</p><ul><li>挂载时执行：<code>componentDidMount</code></li><li>卸载时清理：<code>componentWillUnmount</code></li></ul><p><strong><font color='#00A6ED'>3️⃣ 依赖特定状态更新时执行</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`count 更新了：<span class="subst">$&#123;count&#125;</span>`</span>);</span><br><span class="line">  &#125;, [count]); <span class="comment">// 👈 当 count 改变时触发</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>计数：&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>✅ 当 <code>count</code> 改变时，<code>useEffect</code> 会重新运行副作用逻辑。</p><h4 id="3）清理副作用（如事件、定时器）"><a href="#3）清理副作用（如事件、定时器）" class="headerlink" title="3）清理副作用（如事件、定时器）"></a><strong><font color='#10c300'>3）清理副作用（如事件、定时器）</font></strong></h4><p>当副作用涉及<strong>订阅或注册资源</strong>时，应该在组件卸载时清理，以防止内存泄漏。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定时器在运行&#x27;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 清理函数（组件卸载时调用）</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><h4 id="4）常见用途总结"><a href="#4）常见用途总结" class="headerlink" title="4）常见用途总结"></a><strong><font color='#10c300'>4）常见用途总结</font></strong></h4><table><thead><tr><th>用途</th><th>示例</th></tr></thead><tbody><tr><td>数据请求</td><td><code>fetch(url)</code>、<code>axios.get(...)</code></td></tr><tr><td>事件监听</td><td><code>window.addEventListener(&#39;scroll&#39;, ...)</code></td></tr><tr><td>DOM 操作</td><td><code>document.title = ...</code></td></tr><tr><td>定时器</td><td><code>setInterval()</code> &#x2F; <code>setTimeout()</code></td></tr><tr><td>订阅&#x2F;清理</td><td>WebSocket、Observer 模式等</td></tr></tbody></table><h4 id="5）常见坑和注意事项"><a href="#5）常见坑和注意事项" class="headerlink" title="5）常见坑和注意事项"></a><strong><font color='#10c300'>5）常见坑和注意事项</font></strong></h4><ol><li>依赖遗漏会导致逻辑错误。<ul><li>推荐使用 ESLint 插件：<code>eslint-plugin-react-hooks</code> 自动检查依赖。</li></ul></li><li>清理函数非常重要。<ul><li>不清理定时器或监听可能造成内存泄漏。</li></ul></li><li>不要在 useEffect 内直接修改状态导致无限循环。<ul><li>React 会重复渲染；必须控制好条件。</li></ul></li></ol><h4 id="6）总结对比"><a href="#6）总结对比" class="headerlink" title="6）总结对比"></a><strong><font color='#10c300'>6）总结对比</font></strong></h4><table><thead><tr><th>生命周期行为</th><th>类组件写法</th><th>函数组件写法</th></tr></thead><tbody><tr><td>组件挂载</td><td><code>componentDidMount</code></td><td><code>useEffect(() =&gt; &#123;&#125;, [])</code></td></tr><tr><td>组件更新</td><td><code>componentDidUpdate</code></td><td><code>useEffect(() =&gt; &#123;&#125;, [某状态])</code></td></tr><tr><td>组件卸载</td><td><code>componentWillUnmount</code></td><td><code>useEffect(() =&gt; &#123; return () =&gt; &#123;&#125; &#125;, [])</code></td></tr></tbody></table><br><h3 id="4-3-useContext-跨组件共享状态"><a href="#4-3-useContext-跨组件共享状态" class="headerlink" title="4.3 useContext - 跨组件共享状态"></a><strong><font color='red'>4.3 useContext - 跨组件共享状态</font></strong></h3><p>它主要用于在组件树中<strong>共享数据</strong>，<strong>避免层层传递 props（“props drilling”）的问题</strong>。</p><p>在 React 应用中，如果很多层组件之间都需要共享某个数据（比如主题、语言、用户信息），直接通过 props 一层层往下传会非常麻烦：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">App</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> <span class="attr">theme</span>=<span class="string">&#123;theme&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Content</span> <span class="attr">theme</span>=<span class="string">&#123;theme&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">theme</span>=<span class="string">&#123;theme&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">App</span>&gt;</span><br></pre></td></tr></table></figure><p>👆 每层都要传 <code>theme</code>，这就是 <strong>props drilling</strong>。</p><p>React 提供 <strong>Context</strong>，可以让你在组件树间<strong>直接共享数据，不必层层传递</strong>。</p><h4 id="1）使用步骤"><a href="#1）使用步骤" class="headerlink" title="1）使用步骤"></a><strong><font color='#10c300'>1）使用步骤</font></strong></h4><p><strong>Step 1️⃣：创建 Context</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src\context\index.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123;createContext&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line"><span class="title class_">MyContext</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Step 2️⃣：上层组件提供数据</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./components/Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">GrandChild</span> <span class="keyword">from</span> <span class="string">&quot;./components/GrandChild&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyContext</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./context/index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [data] = <span class="title function_">useState</span>(<span class="string">&quot;大鱼海棠&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">MyContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;data&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是父组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">GrandChild</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">MyContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><strong>Step 3️⃣：子组件</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123;children&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Child</span></span><br></pre></td></tr></table></figure><p><strong>Step 4️⃣：孙组件使用 <code>useContext</code> 获取值</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useContext&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyContext</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../context/index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GrandChild</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 这是app.jsx中传来的数据</span></span><br><span class="line">    <span class="keyword">const</span> data = <span class="title function_">useContext</span>(<span class="title class_">MyContext</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是孙组件，红色部分是顶级组件数据：<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span> &#x27;<span class="attr">red</span>&#x27;&#125;&#125;&gt;</span>&#123;data&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> defau lt <span class="title class_">GrandChild</span></span><br></pre></td></tr></table></figure><h4 id="2）语法总结"><a href="#2）语法总结" class="headerlink" title="2）语法总结"></a><strong><font color='#10c300'>2）语法总结</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = <span class="title function_">useContext</span>(<span class="title class_">MyContext</span>);</span><br></pre></td></tr></table></figure><ul><li>参数：你创建的 context 对象（由 <code>React.createContext()</code> 生成）</li><li>返回值：最近一层匹配的 <code>MyContext.Provider</code> 中的 <code>value</code></li></ul><p>React 会自动：</p><ul><li>找到离当前组件最近的 Provider；</li><li>读取它的 <code>value</code>；</li><li>如果找不到 Provider，返回 <code>createContext(defaultValue)</code> 里定义的默认值。</li></ul><h4 id="3）使用场景示例"><a href="#3）使用场景示例" class="headerlink" title="3）使用场景示例"></a><strong><font color='#10c300'>3）使用场景示例</font></strong></h4><p><strong><font color='#00A6ED'>1️⃣ 状态共享示例</font></strong></p><p>可以结合 <code>useState</code> 在顶层定义共享状态：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; createContext, useContext, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">UserContext</span> = <span class="title function_">createContext</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">UserContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">user</span>, <span class="attr">setUser</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">UserContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; user, setUser &#125; = <span class="title function_">useContext</span>(<span class="title class_">UserContext</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>用户名：&#123;user.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setUser(&#123; ...user, name: &#x27;Bob&#x27; &#125;)&#125;&gt;改名<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>➡️ 子组件不仅能读到状态，还能调用 <code>setUser()</code> 修改它，所有使用此上下文的组件都会同步更新。</p><br><p><strong><font color='#00A6ED'>2️⃣ 主题切换示例</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useContext, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 创建 Context</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 创建 Provider 组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ThemeProvider</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(children);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> [theme, setTheme] = <span class="title function_">useState</span>(<span class="string">&#x27;light&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">toggleTheme</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setTheme</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev === <span class="string">&#x27;light&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">theme</span>, <span class="attr">toggleTheme</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 在组件中使用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ThemedButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; theme, toggleTheme &#125; = <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onClick</span>=<span class="string">&#123;toggleTheme&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">background:</span> <span class="attr">theme</span> === <span class="string">&#x27;dark&#x27;</span> ? &#x27;#<span class="attr">333</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">fff</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">color:</span> <span class="attr">theme</span> === <span class="string">&#x27;dark&#x27;</span> ? &#x27;#<span class="attr">fff</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">333</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">            当前主题: &#123;theme&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 在 App 中使用 Provider 包裹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ThemedButton</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h4 id="4）应用场景"><a href="#4）应用场景" class="headerlink" title="4）应用场景"></a><strong><font color='#10c300'>4）应用场景</font></strong></h4><p><code>useContext</code> 常用于：</p><table><thead><tr><th>场景</th><th>举例</th></tr></thead><tbody><tr><td>主题切换</td><td>深色 &#x2F; 浅色主题</td></tr><tr><td>用户登录信息</td><td>全局用户状态</td></tr><tr><td>多语言（国际化）</td><td>当前语言、翻译函数</td></tr><tr><td>全局设置</td><td>比如 App 配置对象</td></tr></tbody></table><p>通常配合：</p><ul><li><code>createContext()</code> 创建上下文；</li><li><code>&lt;Context.Provider&gt;</code> 提供数据；</li><li><code>useContext()</code> 消费数据。</li></ul><h4 id="5）注意事项"><a href="#5）注意事项" class="headerlink" title="5）注意事项"></a><strong><font color='#10c300'>5）注意事项</font></strong></h4><table><thead><tr><th>注意点</th><th>说明</th></tr></thead><tbody><tr><td>必须在 Provider 范围内使用</td><td>否则返回默认值（不是报错）</td></tr><tr><td>不要滥用 Context</td><td>太多全局状态会降低可维护性</td></tr><tr><td>每当 Provider 的 value 改变时</td><td>所有使用该 Context 的组件都会重新渲染</td></tr><tr><td>不支持选择性订阅</td><td>所以大型状态可以考虑使用 Zustand、Redux 等方案</td></tr></tbody></table><h4 id="6）总结"><a href="#6）总结" class="headerlink" title="6）总结"></a><strong><font color='#10c300'>6）总结</font></strong></h4><table><thead><tr><th>项目</th><th>说明</th></tr></thead><tbody><tr><td>Hook 名</td><td><code>useContext(MyContext)</code></td></tr><tr><td>功能</td><td>在组件树中直接获取 Context 数据</td></tr><tr><td>替代了</td><td>类组件的 <code>contextType</code> &#x2F; <code>&lt;Context.Consumer&gt;</code></td></tr><tr><td>搭配使用</td><td><code>createContext()</code> + <code>&lt;Context.Provider&gt;</code></td></tr><tr><td>场景</td><td>全局状态共享（主题、用户、语言等）</td></tr></tbody></table><br><h3 id="4-4-useMemo-缓存计算结果"><a href="#4-4-useMemo-缓存计算结果" class="headerlink" title="4.4 useMemo- 缓存计算结果"></a><strong><font color='red'>4.4 useMemo- 缓存计算结果</font></strong></h3><p><strong>让 React 记住一个计算值（memoized value）</strong>，只有在依赖项变化时才重新计算。</p><p>换句话说：</p><ul><li>如果依赖没变 → 直接用上次计算的结果；</li><li>如果依赖变了 → 重新计算并返回新结果。</li></ul><p>它可以帮你显著减少不必要的计算或对象重建。</p><p><code>useMemo</code>的理念是同步的，useMemo不能进行一些额外的副操作，比如网络请求等。</p><h4 id="1）基本语法-2"><a href="#1）基本语法-2" class="headerlink" title="1）基本语法"></a><strong><font color='#10c300'>1）基本语法</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useMemo</span>(<span class="function">()=&gt;</span>&#123;<span class="keyword">return</span> 值&#125;,[依赖项])</span><br></pre></td></tr></table></figure><ul><li>参数1 (函数)：一个返回值的函数（执行计算）</li><li>参数2 (依赖项)：依赖数组，当其中某项改变时才重新计算</li></ul><p>返回值：<strong>缓存的计算结果</strong>。</p><h4 id="2）使用场景示例-1"><a href="#2）使用场景示例-1" class="headerlink" title="2）使用场景示例"></a><strong><font color='#10c300'>2）使用场景示例</font></strong></h4><p><strong><font color='#00A6ED'>1️⃣ 计算缓存</font></strong></p><p>未使用<code>useMemo</code>的时候改变颜色，也会执行ComputeTotal价格的计算。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useState, useMemo &#125; from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">function ComputeTotal(price, count) &#123;</span><br><span class="line">    console.log(&quot;函数运行了&quot;);</span><br><span class="line">    return price * count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">    const [price, setPrice] = useState(100);</span><br><span class="line">    const [count] = useState(1);</span><br><span class="line">    const [color, setColor] = useState(&quot;red&quot;);</span><br><span class="line"></span><br><span class="line">    // 👉 只有 price 变化时，才重新计算</span><br><span class="line">    const totalPrice = useMemo(() =&gt; ComputeTotal(price, count),[price]);</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;p&gt;总价：&#123;totalPrice&#125;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&#123;color&#125;&lt;/p&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setColor(&quot;blue&quot;)&#125;&gt;修改颜色&lt;/button&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setPrice(price + 100)&#125;&gt;修改价格&lt;/button&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure><p>✅ 当你改变颜色的时候，不会重新执行ComputeTotal。只有price变化时才会重新计算。</p><p><strong><font color='#00A6ED'>2️⃣ 缓存组件(不常用)</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [price, setPrice] = <span class="title function_">useState</span>(<span class="number">100</span>);</span><br><span class="line">    <span class="keyword">const</span> [count] = <span class="title function_">useState</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">const</span> [color, setColor] = <span class="title function_">useState</span>(<span class="string">&quot;red&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> memoizedChild = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 缓存组件</span></span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">price</span>=<span class="string">&#123;price&#125;</span> /&gt;</span></span>;</span><br><span class="line">    &#125;, [count, price]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;color&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setColor(&quot;blue&quot;)&#125;&gt;修改颜色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setPrice(price + 100)&#125;&gt;修改价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* 使用组件 */&#125;</span></span><br><span class="line"><span class="language-xml">            &#123;memoizedChild&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h4 id="3）核心用途"><a href="#3）核心用途" class="headerlink" title="3）核心用途"></a><strong><font color='#10c300'>3）核心用途</font></strong></h4><table><thead><tr><th>用途</th><th>说明</th></tr></thead><tbody><tr><td>缓存复杂计算</td><td>避免每次渲染都进行高耗时操作</td></tr><tr><td>缓存对象或数组</td><td>避免对象引用变化导致子组件重新渲染</td></tr><tr><td>与 <code>React.memo</code> 配合</td><td>保持 props 稳定，防止子组件误重渲染</td></tr></tbody></table><h4 id="4）缓存引用（避免重渲染）"><a href="#4）缓存引用（避免重渲染）" class="headerlink" title="4）缓存引用（避免重渲染）"></a><strong><font color='#10c300'>4）缓存引用（避免重渲染）</font></strong></h4><p>例如子组件使用 <code>React.memo</code>：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123; options &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Child render&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;options.join(&quot;, &quot;)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoChild</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 如果不缓存，数组每次渲染都新建，导致 Child 重新渲染</span></span><br><span class="line">    <span class="keyword">const</span> options = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>], []); <span class="comment">// 👈 缓存数组引用</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">MemoChild</span> <span class="attr">options</span>=<span class="string">&#123;options&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><p>➡️ <code>useMemo</code> 保证每次渲染中 <code>options</code> 的引用稳定，<code>React.memo</code> 会认为 props 没变，从而跳过重新渲染。</p><h4 id="4）常见注意事项"><a href="#4）常见注意事项" class="headerlink" title="4）常见注意事项"></a><strong><font color='#10c300'>4）常见注意事项</font></strong></h4><table><thead><tr><th>注意点</th><th>说明</th></tr></thead><tbody><tr><td>不要滥用</td><td>如果计算很轻量级，没必要用 <code>useMemo</code>（会增加复杂度）</td></tr><tr><td>依赖必须完整</td><td>漏掉依赖可能导致值不同步（推荐使用 ESLint 检查）</td></tr><tr><td>缓存是基于引用比较</td><td>数组、对象、函数引用变化 → 会重新计算</td></tr><tr><td>仅缓存计算结果，不影响状态更新</td><td>状态变化仍然触发重新渲染</td></tr></tbody></table><h4 id="5）useMemo-vs-useCallback"><a href="#5）useMemo-vs-useCallback" class="headerlink" title="5）useMemo vs useCallback"></a><strong><font color='#10c300'>5）useMemo vs useCallback</font></strong></h4><table><thead><tr><th>项目</th><th><code>useMemo</code></th><th><code>useCallback</code></th></tr></thead><tbody><tr><td>返回值</td><td>缓存<strong>计算结果</strong></td><td>缓存<strong>函数引用</strong></td></tr><tr><td>适用场景</td><td>高开销计算、缓存对象</td><td>保持回调函数引用稳定</td></tr><tr><td>示例</td><td><code>const result = useMemo(() =&gt; heavyFn(x), [x])</code></td><td><code>const fn = useCallback(() =&gt; doSomething(x), [x])</code></td></tr></tbody></table><p>两者都是性能优化 Hook，但返回目标不同。</p><h4 id="6）总结-1"><a href="#6）总结-1" class="headerlink" title="6）总结"></a><strong><font color='#10c300'>6）总结</font></strong></h4><table><thead><tr><th>项目</th><th>说明</th></tr></thead><tbody><tr><td>Hook 名</td><td><code>useMemo</code></td></tr><tr><td>功能</td><td>缓存计算结果，依赖改变时重新计算</td></tr><tr><td>返回值</td><td>上次计算的结果（memoized value）</td></tr><tr><td>主要用途</td><td>高性能计算缓存、稳定对象引用</td></tr><tr><td>常与搭配</td><td><code>React.memo</code>、<code>useCallback</code></td></tr><tr><td>注意</td><td>不要滥用，确实有性能问题时再用</td></tr></tbody></table><hr><p>🌟 <strong>一句话总结：</strong></p><p><code>useMemo(fn, deps)</code> &#x3D; “记住 fn 的返回值”，当 deps 不变时，不再重新执行 fn。</p><br><h3 id="4-5-useCallback-缓存函数引用"><a href="#4-5-useCallback-缓存函数引用" class="headerlink" title="4.5 useCallback- 缓存函数引用"></a><strong><font color='red'>4.5 useCallback- 缓存函数引用</font></strong></h3><p>在 React 中，每次组件渲染都会重新执行组件函数体，<strong>里面定义的函数也会被“重新创建”</strong>。<br>如果这些函数作为 props 传给子组件，即使函数逻辑没有变，根据 <strong>引用地址比较</strong>，子组件会认为 props 变了而重新渲染。</p><p><code>useCallback</code> 解决了这个问题：</p><blockquote><p>✅ <strong>让函数引用在依赖不变时保持稳定（不变）</strong>。</p></blockquote><h4 id="1）基本语法-3"><a href="#1）基本语法-3" class="headerlink" title="1）基本语法"></a><strong><font color='#10c300'>1）基本语法</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedCallback = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 函数逻辑</span></span><br><span class="line">&#125;, [dependencies]);</span><br></pre></td></tr></table></figure><ul><li><strong>第一个参数</strong>：要缓存的回调函数</li><li><strong>第二个参数</strong>：依赖数组，当依赖中有值变化时，返回的新函数引用会更新</li></ul><h4 id="2）基本示例"><a href="#2）基本示例" class="headerlink" title="2）基本示例"></a><strong><font color='#10c300'>2）基本示例</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useCallback &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">&#123; onClick &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;子组件渲染了&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>子组件按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoChild</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>); <span class="comment">// 👈 只有 props 变了才渲染</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 只有 count 变化时才会更新函数引用(子组件渲染)</span></span><br><span class="line">    <span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked:&quot;</span>, count);</span><br><span class="line">    &#125;, [count]); <span class="comment">// 👈 缓存函数引用</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;count +1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;text&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setText(e.target.value)&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">MemoChild</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><strong>🔍 分析：</strong></p><ul><li>如果不用 <code>useCallback</code>，每次 App 渲染都会“新建”一个 <code>handleClick</code> 函数引用；</li><li><code>MemoChild</code> 会认为 props (<code>onClick</code>) 改了 → 重新渲染；</li><li>用了 <code>useCallback</code> 后，在依赖不变化时，函数引用保持稳定 → 组件不重渲染。</li></ul><h4 id="3）什么时候用-useCallback"><a href="#3）什么时候用-useCallback" class="headerlink" title="3）什么时候用 useCallback"></a><strong><font color='#10c300'>3）什么时候用 useCallback</font></strong></h4><ol><li>子组件使用了 <code>React.memo</code><ul><li>避免因为回调函数引用变化导致子组件重渲染</li></ul></li><li>函数传递给深层子组件<ul><li>不希望每次父组件渲染都改变函数引用</li></ul></li><li>依赖稳定的函数<ul><li>当函数依赖的状态&#x2F;变量不经常变化时，缓存引用意义更大</li></ul></li></ol><h4 id="4）依赖数组注意事项"><a href="#4）依赖数组注意事项" class="headerlink" title="4）依赖数组注意事项"></a><strong><font color='#10c300'>4）依赖数组注意事项</font></strong></h4><ul><li><strong>依赖必须包含回调内部用到的变量</strong>（闭包变量）</li><li>推荐使用 ESLint 插件 <code>eslint-plugin-react-hooks</code> 自动分析依赖</li><li>如果依赖数组为空<code>[]</code>：<ul><li>返回的函数引用将<strong>永远不会变化</strong></li><li>适用于那些不依赖任何外部变量的回调</li></ul></li></ul><h4 id="5）结合-React-memo的优化模式"><a href="#5）结合-React-memo的优化模式" class="headerlink" title="5）结合 React.memo的优化模式"></a><strong><font color='#10c300'>5）结合 React.memo的优化模式</font></strong></h4><p>常见模式：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MemoChild</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123; ... &#125;, []);</span><br><span class="line"> <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">MemoChild</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>✅ 子组件 <code>MemoChild</code> 只在真正需要更新时才渲染。</p><h4 id="6）常见误区"><a href="#6）常见误区" class="headerlink" title="6）常见误区"></a><strong><font color='#10c300'>6）常见误区</font></strong></h4><ol><li><strong>不要滥用</strong><br>如果子组件没有 <code>React.memo</code> 或不是性能瓶颈，没必要加 <code>useCallback</code>（增加复杂度）</li><li><strong>缓存不是减少渲染次数的万能钥匙</strong><br><code>useCallback</code> 只防止不必要的重渲染，但状态更新触发的渲染仍会发生</li><li><strong>依赖不正确会导致逻辑错误</strong><br>缺少依赖可能让函数内部拿到旧的状态</li></ol><h4 id="7）总结"><a href="#7）总结" class="headerlink" title="7）总结"></a><strong><font color='#10c300'>7）总结</font></strong></h4><table><thead><tr><th>项目</th><th>内容</th></tr></thead><tbody><tr><td>Hook 名</td><td><code>useCallback</code></td></tr><tr><td>作用</td><td>缓存回调函数引用，避免不必要的渲染</td></tr><tr><td>参数</td><td><code>(fn, [deps])</code></td></tr><tr><td>返回值</td><td>稳定的函数引用</td></tr><tr><td>常搭配</td><td><code>React.memo</code>, <code>useMemo</code></td></tr><tr><td>注意</td><td>依赖完整性、勿滥用</td></tr></tbody></table><hr><p>🌟 <strong>一句话总结：</strong></p><blockquote><p>当你需要把回调函数作为 props 传递给 <code>React.memo</code> 子组件时，用 <code>useCallback</code> 可以避免因为函数引用变化导致子组件重复渲染。</p></blockquote><br><h3 id="4-6-useReducer-复杂状态管理"><a href="#4-6-useReducer-复杂状态管理" class="headerlink" title="4.6 useReducer-复杂状态管理"></a><strong><font color='red'>4.6 useReducer-复杂状态管理</font></strong></h3><blockquote><p>✅ <code>useReducer</code> 是 <code>useState</code> 的高级替代方案。<br>当状态变化逻辑比较复杂，或者新状态依赖旧状态时，用 <code>useReducer</code> 会更晰。</p></blockquote><p>它和 Redux 的核心思想一样：<br><strong>通过 “动作（action）” 和 “状态更新函数（reducer）” 来控制状态变化。</strong></p><h4 id="1）基本语法-4"><a href="#1）基本语法-4" class="headerlink" title="1）基本语法"></a><strong><font color='#10c300'>1）基本语法</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, initialArg, init?)</span><br></pre></td></tr></table></figure><ul><li><strong><code>state</code></strong>：当前状态</li><li><strong><code>dispatch</code></strong>：触发状态更新的函数</li><li><strong><code>reducer</code></strong>：一个函数，负责“接收旧状态 + 动作（action）”，返回新状态</li><li><strong><code>initialArg</code></strong>：初始状态</li><li><strong><code>init（可选）</code></strong>：<em>惰性初始化函数</em>，用于在初始渲染时对 <code>initialArg</code> 进行加工或计算，返回真正的初始状态，只会在初始化执行一次</li></ul><h4 id="2）使用场景示例-2"><a href="#2）使用场景示例-2" class="headerlink" title="2）使用场景示例"></a><strong><font color='#10c300'>2）使用场景示例</font></strong></h4><p><strong><font color='#00A6ED'>1️⃣ 计数器</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义 reducer</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;increment&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;decrement&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state; <span class="comment">// 返回原状态（防止报错）</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>计数：&#123;state.count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;increment&quot; &#125;)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &quot;decrement&quot; &#125;)&#125;&gt;-1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure><p>✅ <code>dispatch</code> 类似于调用 <code>setState</code>，但语义更清晰、逻辑集中。</p><p><strong><font color='#00A6ED'>2️⃣ 复杂状态示例：表单管理</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialForm = &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formReducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;CHANGE_FIELD&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; ...state, [action.<span class="property">field</span>]: action.<span class="property">value</span> &#125;;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;RESET&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> initialForm;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [form, dispatch] = <span class="title function_">useReducer</span>(formReducer, initialForm);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">value</span>=<span class="string">&#123;form.username&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                    dispatch(&#123; type: &#x27;CHANGE_FIELD&#x27;, field: &#x27;username&#x27;, value: e.target.value &#125;)</span></span><br><span class="line"><span class="language-xml">                &#125;</span></span><br><span class="line"><span class="language-xml">                placeholder=&quot;用户名&quot;</span></span><br><span class="line"><span class="language-xml">            /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">value</span>=<span class="string">&#123;form.age&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                    dispatch(&#123; type: &#x27;CHANGE_FIELD&#x27;, field: &#x27;age&#x27;, value: e.target.value &#125;)</span></span><br><span class="line"><span class="language-xml">                &#125;</span></span><br><span class="line"><span class="language-xml">                placeholder=&quot;年龄&quot;</span></span><br><span class="line"><span class="language-xml">            /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;RESET&#x27; &#125;)&#125;&gt;重置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;JSON.stringify(form)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Form</span>;</span><br></pre></td></tr></table></figure><p>✅ 优势：</p><ul><li>所有状态更新逻辑集中在 <code>reducer</code>；</li><li>更容易维护、测试、调试。</li></ul><h4 id="3）useReducer-的执行流程图"><a href="#3）useReducer-的执行流程图" class="headerlink" title="3）useReducer 的执行流程图"></a><strong><font color='#10c300'>3）useReducer 的执行流程图</font></strong></h4><p>1️⃣ 组件渲染时：</p><ul><li>React 按 <code>initialArg</code> 初始化状态。</li></ul><p>2️⃣ 调用 <code>dispatch(action)</code>：</p><ul><li>React 会执行 <code>reducer(state, action)</code>；</li><li>得到新的 state；</li><li>重新渲染组件。</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">dispatch</span>(action)</span><br><span class="line">   ↓</span><br><span class="line"><span class="title function_">reducer</span>(state, action)</span><br><span class="line">   ↓</span><br><span class="line">newState → 触发重新渲染</span><br></pre></td></tr></table></figure><h4 id="4）相比-useState-的优势"><a href="#4）相比-useState-的优势" class="headerlink" title="4）相比 useState 的优势"></a><strong><font color='#10c300'>4）相比 useState 的优势</font></strong></h4><table><thead><tr><th>特点</th><th>useState</th><th>useReducer</th></tr></thead><tbody><tr><td>适用场景</td><td>状态简单（一个值）</td><td>状态结构复杂，多逻辑分支</td></tr><tr><td>更新方式</td><td>直接传值或函数</td><td>派发 action，由 reducer 处理</td></tr><tr><td>状态结构</td><td>通常是单个值</td><td>常为对象（多个字段）</td></tr><tr><td>思维方式</td><td>“我想要一个新值”</td><td>“我派发一个意图（action）”</td></tr></tbody></table><h4 id="5）、使用惰性初始化（第三个参数）"><a href="#5）、使用惰性初始化（第三个参数）" class="headerlink" title="5）、使用惰性初始化（第三个参数）"></a><strong><font color='#10c300'>5）、使用惰性初始化（第三个参数）</font></strong></h4><p><code>useReducer</code> 还支持传入一个函数，延迟计算初始状态（避免初始化开销）👇</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params">initialCount</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">count</span>: initialCount &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;reset&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">init</span>(action.<span class="property">payload</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;increment&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, <span class="number">0</span>, init);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>计数: &#123;state.count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;increment&#x27; &#125;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;reset&#x27;, payload: 5 &#125;)&#125;&gt;重置为 5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure><p>这种方式适用于初始状态计算非常复杂的情况。</p><h4 id="6）、与-Context-结合：全局状态（Redux-思想）"><a href="#6）、与-Context-结合：全局状态（Redux-思想）" class="headerlink" title="6）、与 Context 结合：全局状态（Redux 思想）"></a><strong><font color='#10c300'>6）、与 Context 结合：全局状态（Redux 思想）</font></strong></h4><p><code>useReducer</code> 常配合 <code>useContext</code> 使用，构建轻量“全局状态管理”：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useReducer, useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CounterContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>: <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">        <span class="attr">default</span>: <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CounterProvider</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [count, dispatch] = <span class="title function_">useReducer</span>(reducer, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">CounterContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">count</span>, <span class="attr">dispatch</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">CounterContext.Provider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; count, dispatch &#125; = <span class="title function_">useContext</span>(<span class="title class_">CounterContext</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;add&#x27; &#125;)&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">CounterProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">CounterProvider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>✅ 相当于一个小型 Redux。</p><h4 id="7）、注意事项"><a href="#7）、注意事项" class="headerlink" title="7）、注意事项"></a><strong><font color='#10c300'>7）、注意事项</font></strong></h4><table><thead><tr><th>注意点</th><th>说明</th></tr></thead><tbody><tr><td><code>reducer</code> 必须是纯函数</td><td>不要直接修改 state 或执行副作用</td></tr><tr><td>不要频繁重建 reducer</td><td>通常定义在组件外或 <code>useCallback</code> 中</td></tr><tr><td>与 Redux 思想相同</td><td>但更轻量不需要中间件</td></tr><tr><td>可结合 <code>useContext</code></td><td>实现全局状态共享</td></tr></tbody></table><h4 id="8）、总结"><a href="#8）、总结" class="headerlink" title="8）、总结"></a><strong><font color='#10c300'>8）、总结</font></strong></h4><table><thead><tr><th>特性</th><th>说明</th></tr></thead><tbody><tr><td>Hook 名</td><td><code>useReducer</code></td></tr><tr><td>作用</td><td>管理复杂的组件状态和变化逻辑</td></tr><tr><td>返回值</td><td><code>[state, dispatch]</code></td></tr><tr><td>与 useState 对比</td><td>状态逻辑更集中、可扩展性更强</td></tr><tr><td>常搭配</td><td><code>useContext</code>（全局状态）</td></tr><tr><td>适用场景</td><td>复杂状态更新（表单、异步流程、全局管理）</td></tr></tbody></table><hr><p>🌟 <strong>一句话总结：</strong></p><blockquote><p><code>useReducer</code> &#x3D; “复杂版 useState”<br>当状态逻辑复杂或多步骤更新时，用 reducer 管理更干净、更可靠。</p></blockquote><h3 id="4-20-Hooks-组合实战"><a href="#4-20-Hooks-组合实战" class="headerlink" title="4.20 Hooks 组合实战"></a><strong><font color='red'>4.20 Hooks 组合实战</font></strong></h3><h4 id="1）useReducer-useContext"><a href="#1）useReducer-useContext" class="headerlink" title="1）useReducer + useContext"></a><strong><font color='#10c300'>1）useReducer + useContext</font></strong></h4><p>用 <strong><code>useReducer</code> + <code>useContext</code></strong> 实现一个<strong>全局状态管理系统</strong>，就像一个轻量版 Redux。</p><p>我们以“主题切换（深色 &#x2F; 浅色）”为例 👇</p><h5 id="🎯-功能目标"><a href="#🎯-功能目标" class="headerlink" title="🎯 功能目标"></a><strong><font color='cornflowerblue'>🎯 功能目标</font></strong></h5><ul><li>页面上有多个组件；</li><li>这些组件都能感知当前主题；</li><li>点击按钮可以在浅色&#x2F;深色模式之间切换；</li><li>所有组件自动更新，<strong>不用手动传 props</strong>。</li></ul><h5 id="🧱项目结构"><a href="#🧱项目结构" class="headerlink" title="🧱项目结构"></a><strong><font color='cornflowerblue'>🧱项目结构</font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">├── 📁 components/                   # 组件</span><br><span class="line">│   ├── 📄 Header.jsx               # 子组件，读取主题并展示</span><br><span class="line">│   ├── 📄 Content.jsx              # 子组件，读取主题并展示</span><br><span class="line">├── 📁 context/                      # Context</span><br><span class="line">│   ├── 📄 index.js                 # 创建 Context + Reducer</span><br><span class="line">└── 📄 App.jsx            </span><br></pre></td></tr></table></figure><p><code>src\App.jsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ThemeProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./context/index&#x27;</span>; <span class="comment">// 引入上面的 Provider</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Header&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Content</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Content&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Header</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Content</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><code>src\context\index.js</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useReducer, useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1️⃣ 初始状态</span></span><br><span class="line"><span class="keyword">const</span> initialState = &#123; <span class="attr">theme</span>: <span class="string">&#x27;light&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2️⃣ 定义 reducer：根据 action.type 决定如何更新状态</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">themeReducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;TOGGLE_THEME&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="attr">theme</span>: state.<span class="property">theme</span> === <span class="string">&#x27;light&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span> &#125;;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3️⃣ 创建 Context</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title function_">createContext</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4️⃣ 创建 Provider 组件（状态提供者）</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">ThemeProvider</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(themeReducer, initialState);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">state</span>, <span class="attr">dispatch</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5️⃣ 自定义 Hook，方便子组件使用</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useTheme</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src\components\Header.jsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useTheme &#125; <span class="keyword">from</span> <span class="string">&#x27;../context/index&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Header</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; state, dispatch &#125; = <span class="title function_">useTheme</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">header</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">background:</span> <span class="attr">state.theme</span> === <span class="string">&#x27;light&#x27;</span> ? &#x27;#<span class="attr">f0f0f0</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">222</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">color:</span> <span class="attr">state.theme</span> === <span class="string">&#x27;light&#x27;</span> ? &#x27;#<span class="attr">000</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">fff</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">padding:</span> &#x27;<span class="attr">10px</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>当前主题：&#123;state.theme&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;TOGGLE_THEME&#x27; &#125;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                切换主题</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src\components\Content.jsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useTheme &#125; <span class="keyword">from</span> <span class="string">&#x27;../context/index&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Content</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; state &#125; = <span class="title function_">useTheme</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">background:</span> <span class="attr">state.theme</span> === <span class="string">&#x27;light&#x27;</span> ? &#x27;#<span class="attr">fff</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">333</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">color:</span> <span class="attr">state.theme</span> === <span class="string">&#x27;light&#x27;</span> ? &#x27;#<span class="attr">000</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">fff</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">padding:</span> &#x27;<span class="attr">20px</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>这里是主要内容区 —— 当前是 &#123;state.theme&#125; 模式<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="五、-HOC-高阶组件"><a href="#五、-HOC-高阶组件" class="headerlink" title="五、 HOC 高阶组件"></a>五、 HOC 高阶组件</h2><h3 id="5-1-React-memo"><a href="#5-1-React-memo" class="headerlink" title="5.1 React.memo"></a><strong><font color='red'>5.1 React.memo</font></strong></h3><p><code>memo</code> 是一个 <strong>高阶组件</strong>，用于<strong>优化函数组件的重新渲染</strong>。只有当它的 <strong>props 发生变化</strong> 时，React 才会重新渲染这个组件。否则，它会直接复用上一次的渲染结果，提高性能。</p><h4 id="1）基本语法-5"><a href="#1）基本语法-5" class="headerlink" title="1）基本语法"></a><strong><font color='#10c300'>1）基本语法</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接在父组件将引入的子组件MyComponent使用memo缓存</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoizedComponent</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">MyComponent</span>);</span><br></pre></td></tr></table></figure><p>或者定义时直接使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接在子组件导出的时候就对当前组件MyComponent使用memo缓存</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">MyComponent</span>);</span><br></pre></td></tr></table></figure><h4 id="2）基本示例-1"><a href="#2）基本示例-1" class="headerlink" title="2）基本示例"></a><strong><font color='#10c300'>2）基本示例</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./components/Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="string">&quot;父组件数据&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> [b] = <span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;父组件渲染了&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setData(`新数据$&#123;new Date().getTime()&#125;`)&#125;&gt;我是App：&#123;data&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Child</span> <span class="attr">b</span>=<span class="string">&#123;b&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br><span class="line">============================================分割线==============================================</span><br><span class="line">    </span><br><span class="line"><span class="comment">// Child.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; memo &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;子组件渲染了&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件: &#123;props.b&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 React.memo 包装组件，只有当 props 发生变化时才重新渲染</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">memo</span>(<span class="title class_">Child</span>);</span><br></pre></td></tr></table></figure><p><strong>🔍 输出结果：</strong></p><ul><li>初始化的时候父组件和子组件都渲染</li><li>触发父组件的点击事件，data状态发生变化，b状态未变，子组件未触发渲染</li></ul><p>如果用的是普通组件，哪怕 props 一样，也会重新渲染。</p><h4 id="3）工作原理"><a href="#3）工作原理" class="headerlink" title="3）工作原理"></a><strong><font color='#10c300'>3）工作原理</font></strong></h4><p><code>React.memo</code> 在渲染后，会 <strong>保存上一次的 props</strong>。<br>下一次组件渲染时，它会做一个 <strong>浅比较（shallow compare）</strong>：</p><ul><li>如果旧的 props 与新的 props 内容一致 → 跳过渲染；</li><li>如果不同 → 重新渲染。</li></ul><blockquote><p>默认比较是浅层（只比较基础类型或引用是否相同），<br>对象&#x2F;数组类型的 props 如果新建了对象，就会认为不同。</p></blockquote><h4 id="4）自定义比较函数"><a href="#4）自定义比较函数" class="headerlink" title="4）自定义比较函数"></a><strong><font color='#10c300'>4）自定义比较函数</font></strong></h4><p>有时候你希望控制“什么算变”，可以在第二个参数传入自定义比较函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Memoized</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(</span><br><span class="line">  <span class="title class_">MyComponent</span>,</span><br><span class="line">  <span class="function">(<span class="params">prevProps, nextProps</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 返回 true 表示不需要重新渲染（props 相等）</span></span><br><span class="line">    <span class="comment">// 返回 false 表示需要重渲染</span></span><br><span class="line">    <span class="keyword">return</span> prevProps.<span class="property">id</span> === nextProps.<span class="property">id</span>;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="5）常见优化场景"><a href="#5）常见优化场景" class="headerlink" title="5）常见优化场景"></a><strong><font color='#10c300'>5）常见优化场景</font></strong></h4><table><thead><tr><th>场景</th><th>说明</th></tr></thead><tbody><tr><td>列表项组件</td><td>列表中有大量子组件，父组件频繁更新</td></tr><tr><td>表单组件</td><td>输入变化导致整个页面重渲染</td></tr><tr><td>复杂组件</td><td>内部渲染代价高但 props 很稳定</td></tr><tr><td>与 useCallback 搭配</td><td>保持传入函数引用一致，避免误触更新</td></tr></tbody></table><h4 id="6）与-useCallback-和-useMemo-的配合"><a href="#6）与-useCallback-和-useMemo-的配合" class="headerlink" title="6）与 useCallback 和 useMemo 的配合"></a><strong><font color='#10c300'>6）与 useCallback 和 useMemo 的配合</font></strong></h4><p><code>React.memo</code> 只关心 props 是否变化。但是如果传入的是一个函数，每次渲染函数都是新引用，就会导致重新渲染。函数作为 <code>props</code> 的“引用不稳定”问题</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">// 子组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Child render&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 父组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;clicked&#x27;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><p>你期望的是：只要 <code>count</code> 没变，<code>Child</code> 不应该重新渲染。但实际上，<strong>每次父组件重渲染，<code>Child</code> 都会重新渲染</strong>。</p><p><strong><font color='#00A6ED'>🌈原因：函数的引用每次都变</font></strong></p><p>在 React 中，函数也是一种对象，而对象&#x2F;函数的「引用地址」每次都会变。当父组件重新运行时 都会创建一个 <strong>新函数对象</strong>，和之前的不是同一个引用。</p><p>React.memo 的默认比较方式是浅比较（shallow compare）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">oldProps.<span class="property">onClick</span> === newProps.<span class="property">onClick</span></span><br></pre></td></tr></table></figure><p>而因为每次重新渲染时，这个函数都是新建的，所以结果是 <code>false</code>，导致 <code>Child</code> 无论 props 内容是否逻辑相同，都会被认为变动了。</p><p>🤏**解决方案：**通过 <code>useCallback</code> 来让函数在依赖不变的情况下，保持同一个引用</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useCallback, useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line">unction <span class="title class_">Parent</span>() &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;clicked&#x27;</span>);</span><br><span class="line">  &#125;, []) <span class="comment">// 👈 引用稳定</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><h4 id="7）注意事项"><a href="#7）注意事项" class="headerlink" title="7）注意事项"></a><strong><font color='#10c300'>7）注意事项</font></strong></h4><table><thead><tr><th>项目</th><th>说明</th></tr></thead><tbody><tr><td>比较方式</td><td>浅比较（对象或函数需注意引用变化）</td></tr><tr><td>不适合滥用</td><td>若组件很轻量，比较成本可能高于渲染收益</td></tr><tr><td>useContext 更新仍会触发</td><td>Context 更新时会重新渲染子节点</td></tr><tr><td>不缓存 state</td><td>仅缓存渲染结果，与内部状态无关</td></tr></tbody></table><h4 id="8）总结"><a href="#8）总结" class="headerlink" title="8）总结"></a><strong><font color='#10c300'>8）总结</font></strong></h4><table><thead><tr><th>项目</th><th>内容</th></tr></thead><tbody><tr><td>作用</td><td>缓存组件渲染结果，避免不必要渲染</td></tr><tr><td>类型</td><td>高阶组件（HOC）</td></tr><tr><td>比较机制</td><td>浅层比较 props（可自定义）</td></tr><tr><td>推荐搭配</td><td><code>useCallback</code>, <code>useMemo</code> 保持 props 引用稳定</td></tr><tr><td>适用场景</td><td>子组件稳定、父组件频繁渲染、性能优化</td></tr></tbody></table><hr><p>🌟 <strong>一句话总结：</strong></p><blockquote><p><code>React.memo</code> 就像是函数组件的“PureComponent”。<br>当 props 没变时，跳过渲染，提高性能。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;React-初学者完全指南-React-18-19&quot;&gt;&lt;a href=&quot;#React-初学者完全指南-React-18-19&quot; class=&quot;headerlink&quot; title=&quot;React 初学者完全指南 (React 18 &amp;amp; 19)&quot;&gt;&lt;/a&gt;Rea</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="react18" scheme="http://example.com/tags/react18/"/>
    
  </entry>
  
  <entry>
    <title>React18</title>
    <link href="http://example.com/posts/4179c0b95435.html"/>
    <id>http://example.com/posts/4179c0b95435.html</id>
    <published>2025-12-02T10:28:38.000Z</published>
    <updated>2026-01-27T15:41:13.667Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、认识react"><a href="#一、认识react" class="headerlink" title="一、认识react"></a><strong><font color='red'>一、认识react</font></strong></h2><p>React 是⼀个声明式，⾼效且灵活的⽤于构建⽤户界⾯的 JavaScript 库</p><blockquote><p>React 起源于 Facebook 的内部项目，因为该公司对市场上所有 JavaScript MVC 框架，都不满意，就决定自己写⼀套，用来架设 Instagram 的网站。做出来以后，发现这套东西很好用，就在 2013 年 5 月开源了。</p></blockquote><p>2022年发布的18版本</p><h3 id="1-1、基本结构"><a href="#1-1、基本结构" class="headerlink" title="1.1、基本结构"></a><strong><font color='#10c300'>1.1、基本结构</font></strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--react核⼼包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@18/umd/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--react dom相关的包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@18/umd/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 提供es6和jsx的⽀持--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/@babel/standalone/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--提供⼀个挂载点--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- type=&quot;text/babel&quot; 使其能够编译jsx --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//1.获取到这个挂载点元素</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//2.创建⼀个根节点,接收我们的挂载点元素对象当参数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//3.调⽤渲染⽅法渲染⻚⾯,render⾥⾯放的是⻚⾯内容(内容指的是html标签或者组件)</span></span></span><br><span class="line"><span class="language-javascript">        root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是react<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>) <span class="comment">//jsx，html标签不需要加引号</span></span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//也可以简写为</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//ReactDOM.createRoot(document.getElementById(&quot;app&quot;)).render(&lt;h1&gt;哈哈哈哈&lt;/h1&gt;)</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="1-2、关于jsx"><a href="#1-2、关于jsx" class="headerlink" title="1.2、关于jsx"></a><strong><font color='#10c300'>1.2、关于jsx</font></strong></h3><blockquote><p>所谓的jsx其实就是允许在js中正常编写html而无需加引号</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line"><span class="comment">//JSX 允许你将 UI 结构写得和 HTML 很相似，但实际上它会被编译成 JavaScript 对象和函数调⽤</span></span><br><span class="line"><span class="comment">//这段 JSX 会被编译成下⾯的 JavaScript：</span></span><br><span class="line"><span class="keyword">const</span> element = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>, <span class="literal">null</span>, <span class="string">&#x27;Hello, world!&#x27;</span>);</span><br></pre></td></tr></table></figure><p>这种看起来可能有些奇怪的标签语法既不是字符串也不是 HTML。<br>它被称为 JSX， ⼀种 JavaScript 的语法扩展。 我们推荐在 React 中使⽤ JSX 来描述用户界面。</p><p><code>jsx中想写变量，使⽤&#123;&#125;就可以插⼊变量</code></p><blockquote><p>{ }相当于提供了js的执行环境，大括号里可以任意的js表达式（由运算符连接的），不能写语句（声明语句，if 、for）</p></blockquote><h4 id="1）注意事项"><a href="#1）注意事项" class="headerlink" title="1）注意事项 "></a><strong><font color='cornflowerblue'>1）注意事项 </font></strong></h4><ol><li><p><strong>怎么在jsx中的html中写注释</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &#123;<span class="comment">/*大苏打*/</span>&#125;</span><br><span class="line">        &lt;<span class="title class_">Welcome</span>/&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span>/&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>在多行 JSX 代码中是推荐圆括号 <code>()</code> 来包裹 JSX 代码：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>aaaa<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>最外层只能有⼀个根元素：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>aaaa<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>jsx中，class要改为className</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>aaaa<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>jsx中style必须写成对象的形式</strong>（双大括号）<br>外面的那个大括号是提供一个js环境，里面的大括号是接受一个样式对象</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> txt = <span class="string">&quot;哈哈哈我是你哥&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="string">&quot;title&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;a&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> &quot;<span class="attr">red</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;txt&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cssStyle = &#123;</span><br><span class="line">  <span class="attr">width</span>: <span class="string">&quot;50px&quot;</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="string">&quot;50px&quot;</span>,</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&quot;yellow&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;a&#125;</span> <span class="attr">style</span>=<span class="string">&#123;cssStyle&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;txt&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> color = <span class="string">&quot;green&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;a&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">color</span>, <span class="attr">width:</span> &quot;<span class="attr">200px</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;txt&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>样式中有多个单词组成的样式不能用 横线连接，改为驼峰式</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">className</span>=<span class="string">&#123;a&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">color</span>, <span class="attr">width:</span> &quot;<span class="attr">200px</span>&quot;, <span class="attr">marginLeft:</span> &quot;<span class="attr">50px</span>&quot; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;txt&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;url&#125;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>样式中是数字的，单位可以省略</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ele = (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;a&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">color</span>, <span class="attr">width:</span> <span class="attr">200</span>, <span class="attr">marginLeft:</span> <span class="attr">50</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;txt&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;url&#125;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br></li><li><p><strong>jsx中标签数组会自动展开</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>111<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>, <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>222<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>];</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;arr&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><br><h2 id="二、组件"><a href="#二、组件" class="headerlink" title="二、组件"></a><strong><font color='red'>二、组件</font></strong></h2><p>其实就是⼀段封装了html css js的代码，最终表现为⼀个自定义标签</p><p>组件都有自己独立的作用域：</p><blockquote><p>react中的组件分为两大类：</p><p>⼀类是函数式组件（推荐）</p><p>⼀类是类组件 （过时）</p></blockquote><br><h3 id="2-1、类组件"><a href="#2-1、类组件" class="headerlink" title="2.1、类组件"></a><strong><font color='#10c300'>2.1、类组件</font></strong></h3><p>要将 React 组件定义为类，请继承内置的 Component 类并定义 render 方法：</p><p><strong>基本结构</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>自定义类组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// return后面不写html标签直接换行 则需要用括号包裹</span></span><br><span class="line">        <span class="comment">// return (</span></span><br><span class="line">        <span class="comment">//     &lt;div&gt;自定义类组件&lt;/div&gt;</span></span><br><span class="line">        <span class="comment">// )</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用组件</span></span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span>/&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="1）关于Fragment"><a href="#1）关于Fragment" class="headerlink" title="1）关于Fragment "></a><strong><font color='cornflowerblue'>1）关于Fragment </font></strong></h4><p>这个空标签被称作 Fragment。React Fragment 允许你将子元素分组，而不会在 HTML 结构中添加额外节点。</p><p>类似vue中的<code>&lt;templete&gt;&lt;/templete&gt;</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span>111<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>,</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span>222<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">];</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><h4 id="2）props"><a href="#2）props" class="headerlink" title="2）props"></a><strong><font color='cornflowerblue'>2）props</font></strong></h4><p>组件的属性类似于函数的参数，可以让组件接收外面的数据，展现出不同的结果。</p><blockquote><p>props是类组件⾃带的属性，代表所有属性的集合</p></blockquote><p>**注意：**属性不能更改，因为属性是从外部传⼊的并不是组件自己的数据，所有没权利更改。如果想更改只能去修改数据源，让他重新传⼀个新属性。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123; name &#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello，&#123;name&#125; <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;张三&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;李四&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;王五&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;赵六&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h5 id="a、props-children"><a href="#a、props-children" class="headerlink" title="a、props.children "></a><strong><font color='orange'>a、props.children </font></strong></h5><p>类似vue中的插槽</p><blockquote><p>如果在组件标签内写内容，通过props.children读取<br>如果传⼊单个内容，返回的就是⼀个对象，如果传⼊多个内容的话，返回的就是数组</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123; children &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>二级主题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Welcome</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果想把组件标签内的多个内容渲染到不同位置,通过数组索引访问即可</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">props</span>);</span><br><span class="line">        <span class="keyword">let</span> &#123; children &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;children[1]&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>一级标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;children[0]&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h3</span>&gt;</span>二级主题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Welcome</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><h4 id="3）state"><a href="#3）state" class="headerlink" title="3）state "></a><strong><font color='cornflowerblue'>3）state </font></strong></h4><ul><li>state是属于组件内部私有的，外部无法访问</li><li>state 用于存储组件的动态数据，当组件的 state 更新时，就会执行render函数，组件会重新渲染以更新页面</li></ul><p>使用state必须先定义初始值：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义初始状态的两种⽅式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.在构造器⾥定义</span></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.在类中直接定义</span></span><br><span class="line">state = &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="a、何时使用状态？"><a href="#a、何时使用状态？" class="headerlink" title="a、何时使用状态？"></a><strong><font color='orange'>a、何时使用状态？</font></strong></h5><ul><li>组件中什么东西将来会变化，就把什么东西定义成状态</li><li>只要修改了状态，组件就会重新渲染</li></ul><h5 id="b、state-的使用"><a href="#b、state-的使用" class="headerlink" title="b、state 的使用"></a><strong><font color='orange'>b、state 的使用</font></strong></h5><p><strong>1、不能直接修改state，必须采取setState方法去更改</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="number">1</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  add = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 方式一：</span></span><br><span class="line">    <span class="comment">// this.setState(&#123;</span></span><br><span class="line">    <span class="comment">//    num: this.state.num += 1</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方式二：推荐 需要return出去，这里用了()即return了</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">num</span>: prevState.<span class="property">num</span> + <span class="number">1</span>,</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; num &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.add&#125;</span>&gt;</span>点击增加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><p><strong>2、数组和对象的更改</strong></p><p>对于数组和对象，必须整体替换，即</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">数组名: 新数组</span><br><span class="line">对象: 新对象</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">score</span>: [<span class="string">&quot;语文90&quot;</span>, <span class="string">&quot;数学99&quot;</span>],</span><br><span class="line">        <span class="attr">information</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;JACK&quot;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span> += <span class="number">1</span>,</span><br><span class="line">            <span class="attr">score</span>: [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">score</span>, <span class="string">&#x27;英语59&#x27;</span>],</span><br><span class="line">            <span class="attr">information</span>: &#123;...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">information</span>, <span class="attr">links</span>: <span class="string">&#x27;唱歌&#x27;</span>&#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; num, score, information &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>成绩：&#123;score&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>信息：&#123;JSON.stringify(information)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><p><strong>3、state的更新可能是异步的（出于性能考虑）</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span> + <span class="number">1</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span>); <span class="comment">// 第一次点击修改时为：1 因此证明更新是异步的</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; num &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><p>如果想同步获取数据，那么可以使用setState的第⼆个参数</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span> + <span class="number">1</span>,</span><br><span class="line">        &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; num &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><p><strong>4、state的更新可能会被合并</strong></p><p>连续多次修改state，出于性能考虑，会只执行⼀次。</p><p>因为state中的值发生变化render函数就会执行一次，即页面渲染一次。如果这里遍历十次页面渲染十次就会影响性能。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="number">10</span>; index++) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span>); <span class="comment">// 打印10个1</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">num</span> + <span class="number">1</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; num &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>  // 页面展示的确是2</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><p>如果不想合并多次更改state的操作，可以通过给setState传入函数的形式，返回新的状态</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">prev</span>) =&gt;</span> &#123; <span class="comment">// 代表的是上⼀次更新的状态</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(prev.<span class="property">num</span>); <span class="comment">// 1,2,3,4,5,6,7,8,9,10</span></span><br><span class="line">                <span class="keyword">return</span> &#123;  <span class="comment">// 返回值就是你想把什么状态改成什么</span></span><br><span class="line">                    <span class="attr">num</span>: prev.<span class="property">num</span> + <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; num &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>修改<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="4）类组件完整结构"><a href="#4）类组件完整结构" class="headerlink" title="4）类组件完整结构"></a><strong><font color='cornflowerblue'>4）类组件完整结构</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Qq</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="comment">// 定义数据</span></span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">nickname</span>: <span class="string">&#x27;爷傲奈我何&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// js逻辑</span></span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">nickname</span>: <span class="string">&#x27;更换数据了&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// html</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;nickname&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;nickname&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="2-2、函数组件"><a href="#2-2、函数组件" class="headerlink" title="2.2、函数组件"></a><strong><font color='#10c300'>2.2、函数组件</font></strong></h3><h4 id="1）基本概念"><a href="#1）基本概念" class="headerlink" title="1）基本概念"></a><strong><font color='cornflowerblue'>1）基本概念</font></strong></h4><p>react中的函数组件通常只考虑负责UI的渲染，没有自身的状态没有业务逻辑代码，<code>是⼀个纯函数</code></p><p>react中的函数组件基本等同于函数，但是函数组件有<strong>两个必须</strong>的特性：</p><blockquote><p>1.组件名必须大写</p><p>2.返回jsx</p></blockquote><p>它接收唯⼀带有数据的 “props”（代表属性）对象与并返回⼀个 React 元素。</p><p><code>props是所有属性的集合。属性类似于函数中的参数，是一个对象</code></p><p><code>属性不允许更改，如果要改，必须由父组件重新传一个新的props</code></p><p>这类组件被称为“函数组件”，因为它本质上就是 JavaScript 函数。</p><br><h4 id="2）函数的嵌套"><a href="#2）函数的嵌套" class="headerlink" title="2）函数的嵌套"></a><strong><font color='cornflowerblue'>2）函数的嵌套</font></strong></h4><p>组件可以渲染其他组件，但是 <strong>请不要嵌套他们的定义</strong>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 🔴 永远不要在组件中定义组件</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面这段代码 <a href="https://react.docschina.org/learn/preserving-and-resetting-state#different-components-at-the-same-position-reset-state">非常慢，并且会导致 bug 产生</a>。因此，你应该在顶层定义每个组件：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ✅ 在顶层声明组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>我是TOM<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Gallery</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="3）什么是纯函数"><a href="#3）什么是纯函数" class="headerlink" title="3）什么是纯函数"></a><strong><font color='cornflowerblue'>3）什么是纯函数</font></strong></h4><blockquote><p>一个函数的返回结果只依赖于它的参数(形参)，并且在执行过程里面没有副作用，我们就把这个函数叫做纯函数。</p></blockquote><p><a href="">副作用（side effect） 是指函数或表达式在执行过程中对外部环境产生的影响，而不仅仅是返回一个值。 副作用可能包括但不限于对全局变量、参数、数据结构、文件系统、网络请求等进行修改</a></p><p>以下都不是纯函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a=<span class="number">5</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> a+b</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>(<span class="number">8</span>) <span class="comment">//因为返回值依赖了外部的a，不仅仅是依赖参数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">obj, a</span>)&#123;</span><br><span class="line">  obj.<span class="property">age</span>=<span class="number">18</span></span><br><span class="line">  <span class="keyword">return</span> obj.<span class="property">age</span>+a <span class="comment">//修改了参数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以下都是纯函数</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> a+<span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fn</span>=(<span class="params">b</span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">let</span> obj=&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;</span><br><span class="line">    obj.<span class="property">x</span>=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> obj.<span class="property">x</span>+b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="三、事件处理"><a href="#三、事件处理" class="headerlink" title="三、事件处理"></a><strong><font color='red'>三、事件处理</font></strong></h2><h3 id="3-1、基本语法"><a href="#3-1、基本语法" class="headerlink" title="3.1、基本语法"></a><strong><font color='#10c300'>3.1、基本语法</font></strong></h3><ul><li>React 事件绑定属性的命名采用驼峰式写法，而不是小写</li><li>等号后面跟的不是字符串，而是函数名</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="3-2、关于this指向问题"><a href="#3-2、关于this指向问题" class="headerlink" title="3.2、关于this指向问题"></a><strong><font color='#10c300'>3.2、关于this指向问题</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是一个状态&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// undefined</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><p><strong><code>这里的this是undefined</code></strong><br>react中的onClick是⼀个自定义的事件名，中间经历过⼀次赋值（onClick&#x3D;{this.fn}），就是把等号后面的函数名赋给了前面的onClick，所以导致this丢失。</p><p>以下代码可以演示为什么经历过⼀次赋值，this会丢失：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正常调用能取到this</span></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">display</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.<span class="title function_">display</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将函数当做一个实参传给fn函数的形参，这里相当于一次赋值，丢失this</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">display</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">// undefined</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">cb</span>) &#123;</span><br><span class="line">    <span class="title function_">cb</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>(obj.<span class="property">display</span>)</span><br></pre></td></tr></table></figure><br><h3 id="3-3、如何解决this丢失的问题？"><a href="#3-3、如何解决this丢失的问题？" class="headerlink" title="3.3、如何解决this丢失的问题？"></a><strong><font color='#10c300'>3.3、如何解决this丢失的问题？</font></strong></h3><h4 id="1）在构造器中绑定this"><a href="#1）在构造器中绑定this" class="headerlink" title="1）在构造器中绑定this"></a><strong><font color='cornflowerblue'>1）在构造器中绑定this</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fn</span> = <span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>) <span class="comment">// 在构造器⾥完成this绑定</span></span><br><span class="line">    &#125;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是一个状态&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="2）调用的时候绑定"><a href="#2）调用的时候绑定" class="headerlink" title="2）调用的时候绑定 "></a><strong><font color='cornflowerblue'>2）调用的时候绑定 </font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)&#125; &gt;按钮&lt;/button&gt;</span><br></pre></td></tr></table></figure><br><h4 id="3）使用箭头函数-最推荐"><a href="#3）使用箭头函数-最推荐" class="headerlink" title="3）使用箭头函数(最推荐) "></a><strong><font color='cornflowerblue'>3）使用箭头函数(最推荐) </font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是一个状态&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123; <span class="comment">// 使⽤箭头函数</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="3-4、函数参数的传递"><a href="#3-4、函数参数的传递" class="headerlink" title="3.4、函数参数的传递"></a><strong><font color='#10c300'>3.4、函数参数的传递</font></strong></h3><blockquote><p>注意⼀定不能直接写 函数名+（） 这种是函数调用语句<br>react中的事件后面跟的是函数名或者函数体(匿名函数)</p></blockquote><h4 id="1）传入匿名函数的形式"><a href="#1）传入匿名函数的形式" class="headerlink" title="1）传入匿名函数的形式"></a><strong><font color='cornflowerblue'>1）传入匿名函数的形式</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是一个状态&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(val); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;this.fn(66)&#125;&#125;&gt;按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="2）bind的方式"><a href="#2）bind的方式" class="headerlink" title="2）bind的方式"></a><strong><font color='cornflowerblue'>2）bind的方式</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="variable language_">this</span>.<span class="property">fn</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>,<span class="number">5</span>)&#125; &gt;按钮&lt;/button&gt;</span><br></pre></td></tr></table></figure><br><h4 id="3）案例"><a href="#3）案例" class="headerlink" title="3）案例"></a><strong><font color='cornflowerblue'>3）案例</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">bgColor</span>: <span class="string">&quot;rgb(255,255,255)&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> r = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>)</span><br><span class="line">        <span class="keyword">const</span> g = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>)</span><br><span class="line">        <span class="keyword">const</span> b = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">bgColor</span>: <span class="string">`rgb(<span class="subst">$&#123;r&#125;</span>,<span class="subst">$&#123;g&#125;</span>,<span class="subst">$&#123;b&#125;</span>)`</span></span><br><span class="line">        &#125;)                </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> box = &#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">            <span class="attr">border</span>: <span class="string">&#x27;1px solid #ccc&#x27;</span>,</span><br><span class="line">            <span class="attr">background</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">bgColor</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;box&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h2 id="四、组件之间的传值"><a href="#四、组件之间的传值" class="headerlink" title="四、组件之间的传值"></a><strong><font color='red'>四、组件之间的传值</font></strong></h2><h3 id="4-1、父传子-props"><a href="#4-1、父传子-props" class="headerlink" title="4.1、父传子(props)"></a><strong><font color='#10c300'>4.1、父传子(props)</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是父组件的数据&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; msg &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是父组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Child</span> <span class="attr">a</span>=<span class="string">&#123;msg&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; a &#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是子组件，&#123;a&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">GrandChild</span> <span class="attr">b</span>=<span class="string">&#123;a&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GrandChild</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>我是孙子组件，&#123;props.b&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Parent</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="4-2、子传父-回调函数"><a href="#4-2、子传父-回调函数" class="headerlink" title="4.2、子传父(回调函数)"></a><strong><font color='#10c300'>4.2、子传父(回调函数)</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    fn = <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">msg</span>: val</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是父组件, 这是子组件传来的数据：&#123;this.state.msg || &#x27;______&#x27;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Child</span> <span class="attr">fn</span>=<span class="string">&#123;this.fn&#125;</span> /&gt;</span>  // 1、将fn方法 通过方法传给子组件</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;我是子组件的数据&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    fn1 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 2、子组件通过props接收fn方法 并且调用传参</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">fn</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn1&#125;</span>&gt;</span>我是子组件，点击可将子组件数据传给父组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Parent</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="4-3、案例"><a href="#4-3、案例" class="headerlink" title="4.3、案例"></a><strong><font color='#10c300'>4.3、案例</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;app&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Qq</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">nickname</span>: <span class="string">&#x27;爷傲奈我何&#x27;</span>,</span><br><span class="line">    <span class="attr">show</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  edit = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">show</span>: <span class="string">&#x27;block&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  nclose = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">show</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  changeName = <span class="function">(<span class="params">nickname</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      nickname,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; nickname, show &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;nickname&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.edit&#125;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Modal</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">nkname</span>=<span class="string">&#123;nickname&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">show</span>=<span class="string">&#123;show&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">nclose</span>=<span class="string">&#123;this.nclose&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">changeName</span>=<span class="string">&#123;this.changeName&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Modal</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; nkname, show, nclose, changeName &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;sbox&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">display:</span> <span class="attr">show</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;nkname&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;nclose&#125;</span>&gt;</span>关闭弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> changeName(&#x27;不吃香菜&#x27;)&#125;&gt;改名称<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Qq</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h2 id="五、条件渲染"><a href="#五、条件渲染" class="headerlink" title="五、条件渲染"></a><strong><font color='red'>五、条件渲染</font></strong></h2><p>通常你的组件会需要根据不同的情况显示不同的内容。在 React 中，你可以通过使用 JavaScript 的 <code>if</code> 语句、<code>&amp;&amp;</code> 和 <code>? :</code> 运算符来选择性地渲染 JSX。</p><h3 id="5-1、基本写法"><a href="#5-1、基本写法" class="headerlink" title="5.1、基本写法"></a><strong><font color='#10c300'>5.1、基本写法</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123; <span class="comment">// 这里也可以用解构 &#123;flag&#125;</span></span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">flag</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>欢迎您尊贵的会员<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>下午好，普通用户<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">flag</span>=<span class="string">&#123;true&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">flag</span>=<span class="string">&#123;false&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><h3 id="5-2、可以返回null"><a href="#5-2、可以返回null" class="headerlink" title="5.2、可以返回null"></a><strong><font color='#10c300'>5.2、可以返回null</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">flag</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Vip</span> /&gt;</span></span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Vip</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是尊贵的vip<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">flag</span>=<span class="string">&#123;true&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">flag</span>=<span class="string">&#123;false&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><h3 id="5-3、-运算符"><a href="#5-3、-运算符" class="headerlink" title="5.3、&amp;&amp;运算符"></a><strong><font color='#10c300'>5.3、&amp;&amp;运算符</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Email</span>(<span class="params">&#123;msg&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> msg.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>你有&#123; msg.length &#125;条消息待处理<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&quot;下午吃什么&quot;</span>, <span class="string">&quot;晚上吃什么&quot;</span>, <span class="string">&quot;明天吃什么&quot;</span>]</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Email</span> <span class="attr">msg</span>=<span class="string">&#123;arr&#125;/</span>&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="5-4、三元表达式"><a href="#5-4、三元表达式" class="headerlink" title="5.4、三元表达式"></a><strong><font color='#10c300'>5.4、三元表达式</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">&#123; flag&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> flag ? <span class="language-xml"><span class="tag">&lt;<span class="name">Vip</span>/&gt;</span></span> : <span class="language-xml"><span class="tag">&lt;<span class="name">Normal</span>/&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Vip</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是尊贵的vip<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Normal</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是黄金普通用户<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">flag</span>=<span class="string">&#123;true&#125;</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h2 id="六、列表渲染"><a href="#六、列表渲染" class="headerlink" title="六、列表渲染"></a><strong><font color='red'>六、列表渲染</font></strong></h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Week</span>(<span class="params">&#123; courseList &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;courseList.map((item, index) =&gt; (<span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.courseName&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> courseList = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">        <span class="attr">courseName</span>: <span class="string">&#x27;第一节课&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">        <span class="attr">courseName</span>: <span class="string">&#x27;第二节课&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">        <span class="attr">courseName</span>: <span class="string">&#x27;第三节课&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;4&#x27;</span>,</span><br><span class="line">        <span class="attr">courseName</span>: <span class="string">&#x27;第四节课&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Week</span> <span class="attr">courseList</span>=<span class="string">&#123;courseList&#125;</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><p><strong><code>为什么需要key？</code></strong></p><p>key是用来给列表中的每一项做标记，后续更新只更新有差别的部分，不变的部分就不更新</p><p>不要用index当key，key要求是独一无二的字符串，一般由后端返回</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在原生js中，假如有一个渲染的列表如下：</span></span><br><span class="line">&lt;li&gt;<span class="number">1</span>&lt;/li&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 当数据发生变化，变成：</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 对于js来说不会因为只变了一个就只删除这一个然后创建一个新的，而是整个列表都删除，创建新的全部重新创建，这样列表数据多了就会造成性能问题</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在react和vue中这种列表如果变化了，不会立马去更新。因为react和vue有一个虚拟dom，每次列表数据更新，就会先去更新虚拟dom（更新很快），然后和真实dom做对比（这种对比就是diff算法）去更新改动的地方。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// key是用来给列表中的每一项做标记，后续更新只更新有差别的部分，不变的部分就不更新</span></span><br></pre></td></tr></table></figure><p><strong><code>不要用index当key，key要求是独一无二的字符串</code></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202507160102927.png" alt="image-20250716010216779"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为什么不用index索引去当key呢？</span></span><br><span class="line">如果用索引当key，那么图一列表以此是<span class="number">012345</span>。如果某天将列表第二个删除了(图<span class="number">2</span>)，那么是不是列表第一个之后的key全部都发生变化了，原来列表内容<span class="number">3</span>的key是<span class="number">2</span>，现在列表内容3key是<span class="number">1</span>了，这时候需求demo和真实dom一对比，会去更新变化的地方即列表内容<span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>的都要去做更新，如果又后端返回一个唯一id值，那么就不存在这种问题</span><br></pre></td></tr></table></figure><br><h2 id="七、表单处理"><a href="#七、表单处理" class="headerlink" title="七、表单处理"></a><strong><font color='red'>七、表单处理</font></strong></h2><p>在react中表单的处理通常和其他元素不一样， 正常情况下我们把html中会发上变化的地方都设置为state，然后通过更改state的更新视图</p><p>在 HTML 中，表单元素<code>（如&lt;input&gt;、 &lt;textarea&gt; 和 &lt;select&gt;）</code>通常自己维护 state，并根据用户输入进行更新。<br>而在 React 中，可变状态（mutable state）通常保存在组件的 state 属性中，并且只能通过使用 setState()来更新。</p><p>渲染表单的 React 组件还控制着用户输入过程中表单发生的操作。被 React 以这种方式控制取值的表单输入元素就叫做“受控组件”。</p><br><h3 id="7-1、基本使用"><a href="#7-1、基本使用" class="headerlink" title="7.1、基本使用"></a><strong><font color='#10c300'>7.1、基本使用</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state=&#123;</span><br><span class="line">        <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    handleChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">value</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.value&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;this.state.value&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="7-2、多个表单元素"><a href="#7-2、多个表单元素" class="headerlink" title="7.2、多个表单元素"></a><strong><font color='#10c300'>7.2、多个表单元素</font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state=&#123;</span><br><span class="line">        <span class="attr">userValue</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">emailValue</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    handleChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> name = e.<span class="property">target</span>.<span class="property">name</span> === <span class="string">&quot;user&quot;</span> ? <span class="string">&#x27;userValue&#x27;</span> : <span class="string">&#x27;emailValue&#x27;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            [name]: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">userValue</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">emailValue</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.userValue&#125;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> <span class="attr">value</span>=<span class="string">&#123;this.state.emailValue&#125;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="7-3、select、checkbox、radio等特殊元素"><a href="#7-3、select、checkbox、radio等特殊元素" class="headerlink" title="7.3、select、checkbox、radio等特殊元素"></a><font color='red' size="">7.3、select、checkbox、radio等特殊元素</font></h3><h4 id="1）select用法"><a href="#1）select用法" class="headerlink" title="1）select用法"></a><strong><font color='cornflowerblue'>1）select用法</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">value</span>: <span class="string">&quot;shanghai&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    change = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">value</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">value</span>=<span class="string">&#123;this.state.value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shanghai&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shenzhen&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="2）checkbox用法"><a href="#2）checkbox用法" class="headerlink" title="2）checkbox用法"></a><strong><font color='cornflowerblue'>2）checkbox用法</font></strong></h4><p><strong><code>操作他的checked属性</code></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">isChecked</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    change = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">isChecked</span>: e.<span class="property">target</span>.<span class="property">checked</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span> <span class="attr">checked</span>=<span class="string">&#123;this.state.checked&#125;</span>  <span class="attr">onChange</span>=<span class="string">&#123;this.change&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="3）radio的用法"><a href="#3）radio的用法" class="headerlink" title="3）radio的用法"></a><strong><font color='cornflowerblue'>3）radio的用法</font></strong></h4><p><strong><code>通过更改value，间接操作checked属性</code></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Input</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">n</span>: <span class="string">&quot;option2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    change = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">n</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;city&quot;</span> <span class="attr">value</span>=<span class="string">&quot;option1&quot;</span> <span class="attr">checked</span>=<span class="string">&#123;this.state.n</span> == <span class="string">&quot;option1&quot;</span>&#125; <span class="attr">onChange</span>=<span class="string">&#123;this.change&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;city&quot;</span> <span class="attr">value</span>=<span class="string">&quot;option2&quot;</span> <span class="attr">checked</span>=<span class="string">&#123;this.state.n</span> == <span class="string">&quot;option2&quot;</span>&#125; <span class="attr">onChange</span>=<span class="string">&#123;this.change&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Input</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h2 id="八、ref"><a href="#八、ref" class="headerlink" title="八、ref"></a><strong><font color='red'>八、ref</font></strong></h2><blockquote><p>什么是ref：ref是React提供的用来操纵React组件实例或者DOM元素的接口。</p><p>基本跟vue中的ref用法一样 <strong><code>ref拿到的是真实dom </code></strong></p></blockquote><p>简单来说，就是提供了一种方式能让你直接获取到dom元素对象或者组件实例。</p><p><strong><code>ref不能用于函数组件上（函数组件没有实例），ref只适用于实例对象上，例如class类</code></strong></p><h3 id="8-1、回调形式的ref-（老版本推荐）"><a href="#8-1、回调形式的ref-（老版本推荐）" class="headerlink" title="8.1、回调形式的ref （老版本推荐）"></a><strong><font color='#10c300'>8.1、回调形式的ref （老版本推荐）</font></strong></h3><h4 id="1）在元素中"><a href="#1）在元素中" class="headerlink" title="1）在元素中"></a><strong><font color='cornflowerblue'>1）在元素中</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    test = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">ins</span>); <span class="comment">// 获取到p标签这个dom</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&#123;(dom)</span> =&gt;</span> &#123; this.ins = dom &#125;&#125;&gt;你好啊<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.test&#125;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Dome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h4 id="2）在组件中"><a href="#2）在组件中" class="headerlink" title="2）在组件中"></a><strong><font color='cornflowerblue'>2）在组件中</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dome</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    test = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">ins</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">ins1</span>.<span class="property">state</span>.<span class="property">msg</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">ins1</span>.<span class="title function_">fn</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&#123;(dom)</span> =&gt;</span> &#123; this.ins = dom &#125;&#125;&gt;你好啊<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.test&#125;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;dom</span> =&gt;</span> this.ins1 = dom&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state= &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;我是子组件的数据&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">666666666</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Dome</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure><br><h3 id="8-2、React-createRef-（适用于类组件）"><a href="#8-2、React-createRef-（适用于类组件）" class="headerlink" title="8.2、React.createRef （适用于类组件） "></a><strong><font color='#10c300'>8.2、React.createRef （适用于类组件） </font></strong></h3><blockquote><p>通过在class中使用React.createRef()方法创建一些变量，可以将这些变量绑定到标签的ref中</p><p>那么该变量的current则指向绑定的标签dom</p></blockquote><h4 id="1）在元素中-1"><a href="#1）在元素中-1" class="headerlink" title="1）在元素中"></a><strong><font color='cornflowerblue'>1）在元素中</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    myRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">myRef</span>.<span class="property">current</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span>&gt;</span>这是一个组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> /&gt;</span></span>)</span><br></pre></td></tr></table></figure><br><h4 id="2）在组件中-1"><a href="#2）在组件中-1" class="headerlink" title="2）在组件中"></a><strong><font color='cornflowerblue'>2）在组件中</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    myRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">    myRef1 = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">myRef</span>.<span class="property">current</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">myRef1</span>.<span class="property">current</span>.<span class="property">state</span>.<span class="property">msg</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">myRef1</span>.<span class="property">current</span>.<span class="title function_">childFn</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span>&gt;</span>这是一个组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef1&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;我是一个子组件数据&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    childFn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6666666</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> /&gt;</span></span>)</span><br></pre></td></tr></table></figure><br><h3 id="8-3、useRef-（适用于函数组件）"><a href="#8-3、useRef-（适用于函数组件）" class="headerlink" title="8.3、useRef （适用于函数组件） "></a><strong><font color='#10c300'>8.3、useRef （适用于函数组件） </font></strong></h3><p>是一个hooks，后面讲</p><br><h3 id="8-4、综合案例"><a href="#8-4、综合案例" class="headerlink" title="8.4、综合案例 "></a><strong><font color='#10c300'>8.4、综合案例 </font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;app&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    myRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span><br><span class="line">    </span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">list</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">    change = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">value</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    add = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">value</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                <span class="attr">list</span>: [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>, <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">value</span>],</span><br><span class="line">                <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">myRef</span>.<span class="property">current</span>.<span class="title function_">focus</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    del = <span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">list</span>: [...<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">list</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; list &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;this.state.value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.change&#125;</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.add&#125;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;</span></span><br><span class="line"><span class="language-xml">                        list.length &gt; 0 &amp;&amp; list.map((item, index) =&gt; (<span class="tag">&lt;<span class="name">li</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.del(index)&#125; key=&#123;index&#125;&gt;&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span>))</span></span><br><span class="line"><span class="language-xml">                    &#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> /&gt;</span></span>)</span><br></pre></td></tr></table></figure><br><h2 id="九、脚手架搭建项目"><a href="#九、脚手架搭建项目" class="headerlink" title="九、脚手架搭建项目"></a><strong><font color='red'>九、脚手架搭建项目</font></strong></h2><h3 id="9-1、基于webpack创建项目"><a href="#9-1、基于webpack创建项目" class="headerlink" title="9.1、基于webpack创建项目 "></a><strong><font color='#10c300'>9.1、基于webpack创建项目 </font></strong></h3><p>基于webpack创建是使用create-react-app搭建项目，Create React App 是一个官方支持的创建 React 单页应用程序的方法。</p><h4 id="1）安装"><a href="#1）安装" class="headerlink" title="1）安装"></a><strong><font color='cornflowerblue'>1）安装</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一</span></span><br><span class="line"><span class="comment">//全局安装脚手架</span></span><br><span class="line">npm install -g create-react-app</span><br><span class="line"><span class="comment">//利用脚手架创建项目 </span></span><br><span class="line">create-react-app my-app</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二（推荐）</span></span><br><span class="line">npx create-react-app my-app</span><br><span class="line">cd my-app</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure><p>npx 是 npm5.2.0版本新增的一个工具包，定义为npm包的执行者，相比 npm，npx 会自动安装依赖包并执行某个命令。</p><p>使用npx创建项目，创建的时候会检查电脑是否有create-react-app，没有就安装create-react-app，有就跳过。</p><br><h4 id="2）生成的项目文件解读"><a href="#2）生成的项目文件解读" class="headerlink" title="2）生成的项目文件解读"></a><strong><font color='#10c300'>2）生成的项目文件解读</font></strong></h4><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202507201844527.png" alt="image-20250720184443319"></p><ul><li><p>node_modules:项目的核心模块，依赖包</p></li><li><p>public：存放静态资源文件</p><ul><li>.ico:页签的logo</li><li>index.html:唯一的页面文件，只提供根节点</li><li>manifest.json:移动端的配置一文件</li><li>robots.txt:告诉爬虫者，不可爬的页面，没有实质作用只是警告</li></ul></li><li><p>.gitignore:声明一些再在git上传的时候需要忽略的文件</p></li><li><p>package.json:项目的说明文件，有哪些依赖，依赖了哪个版本</p></li><li><p>package-lock.json：项目依赖的安装包的一些版本会做一些限制，进行版本锁定</p></li><li><p>Readme.md:作者的一些话</p></li><li><p>src</p><ul><li>App.css:App组件的样式文件</li><li>App.js 项目的根组件</li><li>App.test.js：自动化测试文件</li><li>index.css全局样式文件</li><li>index.js：项目的入口文件，html只会加载这个js文件(类似vue中main.js)</li><li>reportWebVitals.js:谷歌浏览器退出的一个浏览器性能优化的库</li><li>setupTests：针对index.js的单元测试原件</li></ul></li></ul><blockquote><p>React.StrictMode的作用</p><p>1.识别一些不安全的生命周期</p><p>2.检测意外的副作用</p><p>3.检测过时的context api</p></blockquote><br><h3 id="9-2、基于Vite创建项目"><a href="#9-2、基于Vite创建项目" class="headerlink" title="9.2、基于Vite创建项目 "></a><strong><font color='#10c300'>9.2、基于Vite创建项目 </font></strong></h3><p><strong><code>node版本要大雨18以上，建议用20版本。要不然运行会报错</code></strong></p><p>使用 NPM:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest</span><br></pre></td></tr></table></figure><p>使用 Yarn:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn create vite</span><br></pre></td></tr></table></figure><p>使用 PNPM:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm create vite</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202507201845867.png" alt="image-20250720184501683"></p><br><h3 id="9-3、项目的基本使用"><a href="#9-3、项目的基本使用" class="headerlink" title="9.3、项目的基本使用 "></a><strong><font color='#10c300'>9.3、项目的基本使用 </font></strong></h3><blockquote><p>组件的后缀名我们推荐用jsx，表示是一个组件</p><p>普通js后缀名就用.js</p></blockquote><p>默认引入：</p><blockquote><p>引入的时候可以不需要加文件后缀，编辑器会自动查找.jsx后缀的文件，如果找不到，会接着查找后缀为.js的文件</p><p>如果直接引入的是文件夹的名字，那么默认去查找该文件夹下的index.jsx文件。</p></blockquote><br><h2 id="十、模块化样式"><a href="#十、模块化样式" class="headerlink" title="十、模块化样式"></a><strong><font color='red'>十、模块化样式</font></strong></h2><h3 id="10-1、xxx-module-css"><a href="#10-1、xxx-module-css" class="headerlink" title="10.1、xxx.module.css "></a><strong><font color='#10c300'>10.1、xxx.module.css </font></strong></h3><p><strong>只需要将样式文件名字改  ：名字.module.css即可</strong></p><p>CSS Modules 允许通过自动创建 [filename]_[classname]__[hash] 格式的唯一 classname 来确定 CSS 的作用域,如下</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span>  <span class="string">&quot;./App.module.css&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&#123;style.App&#125;</span>&gt;</span>你好<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&#123;style.title&#125;</span>&gt;</span>哈哈哈哈哈<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="10-2、预处理器（Sass-Less-Stylus）"><a href="#10-2、预处理器（Sass-Less-Stylus）" class="headerlink" title="10.2、预处理器（Sass&#x2F;Less&#x2F;Stylus） "></a><strong><font color='#10c300'>10.2、预处理器（Sass&#x2F;Less&#x2F;Stylus） </font></strong></font></h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$text-color</span>: blue;</span><br><span class="line"><span class="selector-class">.component</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="variable">$text-color</span>;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Component.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./Component.scss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;component&quot;</span>&gt;</span>Styled Text<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="10-3、css-in-js库"><a href="#10-3、css-in-js库" class="headerlink" title="10.3、css-in-js库 "></a><strong><font color='#10c300'>10.3、css-in-js库 </font></strong></h3><p>使用JS编写CSS的库，如styled-components、emotion等</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用styled-components</span></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">StyledDiv</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  color: blue;</span></span><br><span class="line"><span class="string">  font-size: 20px;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">StyledDiv</span>&gt;</span>Styled Text<span class="tag">&lt;/<span class="name">StyledDiv</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h2 id="十一、组件的生命周期"><a href="#十一、组件的生命周期" class="headerlink" title="十一、组件的生命周期"></a><strong><font color='red'>十一、组件的生命周期</font></strong></h2><h3 id="11-1、生命周期图谱"><a href="#11-1、生命周期图谱" class="headerlink" title="11.1、生命周期图谱 "></a><strong><font color='#10c300'>11.1、生命周期图谱 </font></strong></h3><p>组件的生命周期函数就是在特定时间节点上会自动运行的函数</p><p><strong><code>重点：函数组件没有生命周期</code></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202507202212214.png" alt="image-20240416135406354"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202507202212318.png" alt="image-20240416135418172"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;constructor&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">        <span class="attr">info</span>: <span class="string">&quot;hahahaha&quot;</span>,</span><br><span class="line">        <span class="attr">flag</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//组件更新完毕的时候执行</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;componentDidUpdate&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//组件挂载完毕的时候执行</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;componentDidMount&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//组件即将卸载的时候执行</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;componentWillUnmount&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">flag</span>: <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    change = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">info</span>: <span class="string">&quot;呵呵呵呵&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;render&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是App组件&#123;this.state.msg&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.change&#125;</span>&gt;</span>改info<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;</span></span><br><span class="line"><span class="language-xml">                this.state.flag &amp;&amp; <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="11-2、shouldComponentUpdate"><a href="#11-2、shouldComponentUpdate" class="headerlink" title="11.2、shouldComponentUpdate "></a><strong><font color='#10c300'>11.2、shouldComponentUpdate </font></strong></h3><p>shouldComponentUpdate 是一个可以在**<code>组件更新之前</code>**触发的生命周期方法，它允许你通过返回一个布尔值来决定一个组件的输出是否受当前状态或属性的改变影响而更新。如果 shouldComponentUpdate 返回 false，那么组件就不会进行更新。</p><p>简单来说就是用于更新数据时，如果更新的数据和上一次数据是一样的，理论上应该不需要再次更新组件了，但是实际上确实会更新，使用shouldComponentUpdate 则会避免这种情况，如果shouldComponentUpdate 返回false就说明数据一样，那么组件就不需要更新。</p><h4 id="1）基本用法"><a href="#1）基本用法" class="headerlink" title="1）基本用法"></a><strong><font color='cornflowerblue'>1）基本用法</font></strong></h4><p>shouldComponentUpdate 接收两个参数：nextProps 和 nextState，分别表示组件即将接收的新属性和新状态。你需要在这个方法中比较当前组件的属性和状态与新的属性和状态，然后返回一个布尔值来决定组件是否需要更新。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps,nextState</span>)&#123;</span><br><span class="line">  <span class="keyword">if</span>(nextState.<span class="property">msg</span>===<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="2）案例"><a href="#2）案例" class="headerlink" title="2）案例"></a><strong><font color='cornflowerblue'>2）案例</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;hello&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&quot;world&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps, nextState</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nextState.<span class="property">msg</span> === <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">msg</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件更新了&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;render&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是App组件&#123;this.state.msg&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span> // 第二次点击不会执行了</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>自React 16.3版本起，推荐使用 PureComponent（对于类组件） 或 React.memo (对于函数组件) 来进行浅比较，这样可以减少手动编写 shouldComponentUpdate 的需求。</code></p><br><h3 id="11-3、PureComponent"><a href="#11-3、PureComponent" class="headerlink" title="11.3、PureComponent "></a><strong><font color='#10c300'>11.3、PureComponent </font></strong></h3><p>React.PureComponent 与 React.Component 很相似，两者的区别在于 React.Component 并未实现 shouldComponentUpdate()，而 React.PureComponent 中以浅层对比 prop 和 state 的方式来实现了该函数。</p><p><strong><font color='orange'>setState存在两个不合理之处:</font></strong></p><ol><li><p>setState无论是否更新了state，render函数都会重现调用，这是不合理的</p></li><li><p>如果父组件更新了，无论子组件用没用到父组件的数据也都会重新渲染子组件，这是不合理的</p></li></ol><br><p><strong><font color='orange'>传统的解决方案：</font></strong></p><p>通过生命周期函数shouldComponentUpdate(){}判断两次不一致再更新，否则不更新</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps,nextState</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">someprops</span>===nextProps.<span class="property">someprops</span>)&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// 但是这仅仅是一个属性，如果有多个属性的话，一个一个对比会比较麻烦</span></span><br></pre></td></tr></table></figure><br><p><strong><font color='orange'>因此使用PureComponent：</font></strong></p><p>直接将React.Component替换成React.PureComponent</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Mouse</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">  <span class="comment">// 与之前写法相同，只不过不用写shouldComponentUpdate了，会自动帮我们判断</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;hello&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&quot;world&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;组件更新了&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;render&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是App组件&#123;this.state.msg&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.fn&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><br><p><strong><font color='orange'>注意：</font></strong></p><p>React.PureComponent 中的 shouldComponentUpdate() 仅作对象的浅层比较。如果对象中包含复杂的数据结构，则有可能因为无法检查深层的差别，产生错误的比对结果。仅在你的 props 和 state 较为简单时，才使用React.PureComponent，或者在深层数据结构发生变化时调用 forceUpdate() 来确保组件被正确地更新。</p><br><h2 id="十二、context多层级传值"><a href="#十二、context多层级传值" class="headerlink" title="十二、context多层级传值"></a><strong><font color='red'>十二、context多层级传值</font></strong></h2><p>Context 提供了一个无需为每层组件手动添加 props，就能在组件树间进行数据传递的方法。</p><p><strong><font color='orange'>使用步骤</font></strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.创建需要传递的数据React.Context()实例：括号里存放默认初始数据</span></span><br><span class="line"><span class="comment">// src\utils\context.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span>=<span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">MyContext</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.父组件  提供Context数据：</span></span><br><span class="line"><span class="comment">// src\App.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./components/Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyContext</span> <span class="keyword">from</span> <span class="string">&quot;./utils/context&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;父组件数据&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">MyContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;this.state.msg&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是父组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Child</span> <span class="attr">msg</span>=<span class="string">&#123;this.state.msg&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">MyContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.后代组件获取Context数据</span></span><br><span class="line"><span class="comment">// src\components\GrandChild.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式一：通过consumer</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyContext</span> <span class="keyword">from</span> <span class="string">&#x27;../utils/context&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GrandChild</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">MyContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;</span></span><br><span class="line"><span class="language-xml">                    (value) =&gt; (</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是孙子组件 <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;value&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">            &lt;/<span class="title class_">MyContext</span>.<span class="property">Consumer</span>&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">GrandChild</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式二：通过Class.contextType (类组件使用)</span></span><br><span class="line">可以通过<span class="title class_">Class</span>.<span class="property">contextType</span>直接将<span class="title class_">Context</span>对象挂载到<span class="keyword">class</span>的contextType属性，然后就可以使用<span class="variable language_">this</span>.<span class="property">context</span>对context对象进行使用</span><br><span class="line">contextType属于类的属性，不属于某个实例，所以只能在外部添加或者使用<span class="keyword">static</span>将其添加给类属性</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GrandChild</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    <span class="comment">// static contextType=MyContext; // 这里写在类里面并没有添加到实例上去，因为添加了static</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是孙子组件 <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;this.context&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span>    </span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">GrandChild</span>.<span class="property">contextType</span> = <span class="title class_">MyContext</span>; <span class="comment">// 添加在类属性上面</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">GrandChild</span></span><br></pre></td></tr></table></figure><br><h2 id="十三、高阶组件-HOC"><a href="#十三、高阶组件-HOC" class="headerlink" title="十三、高阶组件 (HOC)"></a><strong><font color='red'>十三、高阶组件 (HOC)</font></strong></h2><p>高阶组件（Higher-Order Component，简称HOC）是React中用于复用组件逻辑的一种高级技术。本质上，高阶组件是一个函数，它接收一个组件并返回一个新的组件。它主要用于逻辑的共享和重用，而不是直接渲染UI。这种模式类似于JavaScript中的高阶函数，那些以函数为参数或返回一个函数的函数。</p><ul><li>HOC 应当是纯函数，无副作用。</li><li>不要在 HOC 内部修改原始组件，而是返回一个新组件</li><li>高阶组件的命名一般<strong>以 “with” 开头</strong>，表示它是为组件提供附加功能的。</li></ul><h3 id="13-1、基本使用"><a href="#13-1、基本使用" class="headerlink" title="13.1、基本使用 "></a><strong><font color='#10c300'>13.1、基本使用 </font></strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo1</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是demo1 &#123;this.props.a&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo2</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是demo2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">withLog</span>(<span class="params">WrapComponent</span>) &#123; <span class="comment">// 高阶函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">React</span>.<span class="property">Component</span> &#123;</span><br><span class="line">        <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;挂载了&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrapComponent</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span> <span class="comment">// 传值必须在这里解构props，要不然Demo1组件拿不到传的参数a和c</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用高阶函数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyCom</span> = <span class="title function_">withLog</span>(<span class="title class_">Demo1</span>) </span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyCom1</span> = <span class="title function_">withLog</span>(<span class="title class_">Demo2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span> &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;父组件数据&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">MyCom</span> <span class="attr">a</span>=<span class="string">&#123;this.state.msg&#125;</span> <span class="attr">c</span>=<span class="string">&quot;1231231&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">MyCom1</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="13-2、高阶组件实战"><a href="#13-2、高阶组件实战" class="headerlink" title="13.2、高阶组件实战"></a><strong><font color='#10c300'>13.2、高阶组件实战</font></strong></h3><p>请求地址</p><p>dogApi：<a href="https://dog.ceo/api/breeds/image/random">https://dog.ceo/api/breeds/image/random</a></p><p>catApi：<a href="https://api.thecatapi.com/v1/images/search">https://api.thecatapi.com/v1/images/search</a></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;this.props.url&#125;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>这是一只猫<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;this.props.url&#125;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>这是一只狗<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">withAnimal</span>(<span class="params">WrapComponent, url, type</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">React</span>.<span class="property">Component</span> &#123;</span><br><span class="line">        state=&#123;</span><br><span class="line">            <span class="attr">imgUrl</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">            axios.<span class="title function_">get</span>(url).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                    <span class="attr">imgUrl</span>: type ? res.<span class="property">data</span>.<span class="property">message</span> : res.<span class="property">data</span>[<span class="number">0</span>].<span class="property">url</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrapComponent</span> <span class="attr">url</span>=<span class="string">&#123;this.state.imgUrl&#125;/</span>&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Cat</span> = <span class="title function_">withAnimal</span>(<span class="title class_">MyCat</span>, <span class="string">&#x27;https://api.thecatapi.com/v1/images/search&#x27;</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Dog</span> = <span class="title function_">withAnimal</span>(<span class="title class_">MyDog</span>, <span class="string">&#x27;https://dog.ceo/api/breeds/image/random&#x27;</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;渲染&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Cat</span>&gt;</span><span class="tag">&lt;/<span class="name">Cat</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Dog</span>&gt;</span><span class="tag">&lt;/<span class="name">Dog</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h2 id="十四、跨域问题"><a href="#十四、跨域问题" class="headerlink" title="十四、跨域问题"></a><strong><font color='red'>十四、跨域问题</font></strong></h2><h3 id="14-1、Create-React-App-CRA-脚手架"><a href="#14-1、Create-React-App-CRA-脚手架" class="headerlink" title="14.1、Create React App (CRA)脚手架 "></a><strong><font color='#10c300'>14.1、Create React App (CRA)脚手架 </font></strong></h3><p>基于webpack创建是使用create-react-app搭建项目</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/setupProxy.js</span></span><br><span class="line"><span class="comment">//  你无需在任何位置导入此文件。 它在启动开发服务器时会自动注册。文件名不能更改</span></span><br><span class="line"><span class="keyword">const</span> &#123; createProxyMiddleware &#125; = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">app</span>) &#123; </span><br><span class="line">    app.<span class="title function_">use</span>(</span><br><span class="line">        <span class="title function_">createProxyMiddleware</span>(<span class="string">&quot;/api&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&quot;https://api.jisuapi.com/recipe&quot;</span>,<span class="comment">//跨域地址</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">                <span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">    app.<span class="title function_">use</span>(</span><br><span class="line">        <span class="title function_">createProxyMiddleware</span>(<span class="string">&quot;/api1&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">target</span>: <span class="string">&quot;https://api.binstd.com&quot;</span>,<span class="comment">//跨域地址</span></span><br><span class="line">            <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">                <span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        axios.<span class="title function_">get</span>(<span class="string">&#x27;api/search&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">params</span>: &#123;</span><br><span class="line">                <span class="attr">keyword</span>: <span class="string">&#x27;白菜&#x27;</span>,</span><br><span class="line">                <span class="attr">num</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">start</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">appkey</span>: <span class="string">&#x27;e7652690d5fdbcc4&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="14-2、vite脚手架"><a href="#14-2、vite脚手架" class="headerlink" title="14.2、vite脚手架 "></a><strong><font color='#10c300'>14.2、vite脚手架 </font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> react <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vite.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [<span class="title function_">react</span>()],</span><br><span class="line">    <span class="attr">server</span>: &#123;</span><br><span class="line">        <span class="attr">proxy</span>: &#123;</span><br><span class="line">            <span class="comment">// 配置单个代理</span></span><br><span class="line">            <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;https://api.jisuapi.com/recipe&#x27;</span>, <span class="comment">// 后端服务地址</span></span><br><span class="line">                <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">rewrite</span>: <span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>), <span class="comment">// 重写路径，去除前缀</span></span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 配置多个代理（可选）</span></span><br><span class="line">            <span class="string">&#x27;/socket&#x27;</span>: &#123;</span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;ws://localhost:8080&#x27;</span>, <span class="comment">// WebSocket 服务</span></span><br><span class="line">                <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PureComponent</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">PureComponent</span> &#123;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        axios.<span class="title function_">get</span>(<span class="string">&#x27;api/search&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">params</span>: &#123;</span><br><span class="line">                <span class="attr">keyword</span>: <span class="string">&#x27;白菜&#x27;</span>,</span><br><span class="line">                <span class="attr">num</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">start</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">appkey</span>: <span class="string">&#x27;e7652690d5fdbcc4&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是组件<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h2 id="十五、Hooks"><a href="#十五、Hooks" class="headerlink" title="十五、Hooks"></a><strong><font color='red'>十五、Hooks</font></strong></h2><blockquote><p><em>Hook</em> 是 React 16.8 的新增特性。它可以让你在不编写 class 的情况下使用 state 以及其他的 React 特性。</p><p>Hooks 基于函数组件开始设计，所以<strong>Hooks 只支持函数组件</strong>！！！</p></blockquote><h3 id="15-1、useState-状态管理⭐⭐⭐"><a href="#15-1、useState-状态管理⭐⭐⭐" class="headerlink" title="15.1、useState - 状态管理⭐⭐⭐"></a><strong><font color='#10c300'>15.1、useState - 状态管理⭐⭐⭐</font></strong></h3><p><code>useState</code> 是一个 React Hook，用于在函数组件中声明和管理<strong>状态（state）</strong>（ 一定要在**<code>组件顶层</code>**调用）</p><p><br>以下是一个App组件。点击 “add” 按钮应该显示将 <code>index</code> 更改为 <code>1</code>，再次点击又更改为 <code>2</code>，以此类推。但这个组件现在<strong>不起作用</strong>（你可以试一试！）：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    index = index + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;index&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>handleClick()</code> 事件处理函数正在更新局部变量 <code>index</code>。但存在两个原因使得变化不可见：</p><ol><li><strong>局部变量无法在多次渲染中持久保存。</strong> 当 React 再次渲染这个组件时，它会从头开始渲染——不会考虑之前对局部变量的任何更改。</li><li><strong>更改局部变量不会触发渲染。</strong> React 没有意识到它需要使用新数据再次渲染组件。</li></ol><p>要使用新数据更新组件，需要做两件事：</p><ol><li><strong>保留</strong> 渲染之间的数据。</li><li><strong>触发</strong> React 使用新数据渲染组件（重新渲染）。</li></ol><p><a href="https://zh-hans.react.dev/reference/react/useState"><code>useState</code></a> Hook 提供了这两个功能：</p><ol><li><strong>State 变量</strong> 用于保存渲染间的数据。</li><li><strong>State setter 函数</strong> 更新变量并触发 React 再次渲染组件。</li></ol><br><h4 id="1）语法"><a href="#1）语法" class="headerlink" title="1）语法"></a><strong><font color='cornflowerblue'>1）语法</font></strong></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(initialState);</span><br></pre></td></tr></table></figure><ul><li>initialState：定义的初始值，可以是任意数据，像数字，字符串或者数组和对象。</li><li>useState ()方法的返回值为由两个值组成的数组<ol><li><code>state</code>：当前状态值：在首次渲染时，它将与你传递的 <code>initialState</code> 相匹配。</li><li><code>setState</code>：更新状态的函数：它可以让你将 state 更新为不同的值并触发重新渲染。</li></ol></li></ul><br><h4 id="2）useState更新是异步的"><a href="#2）useState更新是异步的" class="headerlink" title="2）useState更新是异步的"></a><strong><font color='cornflowerblue'>2）useState更新是异步的</font></strong></h4><p>useState 返回的更新对象的方法是<strong>异步的</strong>，要在下次重绘才能获取新值，不要试图在更改状态之后立即获取状态</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> [num, setNum] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">300</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(num); <span class="comment">// 0 是0说明setNum是异步的</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>我是app &#123;num&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>改num<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>连续修改state会合并，只执行最后一次</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> [num, setNum] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">300</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">400</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">32</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">322</span>)</span><br><span class="line">        <span class="title function_">setNum</span>(<span class="number">1</span>)  <span class="comment">// 只会执行这一次</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>我是app &#123;num&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>改num<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><br><h4 id="3）更新状态的两种方式"><a href="#3）更新状态的两种方式" class="headerlink" title="3）更新状态的两种方式"></a><strong><font color='cornflowerblue'>3）更新状态的两种方式</font></strong></h4><ul><li><p><strong>直接赋值</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setCount</span>(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><p>将状态直接更新为新值。</p></li><li><p><strong>函数式更新（推荐）</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setCount</span>(<span class="function"><span class="params">prevCount</span> =&gt;</span> prevCount + <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>这种方式会使用上一次的状态值进行计算，尤其在多次更新时更安全。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> [num,setNum]=<span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> [str,setStr]=<span class="title function_">useState</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="title function_">setNum</span>(num+<span class="number">1</span>)  <span class="comment">// 连续点击3次 最终还是1 说明这是会合并处理的</span></span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="title function_">setNum</span>(<span class="function">(<span class="params">prev</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> prev+<span class="number">1</span>  <span class="comment">// 连续点击3次 最终是4 说明不会合并处理</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是app &#123;num&#125;</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;str&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>普通+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn2&#125;</span>&gt;</span>函数+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure></li></ul><br><h4 id="4）各数据类型更新方式"><a href="#4）各数据类型更新方式" class="headerlink" title="4）各数据类型更新方式"></a><strong><font color='cornflowerblue'>4）各数据类型更新方式</font></strong></h4><p>记住，永远不要直接对对象和数组进行赋值，要始终确保你的set函数里是一份全新的数据，这样React才能够检测到状态变化，并按预期进行更新和重新渲染操作。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 基础类型</span></span><br><span class="line">  <span class="keyword">const</span> [name, setName] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [age, setAge] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 对象类型</span></span><br><span class="line">  <span class="keyword">const</span> [form, setForm] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">updateUsername</span> = (<span class="params">e</span>) =&gt; &#123; <span class="comment">// 更新对象的某个字段</span></span><br><span class="line">    <span class="title function_">setForm</span>(<span class="function"><span class="params">prev</span> =&gt;</span> (&#123;</span><br><span class="line">      ...prev,</span><br><span class="line">      <span class="attr">username</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 数组类型</span></span><br><span class="line">  <span class="keyword">const</span> [items, setItems] = <span class="title function_">useState</span>([]);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addItem</span> = (<span class="params">item</span>) =&gt; &#123; <span class="comment">// 添加项目</span></span><br><span class="line">    <span class="title function_">setItems</span>(<span class="function"><span class="params">prev</span> =&gt;</span> [...prev, item]);</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">removeItem</span> = (<span class="params">id</span>) =&gt; &#123; <span class="comment">// 删除项目</span></span><br><span class="line">    <span class="title function_">setItems</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> !== id));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5）useState-的惰性初始化（Lazy-Initialization）"><a href="#5）useState-的惰性初始化（Lazy-Initialization）" class="headerlink" title="5）useState 的惰性初始化（Lazy Initialization）"></a><strong><font color='cornflowerblue'>5）<code>useState</code> 的惰性初始化（Lazy Initialization）</font></strong></h4><p>这个特性早就有，但很多人忽略了。React 19 中依然支持：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jsxconst [state, setState] = <span class="title function_">useState</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;只在初次渲染时执行&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">expensiveComputation</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>如果初始值需要复杂计算，传入一个函数可以避免每次渲染都执行。</p><br><h3 id="15-2、useEffect-副作用处理"><a href="#15-2、useEffect-副作用处理" class="headerlink" title="15.2、useEffect-副作用处理"></a><strong><font color='#10c300'>15.2、useEffect-副作用处理</font></strong></h3><h4 id="1）基本语法"><a href="#1）基本语法" class="headerlink" title="1）基本语法"></a><strong><font color='cornflowerblue'>1）基本语法</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useEffect有两个参数，第一个参数是一个函数，第二个参数是一个数组</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件挂载或更新了&#x27;</span>);</span><br><span class="line">    <span class="comment">// 组件卸载时执行（可选项）</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件卸载了&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, [<span class="comment">/*依赖项*/</span>]) <span class="comment">// 参数2(可选) 1:无该参数，每次渲染后都执行  2:空数组,仅在挂载时执行一次 3: 依赖变化时执行</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 例子：</span></span><br><span class="line"><span class="comment">// 每次渲染后都执行（数据更新也会导致页面重新渲染）</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;每次渲染&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仅在挂载时执行一次</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件挂载&#x27;</span>);</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 依赖变化时执行</span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;count 或 name 变化&#x27;</span>);</span><br><span class="line">&#125;, [count, name]);</span><br></pre></td></tr></table></figure><h4 id="2）案例-1"><a href="#2）案例-1" class="headerlink" title="2）案例"></a><strong><font color='cornflowerblue'>2）案例</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">DataFetcher</span>(<span class="params">&#123; userId &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">const</span> [loading, setLoading] = <span class="title function_">useState</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 副作用代码</span></span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">setLoading</span>(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`/api/users/<span class="subst">$&#123;userId&#125;</span>`</span>);</span><br><span class="line">            <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">            <span class="title function_">setUser</span>(data);</span><br><span class="line">            <span class="title function_">setLoading</span>(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">fetchUser</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 清理函数（组件卸载或依赖变化时执行）</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;清理操作&#x27;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;, [userId]); <span class="comment">// 依赖数组：userId 变化时重新执行</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (loading) <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>加载中...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;user?.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">DataFetcher</span>;</span><br></pre></td></tr></table></figure><br><h3 id="15-3、useContext-跨组件共享状态"><a href="#15-3、useContext-跨组件共享状态" class="headerlink" title="15.3、useContext - 跨组件共享状态"></a><strong><font color='#10c300'>15.3、useContext - 跨组件共享状态</font></strong></h3><blockquote><p>如果你在接触 Hook 前已经对 context API 比较熟悉，那应该可以理解，useContext(MyContext) 相当于 class 组件中的 static contextType &#x3D; MyContext 或者 &lt;MyContext.Consumer&gt;。</p><p>useContext(MyContext) 只是让你能够读取 context 的值以及订阅 context 的变化。你仍然需要在上层组件树中使用 &lt;MyContext.Provider&gt; 来为下层组件提供 context。</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// context.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>();</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">MyProvider</span> = <span class="title class_">MyContext</span>.<span class="property">Provider</span>;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyProvider</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./context&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="string">&quot;父组件数据&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyProvider</span> <span class="attr">value</span>=<span class="string">&#123;data&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是父组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">MyProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Child.jsx</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">GrandChild</span> <span class="keyword">from</span> <span class="string">&quot;./GrandChild&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">GrandChild</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Child</span></span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GrandChild.jsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;useContext&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MyProvider</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./context&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GrandChild</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="title function_">useContext</span>(<span class="title class_">MyProvider</span>) <span class="comment">// 这是app.jsx中传来的数据</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是孙组件后面是<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span> &#x27;<span class="attr">red</span>&#x27;&#125;&#125;&gt;</span>&#123;data&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">GrandChild</span></span><br></pre></td></tr></table></figure><p>其他例子</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext, useContext, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 创建 Context</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 创建 Provider 组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ThemeProvider</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(children);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> [theme, setTheme] = <span class="title function_">useState</span>(<span class="string">&#x27;light&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">toggleTheme</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setTheme</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev === <span class="string">&#x27;light&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">theme</span>, <span class="attr">toggleTheme</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 在组件中使用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ThemedButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; theme, toggleTheme &#125; = <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onClick</span>=<span class="string">&#123;toggleTheme&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">background:</span> <span class="attr">theme</span> === <span class="string">&#x27;dark&#x27;</span> ? &#x27;#<span class="attr">333</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">fff</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">color:</span> <span class="attr">theme</span> === <span class="string">&#x27;dark&#x27;</span> ? &#x27;#<span class="attr">fff</span>&#x27; <span class="attr">:</span> &#x27;#<span class="attr">333</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">            当前主题: &#123;theme&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 在 App 中使用 Provider 包裹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ThemedButton</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="15-4、React-memo-相对重要"><a href="#15-4、React-memo-相对重要" class="headerlink" title="15.4、React.memo (相对重要)"></a><strong><font color='#10c300'>15.4、React.memo (相对重要)</font></strong></h3><blockquote><p><code>memo</code> 是一个 <strong>高阶组件</strong>，用于<strong>优化函数组件的重新渲染</strong>。它会对组件的 <strong>props</strong> 做浅层比较，如果 props 没有变化，就跳过重新渲染，直接复用上一次的渲染结果。</p></blockquote><p>函数组件本身没有识别prop的能力，每次父组件的更新相当于是给子组件传递了一个全新的prop</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(<span class="string">&quot;父组件数据&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [b] = <span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;父组件渲染了&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setData(&#x27;新数据&#x27;)&#125;&gt;我是App：&#123;data&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">b</span>=<span class="string">&#123;b&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Child.jsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; memo &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;子组件渲染了&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件: &#123;props.b&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 React.memo 包装组件，只有当 props 发生变化时才重新渲染</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">memo</span>(<span class="title class_">Child</span>);</span><br></pre></td></tr></table></figure><br><h4 id="经典的问题"><a href="#经典的问题" class="headerlink" title="经典的问题"></a><strong>经典的问题</strong></h4><p>函数作为 <code>props</code> 的“引用不稳定”问题</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Child render&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 父组件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;clicked&#x27;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><p>你期望的是：只要 <code>count</code> 没变，<code>Child</code> 不应该重新渲染。但实际上，<strong>每次父组件重渲染，<code>Child</code> 都会重新渲染</strong>。</p><p><strong>原因：函数的引用每次都变</strong></p><p>在 React 中，函数也是一种对象，而对象&#x2F;函数的「引用地址」每次都会变。当父组件重新运行时 都会创建一个 <strong>新函数对象</strong>，和之前的不是同一个引用。</p><p>React.memo 的默认比较方式是浅比较（shallow compare）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">oldProps.<span class="property">onClick</span> === newProps.<span class="property">onClick</span></span><br></pre></td></tr></table></figure><p>而因为每次重新渲染时，这个函数都是新建的，所以结果是 <code>false</code>，导致 <code>Child</code> 无论 props 内容是否逻辑相同，都会被认为变动了。</p><p>解决方案：通过 <code>useCallback</code> 来让函数在依赖不变的情况下，保持同一个引用</p><br><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a><strong>特点</strong></h4><ul><li><strong>作用域：组件级别</strong>（在组件外层包一层）</li><li>比较的是<strong>props</strong>的浅层变化，类似 <code>PureComponent</code> 针对函数组件的实现</li><li>默认用 <code>Object.is</code> 进行浅比较</li><li>适用于：<strong>父组件频繁渲染，但子组件的 props 未变化的场景</strong></li><li>可以配合第二个参数自定义比较规则：</li></ul><h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a><strong>工作原理</strong></h4><ul><li>当父组件重新渲染时，<code>memo</code> 会对比新旧 props</li><li>如果 props 没有变化，组件不会重新渲染</li><li>默认使用浅比较（shallow comparison）</li></ul><h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a><strong>使用场景</strong></h4><ol><li><strong>纯展示组件</strong> - 只依赖 props 渲染</li><li><strong>渲染开销大的组件</strong> - 复杂计算或大量 DOM</li><li><strong>频繁渲染的父组件</strong> - 子组件 props 不常变化</li></ol><br><h3 id="15-5、useMemo-缓存计算结果"><a href="#15-5、useMemo-缓存计算结果" class="headerlink" title="15.5、useMemo- 缓存计算结果"></a><strong><font color='#10c300'>15.5、useMemo- 缓存计算结果</font></strong></h3><p><strong>语法：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useMemo</span>(<span class="function">()=&gt;</span>&#123;<span class="keyword">return</span> 值&#125;,[依赖项])</span><br></pre></td></tr></table></figure><blockquote><p><code>useMemo</code> 是一个React Hook，用来在 <strong>组件内部</strong> 缓存某个<strong>计算结果</strong>，避免每次渲染都重复进行开销较大的计算，或者避免引用类型在每次渲染中变化导致子组件不必要的更新。</p></blockquote><blockquote><p><code>useMemo</code>的理念是同步的,useMemo不能进行一些额外的副操作，比如网络请求等。</p></blockquote><h4 id="1）用了缓存数据-计算结果"><a href="#1）用了缓存数据-计算结果" class="headerlink" title="1）用了缓存数据(计算结果)"></a><strong><font color='cornflowerblue'>1）用了缓存数据(计算结果)</font></strong></h4><p>如果没有优化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [price, setPrice] = <span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line">  <span class="keyword">const</span> [count] = <span class="title function_">useState</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> [color, setColor] = <span class="title function_">useState</span>(<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">totalPrice</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;函数运行了&#x27;</span>); <span class="comment">// 修改颜色的时候函数也会重新执行，这是不合理的</span></span><br><span class="line">    <span class="keyword">return</span> price * count</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>总价：&#123;totalPrice()&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;color&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setColor(&#x27;blue&#x27;)&#125;&gt;修改颜色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setPrice(price + 100)&#125;&gt;修改价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>使用了useMemo优化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [price, setPrice] = <span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line">  <span class="keyword">const</span> [count] = <span class="title function_">useState</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> [color, setColor] = <span class="title function_">useState</span>(<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> totalPrice = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">// 修改颜色的时候函数不会执行了</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;函数运行了&#x27;</span>); </span><br><span class="line">    <span class="keyword">return</span> price * count</span><br><span class="line">  &#125;,[count, price])</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> (  </span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>总价：&#123;totalPrice&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;color&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setColor(&#x27;blue&#x27;)&#125;&gt;修改颜色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setPrice(price + 100)&#125;&gt;修改价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><br><h4 id="2）用来缓存组件"><a href="#2）用来缓存组件" class="headerlink" title="2）用来缓存组件"></a><strong><font color='cornflowerblue'>2）用来缓存组件</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [price, setPrice] = <span class="title function_">useState</span>(<span class="number">100</span>)</span><br><span class="line">  <span class="keyword">const</span> [count] = <span class="title function_">useState</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> [color, setColor] = <span class="title function_">useState</span>(<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> memoizedChild = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">// 缓存组件</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">price</span>=<span class="string">&#123;price&#125;</span> /&gt;</span></span></span><br><span class="line">  &#125;, [count, price])</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> (  </span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;color&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setColor(&#x27;blue&#x27;)&#125;&gt;修改颜色<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setPrice(price + 100)&#125;&gt;修改价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;/* 使用组件 */&#125;</span></span><br><span class="line"><span class="language-xml">          &#123;memoizedChild&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>React.memo和useMemo的区别</strong></p><p>想让组件只在<code>props</code>变化时重新渲染，用<code>React.memo</code></p><p>想让组件只在依赖项变化时重新渲染，用<code>useMemo</code></p></blockquote><blockquote><p>React.memo是用来缓存整个组件的</p><p>useMemo用来缓存数据或组件的</p></blockquote><p><strong>特点</strong></p><ul><li><strong>作用域：组件内部</strong></li><li>缓存的是<strong>值</strong>（任何类型：对象、数组、计算结果等）</li><li>依赖项（第二个参数数组）不变化时，<code>useMemo</code> 返回的引用不会变</li><li>常用来：<ol><li>避免重复的重计算（性能优化）</li><li>缓存对象&#x2F;数组的引用，避免不必要的渲染（配合 <code>memo</code> 或 <code>useEffect</code>）</li></ol></li><li>如果依赖项变化，就重新计算</li></ul><br><h3 id="15-6、useCallback-缓存函数引用"><a href="#15-6、useCallback-缓存函数引用" class="headerlink" title="15.6、useCallback  - 缓存函数引用"></a><strong><font color='#10c300'>15.6、useCallback  - 缓存函数引用</font></strong></h3><blockquote><p><code>useCallback</code> 是一个允许你在多次渲染中缓存函数的Hook，避免组件在每次渲染时都<strong>创建新的函数实例</strong>。当一个组件传递回调给子组件，尤其是在子组件进行了性能优化（例如使用 <code>React.memo</code>）时，<code>useCallback</code> 非常有用。</p><p>当你把 <code>useCallback</code> 应用于函数时，你需要定义一个“依赖项数组”。只有当数组中的依赖项改变时，才会重新创建函数。如果依赖项保持不变，即使父组件重新渲染，回调函数的引用也会保持一致。</p></blockquote><p>useCallback需要配合React.memo使用，因为如果自己自身不缓存，就算把函数缓存了，组件还是会重新渲染</p><p><strong>语法</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedCallback = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">doSomething</span>(a, b);</span><br><span class="line">&#125;, [a, b]); <span class="comment">// 依赖为空，函数引用永远不变</span></span><br></pre></td></tr></table></figure><blockquote><p>useCallback(fn, deps) 相当于 useMemo(() &#x3D;&gt; fn, deps)。</p></blockquote><blockquote><p>useMemo主要是用来缓存值，而useCallback主要用来缓存函数</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;useCallback, useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyChild</span>=<span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="title class_">Child</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> [count,setCount]=<span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">let</span> [num,setNum]=<span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">let</span> <span class="title function_">fn</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我是fn&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">let</span> myFn=<span class="title function_">useCallback</span>(fn,[num])</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是app<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyChild</span> <span class="attr">fn</span>=<span class="string">&#123;myFn&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setCount(count+1)&#125;&gt;改变&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>setNum(100)&#125;&gt;改num&#123;num&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><br><h3 id="15-7、useReducer-复杂状态管理"><a href="#15-7、useReducer-复杂状态管理" class="headerlink" title="15.7、useReducer-复杂状态管理"></a><strong><font color='#10c300'>15.7、useReducer-复杂状态管理</font></strong></h3><blockquote><p>useReducer 是 React 的一个钩子（hook），它可以用于处理更复杂的组件状态逻辑，特别是当下一个状态依赖于之前的状态时。它也是一个useState的替代方案，特别适合于状态逻辑复杂，涉及多个子值，或者下一个状态依赖于之前的状态的情景。</p><p>useReducer 接受两个参数：一个reducer函数和初始状态（initial state）。reducer 函数接收当前状态和一个行为对象（action object），然后返回一个新的状态。</p></blockquote><h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state,dispatch] = <span class="title function_">useReducer</span>(reducer, initialState); </span><br></pre></td></tr></table></figure><ul><li><strong><code>state</code></strong>：当前状态</li><li><strong><code>dispatch</code></strong>：触发状态更新的函数</li><li><strong><code>reducer</code></strong>：一个函数，负责“接收旧状态 + 动作（action）”，返回新状态</li><li><strong><code>initialState</code></strong>：初始状态</li><li><strong><code>init（可选）</code></strong>：<em>惰性初始化函数</em>，用于在初始渲染时对 <code>initialState</code> 进行加工或计算，返回真正的初始状态，只会在初始化执行一次</li></ul><br><h4 id="简单示例"><a href="#简单示例" class="headerlink" title="简单示例"></a>简单示例</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useReducer, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myReducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (action === <span class="string">&quot;add&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (action === <span class="string">&quot;minus&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> state - <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="keyword">const</span> [state,dispatch]=<span class="title function_">useReducer</span>(myReducer,<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是app<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>dispatch(&quot;add&quot;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;state&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>dispatch(&quot;minus&quot;)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>第三个参数：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myReducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (action === <span class="string">&quot;add&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> state + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (action === <span class="string">&quot;minus&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> state - <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params">initialCount</span>) &#123; <span class="comment">// 0 这里就是传入的init值</span></span><br><span class="line">    <span class="keyword">const</span> saved = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;count&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> saved ? <span class="title class_">Number</span>(saved) : initialCount</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;count&quot;</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(myReducer, <span class="number">0</span>, init); <span class="comment">// 0会作为init函数中的参数传入</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是app<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&quot;add&quot;)&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;state&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&quot;minus&quot;)&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h4 id="简单示例-1"><a href="#简单示例-1" class="headerlink" title="简单示例"></a>简单示例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义 reducer 函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">todoReducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;ADD&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> [...state, &#123; <span class="attr">id</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>(), <span class="attr">text</span>: action.<span class="property">text</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;];</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;TOGGLE&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> state.<span class="title function_">map</span>(<span class="function"><span class="params">todo</span> =&gt;</span></span><br><span class="line">                todo.<span class="property">id</span> === action.<span class="property">id</span> ? &#123; ...todo, <span class="attr">done</span>: !todo.<span class="property">done</span> &#125; : todo</span><br><span class="line">            );</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;DELETE&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> state.<span class="title function_">filter</span>(<span class="function"><span class="params">todo</span> =&gt;</span> todo.<span class="property">id</span> !== action.<span class="property">id</span>);</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">TodoApp</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [todos, dispatch] = <span class="title function_">useReducer</span>(todoReducer, []);</span><br><span class="line">    <span class="keyword">const</span> [input, setInput] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleAdd</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(todos);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (input.<span class="title function_">trim</span>()) &#123;</span><br><span class="line">            <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD&#x27;</span>, <span class="attr">text</span>: input &#125;);</span><br><span class="line">            <span class="title function_">setInput</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;input&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setInput(e.target.value)&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleAdd&#125;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;todos.map(todo =&gt; (</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;todo.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">span</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                            <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;TOGGLE&#x27;, id: todo.id &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">                            style=&#123;&#123; textDecoration: todo.done ? &#x27;line-through&#x27; : &#x27;none&#x27; &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                        &gt;</span></span><br><span class="line"><span class="language-xml">                            &#123;todo.text&#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;DELETE&#x27;, id: todo.id &#125;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                            删除</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                ))&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">TodoApp</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="15-8、useRef-引用-DOM-和保存可变值"><a href="#15-8、useRef-引用-DOM-和保存可变值" class="headerlink" title="15.8、useRef  - 引用 DOM 和保存可变值"></a><strong><font color='#10c300'>15.8、useRef  - 引用 DOM 和保存可变值</font></strong></h3><ol><li><strong>访问 DOM 元素</strong>（比如手动操作 <code>&lt;input&gt;</code> 焦点、滚动等）</li><li><strong>保存任意变量值</strong>（这个值在组件的整个生命周期内保持不变，不会因重新渲染而丢失）</li></ol><p><strong>语法：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> refContainer = <span class="title function_">useRef</span>(initialValue);</span><br></pre></td></tr></table></figure><ul><li><code>initialValue</code> 是初始值</li><li><code>refContainer.current</code> 是存放值的地方</li><li>改变 <code>refContainer.current</code> <strong>不会触发组件重新渲染</strong></li></ul><h4 id="1）操作-DOM-元素"><a href="#1）操作-DOM-元素" class="headerlink" title="1）操作 DOM 元素"></a><strong><font color='cornflowerblue'>1）操作 DOM 元素</font></strong></h4><p>当需要直接访问某个 DOM 节点时，可以用 useRef 获取它的引用：</p><p><strong>示例：聚焦输入框</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">InputFocus</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleFocus</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 访问 DOM 元素，并调用 focus 方法</span></span><br><span class="line">    inputRef.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入点什么...&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleFocus&#125;</span>&gt;</span>聚焦输入框<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">InputFocus</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>说明：</strong></p><ul><li><code>ref=&#123;inputRef&#125;</code> 将 DOM 节点绑定到 <code>inputRef.current</code></li><li>点击按钮时执行 <code>inputRef.current.focus()</code> 来让输入框获得焦点</li></ul><br><h4 id="2）用来存储可变值"><a href="#2）用来存储可变值" class="headerlink" title="2）用来存储可变值"></a><strong><font color='cornflowerblue'>2）用来存储可变值</font></strong></h4><p><code>useRef</code> 可以用来存储任意可变值，而且即使组件重新渲染，这个值仍然保留。</p><p><strong>示例：记录渲染次数</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useRef, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">RenderCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">const</span> renderTimes = <span class="title function_">useRef</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        renderTimes.<span class="property">current</span> += <span class="number">1</span>;  <span class="comment">// 每次渲染 +1</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件渲染&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>按钮点击次数：&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>组件渲染次数：&#123;renderTimes.current&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&#123;/* 这里点击调用了useState，导致页面重新渲染，但是useRef一直处于叠加状态，没有初始到0 说明具有持久性 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">RenderCount</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>说明：</strong></p><ul><li><code>renderTimes.current</code> 是一个持久化引用，组件每次渲染都会累加，但不会引起额外的渲染</li><li>对 <code>useRef</code> 变量的修改不会触发 UI 更新</li></ul><br><h3 id="15-9、useId"><a href="#15-9、useId" class="headerlink" title="15.9、useId"></a><strong><font color='#10c300'>15.9、useId</font></strong></h3><p><code>useId</code> 是一个 React 内置 Hook，用来生成一个稳定且唯一的 ID 字符串，通常用于：</p><ul><li><strong>无障碍（a11y）场景</strong>：让 <code>label</code> 和表单控件配对使用；</li><li><strong>服务端渲染（SSR）</strong>：防止客户端与服务器渲染的 ID 不一致；</li><li><strong>生成稳定唯一 key&#x2F;id</strong>（每次渲染保持不变）。</li></ul><hr><h4 id="1）基本语法-1"><a href="#1）基本语法-1" class="headerlink" title="1）基本语法"></a>1）基本语法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> id = <span class="title function_">useId</span>();</span><br></pre></td></tr></table></figure><ul><li>返回一个在当前组件作用域内 <strong>唯一且稳定</strong> 的字符串，例如：<code>&quot;r1:0&quot;</code>。</li><li>每次渲染都保证相同组件中的 id 一致。</li><li>不会在不同组件之间重复。</li></ul><hr><h4 id="2）示例：关联-与"><a href="#2）示例：关联-与" class="headerlink" title="2）示例：关联 &lt;label&gt; 与 &lt;input&gt;"></a>2）示例：关联 <code>&lt;label&gt;</code> 与 <code>&lt;input&gt;</code></h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">jsximport <span class="title class_">React</span>, &#123; useId &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">NameField</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> id = <span class="title function_">useId</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&#123;id&#125;</span>&gt;</span>姓名：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&#123;id&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入姓名&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">NameField</span>;</span><br></pre></td></tr></table></figure><p>✅ 在这里：</p><ul><li><code>useId</code> 生成一个唯一 id；</li><li><code>label</code> 的 <code>htmlFor</code> 与 <code>input</code> 的 <code>id</code> 一致；</li><li>当多个 <code>NameField</code> 组件同时存在时，每个组件生成的 id 不会冲突。</li></ul><hr><h4 id="3）组合前缀使用（推荐）"><a href="#3）组合前缀使用（推荐）" class="headerlink" title="3）组合前缀使用（推荐）"></a>3）组合前缀使用（推荐）</h4><p>为了更明确区分不同控件，可以加上自定义前缀：</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jsxconst id = <span class="title function_">useId</span>();</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&#123;</span>`<span class="attr">email-</span>$&#123;<span class="attr">id</span>&#125;`&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&#123;</span>`<span class="attr">email-</span>$&#123;<span class="attr">id</span>&#125;`&#125;&gt;</span>邮箱<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>结果类比：<code>id=&quot;email-r1:0&quot;</code>, <code>email-r1:1</code> 等。</p><hr><h4 id="4）与手动生成-id-的区别"><a href="#4）与手动生成-id-的区别" class="headerlink" title="4）与手动生成 id 的区别"></a>4）与手动生成 id 的区别</h4><table><thead><tr><th>特性</th><th>手动维护 id</th><th><code>useId</code></th></tr></thead><tbody><tr><td>SSR 一致性</td><td>❌ 可能不一致</td><td>✅ 一致</td></tr><tr><td>唯一性</td><td>需手动管理</td><td>自动唯一</td></tr><tr><td>稳定性（重新渲染）</td><td>⚠️ 需注意不要变动</td><td>✅ 稳定不变</td></tr><tr><td>使用方便性</td><td>手动逻辑繁琐</td><td>一行代码生成</td></tr></tbody></table><hr><h4 id="5）注意事项"><a href="#5）注意事项" class="headerlink" title="5）注意事项"></a>5）注意事项</h4><ol><li><code>useId</code> <strong>不适合当作列表 key 的唯一标识</strong>，因为它只在组件作用域独立唯一，不是数据层唯一。</li><li>每次调用 <code>useId</code> 都会生成一个不同的子 ID，React 内部有机制确保组合时不冲突。</li><li>只可在 <strong>组件初始化阶段调用一次</strong>，即让 <code>id</code> 在整个组件生命周期内稳定。</li></ol><br><h3 id="15-10、useDeferredValue-延迟更新值"><a href="#15-10、useDeferredValue-延迟更新值" class="headerlink" title="15.10、useDeferredValue - 延迟更新值"></a><strong><font color='#10c300'>15.10、useDeferredValue - 延迟更新值</font></strong></h3><p>当你更新某个状态时，React 不一定立刻同步渲染使用这个值的部分，而是会<strong>优先渲染更紧急的更新（交互、输入）</strong>，稍后再更新那些耗时的渲染部分。</p><p>✅ 简单理解：让页面中不太重要的部分“晚一点更新”，以保证用户操作更流畅。</p><hr><h4 id="1）基本语法-2"><a href="#1）基本语法-2" class="headerlink" title="1）基本语法"></a>1）基本语法</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deferredValue = <span class="title function_">useDeferredValue</span>(value);</span><br></pre></td></tr></table></figure><ul><li><code>value</code>：原始的值（可能变化频繁）</li><li><code>deferredValue</code>：React 返回的延迟更新的值</li><li>当 <code>value</code> 改变时，React <strong>不会立即</strong>让 <code>deferredValue</code> 同步，而是“稍后”更新它（基于调度优先级）</li><li>如果更新非常快，比如频繁输入，<code>deferredValue</code> 会滞后一点跟上</li></ul><h4 id="2）常见场景：搜索过滤（大列表）"><a href="#2）常见场景：搜索过滤（大列表）" class="headerlink" title="2）常见场景：搜索过滤（大列表）"></a>2）常见场景：搜索过滤（大列表）</h4><p>假设我们有一个输入框用于搜索大量数据，输入过程中你不希望每个字母都立即导致昂贵的渲染：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useDeferredValue, useMemo &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SlowList</span>(<span class="params">&#123; input &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// 模拟大数据过滤（耗时） 要配合useMemo使用，要不然子组件每次渲染，也会导致输入卡顿</span></span><br><span class="line">  <span class="keyword">const</span> list = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> items = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">      items.<span class="title function_">push</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span>&gt;</span>&#123;input&#125; - 项 &#123;i&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> items;</span><br><span class="line">  &#125;, [input]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;list&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SearchPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [query, setQuery] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> deferredQuery = <span class="title function_">useDeferredValue</span>(query); <span class="comment">// 👈 延迟使用 query</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;query&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setQuery(e.target.value)&#125;</span></span><br><span class="line"><span class="language-xml">        placeholder=&quot;输入搜索关键词...&quot;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      &#123;/* 使用延迟的状态值渲染大列表 */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">SlowList</span> <span class="attr">input</span>=<span class="string">&#123;deferredQuery&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">SearchPage</span>;</span><br></pre></td></tr></table></figure><p><strong>🔍 效果：</strong></p><ul><li>输入框响应非常顺畅；</li><li>列表渲染稍微滞后一点更新（不会阻塞输入）；</li><li>React 自动安排较低优先级的渲染任务。</li></ul><h4 id="3）useDeferredValue-的本质"><a href="#3）useDeferredValue-的本质" class="headerlink" title="3）useDeferredValue 的本质"></a>3）<code>useDeferredValue</code> 的本质</h4><p>它利用了 <strong>React 的并发特性（Concurrent Rendering）</strong><br>让某些更新以较低优先级进行：</p><ul><li>用户输入 → 高优先级；</li><li>列表更新 → 低优先级；</li><li>React 内部可在合适时机处理低优先级更新。</li></ul><p>所以它非常适合：</p><ul><li>输入搜索时展示结果；</li><li>大量数据过滤；</li><li>复杂渲染场景中保持 UI 互动流畅。</li></ul><h4 id="4）注意事项"><a href="#4）注意事项" class="headerlink" title="4）注意事项"></a>4）注意事项</h4><table><thead><tr><th>注意点</th><th>说明</th></tr></thead><tbody><tr><td>不会跳过更新</td><td>只是延迟执行，最终仍会同步到最新值</td></tr><tr><td>不建议用于关键 UI 状态</td><td>因为它可能暂时落后于真实值</td></tr><tr><td>需要 React 18+</td><td>属于并发系统的功能</td></tr><tr><td>可搭配 <code>useTransition</code> 一起使用</td><td>共同控制更新优先级更加灵活</td></tr></tbody></table><h4 id="5）-总结"><a href="#5）-总结" class="headerlink" title="5） 总结"></a>5） 总结</h4><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>Hook 名</td><td><code>useDeferredValue(value)</code></td></tr><tr><td>React 版本</td><td>18+</td></tr><tr><td>主要作用</td><td>延迟低优先级渲染以保持交互流畅</td></tr><tr><td>常见场景</td><td>搜索、大列表、性能优化</td></tr><tr><td>特点</td><td>返回一个“稍后更新”的值；不影响高优先级响应</td></tr></tbody></table><br><h3 id="15-11、useTransition"><a href="#15-11、useTransition" class="headerlink" title="15.11、useTransition"></a><strong><font color='#10c300'>15.11、useTransition</font></strong></h3><blockquote><p>useTransition 是一个帮助你在不阻塞 UI 的情况下更新状态的 React Hook。</p><p>这个 Hook 允许你在应用程序中告诉 React 哪些更新是紧急的，哪些可以稍后进行，从而改善应用程序的响应性。</p></blockquote><blockquote><p><code>useTransition</code> 则用于标记某段代码或者组件状态更新的优先级。它给你提供了一个<code>startTransition</code>的函数和一个表示状态是否处于过渡中的<code>isPending</code>状态</p><p>isPending: true代表还没完成  false代表完成了</p></blockquote><ul><li><strong><code>useDeferredValue</code></strong> 主要用于延迟单个值的更新，适用于值的变化直接影响到 UI 渲染但又不是立即必要的更新。</li><li><strong><code>useTransition</code></strong> 用于告诉 React 哪些更新是低优先级的，并可使用 <code>isPending</code> 状态反馈更新是否处于等待状态，适用于控制大块区域或复杂状态的更新行为，允许你在触发更新时提供更自然的用户体验。</li></ul><p>案例</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;  useState,useTransition &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">SlowList</span> <span class="keyword">from</span> <span class="string">&#x27;./SlowList.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [isPending,startTransition]=<span class="title function_">useTransition</span>()</span><br><span class="line">  <span class="keyword">const</span> [input,setInput]=<span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>) </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">e</span>)&#123;</span><br><span class="line">        <span class="title function_">setText</span>(e.<span class="property">target</span>.<span class="property">value</span>)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">startTransition</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="title function_">setInput</span>(e.<span class="property">target</span>.<span class="property">value</span>) <span class="comment">//这件事晚点执行 。优先级更低一些</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;text&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;fn&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;isPending?<span class="tag">&lt;<span class="name">span</span>&gt;</span>loading...<span class="tag">&lt;/<span class="name">span</span>&gt;</span>:&quot;&quot;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">SlowList</span> <span class="attr">text</span>=<span class="string">&#123;input&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="与-useDeferredValue-的比较"><a href="#与-useDeferredValue-的比较" class="headerlink" title="与 useDeferredValue 的比较"></a>与 <code>useDeferredValue</code> 的比较</h4><table><thead><tr><th>特性</th><th><code>useDeferredValue</code></th><th><code>useTransition</code></th></tr></thead><tbody><tr><td>使用场景</td><td>延迟部分渲染</td><td>延迟整个状态更新</td></tr><tr><td>API 形式</td><td>返回延迟值</td><td>返回状态和启动函数</td></tr><tr><td>控制粒度</td><td>自动、简单</td><td>手动启动控制</td></tr><tr><td>常用于</td><td>输入过滤等局部延迟</td><td>路由切换、大范围渲染延迟</td></tr></tbody></table><br><h3 id="15-12、useImperativeHandle-相对重要"><a href="#15-12、useImperativeHandle-相对重要" class="headerlink" title="15.12、useImperativeHandle (相对重要)"></a><strong><font color='#10c300'>15.12、useImperativeHandle (相对重要)</font></strong></h3><blockquote><p><code>useImperativeHandle</code> 是 React Hooks 中提供的一个高级钩子（hook），它结合 <code>forwardRef</code> 使用，主要用于在使用 React 函数组件时，自定义父组件通过 ref 访问子组件中的方法或属性。</p></blockquote><blockquote><p>正常情况下，函数组件不支持 ref 属性，因为它们没有实例。但有时候，你可能需要在父组件中直接访问子组件的某些方法。这时，<code>useImperativeHandle</code> 就派上用场了。</p></blockquote><p><strong>语法：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useImperativeHandle</span>(ref, createHandle, [deps])</span><br></pre></td></tr></table></figure><ul><li><code>ref</code>：来自父组件通过 <code>forwardRef</code> 传递给子组件的 ref。</li><li><code>createHandle</code>：一个函数，返回一个对象，这个对象包含你想让父组件通过 ref 能访问到的属性或方法。</li><li><code>[deps]</code>：依赖数组，只有当数组中的依赖项改变时，才会重新定义 ref 的内容。</li></ul><h4 id="1）关于forwardRef"><a href="#1）关于forwardRef" class="headerlink" title="1）关于forwardRef"></a><strong><font color='cornflowerblue'>1）关于forwardRef</font></strong></h4><blockquote><p><code>forwardRef</code> 是 React 的一个高阶组件（HOC），用于转发引用（refs）</p></blockquote><blockquote><p>forwardRef 允许组件使用 ref 将 DOM 节点暴露给父组件。</p></blockquote><p><strong>语法：</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">forwardRef</span>(render)</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; forwardRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MyInput</span> = <span class="title function_">forwardRef</span>(<span class="keyword">function</span> <span class="title function_">MyInput</span>(<span class="params">props, ref</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><code>render</code>：组件的渲染函数。React 会调用该函数并传入父组件传递的 props 和 <code>ref</code>。返回的 JSX 将作为组件的输出。</li></ul><p>&#x3D;&#x3D;App.js&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> a=<span class="title function_">useRef</span>()</span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    a.<span class="property">current</span>.<span class="title function_">focus</span>()</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Child</span>  <span class="attr">ref</span>=<span class="string">&#123;a&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>父组件的按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;Child.js&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; forwardRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// function Child(props,ref)&#123;</span></span><br><span class="line"><span class="comment">//     return &lt;div&gt;</span></span><br><span class="line"><span class="comment">//         &lt;p&gt;我是子组件&lt;/p&gt;</span></span><br><span class="line"><span class="comment">//         &lt;input ref=&#123;ref&#125;/&gt;</span></span><br><span class="line"><span class="comment">//     &lt;/div&gt;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span>=<span class="title function_">forwardRef</span>(<span class="function">(<span class="params">props,ref</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//export default forwardRef(Child)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Child</span></span><br></pre></td></tr></table></figure><br><h4 id="2）useImperativeHandle"><a href="#2）useImperativeHandle" class="headerlink" title="2）useImperativeHandle"></a><strong><font color='cornflowerblue'>2）useImperativeHandle</font></strong></h4><p>专门用来读取子组件的数据和方法的</p><p>语法</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useImperativeHandle</span>(ref, createHandle, dependencies?)</span><br></pre></td></tr></table></figure><ul><li>ref:父组件传递过来的ref</li><li>createHandle：是一个函数，返回一个对象，这个对象就是父组件可以通过ref.current拿到的对象。所有你希望共享给父组件的数据或者方法，就写到这里</li></ul><p>案例</p><p>&#x3D;&#x3D;App.jsx&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&quot;./Child&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> a=<span class="title function_">useRef</span>()</span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">         a.<span class="property">current</span>.<span class="title function_">handle</span>()</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&#123;a&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;fn&#125;</span>&gt;</span>父组件的按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;Child.jsx&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123;forwardRef, useImperativeHandle,useRef,useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params">props,ref</span>)&#123; </span><br><span class="line">  <span class="keyword">const</span> b=<span class="title function_">useRef</span>()  </span><br><span class="line">  <span class="keyword">const</span> [data,setData]=<span class="title function_">useState</span>(<span class="string">&quot;我是子组件的数据&quot;</span>)</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我是子组件的方法&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">change</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">setData</span>(<span class="string">&quot;数据变了&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">handle</span>(<span class="params"></span>)&#123;</span><br><span class="line">        b.<span class="property">current</span>.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">useImperativeHandle</span>(ref,<span class="function">()=&gt;</span>(&#123;</span><br><span class="line">        <span class="attr">fn2</span>:fn,</span><br><span class="line">        change,</span><br><span class="line">        data,</span><br><span class="line">        handle</span><br><span class="line">    &#125;))</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是子组件 &#123;data&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;b&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">forwardRef</span>(<span class="title class_">Child</span>)</span><br></pre></td></tr></table></figure><br><h3 id="15-13、useLayoutEffect"><a href="#15-13、useLayoutEffect" class="headerlink" title="15.13、useLayoutEffect"></a><strong><font color='#10c300'>15.13、useLayoutEffect</font></strong></h3><ul><li><p>useLayoutEffect 的使用方式几乎与 useEffect 完全相同，但它在所有的 DOM 变更之后同步触发。这意味着在浏览器绘制之前，useLayoutEffect 中的操作会被完成，这就可以用来读取 DOM 布局并同步触发重绘。</p></li><li><p>useEffect 是 React 中最常用的副作用钩子，允许你执行副作用操作，如数据获取、订阅以及手动更改 DOM。它在 DOM 更新完成后异步触发，这意味着它不会阻塞浏览器的绘制过程。</p></li></ul><blockquote><p>当你需要精确读取 DOM 布局（例如检测元素尺寸或位置）并在浏览器进行绘制之前立即同步更改它时。</p><p>当你需要通过 DOM 操作同步更新状态来避免视觉闪烁。</p></blockquote><br><h3 id="15-14、自定义hooks"><a href="#15-14、自定义hooks" class="headerlink" title="15.14、自定义hooks"></a><strong><font color='#10c300'>15.14、自定义hooks</font></strong></h3><p>自定义Hooks是React Hook的一种模式，用于将组件逻辑提取到可重用的函数中。当你想在多个组件之间共享一些状态逻辑时，自定义Hooks非常有用</p><p><strong>基本规则：</strong></p><blockquote><p><strong>在实现自定义Hooks之前，需要记住两个基本规则：</strong></p><ol><li>自定义Hooks的名称必须以“use”开头（这不是技术上的限制，而是约定俗成的命名规则，可以让你和其他开发者立即识别出哪些函数是钩子）。</li><li>自定义Hooks内部可以调用其他的Hooks。</li></ol></blockquote><p>自定义hooks和普通函数的区别：</p><p>自定义hooks中可以调用其他hooks，而函数不可以</p><p><strong>自定义hooks实战，封装表单处理</strong></p><p>&#x3D;&#x3D;App.js&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useFormInput <span class="keyword">from</span> <span class="string">&quot;./useFormInput&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> username = <span class="title function_">useFormInput</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">   <span class="keyword">const</span> password = <span class="title function_">useFormInput</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;username.value&#125; &#123;password.value&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> &#123;<span class="attr">...username</span>&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> &#123;<span class="attr">...password</span>&#125; /&gt;</span>   </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>      </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;useFormInput.js&#x3D;&#x3D;</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useFormInput</span>(<span class="params">initValue</span>)&#123;</span><br><span class="line"> <span class="keyword">const</span> [value,setValue]=<span class="title function_">useState</span>(initValue);</span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">handleChange</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="title function_">setValue</span>(e.<span class="property">target</span>.<span class="property">value</span>)</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> &#123;<span class="attr">value</span>:value,<span class="attr">onChange</span>:handleChange&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useFormInput</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、认识react&quot;&gt;&lt;a href=&quot;#一、认识react&quot; class=&quot;headerlink&quot; title=&quot;一、认识react&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、认识react&lt;/font&gt;&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="react18" scheme="http://example.com/tags/react18/"/>
    
  </entry>
  
  <entry>
    <title>Cusros的使用</title>
    <link href="http://example.com/posts/aed47f69.html"/>
    <id>http://example.com/posts/aed47f69.html</id>
    <published>2025-12-02T00:38:45.000Z</published>
    <updated>2026-01-27T15:41:13.666Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、解决限制国内使用"><a href="#一、解决限制国内使用" class="headerlink" title="一、解决限制国内使用"></a><strong><font color='red'>一、解决限制国内使用</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251115161133203.png" alt="image-20251115161133203"></p><p>原因是美国那边制裁了 claude ，限制咱们国内地区的ip使用，因此我们就无法使用了。</p><p><strong>解决步骤</strong></p><ol><li><p>打开自己的魔法工具（大家懂得）</p></li><li><p>在Cursor编辑器设置代理，ip的端口号设置成魔法工具的端口号</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251115161504320.png" alt="image-20251115161504320"></p></li><li><p>将http&#x2F;2设置成http&#x2F;1.1即可</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251115161623548.png" alt="image-20251115161623548"></p></li><li><p>测试</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251115161703956.png" alt="image-20251115161703956"></p></li></ol><br><h3 id="二、Cusros对话模式模板"><a href="#二、Cusros对话模式模板" class="headerlink" title="二、Cusros对话模式模板"></a><strong><font color='red'>二、Cusros对话模式模板</font></strong></h3><p><strong>提示词技巧总结:</strong></p><ol><li>提供上下文:提及项目语言、框架、业务背景等信息</li><li>分点描述:将复杂需求拆解为具体步骤或要求</li><li>使用技术术语:准确的术语能帮助 AI 更精准理解需求</li><li>明确边界:说明必须保留的现有功能或禁止的实现方式</li><li>示例引导:附上期望输出示例或参考代码风格</li></ol><br><h4 id="2-1、代码生成类"><a href="#2-1、代码生成类" class="headerlink" title="2.1、代码生成类"></a><strong><font color='#10c300'>2.1、代码生成类</font></strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">任务类型</span>]:<span class="link">请生成一个&#123;功能描述&#125;的&#123;编程语言/框架&#125;实现</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">具体要求</span>]:</span><br><span class="line"><span class="link">1.使用&#123;特定技术/库&#125;</span></span><br><span class="line">2.包含&#123;特定功能点&#125;</span><br><span class="line">3.符合&#123;编码规范/设计模式&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">请生成一个学习计划页面的HTML+CSS+Javascript实现</span><br><span class="line"></span><br><span class="line">[具体要求]:</span><br><span class="line">1.使用Tailwind Css v3和Font Awesome</span><br><span class="line">2.包含任务添加、编辑、删除功能</span><br><span class="line">3.包含日历视图展示学习计划</span><br><span class="line">4.包含学习进度可视化图表</span><br><span class="line">5.符合现代UI设计原则和响应式设计</span><br><span class="line">6.具有平滑的动画和交互效果</span><br></pre></td></tr></table></figure><br><h4 id="2-2、代码修改类"><a href="#2-2、代码修改类" class="headerlink" title="2.2、代码修改类"></a><strong><font color='#10c300'>2.2、代码修改类</font></strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">任务类型</span>]:<span class="link">请帮我修改&#123;上下文:具体文件/代码片段&#125;，实现&#123;预期功能&#125;</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">当前问题</span>]:<span class="link">&#123;现有的错误/不足描述&#125;</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">具体要求</span>]:</span><br><span class="line"><span class="link">1.保持&#123;现有功能/结构&#125;不变</span></span><br><span class="line">2.使用&#123;特定方法/技术&#125;&#125;改进</span><br><span class="line">3.修复&#123;具体错误/警告&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">请帮我修改当前的 React 组件，优化列表渲染性能</span><br><span class="line">当前问题:滚动时列表卡顿，存在明显性能问题。要求:</span><br><span class="line">1.保持现有 UI 不变</span><br><span class="line">2.使用 React.memo 和虚拟列表技术优化</span><br><span class="line">3.添加性能监控日志</span><br></pre></td></tr></table></figure><br><h4 id="2-3、代码解释类"><a href="#2-3、代码解释类" class="headerlink" title="2.3、代码解释类"></a><strong><font color='#10c300'>2.3、代码解释类</font></strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">任务类型</span>]:<span class="link">请解释&#123;代码片段/功能模块&#125;的&#123;具体方面&#125;</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">上下文信息</span>]:<span class="link">&#123;相关业务背景/技术栈&#125;</span></span><br><span class="line"></span><br><span class="line">[具体问题]</span><br><span class="line">1.&#123;不理解的语法/逻辑&#125;</span><br><span class="line">2.&#123;特定设计选择的原因]</span><br><span class="line">3.&#123;潜在的问题/优化点&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">请解释这段 Typescript 代码的泛型约束和类型推导逻辑。</span><br><span class="line">上下文:这是一个用于数据验证的工具函数。</span><br><span class="line">具体问题:</span><br><span class="line">1.&lt;T extends object&gt;这里为什么要加 extends object?</span><br><span class="line">2.类型推导是如何工作的?</span><br><span class="line">3.是否存在类型安全隐患?</span><br></pre></td></tr></table></figure><br><h4 id="2-4、流程自动化类"><a href="#2-4、流程自动化类" class="headerlink" title="2.4、流程自动化类"></a><strong><font color='#10c300'>2.4、流程自动化类</font></strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">任务类型</span>]:<span class="link">请创建一个自动化流程，实现&#123;目标描述&#125;</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">操作步骤</span>]:</span><br><span class="line"><span class="link">1.从&#123;数据源&#125;获取&#123;数据类型&#125;</span></span><br><span class="line">2.执行&#123;数据处理/转换操作&#125;</span><br><span class="line">3.将结果保存到&#123;目标位置&#125;</span><br><span class="line">4.触发&#123;后续操作/通知&#125;</span><br><span class="line"></span><br><span class="line">[<span class="symbol">具体要求</span>]:</span><br><span class="line"><span class="link">1.使用&#123;特定工具/API&#125;</span></span><br><span class="line">2.添加&#123;错误处理/重试机制&#125;</span><br><span class="line">3.生成&#123;日志/报告&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">请创建一个自动化流程，每天凌晨从 GitHub API 获取仓库星标数，保存到 Goog1e sheets 并生成趋势图。</span><br><span class="line">要求:</span><br><span class="line">1.使用 GitHub REST API V3</span><br><span class="line">2.添加异常处理和邮件通知</span><br><span class="line">3.生成周/月增长趋势图表</span><br></pre></td></tr></table></figure><br><h4 id="2-5、命令行辅助类"><a href="#2-5、命令行辅助类" class="headerlink" title="2.5、命令行辅助类"></a><strong><font color='#10c300'>2.5、命令行辅助类</font></strong></h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">任务类型</span>]:<span class="link">请提供&#123;操作场景&#125;的&#123;操作系统&#125;命令</span></span><br><span class="line"></span><br><span class="line">[<span class="symbol">具体需求</span>]:</span><br><span class="line"><span class="link">1.&#123;执行的具体操作&#125;</span></span><br><span class="line">2.包含&#123;特定参数/选项&#125;</span><br><span class="line">3.处理&#123;特殊情况/错误&#125;</span><br></pre></td></tr></table></figure><p>示例：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请提供在 macos 上批量压缩图片的命令行方案。需求:</span><br><span class="line">1.将当前目录下所有 PNG/JPG 图片压缩 50%</span><br><span class="line">2.保留原始文件并添加“-compressed”后缀</span><br><span class="line">3.显示每个文件的压缩前后大小对比</span><br></pre></td></tr></table></figure><br><h3 id="三、Cursor精准上下文指定"><a href="#三、Cursor精准上下文指定" class="headerlink" title="三、Cursor精准上下文指定"></a><strong><font color='red'>三、Cursor精准上下文指定</font></strong></h3><p>在 Cursor 工具里，“上下文（Context）” 可理解为 <strong>让 AI 准确理解需求、辅助编码的 “信息参考范围”</strong> ，是 AI 读懂代码、精准响应的关键!</p><h4 id="3-1-Codebase-Indexing-代码库索引"><a href="#3-1-Codebase-Indexing-代码库索引" class="headerlink" title="3.1 Codebase Indexing 代码库索引"></a><strong><font color='#10c300'>3.1 Codebase Indexing 代码库索引</font></strong></h4><h5 id="1）、概念和作用"><a href="#1）、概念和作用" class="headerlink" title="1）、概念和作用"></a><strong><font color='cornflowerblue'>1）、概念和作用</font></strong></h5><p>打开项目时，每个 Cursor 实例都将初始化该工作区的索引。初始索引设置完成后，Cursor 将自动为添加到工作区的任何新文件编制索引，以使您的代码库上下文保持最新：</p><ul><li>快速 “读懂” 你的项目结构（哪些是工具文件、哪些是业务逻辑）</li><li>定位相关代码（如搜索 <code>getUser</code> 时，知道优先查 <code>userService.js</code>）</li><li>理解代码关系（如 <code>Order</code> 类和 <code>Product</code> 类的关联）</li></ul><p><strong>Cursor 中的作用</strong>：AI 分析索引内容后，生成代码时会更贴合项目实际（如使用已有工具函数、遵循命名规范）。</p><br><h5 id="2）、代码库索引配置和示例"><a href="#2）、代码库索引配置和示例" class="headerlink" title="2）、代码库索引配置和示例"></a><strong><font color='cornflowerblue'>2）、代码库索引配置和示例</font></strong></h5><p>代码库索引的状态位于cursor settings &gt; Indexing &amp; Docs</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114004719325.png" alt="image-20251114004719325"></p><h5 id="3-、忽略文件配置"><a href="#3-、忽略文件配置" class="headerlink" title="3)、忽略文件配置"></a><strong><font color='cornflowerblue'>3)、忽略文件配置</font></strong></h5><p>Cursor 读取项目的代码库并为其编制索引以支持其功能。可以通过将.cursorignore 文件添加到根目录来控制<br>哪些文件被忽略和Cursor限制访问。</p><ul><li>提升索引速度：排除大型依赖、生成文件(如node_modu1es、dist)</li><li>避免干扰：某些配置文件可能包含敏感信息或与当前任务无关</li></ul><p>配置.cursorignore忽略文件的两种方法：</p><ol><li><p>自己创建 .cursorignore 文件添加到代码库目录的根目录下，并列出要忽略的目录和文件</p></li><li><p>使用cursor配置快捷创建忽略文件&#96;cursorsetting&gt;indexing&gt;Configure ignored files</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251113233732232.png" alt="image-20251113233732232"></p></li></ol><br><h4 id="3-2、Rules规则"><a href="#3-2、Rules规则" class="headerlink" title="3.2、Rules规则"></a><strong><font color='#10c300'>3.2、Rules规则</font></strong></h4><h5 id="1）规则介绍"><a href="#1）规则介绍" class="headerlink" title="1）规则介绍"></a><strong><font color='cornflowerblue'>1）规则介绍</font></strong></h5><p>Rules是给Cursor AI功能(规则适用于Chat和Cmd K)生成结果添加规则和限制，让 AI生成的代码贴合团队规范，减少人工二次修改成本，主要的作用如下:</p><ul><li>可约束代码风格(如强制用驼峰命名、要求函数必须写注释)</li><li>能限定技术选型(如禁止使用某老旧库、优先用项目指定工具类)</li><li>提前指定核心参数(如提前设置连接数据库的地址和账号密码等)</li></ul><table><thead><tr><th>维度</th><th>项目规则(Project Rules)</th><th>用户规则(User Rules)</th></tr></thead><tbody><tr><td>作用范围</td><td>仅对当前项目生效，团队成员共享相同规则</td><td>对所有项目生效，个人专属配置</td></tr><tr><td>存储位置</td><td>项目根目录下的.cursor&#x2F;rules&#x2F;随意.mdc 文件</td><td>用户配置目录(如~&#x2F;.cursor&#x2F;ru1es)</td></tr><tr><td>同步方式</td><td>随项目代码提交到版本库(如 Git)，团队共享</td><td>仅本地生效，不随项目同步</td></tr><tr><td>适用场景</td><td>统一团队编码规范(如函数注释格式、依赖版本)</td><td>个人习惯(如快捷键、AI 响应风格)</td></tr></tbody></table><p><font color='orange'>注意：项目规则和用户规则同时存在并且规则冲突，项目规则优先级更高–</font></p><br><h5 id="2）项目规则配置"><a href="#2）项目规则配置" class="headerlink" title="2）项目规则配置"></a><strong><font color='cornflowerblue'>2）项目规则配置</font></strong></h5><p><strong>a、项目下创建规则文件的两种方法</strong></p><ol><li>在项目根目录创建文件夹<code>.cursor/rules/随意命名.mdc</code></li><li>快捷命令方式创建 ctr1+ shift +P &gt; “New Cursor Rule”<img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114001431714.png" alt="image-20251114001431714"></li></ol><br><p><strong>b、编写项目规则文件</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">alwaysApply: true</span><br><span class="line">description: &quot;团队前端项目规范&quot;</span><br><span class="line"><span class="section">priority: 1000</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line"><span class="section"># 代码风格</span></span><br><span class="line"><span class="bullet">1.</span> 函数必须包含 JSDoc 注释</span><br><span class="line"><span class="bullet">2.</span> 禁止使用<span class="code">`var`</span>,  统一使用 <span class="code">`const`</span>/<span class="code">`let`</span></span><br><span class="line"><span class="bullet">3.</span> 函数命名必须添加 zwf<span class="emphasis">_前缀，例如:zwf_</span>login</span><br><span class="line"></span><br><span class="line"><span class="section"># 技术选型</span></span><br><span class="line"><span class="bullet">-</span> 优先使用项目内已有的工具函数(如 <span class="code">`uti1s/request`</span>)</span><br><span class="line"><span class="bullet">-</span> 禁止引入低版本的 1odash(&lt;4.0.0)</span><br></pre></td></tr></table></figure><br><p><strong>c、项目规则文件生效测试</strong></p><p><code>ctrl+k</code>调出内联智能输入<img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114002810947.png" alt="image-20251114002810947"></p><br><h5 id="3）用户规则配置"><a href="#3）用户规则配置" class="headerlink" title="3）用户规则配置"></a><strong><font color='cornflowerblue'>3）用户规则配置</font></strong></h5><p><code>ctrl+shift+j</code>快捷打开Cursor Settings，用户规则不支持 MDC，它们只是纯文本。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114003925641.png" alt="image-20251114003925641"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114003947859.png" alt="image-20251114003947859"></p><p>实现每行代码都用中文注释了</p><br><h4 id="3-3、mdc语法了解"><a href="#3-3、mdc语法了解" class="headerlink" title="3.3、mdc语法了解"></a><strong><font color='#10c300'>3.3、mdc语法了解</font></strong></h4><p>Cursor 的 MDC（Markdown with Cursor）语法是专门为编写项目规则设计的轻量级格式，它结合了 Markdown 的可读性和元数据配置能力。接下来，我们来说明下mdc文件语法。</p><h5 id="1）-MDC-文件组成部分"><a href="#1）-MDC-文件组成部分" class="headerlink" title="1） MDC 文件组成部分"></a><strong><font color='cornflowerblue'>1） MDC 文件组成部分</font></strong></h5><ul><li>前置元数据（Frontmatter）<ul><li>用 <code>---</code> 包裹的 YAML 格式配置</li><li>定义规则的基本属性（如作用范围、优先级）</li></ul></li><li>规则内容（Markdown 正文）<ul><li>用 Markdown 语法写具体规则</li></ul></li></ul><br><h5 id="2）前置元数据"><a href="#2）前置元数据" class="headerlink" title="2）前置元数据"></a><strong><font color='cornflowerblue'>2）前置元数据</font></strong></h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 官方约定字段（推荐用，AI 更易理解）</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;前端项目规则&quot;</span></span><br><span class="line"><span class="attr">globs:</span> <span class="string">&quot;src/**/*.tsx&quot;</span></span><br><span class="line"><span class="attr">priority:</span> <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义字段（自己或团队约定含义）</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">&quot;技术团队&quot;</span></span><br><span class="line"><span class="attr">review_date:</span> <span class="string">&quot;2025-06-04&quot;</span></span><br><span class="line"><span class="attr">special_rule:</span> <span class="string">&quot;仅周一至周五生效&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>字段</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td><code>description</code></td><td>描述规则用途，指导 AI 如何应用规则</td><td><code>&quot;前端组件编码规范&quot;</code></td></tr><tr><td><code>globs</code></td><td>指定规则生效的文件范围（支持 glob 语法）</td><td><code>&quot;src/**/*.&#123;js,ts,jsx&#125;&quot;</code></td></tr><tr><td><code>priority</code></td><td>规则优先级（数值越大越优先），解决规则冲突</td><td><code>1000</code></td></tr><tr><td><code>version</code></td><td>规则版本号（可选）</td><td><code>&quot;1.0.0&quot;</code></td></tr></tbody></table><br><h5 id="3）规则内容（Markdown-正文）"><a href="#3）规则内容（Markdown-正文）" class="headerlink" title="3）规则内容（Markdown 正文）"></a><strong><font color='cornflowerblue'>3）规则内容（Markdown 正文）</font></strong></h5><p>用 Markdown 的标题、列表、代码块等语法写具体规则，常见结构：</p><p><strong>代码风格规则（最常用）</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一、代码风格</span></span><br><span class="line"><span class="bullet">1.</span> 函数必须包含 JSDoc 注释  </span><br><span class="line"><span class="bullet">   -</span> 至少包含 <span class="code">`@param`</span> 和 <span class="code">`@return`</span> 描述  </span><br><span class="line"><span class="bullet">2.</span> 变量命名必须使用驼峰命名法（camelCase）  </span><br><span class="line"><span class="bullet">3.</span> 每行代码长度不超过 120 个字符  </span><br><span class="line"></span><br><span class="line"><span class="section"># 二、技术选型</span></span><br><span class="line"><span class="bullet">-</span> 禁止直接使用原生 fetch，必须通过项目封装的 request 工具  </span><br><span class="line"><span class="bullet">-</span> 优先使用 React Hooks 而非 Class 组件  </span><br></pre></td></tr></table></figure><p><strong>安全约束规则</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 安全规范</span></span><br><span class="line"><span class="bullet">1.</span> 禁止使用 eval() 函数  </span><br><span class="line"><span class="bullet">2.</span> SQL 查询必须使用参数化查询，防止注入攻击  </span><br><span class="line"><span class="bullet">3.</span> 敏感信息（如 API 密钥）必须从环境变量读取  </span><br></pre></td></tr></table></figure><p><strong>特殊语法：引用项目文件</strong></p><p>用 <code>@file</code> 引用项目内的配置文件，让 AI 参考：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 工具链配置</span></span><br><span class="line"><span class="bullet">1.</span> ESLint 规则必须符合 @file .eslintrc.js  </span><br><span class="line"><span class="bullet">2.</span> 测试用例必须遵循 Jest 框架规范  </span><br></pre></td></tr></table></figure><br><h5 id="4）完整示例（TypeScript-项目规则）"><a href="#4）完整示例（TypeScript-项目规则）" class="headerlink" title="4）完整示例（TypeScript 项目规则）"></a><strong><font color='cornflowerblue'>4）完整示例（TypeScript 项目规则）</font></strong></h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">description: &quot;TypeScript 项目编码规范&quot;</span><br><span class="line">globs: &quot;src/<span class="strong">**/<span class="emphasis">*.ts&quot;</span></span></span><br><span class="line"><span class="emphasis"><span class="strong">priority: 1000</span></span></span><br><span class="line"><span class="emphasis"><span class="strong">---</span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong"># 一、基础规范</span></span></span><br><span class="line"><span class="emphasis"><span class="strong">1. 所有文件必须使用 UTF-8 编码  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong">2. 统一使用 2 空格缩进  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong"># 二、类型约束</span></span></span><br><span class="line"><span class="emphasis"><span class="strong">1. 禁止使用隐式 any 类型  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong">   - 示例：`const num: number = 123`（显式）  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong">   - 禁止：`const num = 123`（隐式）  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong">2. 接口命名必须以 `I` 开头（如 `interface IUser`）  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong"># 三、项目约束</span></span></span><br><span class="line"><span class="emphasis"><span class="strong">- 所有 HTTP 请求必须通过 @file src/utils/request.ts 封装的工具  </span></span></span><br><span class="line"><span class="emphasis"><span class="strong">- 状态管理必须使用 Redux Toolkit，禁止直接修改 state  </span></span></span><br></pre></td></tr></table></figure><br><h4 id="3-4、-符号"><a href="#3-4、-符号" class="headerlink" title="3.4、@ 符号"></a><strong><font color='#10c300'>3.4、@ 符号</font></strong></h4><p>在 Cursor 中使用 @ 符号在聊天中引用代码、文件、文档和其他上下文的指南，直接更具体的指定上下文环境！</p><p>以下是所有可用 @ 符号的列表：</p><ul><li>@Files &amp; Folders - 引用项目中的特定文件或文件夹 ✅</li><li>@Docs- 访问文档和指南✅</li><li>@Git- 访问 git 历史记录和更改</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114013559213.png" alt="image-20251114013559213"></p><h5 id="1）-Files-Folders-文件和文件夹"><a href="#1）-Files-Folders-文件和文件夹" class="headerlink" title="1）@Files &amp; Folders 文件和文件夹"></a><strong><font color='cornflowerblue'>1）@Files &amp; Folders 文件和文件夹</font></strong></h5><p>选择 <code>@Files &amp; Folders</code>，然后选择要搜索的文件名即可引用整个文件。你也可以将侧边栏中的文件直接拖拽到 Agent 中作为上下文。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114013919773.png" alt="image-20251114013919773"></p><p>选择文件夹后，输入 “&#x2F;” 以继续下钻并查看所有子文件夹。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114013934820.png" alt="image-20251114013934820"></p><br><h5 id="2）-Docs"><a href="#2）-Docs" class="headerlink" title="2）@Docs"></a><strong><font color='cornflowerblue'>2）@Docs</font></strong></h5><p><code>@Docs</code> 功能可让你用文档来辅助写代码</p><p><strong>添加文档</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114014157560.png" alt="image-20251114014157560"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114014346829.png" alt="image-20251114014346829"></p><br><p><strong>提问</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251114014547119.png" alt="image-20251114014547119"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、解决限制国内使用&quot;&gt;&lt;a href=&quot;#一、解决限制国内使用&quot; class=&quot;headerlink&quot; title=&quot;一、解决限制国内使用&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、解决限制国内使用&lt;/font&gt;&lt;/strong&gt;&lt;/h3</summary>
      
    
    
    
    <category term="工具" scheme="http://example.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Cursor" scheme="http://example.com/tags/Cursor/"/>
    
    <category term="AI" scheme="http://example.com/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>UniApp多端开发</title>
    <link href="http://example.com/posts/57fa3c28.html"/>
    <id>http://example.com/posts/57fa3c28.html</id>
    <published>2025-12-02T00:29:04.000Z</published>
    <updated>2026-01-27T15:41:13.666Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、uniApp生命周期"><a href="#一、uniApp生命周期" class="headerlink" title="一、uniApp生命周期 "></a><strong><font color='red'>一、uniApp生命周期 </font></strong></h3><h4 id="1-1、应用生命周期"><a href="#1-1、应用生命周期" class="headerlink" title="1-1、应用生命周期"></a><strong><font color='#10c300'>1-1、应用生命周期</font></strong></h4><table><thead><tr><th align="left">函数名</th><th align="left">说明</th><th align="left">平台兼容</th></tr></thead><tbody><tr><td align="left">onLaunch</td><td align="left">当<code>uni-app</code> 初始化完成时触发（全局只触发一次），参数为应用启动参数，同 <a href="https://uniapp.dcloud.net.cn/api/getLaunchOptionsSync.html#getlaunchoptionssync">uni.getLaunchOptionsSync</a> 的返回值</td><td align="left"></td></tr><tr><td align="left">onShow</td><td align="left">当 <code>uni-app</code> 启动，或从后台进入前台显示，参数为应用启动参数，同 <a href="https://uniapp.dcloud.net.cn/api/getLaunchOptionsSync.html#getlaunchoptionssync">uni.getLaunchOptionsSync</a> 的返回值</td><td align="left"></td></tr><tr><td align="left">onHide</td><td align="left">当 <code>uni-app</code> 从前台进入后台</td><td align="left"></td></tr><tr><td align="left">onError</td><td align="left">当 <code>uni-app</code> 报错时触发</td><td align="left">app-uvue 不支持</td></tr><tr><td align="left">onUniNViewMessage</td><td align="left">对 <code>nvue</code> 页面发送的数据进行监听，可参考 <a href="https://uniapp.dcloud.io/tutorial/nvue-api?id=communication">nvue 向 vue 通讯</a></td><td align="left">app-uvue 不支持</td></tr><tr><td align="left">onUnhandledRejection</td><td align="left">对未处理的 Promise 拒绝事件监听函数（2.8.1+ app-uvue 暂不支持）</td><td align="left">app-uvue 不支持</td></tr><tr><td align="left">onPageNotFound</td><td align="left">页面不存在监听函数</td><td align="left">app-uvue 不支持</td></tr><tr><td align="left">onThemeChange</td><td align="left">监听系统主题变化</td><td align="left">app-uvue 不支持</td></tr><tr><td align="left">onLastPageBackPress</td><td align="left">最后一个页面按下Android back键，常用于自定义退出</td><td align="left">app-uvue-android 3.9+</td></tr><tr><td align="left">onExit</td><td align="left">监听应用退出</td><td align="left">app-uvue-android 3.9+</td></tr></tbody></table><p>应用生命周期仅可在<code>App.vue</code>中监听，在其它页面监听无效。</p><br><h4 id="1-2、面生命周期"><a href="#1-2、面生命周期" class="headerlink" title="1-2、面生命周期"></a><strong><font color='#10c300'>1-2、面生命周期</font></strong></h4><table><thead><tr><th align="left">函数名</th><th align="left">说明</th><th align="left">平台差异说明</th></tr></thead><tbody><tr><td align="left">onInit</td><td align="left">监听页面初始化，其参数同 onLoad 参数，为上个页面传递的数据，参数类型为 Object（用于页面传参），触发时机早于 onLoad</td><td align="left">百度小程序</td></tr><tr><td align="left">onLoad</td><td align="left">监听页面加载，该钩子被调用时，响应式数据、计算属性、方法、侦听器、props、slots 已设置完成，其参数为上个页面传递的数据，参数类型为 Object（用于页面传参）</td><td align="left"></td></tr><tr><td align="left">onShow</td><td align="left">监听页面显示，页面每次出现在屏幕上都触发，包括从下级页面点返回露出当前页面</td><td align="left"></td></tr><tr><td align="left">onReady</td><td align="left">监听页面初次渲染完成，此时组件已挂载完成，DOM 树($el)已可用，注意如果渲染速度快，会在页面进入动画完成前触发</td><td align="left"></td></tr><tr><td align="left">onHide</td><td align="left">监听页面隐藏</td><td align="left"></td></tr><tr><td align="left">onUnload</td><td align="left">监听页面卸载</td><td align="left"></td></tr><tr><td align="left">onResize</td><td align="left">监听窗口尺寸变化</td><td align="left">App、微信小程序、快手小程序</td></tr><tr><td align="left">onPullDownRefresh</td><td align="left">监听用户下拉动作，一般用于下拉刷新</td><td align="left"></td></tr><tr><td align="left">onReachBottom</td><td align="left">页面滚动到底部的事件（不是scroll-view滚到底），常用于下拉下一页数据。具体见下方注意事项</td><td align="left"></td></tr><tr><td align="left">onTabItemTap</td><td align="left">点击 tab 时触发，参数为Object，具体见下方注意事项</td><td align="left">微信小程序、QQ小程序、支付宝小程序、百度小程序、H5、App、快手小程序、京东小程序</td></tr><tr><td align="left">onShareAppMessage</td><td align="left">用户点击右上角分享</td><td align="left">微信小程序、QQ小程序、支付宝小程序、抖音小程序、飞书小程序、快手小程序、京东小程序</td></tr><tr><td align="left">onPageScroll</td><td align="left">监听页面滚动，参数为Object</td><td align="left">nvue不支持</td></tr><tr><td align="left">onNavigationBarButtonTap</td><td align="left">监听原生标题栏按钮点击事件，参数为Object</td><td align="left">App、H5</td></tr><tr><td align="left">onBackPress</td><td align="left">监听页面返回，返回 event &#x3D; {from:backbutton、 navigateBack} ，backbutton 表示来源是左上角返回按钮或 android 返回键；navigateBack表示来源是 uni.navigateBack；<a href="https://uniapp.dcloud.net.cn/tutorial/page.html#onbackpress">详见</a></td><td align="left">app、H5、支付宝小程序</td></tr><tr><td align="left">onNavigationBarSearchInputChanged</td><td align="left">监听原生标题栏搜索输入框输入内容变化事件</td><td align="left">App、H5</td></tr><tr><td align="left">onNavigationBarSearchInputConfirmed</td><td align="left">监听原生标题栏搜索输入框搜索事件，用户点击软键盘上的“搜索”按钮时触发。</td><td align="left">App、H5</td></tr><tr><td align="left">onNavigationBarSearchInputClicked</td><td align="left">监听原生标题栏搜索输入框点击事件（pages.json 中的 searchInput 配置 disabled 为 true 时才会触发）</td><td align="left">App、H5</td></tr><tr><td align="left">onShareTimeline</td><td align="left">监听用户点击右上角转发到朋友圈</td><td align="left">微信小程序</td></tr><tr><td align="left">onAddToFavorites</td><td align="left">监听用户点击右上角收藏</td><td align="left">微信小程序、QQ小程序</td></tr></tbody></table><h5 id="1）Vue2-页面及组件生命周期流程图"><a href="#1）Vue2-页面及组件生命周期流程图" class="headerlink" title="1）Vue2 页面及组件生命周期流程图"></a><strong><font color='cornflowerblue'>1）Vue2 页面及组件生命周期流程图</font></strong></h5><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/uni-app-lifecycle-vue2.jpg" alt="img"></p><br><h5 id="Vue3-页面及组件生命周期流程图"><a href="#Vue3-页面及组件生命周期流程图" class="headerlink" title="Vue3 页面及组件生命周期流程图"></a><strong><font color='cornflowerblue'>Vue3 页面及组件生命周期流程图</font></strong></h5><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/uni-app-lifecycle-vue3.jpg" alt="img"></p><br><h4 id="1-3、组件生命周期"><a href="#1-3、组件生命周期" class="headerlink" title="1-3、组件生命周期"></a><strong><font color='#10c300'>1-3、组件生命周期</font></strong></h4><table><thead><tr><th align="left">函数名</th><th align="left">说明</th><th align="left">平台差异说明</th></tr></thead><tbody><tr><td align="left">beforeCreate</td><td align="left">在实例初始化之前被调用。</td><td align="left"></td></tr><tr><td align="left">created</td><td align="left">在实例创建完成后被立即调用。</td><td align="left"></td></tr><tr><td align="left">beforeMount</td><td align="left">在挂载开始之前被调用。</td><td align="left"></td></tr><tr><td align="left">mounted</td><td align="left">挂载到实例上去之后调用。注意：此处并不能确定子组件被全部挂载，如果需要子组件完全挂载之后在执行操作可以使用<code>$nextTick</code></td><td align="left"></td></tr><tr><td align="left">beforeUpdate</td><td align="left">数据更新时调用，发生在虚拟 DOM 打补丁之前。</td><td align="left">仅H5平台支持</td></tr><tr><td align="left">updated</td><td align="left">由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。</td><td align="left">仅H5平台支持</td></tr><tr><td align="left">beforeDestroy</td><td align="left">实例销毁之前调用。在这一步，实例仍然完全可用。</td><td align="left"></td></tr><tr><td align="left">destroyed</td><td align="left">Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。</td><td align="left"></td></tr></tbody></table><br><h3 id="二、多端调试环境配置"><a href="#二、多端调试环境配置" class="headerlink" title="二、多端调试环境配置 "></a><strong><font color='red'>二、多端调试环境配置 </font></strong></h3><h4 id="2-1、安卓真机调试配置"><a href="#2-1、安卓真机调试配置" class="headerlink" title="2-1、安卓真机调试配置"></a><strong><font color='#10c300'>2-1、安卓真机调试配置</font></strong></h4><p><strong>以小米手机为例：</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604101545567.png" alt="image-20250604101545567"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604102525380.png" alt="image-20250604102525380"></p><br><h4 id="2-2、IOS真机调试配置"><a href="#2-2、IOS真机调试配置" class="headerlink" title="2-2、IOS真机调试配置"></a><strong><font color='#10c300'>2-2、IOS真机调试配置</font></strong></h4><p>2022年9月，因收到苹果公司警告，目前开发者已无法在iOS真机设备使用未签名的标准基座，所以现在要运行到 IOS ，也需要进行签名。Windows系统，开发者就可以使用三方工具（如爱思助手）对标准基座签名。</p><p><strong><code>注意：使用Apple ID签名的IPA文件有效期为7天，7天后需要重签。如果需要“自动续签”功能，IOS手机需要越狱</code></strong></p><h5 id="1）前期准备"><a href="#1）前期准备" class="headerlink" title="1）前期准备"></a><strong><font color='cornflowerblue'>1）前期准备</font></strong></h5><ul><li><p>HBuilder 3.6.9+(一般我会把软件更新到最新版，版本跟不上容易出现问题)</p></li><li><p>ios设备</p></li><li><p>原装数据线</p></li><li><p>爱思助手软件（还有iTunes工具，下载爱思助手后会自动安装该工具）</p></li><li><p>安装基座：在HBuildex安装目录下面的plugins\launcher\base 目录下找到安装的ios基座：iPhone_base.ipa</p><p>（如果没有需要安装），后面添加IPA文件的时候用到。</p></li></ul><br><h5 id="2）操作步骤"><a href="#2）操作步骤" class="headerlink" title="2）操作步骤"></a><strong><font color='cornflowerblue'>2）操作步骤</font></strong></h5><ul><li><p><strong>下载爱思助手</strong>，打开爱思助手并用数据线连接ios设备。</p></li><li><p><strong>进行签名：</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604111911639.png" alt="image-20250604111911639"></p><p>使用Apple ID 签名，依次点击使用Apple ID签名—&gt;添加Apple ID—&gt; 输入Apple ID和密码（账号最好是邮箱， 如果 Apple ID 账号是手机号码，在签名输入 ID 账号时，手机号前面需要加 86。例如：8615012345678。 ）—&gt;确定。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604113014783.png" alt="image-20250604113014783"></p><p>如果签名成功，打开已签名IPA的位置，找到签名后的ipa文件，<strong><code>并命名为iPhone_base_signed.ipa</code></strong>，然后将其拷贝到HBuilderX安装目录\plugins\launcher\base</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/2052514-20250121112902666-19879140.png" alt="img"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/2052514-20250121113924730-1273769980.png" alt="img"></p><p>打开HBuilderX，选择要运行的项目，点击工具栏运行图标，选择【运行到iOS App基座】</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/2052514-20250121113938712-386846139.png" alt="img"></p><p>如果没运行出来，可能是由于 iphone 没有开启 “开发者模式”，需要自己手动将开发者模式打开。</p></li><li><p><strong>打开开发者模式</strong></p><p>设置—&gt;隐私与安全—&gt;开发者模式 ，打开后会提示重启手机。</p><p><strong>如果你的ios系统。是 16 以上，可能在 设置—隐私与安全 里面没有 “开发者模式这一项” ，需要利用 爱思助手 来将选项打开</strong></p><p>打开爱思助手 工具箱—&gt;虚拟定位， 随便输入一个经纬度，点击修改 </p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604113829151.png" alt="image-20250604113829151"></p><p>确定开发者模式已开启 ：在手机上，设置—隐私与安全性 里面，就能看到有”开发者选项“了，开启，然后提示重启手机。完成即可。</p></li><li><p><strong>运行ios基座遇到的问题</strong></p><p>下图运行到ios基座成功</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/2052514-20250121114101865-331084701.png" alt="img"></p><p>1.ios上面安装了HBuilder调试基座，但是移动端未出现运行app的界面，点击安装的HBuilder调试基座，弹出 需要互联网连接以验证是否信任开发者iphone…..，此时确保网络是否链接是否通畅，如果设备已经连接到互联网，仍然没解决，我选择了重启设备，解决了上述问题；</p><p>2.重启设备之后，再次点击HBuilder调试基座，提示不收信任的开发者，此时在设备上找到设置&gt;通用&gt;vpn与设备管理这个选项，可以看到我们的开发者APP当前是不受信任的 我们只需点开，信任当前开发APP就可以了</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250604114032005.png" alt="image-20250604114032005"></p><p>再重新打开这个APP，就可以发现已经可以进行iOS真机预览了。</p></li></ul><br><h4 id="2-3、微信小程序调试配置"><a href="#2-3、微信小程序调试配置" class="headerlink" title="2-3、微信小程序调试配置"></a><strong><font color='#10c300'>2-3、微信小程序调试配置</font></strong></h4><br><h4 id="2-4、支付宝小程序调试配置"><a href="#2-4、支付宝小程序调试配置" class="headerlink" title="2-4、支付宝小程序调试配置"></a><strong><font color='#10c300'>2-4、支付宝小程序调试配置</font></strong></h4><br><h3 id="三、多端调试环境配置"><a href="#三、多端调试环境配置" class="headerlink" title="三、多端调试环境配置 "></a><strong><font color='red'>三、多端调试环境配置 </font></strong></h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、uniApp生命周期&quot;&gt;&lt;a href=&quot;#一、uniApp生命周期&quot; class=&quot;headerlink&quot; title=&quot;一、uniApp生命周期 &quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、uniApp生命周期 &lt;/font&gt;&lt;/s</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="Uniapp" scheme="http://example.com/tags/Uniapp/"/>
    
    <category term="多端开发" scheme="http://example.com/tags/%E5%A4%9A%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>VMware17 Pro安装CentOS 8</title>
    <link href="http://example.com/posts/f6649ba0.html"/>
    <id>http://example.com/posts/f6649ba0.html</id>
    <published>2025-11-25T22:29:48.000Z</published>
    <updated>2026-01-27T15:41:13.666Z</updated>
    
    <content type="html"><![CDATA[<p><strong>软件版本</strong></p><blockquote><p>VMware 17 Pro  17.5.2 build-23775571</p><p>CentOS-8.1.1911-x86_64-dvd1.iso</p></blockquote><h3 id="一、-创建虚拟机"><a href="#一、-创建虚拟机" class="headerlink" title="一、 创建虚拟机"></a><strong><font color='red'>一、 创建虚拟机</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234224316.png" alt="image-20251021234224316"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234501665.png" alt="image-20251021234501665"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234533907.png" alt="image-20251021234533907"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234601087.png" alt="image-20251021234601087"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234734894.png" alt="image-20251021234734894"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021234936363.png" alt="image-20251021234936363"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021235013900.png" alt="image-20251021235013900"></p><br><h3 id="二、-配置虚拟机"><a href="#二、-配置虚拟机" class="headerlink" title="二、 配置虚拟机"></a><strong><font color='red'>二、 配置虚拟机</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251021235209438.png" alt="image-20251021235209438"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022000540363.png" alt="image-20251022000540363"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022000621830.png" alt="image-20251022000621830"></p><h4 id="虚拟化处于禁用状态"><a href="#虚拟化处于禁用状态" class="headerlink" title="虚拟化处于禁用状态"></a><strong><font color='#10c300'>虚拟化处于禁用状态</font></strong></h4><p>AMD处理器提示AMD-V处于禁用状态。</p><p>Intel处理器提示ntel VT-x处于禁用状态。</p><p>因为我是AMD的处理器以及ROG的主板，因为这里主要操作怎么在ROG主板的BIOS上开启虚拟化技术</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022232519026.png" alt="image-20251022232519026"></p><p><strong>开启步骤</strong></p><ol><li>电脑开启的时候一直按F2或Del进入BIOS界面</li><li>找到Advanced进入CPU Configguration中找到SVM Mode将其状态改成Enabled</li></ol><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022234218884.png" alt="image-20251022234218884"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022234544337.png" alt="image-20251022234544337"></p><br><h3 id="三、-系统安装引导界面"><a href="#三、-系统安装引导界面" class="headerlink" title="三、 系统安装引导界面"></a><strong><font color='red'>三、 系统安装引导界面</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/5e9856fd57ad3cd601de474ed0a9d59b.png" alt="img"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/da83ad02a5d26c3f865a68503efcbe2c.png" alt="img"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/71e0855efe957df4c85e67e7642a1538.png" alt="img"></p><br><h3 id="四、-定制化内容"><a href="#四、-定制化内容" class="headerlink" title="四、 定制化内容"></a><strong><font color='red'>四、 定制化内容</font></strong></h3><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022001114895.png" alt="image-20251022001114895"></p><br><h4 id="4-1、调整时间差"><a href="#4-1、调整时间差" class="headerlink" title="4.1、调整时间差"></a><strong><font color='#10c300'>4.1、调整时间差</font></strong></h4><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022003530905.png" alt="image-20251022003530905"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022003918721.png" alt="image-20251022003918721"></p><br><h4 id="4-2、配置磁盘分区"><a href="#4-2、配置磁盘分区" class="headerlink" title="4.2、配置磁盘分区"></a><strong><font color='#10c300'>4.2、配置磁盘分区</font></strong></h4><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023215033391.png" alt="image-20251023215033391"></p><br><h5 id="1）默认磁盘分区配置"><a href="#1）默认磁盘分区配置" class="headerlink" title="1）默认磁盘分区配置"></a><strong><font color='cornflowerblue'>1）默认磁盘分区配置</font></strong><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251022004121785.png" alt="image-20251022004121785"></h5><br><h5 id="2）自定义磁盘分区"><a href="#2）自定义磁盘分区" class="headerlink" title="2）自定义磁盘分区"></a><strong><font color='cornflowerblue'>2）自定义磁盘分区</font></strong></h5><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023215120757.png" alt="image-20251023215120757"></p><br><p><strong><font color='orange'>a、手动添加分区</font></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023220443302.png" alt="image-20251023220443302"></p><br><p><strong><font color='orange'>b、添加 boot 区 给上 1G 容量后点击添加挂载点</font></strong></p><p>挂载点<code>/boot</code>是系统启动的引导分区</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023220707214.png" alt="image-20251023220707214"></p><p>文件系统默认选择ext4，即第四代文件扩展系统，其容量可以达到EB（GB→TB→EB）单个文件容量可以达到16TB。</p><p>我们选择xfs文件系统，这是一个高性能日志文件系统，特别擅长处理大文件，64位系统中最大能够支持8EB的文件系统，目前性能最强。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023224710364.png" alt="image-20251023224710364"></p><br><p><strong><font color='orange'>c、添加 swap 交换分区</font></strong></p><p>swap交换分区：</p><p>​在硬盘中单独创建一块分区来，单独去作为扩展内存。就是我们在配置虚拟机的时候设置的那个内存不足时，则可以将swap交换分区作为裸战内存来使用（我们当时是分了8G内存）。</p><p>执行的一个过程：</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221045499.png" alt="image-20251023221045499"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221112598.png" alt="image-20251023221112598"></p><br><p><strong><font color='orange'>d、配置根目录<code>/</code></font></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221245884.png" alt="image-20251023221245884"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221339058.png" alt="image-20251023221339058"></p><br><p><strong><font color='orange'>e、分区配置完毕，点击完成，然后点击弹窗的接受更改</font></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221441203.png" alt="image-20251023221441203"></p><br><h4 id="4-3、配置kdump"><a href="#4-3、配置kdump" class="headerlink" title="4.3、配置kdump"></a><strong><font color='#10c300'>4.3、配置kdump</font></strong></h4><p>关闭 kdump 本身虚拟机内存就不够，他会吃掉一部分内存，我们尽量省一点</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023222056185.png" alt="image-20251023222056185"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023221802804.png" alt="image-20251023221802804"></p><br><h4 id="4-4、配置网络和主机名"><a href="#4-4、配置网络和主机名" class="headerlink" title="4.4、配置网络和主机名"></a><strong><font color='#10c300'>4.4、配置网络和主机名</font></strong></h4><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023222257482.png" alt="image-20251023222257482"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251023222457521.png" alt="image-20251023222457521"></p><br><h4 id="4-5、开始安装"><a href="#4-5、开始安装" class="headerlink" title="4.5、开始安装"></a><strong><font color='#10c300'>4.5、开始安装</font></strong></h4><h5 id="1）设置Root用户密码"><a href="#1）设置Root用户密码" class="headerlink" title="1）设置Root用户密码"></a><strong><font color='cornflowerblue'>1）设置Root用户密码</font></strong></h5><p>默认有个root用户，也就是超级管理员</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025162343490.png" alt="image-20251025162343490"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025162349989.png" alt="image-20251025162349989"></p><br><h5 id="2）创建用户"><a href="#2）创建用户" class="headerlink" title="2）创建用户"></a><strong><font color='cornflowerblue'>2）创建用户</font></strong></h5><p>新创建了一个zhb用户</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025162417872.png" alt="image-20251025162417872"></p><p>等待安装</p><br><h4 id="4-6、虚拟机的使用引导界面"><a href="#4-6、虚拟机的使用引导界面" class="headerlink" title="4.6、虚拟机的使用引导界面"></a><strong><font color='#10c300'>4.6、虚拟机的使用引导界面</font></strong></h4><p>重启进入引导界面</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163325360.png" alt="image-20251025163325360"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163408100.png" alt="image-20251025163408100"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163426606.png" alt="image-20251025163426606"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163508011.png" alt="image-20251025163508011"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163545397.png" alt="image-20251025163545397"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163555338.png" alt="image-20251025163555338"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163609171.png" alt="image-20251025163609171"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025163627645.png" alt="image-20251025163627645"></p><p>安装完成</p><br><h3 id="五、-切换-root-用户"><a href="#五、-切换-root-用户" class="headerlink" title="五、 切换 root 用户"></a><strong><font color='red'>五、 切换 root 用户</font></strong></h3><p>当前登录的用户是刚刚创建的用户，权限会缺少，所以使用 root，修改一些内容更加方便</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025165233836.png" alt="image-20251025165233836"><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025165459175.png" alt="image-20251025165459175"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025165518127.png" alt="image-20251025165518127"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251025165706320.png" alt="image-20251025165706320"></p><br><h3 id="六、-网络配置"><a href="#六、-网络配置" class="headerlink" title="六、 网络配置"></a><strong><font color='red'>六、 网络配置</font></strong></h3><p>linux系统下，查看网络配置IP地址</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure><p>windows系统下，查看网络配置IP地址</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig</span><br></pre></td></tr></table></figure><p>测试你的计算机与目标主机（可以是域名或IP地址）之间的连通性</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping + ip地址</span><br></pre></td></tr></table></figure><br><p><strong><font color='orange'>VMware提供了三种网络连接模式：</font></strong></p><ol><li>桥接模式：虚拟机直接连接外部物理网络的模式，主机起到了网桥的作用。在这种模式下，虚拟机可以直接访问外部网络，并且对外部网络是可见的</li><li>NAT模式：虚拟机和主机构建一个专用网络，并通过虚拟网络地址转换（NAT）设备对IP进行转换。虚拟机通过共享主机IP可以访问外部网络，但外部网络无法访问虚拟机。</li><li>仅主机模式：虚拟机只与主机共享一个专用网络，与外部网络无法通信</li></ol><p><strong><font color='orange'>获取到虚拟机的ip</font></strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201225649883.png" alt="image-20251201225649883"></p><br><h4 id="6-1、虚拟机修改静态ip"><a href="#6-1、虚拟机修改静态ip" class="headerlink" title="6.1、虚拟机修改静态ip"></a><strong><font color='#10c300'>6.1、虚拟机修改静态ip</font></strong></h4><h5 id="1）为什么要修改静态ip"><a href="#1）为什么要修改静态ip" class="headerlink" title="1）为什么要修改静态ip"></a><strong><font color='cornflowerblue'>1）为什么要修改静态ip</font></strong></h5><p>因为虚拟默认是动态ip的，每次重新都会更新ip的，因此需要修改成静态ip方便网络管理，比如你要通过SSH、远程桌面等方式连接虚拟机，固定IP更容易记忆和配置。</p><br><h5 id="2）修改静态ip"><a href="#2）修改静态ip" class="headerlink" title="2）修改静态ip"></a><strong><font color='cornflowerblue'>2）修改静态ip</font></strong></h5><p>Linux的所有配置文件放在 &#x2F;etc 目录下</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201225950902.png" alt="image-20251201225950902"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201230744458.png" alt="image-20251201230744458"></p><br><p>修改为BOOTPROTO&#x3D;”static”<br>在底部添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#IP地址</span><br><span class="line">IPADDR=192.168.244.100</span><br><span class="line">#网关</span><br><span class="line">GATEWAY=192.168.244.2</span><br><span class="line">#域名解析器</span><br><span class="line">DNS1=192.168.244.2</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201232035172.png" alt="image-20251201232035172"></p><p><strong>最后需要重启网络</strong>，注意：conterOS7和8的命令不一样注意区分，我这里是直接重启虚拟机</p><br><p><strong>这里的ip地址要和虚拟网络的VMnet8的子网IP的网段保持一致（就是前三位保持一致，后一位可自行命名）</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201231010889.png" alt="image-20251201231010889"></p><br><p><strong>网关和域名解析器则和VMnet8的NAT设置中的网关IP保持一致</strong></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201231230608.png" alt="image-20251201231230608"></p><br><h4 id="6-2、修改主机名"><a href="#6-2、修改主机名" class="headerlink" title="6.2、修改主机名"></a><strong><font color='#10c300'>6.2、修改主机名</font></strong></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname  # 查看主机名</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201234837992.png" alt="image-20251201234837992"></p><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hostname  # 修改hostname的配置，此方式需要重启才会生效</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname hadop100  # 此方式不需要重启，就可以生效 修改主机名为hadop100</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251201235132862.png" alt="image-20251201235132862"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;软件版本&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;VMware 17 Pro  17.5.2 build-23775571&lt;/p&gt;
&lt;p&gt;CentOS-8.1.1911-x86_64-dvd1.iso&lt;/p&gt;
&lt;/blockquote&gt;
&lt;</summary>
      
    
    
    
    <category term="后端与运维" scheme="http://example.com/categories/%E5%90%8E%E7%AB%AF%E4%B8%8E%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="CentOS 8" scheme="http://example.com/tags/CentOS-8/"/>
    
    <category term="虚拟机" scheme="http://example.com/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
    <category term="VMware17" scheme="http://example.com/tags/VMware17/"/>
    
  </entry>
  
  <entry>
    <title>Hexo搭建个人博客</title>
    <link href="http://example.com/posts/ec7d7221.html"/>
    <id>http://example.com/posts/ec7d7221.html</id>
    <published>2025-11-25T21:57:23.000Z</published>
    <updated>2026-01-27T15:41:13.666Z</updated>
    
    <content type="html"><![CDATA[<div align="center">    <img src="https://img.shields.io/badge/hexo-8.1.0-d1a8.svg"/>    <img src="https://img.shields.io/badge/hexoCli-4.3.2-green.svg"/>    <img src="https://img.shields.io/badge/Node-=22.21.0-ffbc39.svg"/>    <br>    <br>    <img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202409131343278.png"/></div><br><h3 id="一、前置条件"><a href="#一、前置条件" class="headerlink" title="一、前置条件"></a><strong><font color='red'>一、前置条件</font></strong></h3><h4 id="1-1、要求✏️"><a href="#1-1、要求✏️" class="headerlink" title="1.1、要求✏️"></a><strong><font color='#10c300'>1.1、要求✏️</font></strong></h4><p>安装 Hexo 相当简单，只需要先安装下列应用程序即可：</p><ul><li><a href="http://nodejs.org/">Node.js</a> (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本，本次使用的是18.18.0版本)</li><li><a href="http://git-scm.com/">Git</a></li></ul><p>如果您的电脑中已经安装上述必备程序，那么恭喜您！ 你可以直接前往 <a href="https://hexo.io/zh-cn/docs/#%E5%AE%89%E8%A3%85-Hexo">安装 Hexo</a> 步骤。</p><h4 id="1-2、安装-Hexo"><a href="#1-2、安装-Hexo" class="headerlink" title="1.2、安装 Hexo"></a><strong><font color='#10c300'>1.2、安装 Hexo</font></strong></h4><p>在电脑上全局安装Hexo</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><br><h3 id="二、创建博客"><a href="#二、创建博客" class="headerlink" title="二、创建博客"></a><strong><font color='red'>二、创建博客</font></strong></h3><p>安装 Hexo 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建博客项目文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251030145443715.png" alt="image-20251030145443715"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251027230420967.png" alt="image-20251027230420614"></p><h4 id="2-1、目录结构"><a href="#2-1、目录结构" class="headerlink" title="2.1、目录结构"></a><strong><font color='#10c300'>2.1、目录结构</font></strong></h4><p>初始化后，您的项目文件夹将如下所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><h4 id="2-1、-config-yml"><a href="#2-1、-config-yml" class="headerlink" title="2.1、_config.yml"></a><strong><font color='#10c300'>2.1、_config.yml</font></strong></h4><p>网站的 <a href="https://hexo.io/zh-cn/docs/configuration">配置</a> 文件。 您可以在此配置大部分的参数。</p><br><h3 id="三、主题"><a href="#三、主题" class="headerlink" title="三、主题"></a><strong><font color='red'>三、主题</font></strong></h3><p><a href="https://github.com/shenliyang/hexo-theme-snippet">Hexo Themes列表</a></p><p>我们这次使用后是<a href="https://github.com/shenliyang/hexo-theme-snippet">Asnippet</a>主题</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251027230809516.png" alt="image-20251027230809516"></p><h4 id="3-1、下载主题"><a href="#3-1、下载主题" class="headerlink" title="3.1、下载主题"></a><strong><font color='#10c300'>3.1、下载主题</font></strong></h4><p>有两种方式获取本主题–下载 <code>*.zip</code> 文件和通过 <code>git</code>方式：</p><ol><li>下载 <a href="https://github.com/shenliyang/hexo-theme-snippet">Snippet 主题</a> 文件解压后放在 <code>themes</code> 目录下，和博客中的 landscape 为同级目录</li><li>Git 方式，在 Hexo 根目录执行：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git://github.com/shenliyang/hexo-theme-snippet.git themes/hexo-theme-snippet</span><br></pre></td></tr></table></figure><br><h4 id="3-2、切换主题"><a href="#3-2、切换主题" class="headerlink" title="3.2、切换主题"></a><strong><font color='#10c300'>3.2、切换主题</font></strong></h4><p>在根目录的<code>_config.yml</code>文件中，找到 <code>theme: landscape</code>，将landscape替换成新的主题名</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">hexo-theme-snippet</span></span><br></pre></td></tr></table></figure><br><h4 id="3-3、安装主题插件"><a href="#3-3、安装主题插件" class="headerlink" title="3.3、安装主题插件"></a><strong><font color='#10c300'>3.3、安装主题插件</font></strong></h4><p>1️⃣因为 <strong>hexo-theme-snippet</strong> 使用了 <code>ejs</code> 模版引擎 、 <code>Less</code> CSS 预编译语言以及在官方插件的基础上 进行功能的开发，以下为必装插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pnpm i hexo-renderer-ejs hexo-renderer-less hexo-deployer-git -S</span><br></pre></td></tr></table></figure><p>2️⃣启用站内本地搜索功能</p><p>如果要使用本地站点搜索，必须安装插件 hexo-generator-json-content 来创建本地搜索 json 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pnpm i hexo-generator-json-content@2.2.0 -S</span><br></pre></td></tr></table></figure><p>然后修改主题配置_config.yml 文件下<code>jsonContent</code>相关参数。</p><br><h4 id="3-4、部署主题"><a href="#3-4、部署主题" class="headerlink" title="3.4、部署主题"></a><strong><font color='#10c300'>3.4、部署主题</font></strong></h4><h5 id="1）未修改过主题源文件"><a href="#1）未修改过主题源文件" class="headerlink" title="1）未修改过主题源文件"></a><strong><font color='cornflowerblue'>1）未修改过主题源文件</font></strong></h5><p>1️⃣  清空 hexo 静态文件和缓存，并重新生成</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo g  //清空缓存并生成静态文件</span><br></pre></td></tr></table></figure><p>2️⃣ 本地预览，确没有问题再进行发布</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s -p 4000 或者 hexo s  //启动本地服务默认</span><br></pre></td></tr></table></figure><p>3️⃣ 当 gulp 执行完成，并提示 <code>please execute： hexo d</code> 时，可以进行发布</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d 或者 gulp deploy  //部署发布</span><br></pre></td></tr></table></figure><br><h5 id="2）修改过主题源文件"><a href="#2）修改过主题源文件" class="headerlink" title="2）修改过主题源文件"></a><strong><font color='cornflowerblue'>2）修改过主题源文件</font></strong></h5><p>1️⃣ 拷贝主题目录下<code>package.json</code>文件到 Hexo 根目录下，然后安装项目的开发依赖。</p><p>如下是拷贝过来的，并删除了多余的代码。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blog&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;module&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo s&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gulp --gulpfile gulpfile.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hexo&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;7.3.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ejs&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.1.10&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.3.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-abbrlink&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.2.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-deployer-git&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-archive&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-feed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-index&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-json-content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.2.3&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-sitemap&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-generator-tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-ejs&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-renderer-marked&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^7.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hexo-server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gulp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-autoprefixer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^9.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-clean-css&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.3.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-htmlclean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.7.22&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-htmlmin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-jshint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-less&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-notify&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-plumber&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.2.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-rename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-rev-append&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.1.8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-sequence&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-uglify&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gulp-watch&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jshint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.13.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jshint-stylish&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.2.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;notify-send&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.1.2&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>2️⃣ 在 Hexo 根目录下创建一个名为 gulpfile.js 的文件并引入主题中的gulpfile.mjs：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> gulpTasks <span class="keyword">from</span> <span class="string">&#x27;./themes/hexo-theme-snippet/gulpfile.mjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> gulpTasks.<span class="property">default</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> &#123; build, dev, watchFiles, compileLess &#125; = gulpTasks;</span><br></pre></td></tr></table></figure><p>3️⃣ 编译less→css</p><p>在 Hexo 根目录下package.json添加并执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   &quot;compile-less&quot;: &quot;gulp --gulpfile themes/hexo-theme-snippet/gulpfile.mjs compileLess&quot;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pnpm run compile-less</span><br></pre></td></tr></table></figure><p>4️⃣  清空 hexo 静态文件和缓存，并重新生成</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo g  //清空缓存并生成静态文件</span><br></pre></td></tr></table></figure><p>5️⃣ 运行 gulp：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pnpm run gulp</span><br></pre></td></tr></table></figure><ul><li><p>pnpm run gulp 执行的是gulpfile.js中的默认任务，该任务引用自主题目录中的gulpfile.mjs</p></li><li><p>gulp默认执行的build任务主要功能是优化已存在的public目录中的文件，包括：</p><ul><li>压缩CSS并添加前缀</li><li>压缩JS</li><li>添加版本号到HTML文件</li><li>压缩HTML文件</li></ul></li><li><p>但是，gulp任务是在 .&#x2F;public 目录下工作的，它 不会 自动生成public目录</p></li><li><p>在Hexo博客框架中，public目录是由 hexo g (hexo generate)命令生成的，该命令会将source目录中的Markdown文件等转换为静态HTML文件</p></li></ul><p>**🔚结论 ：**要完成完整的打包流程，你需要先执行 hexo g 来生成public目录，然后再执行 pnpm run gulp 来优化public目录中的文件</p><p>6️⃣ 本地预览，确没有问题再进行发布</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s -p 4000 或者 hexo s  //启动本地服务默认</span><br></pre></td></tr></table></figure><p>7️⃣ 当 gulp 执行完成，并提示 <code>please execute： hexo d</code> 时，可以进行发布</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d 或者 gulp deploy  //部署发布</span><br></pre></td></tr></table></figure><br><h5 id="3）拓展优化💡"><a href="#3）拓展优化💡" class="headerlink" title="3）拓展优化💡"></a><strong><font color='cornflowerblue'>3）拓展优化💡</font></strong></h5><p>1️⃣ 本地开发启动一个开发服务器，监听主题中的Less和JS文件变化，当文件发生变化时自动进行编译或校验，提高开发效率。</p><p>在 Hexo 根目录下package.json添加并执行</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gulp:dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gulp --gulpfile themes/hexo-theme-snippet/gulpfile.mjs watchFiles&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pnpm run <span class="string">&quot;gulp:dev&quot;</span></span><br></pre></td></tr></table></figure><p>开发者在修改样式或脚本文件后无需手动执行编译命令，系统会自动检测并处理文件变化</p><p>2️⃣优化指令</p><br><h4 id="3-5、更新主题"><a href="#3-5、更新主题" class="headerlink" title="3.5、更新主题"></a><strong><font color='#10c300'>3.5、更新主题</font></strong></h4><p>❌不建议更新，如果自己更改过主题源文件，更新主题会把自己改动的全部替换掉</p><p>主题可能会不定时优化和更新，更新主题代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> themes/hexo-theme-snippet</span><br><span class="line">$ git pull</span><br></pre></td></tr></table></figure><br><h4 id="3-6、主题配置"><a href="#3-6、主题配置" class="headerlink" title="3.6、主题配置"></a><strong><font color='#10c300'>3.6、主题配置</font></strong></h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">## menu -- 导航菜单显示&#123;[@page:名字,@url:地址,@icon:图标]&#125;</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">page:</span> <span class="string">home</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fa-home</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## favicon -- 网站图标位置&#123;@favicon&#125;</span></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">/favicon.ico</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## rss --rss文件位置&#123;@rss&#125;</span></span><br><span class="line"><span class="attr">rss:</span> <span class="string">/atom.xml</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 各个小工具的设置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## widgets -- 6个左边小工具&#123;@widgets:[notification,category,archive,tagcloud,friends]&#125;</span></span><br><span class="line"><span class="attr">widgets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">search</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">notification</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">social</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">category</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">archive</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tagcloud</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">friends</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 各个小工具的设置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 搜索</span></span><br><span class="line"><span class="attr">jsonContent:</span></span><br><span class="line">  <span class="attr">searchLocal:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">是否启用本地搜索</span></span><br><span class="line">  <span class="attr">searchGoogle:</span> <span class="literal">true</span> <span class="string">//是否启用谷歌搜索</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">text:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## notification config --网站公告设置,支持 html 和 纯文本</span></span><br><span class="line"><span class="attr">notification:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">            &lt;p&gt;主题已经上线！欢迎下载或更新~ &lt;br/&gt;</span></span><br><span class="line"><span class="string">            主题下载：&lt;a href=&quot;https://github.com/shenliyang/hexo-theme-snippet&quot; title=&quot;fork me&quot; target=&quot;_blank&quot;&gt;Snippet主题&lt;/a&gt; &lt;br/&gt;</span></span><br><span class="line"><span class="string">            &lt;hr/&gt;接受贡献，包括不限于提交问题与需求，修复代码。欢迎Pull Request&lt;br/&gt;支持主题：&lt;a href=&quot;https://github.com/shenliyang/hexo-theme-snippet/stargazers&quot;&gt;Star一下&lt;/a&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="comment">## 社交设置&#123;@name:社交工具名字，@icon:社交工具图标，@href:设置工具链接&#125; [参考图标](http://fontawesome.io/icons/)</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Github</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">href:</span> <span class="string">//github.com/shenliyang</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章分类设置&#123;@cate_config:&#123;@show_count:是否显示数字，@show_current: 是否高亮当前category&#125;&#125;</span></span><br><span class="line"><span class="attr">cate_config:</span></span><br><span class="line">   <span class="attr">show_count:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">show_current:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章归档设置&#123;@arch_config:/*参数参考：https://hexo.io/zh-cn/docs/helpers.html#list-archives*/&#125;</span></span><br><span class="line"><span class="comment">## 推荐组合方式：[&#123;type: &#x27;monthly&#x27;,format: &#x27;YYYY年MM月&#x27;&#125;,&#123;type: &#x27;yearly&#x27;,format: &#x27;YYYY年&#x27;&#125;]</span></span><br><span class="line"><span class="attr">arch_config:</span></span><br><span class="line">   <span class="attr">type:</span> <span class="string">&#x27;monthly&#x27;</span></span><br><span class="line">   <span class="attr">format:</span> <span class="string">&#x27;YYYY年MM月&#x27;</span></span><br><span class="line">   <span class="attr">show_count:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">order:</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 标签云设置&#123;/*参数参考：http://www.goat1000.com/tagcanvas-options.php */&#125;</span></span><br><span class="line"><span class="attr">tagcloud:</span></span><br><span class="line">  <span class="attr">tag3d:</span> <span class="literal">false</span> <span class="string">//</span> <span class="string">是否启用3D标签云</span></span><br><span class="line">  <span class="attr">textColour:</span> <span class="string">&#x27;#444&#x27;</span> <span class="string">//</span> <span class="string">字体颜色</span></span><br><span class="line">  <span class="attr">outlineMethod:</span> <span class="string">&#x27;block&#x27;</span> <span class="string">//</span> <span class="string">选中模式(outline|classic|block|colour|size|none)</span></span><br><span class="line">  <span class="attr">outlineColour:</span> <span class="string">&#x27;#FFDAB9&#x27;</span> <span class="string">//</span> <span class="string">选中模式的颜色</span></span><br><span class="line">  <span class="attr">interval:</span> <span class="number">30</span> <span class="string">//</span> <span class="string">动画帧之间的时间间隔，值越大，转动幅度越大</span></span><br><span class="line">  <span class="attr">freezeActive:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">选中的标签是否继续滚动</span></span><br><span class="line">  <span class="attr">frontSelect:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">不选标签云后部的标签</span></span><br><span class="line">  <span class="attr">reverse:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">是否反向触发</span></span><br><span class="line">  <span class="attr">wheelZoom:</span> <span class="literal">false</span> <span class="string">//</span> <span class="string">是否启用鼠标滚轮</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 友链设置&#123;@链接名称：链接地址&#123;@links:[,,,]&#125;&#125;</span></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Hexo官网:</span> <span class="string">https://hexo.io/zh-cn/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 主题自定义个性化配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站宣传语&#123;@branding：网站宣传语(不设置显示本地图片)&#125;</span></span><br><span class="line"><span class="attr">branding:</span> <span class="string">从未如此简单有趣</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 设置banner背景图片&#123;@img:自定义图片地址(支持绝对和相对路径),主题默认&#123;&quot;静态背景&quot;:&quot;banner.jpg&quot;&#125;,&#123;&quot;动态背景&quot;:&quot;banner2.jpg&quot;&#125;,&#123;&quot;动态星空背景&quot;:&quot;banner3.jpg&quot;&#125;&#125;</span></span><br><span class="line"><span class="comment">## 例如：https://hexo-theme-snippet-1251680922.cos.ap-beijing.myqcloud.com/img/banner|2|3.jpg, 或者 &#x27;./img/banner-img.jpg&#x27;(相对本地资源地址)</span></span><br><span class="line"><span class="attr">banner:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">https://hexo-theme-snippet-1251680922.cos.ap-beijing.myqcloud.com/img/banner.jpg</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 设置carousel&#123;@img:图片地址,@url:点击跳转链接(默认值:&quot;javascript:&quot;)&#125;</span></span><br><span class="line"><span class="attr">carousel:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">&#x27;img/head-img.jpg&#x27;</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">&#x27;javascript:&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 首页列表底部面板&#123;@homePanel: 是否开启&#125;</span></span><br><span class="line"><span class="attr">homePanel:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 首页文章列表缩略图</span></span><br><span class="line"><span class="comment">### 加载规则: 自定义文章缩略图(在Front-matter中添加的&#x27;img&#x27;字段) &gt; 文章内的图片 &gt; defaultImgs(随机获取) &gt; 无图模式列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 自定义随机图片</span></span><br><span class="line"><span class="attr">defaultImgs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">http://www.example.jpg</span> <span class="string">//远程图片链接示例</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/img/default-1.jpg</span> <span class="string">//本地图片链接示例</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 文章摘要&#123;@摘要显示优先级：自定义摘要 &gt; 自动截取摘要 &#125;</span></span><br><span class="line"><span class="comment">### 自定义摘要范围&#123;@&lt;!--more--&gt;:截取more之前的内容为摘要&#125;</span></span><br><span class="line"><span class="comment">### 自动截取摘要&#123;@excerptLength:自动截取文章前多少个字为摘要，不配置默认：120字&#125;</span></span><br><span class="line"><span class="attr">excerptLength:</span> <span class="number">120</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 是否开启文章目录</span></span><br><span class="line"><span class="attr">toc:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 代码高亮配置&#123;@highlightTheme: 主题名称,(配置暂时不可用，后续开发中…)&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">highlightTheme:</span> <span class="string">default</span> <span class="string">//TODO</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章过期提醒功能 &#123;@warning:&#123;days:临界天数(默认300天,设置0关闭功能),text:提醒文字/*%d为过期总天数占位符*/&#125;&#125;</span></span><br><span class="line"><span class="attr">warning:</span></span><br><span class="line">  <span class="attr">days:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">text:</span> <span class="string">&#x27;本文于%d天之前发表，文中内容可能已经过时。&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章内声明&#123;@declaration: &#123;enable:是否开启,title:声明标题,tip:提示内容&#125;&#125;</span></span><br><span class="line"><span class="attr">declaration:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">&#x27;转载声明&#x27;</span></span><br><span class="line">  <span class="attr">tip:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">      商业转载请联系作者获得授权,非商业转载请注明出处 © &lt;a href=&quot;&quot; target=&quot;_blank&quot;&gt;Snippet&lt;/a&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="comment">## 文章打赏&#123;@reward: &#123;alipay:支付宝打赏,wepay:微信打赏,tip:打赏提示语; 链接都为空,关闭打赏功能&#125;&#125;</span></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">alipay:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wepay:</span> <span class="string">&#x27;../img/reward-wepay.jpg&#x27;</span></span><br><span class="line">  <span class="attr">tip:</span> <span class="string">赞赏是不耍流氓的鼓励</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 主题评论</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## utterances评论: 一款基于 GitHub issues 的评论工具; 首先在 github 上进行安装 utterances，访问 [utterances应用程序](https://github.com/apps/utterances)；然后在主题内配置 [utterances更多配置](https://utteranc.es/)</span></span><br><span class="line"><span class="attr">utterances:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">shenliyang/snippet-comment</span> <span class="string">//</span> <span class="string">github仓库名字,</span> <span class="string">格式为</span> <span class="string">user-name/repo-name</span></span><br><span class="line">  <span class="attr">issueTerm:</span> <span class="string">pathname</span> <span class="string">//</span> <span class="string">标识issue类型</span> <span class="number">1</span><span class="string">.</span> <span class="string">pathname(推荐);</span> <span class="number">2</span><span class="string">.</span> <span class="string">url;</span> <span class="number">3.</span><span class="string">title;</span> <span class="number">3</span><span class="string">.</span> <span class="string">og:title;</span> <span class="number">4</span><span class="string">.</span> <span class="string">issue-number</span> <span class="number">5</span><span class="string">.</span> <span class="string">specific-term;</span></span><br><span class="line">  <span class="attr">issueNumber:</span> <span class="number">123</span> <span class="string">//</span> <span class="string">非必填，当配置</span> <span class="string">issueTerm</span> <span class="string">=</span> <span class="string">&quot;issue-number&quot;</span><span class="string">时，需要配置issue号</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">github-light</span> <span class="string">//</span> <span class="string">主题配置</span> <span class="number">1</span><span class="string">.</span> <span class="string">github-light(推荐);</span> <span class="number">2</span><span class="string">.</span> <span class="string">github-dark;</span> <span class="number">3</span><span class="string">.</span> <span class="string">preferred-color-scheme;</span> <span class="number">4</span><span class="string">.</span> <span class="string">github-dark-orange;</span> <span class="number">5</span><span class="string">.</span> <span class="string">icy-dark;</span> <span class="number">6</span><span class="string">.</span> <span class="string">dark-blue;</span> <span class="number">7</span><span class="string">.</span> <span class="string">photon-dark;</span> <span class="number">8</span><span class="string">.</span> <span class="string">boxy-light</span></span><br><span class="line">  <span class="attr">label:</span> <span class="string">//</span> <span class="string">非必填</span></span><br><span class="line">  <span class="attr">cdn:</span> <span class="string">//</span> <span class="string">使用自定义utteranc脚本加载。</span> <span class="string">非必填，默认：&quot;https://utteranc.es/client.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### gitment</span></span><br><span class="line"><span class="attr">gitment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">  <span class="attr">client_id:</span></span><br><span class="line">  <span class="attr">client_secret:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">  <span class="attr">perPage:</span></span><br><span class="line">  <span class="attr">maxCommentHeight:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 来必力</span></span><br><span class="line"><span class="attr">livere:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">livere_uid:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 友言评论(服务不稳定，经常无法加载)</span></span><br><span class="line"><span class="attr">uyan:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">uyan_id:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Disqus评论(需要翻墙，或者搭建代理)</span></span><br><span class="line"><span class="attr">disqus:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">shortname:</span> <span class="string">snippet</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 畅言评论(需要ICP备案)</span></span><br><span class="line"><span class="attr">changyan:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">appid:</span></span><br><span class="line">  <span class="attr">conf:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Valine评论(leancloud需要实名认证) 参考网站: [valine评论](https://valine.js.org/)</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">appId:</span></span><br><span class="line">  <span class="attr">appKey:</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">说点什么吧</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="string">//</span> <span class="string">邮件通知</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="string">//</span> <span class="string">验证码</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">mm</span> <span class="string">//</span> <span class="string">avatar头像</span></span><br><span class="line">  <span class="attr">meta:</span> <span class="string">nick,mail</span> <span class="string">//</span> <span class="string">输入框内容，可选值nick,mail,link</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Gitalk评论 参考网站: [一个基于Github Issue和Preact开发的评论插件](https://gitalk.github.io/)</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">   <span class="attr">clientID:</span> <span class="string">&quot;&quot;</span> <span class="string">//</span> <span class="string">Github</span> <span class="string">应用ID</span></span><br><span class="line">   <span class="attr">clientSecret:</span> <span class="string">&quot;&quot;</span> <span class="string">//</span> <span class="string">Github</span> <span class="string">应用密钥</span></span><br><span class="line">   <span class="attr">repo:</span> <span class="string">shenliyang.github.io</span> <span class="string">//</span> <span class="string">Github仓库地址</span></span><br><span class="line">   <span class="attr">owner:</span> <span class="string">shenliyang</span>  <span class="string">//</span> <span class="string">Github</span> <span class="string">用户名(Github仓库拥有者)</span></span><br><span class="line">   <span class="attr">admin:</span> <span class="string">shenliyang</span> <span class="string">//</span> <span class="string">GitHub</span> <span class="string">repository</span> <span class="string">的所有者和合作者</span> <span class="string">(对这个</span> <span class="string">repository</span> <span class="string">有写权限的用户)可以有一个或多个，如果有多名可使用，例如：admin:</span> <span class="string">admin1,admin2</span> <span class="string">配置</span></span><br><span class="line">   <span class="attr">perPage:</span> <span class="number">10</span> <span class="string">//</span> <span class="string">每次加载的数据大小，最多100</span></span><br><span class="line">   <span class="attr">distractionFreeMode:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">是否启用无干扰模式，类似Facebook评论框的全屏遮罩效果</span></span><br><span class="line"></span><br><span class="line">   <span class="string">//</span> <span class="string">以下参数主题会默认处理，不需要配置</span></span><br><span class="line">   <span class="string">language</span> <span class="string">//</span> <span class="string">语言类型，默认为站点配置中选项</span></span><br><span class="line">   <span class="string">id</span> <span class="string">//</span> <span class="string">页面的唯一标识,</span> <span class="string">已使用md5对pathname转换生成唯一id处理</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站访客统计 [不蒜子统计](http://busuanzi.ibruce.info/)</span></span><br><span class="line"><span class="attr">visit_counter:</span></span><br><span class="line">   <span class="attr">site:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">总访问量和访问人数统计</span></span><br><span class="line">   <span class="attr">page:</span> <span class="literal">true</span> <span class="string">//</span> <span class="string">文章阅读量统计</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站访问统计</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 网盟CNZZ统计 参考网站: [网盟CNZZ](http://www.umeng.com/)</span></span><br><span class="line"><span class="attr">cnzz_anaylytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 百度统计 参考网站: [百度统计](https://tongji.baidu.com/)</span></span><br><span class="line"><span class="attr">baidu_anaylytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 谷歌统计 参考网站：[谷歌统计](https://www.google-analytics.com/)</span></span><br><span class="line"><span class="attr">google_anaylytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 腾讯分析 参考网站：[腾讯分析](http://ta.qq.com/)</span></span><br><span class="line"><span class="attr">tencent_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 百度站点认证</span></span><br><span class="line"><span class="attr">baidu-site-verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 百度自动推送(@baidu_push: 是否启用百度自动推送)  参考网站: [百度站长资源](https://ziyuan.baidu.com/college/courseinfo?id=267&amp;page=2#h2_article_title18)</span></span><br><span class="line"><span class="attr">baidu_push:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ICON配置 (不配则启用本地Font Icon)</span></span><br><span class="line"><span class="attr">fontAwesome:</span> <span class="string">//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站主题配置</span></span><br><span class="line"><span class="attr">since:</span> <span class="number">2017</span>  <span class="string">//建站时间</span></span><br><span class="line"><span class="attr">beian:</span> <span class="string">&#x27;京ICP备04000001号&#x27;</span> <span class="string">//网站备案号</span></span><br><span class="line"><span class="attr">robot:</span> <span class="string">&#x27;all&#x27;</span>  <span class="string">//控制搜索引擎的抓取和索引编制行为，默认为all</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">1.3</span><span class="number">.0</span>  <span class="string">//当前主题版本号</span></span><br></pre></td></tr></table></figure><br><h4 id="3-7、主题使用技巧及功能扩展"><a href="#3-7、主题使用技巧及功能扩展" class="headerlink" title="3.7、主题使用技巧及功能扩展"></a><strong><font color='#10c300'>3.7、主题使用技巧及功能扩展</font></strong></h4><p>修改新增文章 Front-matter 模板,修改<code>scaffolds</code>目录下的<code>post.md</code>模板</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> &#123;&#123; <span class="string">title</span> &#125;&#125; <span class="string">//</span> <span class="string">标题</span></span><br><span class="line"><span class="attr">date:</span> &#123;&#123; <span class="string">date</span> &#125;&#125;   <span class="string">//</span> <span class="string">时间</span></span><br><span class="line"><span class="attr">categories:</span> [<span class="string">&#x27;分类1&#x27;</span>,<span class="string">&#x27;分类2&#x27;</span>] <span class="string">//</span> <span class="string">分类</span></span><br><span class="line"><span class="attr">tags:</span> [<span class="string">&#x27;标签1&#x27;</span>,<span class="string">&#x27;标签2&#x27;</span>]       <span class="string">//</span> <span class="string">标签</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span>    <span class="string">//</span> <span class="string">是否开启评论</span></span><br><span class="line"><span class="attr">img:</span>               <span class="string">//</span> <span class="string">自定义缩略图</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><br><h3 id="四、自定义路由-导航"><a href="#四、自定义路由-导航" class="headerlink" title="四、自定义路由(导航)"></a><strong><font color='red'>四、自定义路由(导航)</font></strong></h3><p>以我们这次<a href="https://github.com/shenliyang/hexo-theme-snippet">Asnippet</a>主题为例</p><p><a href="#aa">前置元数据详解</a>(前置知识，必先：ctrl+左键点击查看)</p><h4 id="4-1、配置文件中添加导航项"><a href="#4-1、配置文件中添加导航项" class="headerlink" title="4.1、配置文件中添加导航项"></a><strong><font color='#10c300'>4.1、配置文件中添加导航项</font></strong></h4><ul><li>主题配置文件中编辑 themes&#x2F;hexo-theme-snippet&#x2F;_config.yml</li><li>在 menu 部分添加新的菜单项（分类&#x2F;关于），格式如下：</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251028185224676.png" alt="image-20251028185224676"></p><h4 id="4-2、创建页面内容"><a href="#4-2、创建页面内容" class="headerlink" title="4.2、创建页面内容"></a><strong><font color='#10c300'>4.2、创建页面内容</font></strong></h4><p><strong><font color='orange'>1）创建的页面就是以.md文件内容为展示的路由页面</font></strong></p><ul><li><p>在Hexo项目的根目录的source目录下创建对应的文件夹和文件</p><p>例如，要创建 <code>/about/</code>路由，需要在 source 目录下创建 <code>source\about\index.md</code>文件</p></li><li><p>在 index.md 中添加页面内容和前置元数据</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">关于我</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-10-28 16:03:32</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251029000623224.png" alt="image-20251029000623224"></p></li></ul><p><strong><font color='orange'>2）创建自定义页面模板</font></strong></p><ul><li><p>如果需要自定义页面模板，可以在<code>themes\hexo-theme-snippet\layout\</code>目录下创建新的<code>.ejs</code> 文件（<code>categories.ejs</code>）</p></li><li><p>在页面的前置元数据中指定布局文件。例如在layout文件夹中创建<code>categories.ejs</code>文件，那么在元数据中layout的属性值就得设置成<code>categories</code>和layout文件夹中创建的<code>.ejs</code> 文件名保持一致</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2025-10-28 16:15:28</span><br><span class="line">layout: categories</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251029001736475.png" alt="image-20251029001736475"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251029000804848.png" alt="image-20251029000804848"></p></li></ul><br><h3 id="五、前置元数据-Front-matter"><a href="#五、前置元数据-Front-matter" class="headerlink" title="五、前置元数据(Front-matter)"></a><strong><font color='red'>五、前置元数据(Front-matter)</font></strong></h3><p>在Hexo中，页面的前置元数据（Front-matter）和内容的组织是创建自定义页面的关键。</p><p>前置元数据是位于文件顶部、由 — 包围的YAML或JSON格式数据，它定义了页面的各种属性。</p><h4 id="5-1、基本结构"><a href="#5-1、基本结构" class="headerlink" title="5.1、基本结构"></a><strong><font color='#10c300'>5.1、基本结构</font></strong></h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">页面标题</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-10-28 16:03:32</span></span><br><span class="line"><span class="attr">layout:</span> <span class="string">布局名称</span></span><br><span class="line"><span class="comment"># 其他属性...</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="comment"># 这里开始是页面内容</span></span><br></pre></td></tr></table></figure><h4 id="5-2、常用前置元数据属性"><a href="#5-2、常用前置元数据属性" class="headerlink" title="5.2、常用前置元数据属性"></a><strong><font color='#10c300'>5.2、常用前置元数据属性</font></strong></h4><p>根据您的项目中的示例，以下是常用的属性：</p><ol><li>title : 页面标题</li><li>date : 创建日期，格式为 YYYY-MM-DD HH:mm:ss</li><li>layout : 指定使用的布局模板（如 categories ）</li><li>comments : 是否开启评论（true&#x2F;false）</li><li>categories : 分类</li><li>tags : 标签</li><li>permalink : 自定义永久链接</li></ol><br><h3 id="六、博客部署到Github-Pages"><a href="#六、博客部署到Github-Pages" class="headerlink" title="六、博客部署到Github Pages"></a><strong><font color='red'>六、博客部署到Github Pages</font></strong></h3><h4 id="6-1、新建仓库"><a href="#6-1、新建仓库" class="headerlink" title="6.1、新建仓库"></a><strong><font color='#10c300'>6.1、新建仓库</font></strong></h4><p>创建一个和你用户名相同的仓库，后面加 <code>.github.io</code></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251031115006280.png" alt="image-20251031115006280"></p><h4 id="6-2、实现免密登录"><a href="#6-2、实现免密登录" class="headerlink" title="6.2、实现免密登录"></a><strong><font color='#10c300'>6.2、实现免密登录</font></strong></h4><p><strong>为了实现安全的免密访问 GitHub 仓库</strong>，也就是在你每次部署或推送内容到 GitHub Pages 时，不再需要输入账号密码，同时保证传输是安全加密的。</p><h5 id="1）配置-Git-用户信息"><a href="#1）配置-Git-用户信息" class="headerlink" title="1）配置 Git 用户信息"></a><strong><font color='cornflowerblue'>1）配置 Git 用户信息</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;yourname&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure><p>这两条命令不是用来登录的，而是：</p><ul><li><p>告诉 Git <strong>是谁在提交代码</strong>。</p></li><li><p>每一次 commit 都会写入这两个信息，形成类似：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Author: yourname &lt;youremail&gt;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p> <strong>🚨注意：</strong><br> 这个邮箱最好与你 GitHub 账号绑定的邮箱一致，否则 GitHub 无法正确识别为你的提交</p></blockquote><p>查看当前配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bashgit config user.name</span><br><span class="line">git config user.email</span><br></pre></td></tr></table></figure><h5 id="2）生成-SSH-密钥"><a href="#2）生成-SSH-密钥" class="headerlink" title="2）生成 SSH 密钥"></a><strong><font color='cornflowerblue'>2）生成 SSH 密钥</font></strong></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;yourEmail&quot;</span></span><br></pre></td></tr></table></figure><p>这条命令是<strong>创建一对 SSH 密钥</strong>（key pair）：</p><ul><li><strong>私钥 (<code>id_rsa</code>)</strong>：保存在你电脑上，不要泄露。</li><li><strong>公钥 (<code>id_rsa.pub</code>)</strong>：可以安全地上传到 GitHub（或其他服务器）。</li></ul><p>然后你会发现 <code>C:\Users\19584\</code> 下有一个 <code>.ssh</code> 目录，如果没有，打开隐藏文件夹，<code>.ssh</code> 文件夹下有 <code>id_rsa</code> 和 <code>id_rsa.pub</code>，前一个是私钥，后一个是公钥</p><h5 id="3）配置到-GitHub"><a href="#3）配置到-GitHub" class="headerlink" title="3）配置到 GitHub"></a><strong><font color='cornflowerblue'>3）配置到 GitHub</font></strong></h5><p>将 <code>id_rsa.pub</code> 内的内容复制下来，然后进入 GitHub，点击 <code>Settings</code>，进入 <code>SSH and GPG keys</code> 选项，点击 <code>New SSH key</code>，然后填写 <code>Title: Blog</code>，<code>Key:你刚刚复制的公钥</code></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20251031140039333.png" alt="image-20251031140039333"></p><h4 id="6-3、一键部署"><a href="#6-3、一键部署" class="headerlink" title="6.3、一键部署"></a><strong><font color='#10c300'>6.3、一键部署</font></strong></h4><ol><li><p>安装 <a href="https://github.com/hexojs/hexo-deployer-git">hexo-deployer-git</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add hexo-deployer-git</span><br></pre></td></tr></table></figure></li><li><p>在根目录 <code>_config.yml</code> 中添加以下配置（如果配置已经存在，请将其替换为如下）:</p></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/&lt;username&gt;/&lt;username&gt;.github.io</span></span><br><span class="line">  <span class="comment"># example, https://github.com/hexojs/hexojs.github.io</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span>  <span class="string">//</span> <span class="string">和你创建的&lt;username&gt;.github.io创库的主分支保持一致</span></span><br></pre></td></tr></table></figure><ul><li>执行 <code>hexo clean &amp;&amp; hexo deploy</code> 。</li><li>浏览 <em>username</em>.github.io，检查你的网站能否运作。</li></ul><p>添加组合命令</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;push&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pnpm run compile-less &amp;&amp; pnpm run del &amp;&amp; pnpm run clean &amp;&amp; pnpm run build &amp;&amp; pnpm run gulp &amp;&amp; pnpm run deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;div align=&quot;center&quot;&gt;
    &lt;img src=&quot;https://img.shields.io/badge/hexo-8.1.0-d1a8.svg&quot;/&gt;
    &lt;img src=&quot;https://img.shields.io/badge/hexoCli-4.</summary>
      
    
    
    
    <category term="其他" scheme="http://example.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="hexo" scheme="http://example.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>UnoCSS的使用</title>
    <link href="http://example.com/posts/74efe575.html"/>
    <id>http://example.com/posts/74efe575.html</id>
    <published>2025-08-23T15:51:08.000Z</published>
    <updated>2026-01-27T15:41:13.666Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502221552580.png" alt="image-20250222155200521"></p><p><a href="https://unocss.jiangruyi.com/">UnoCSS中文文档</a></p><h3 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装 "></a><strong><font color='red'>1、安装 </font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add -D unocss @iconify-json/ep @unocss/preset-rem-to-px</span><br></pre></td></tr></table></figure><blockquote><p>unocss：核心库</p><p>@iconify-jsonp&#x2F;ep：使用elementplus图标库<a href="https://iconify.design/">https://iconify.design/</a></p><p>@unocss&#x2F;preset-rem-to-px：默认是rem单位，将rem转成px</p></blockquote><p>**<code>UnoCSS</code>**图标预设：<a href="https://unocss.jiangruyi.com/presets/icons">https://unocss.jiangruyi.com/presets/icons</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">UnoCSS</span> <span class="keyword">from</span> <span class="string">&#x27;unocss/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title class_">UnoCSS</span>(),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="2、配置"><a href="#2、配置" class="headerlink" title="2、配置"></a><strong><font color='red'>2、配置</font></strong></h3><p>**<code>UnoCSS</code>**的尺寸1（m-1）转换之后是4px，根目录默认字体大小16px即16px &#x3D; 1rem，4px &#x3D; 0.25rem，因此得知Uno中的1表示4px，也代表0.25rem。如果要想将UnoCSS中的1变成1px，则需要安装<code>@unocss/preset-rem-to-px</code>插件。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// uno.config.ts</span></span><br><span class="line"><span class="keyword">import</span> presetRemToPx <span class="keyword">from</span> <span class="string">&#x27;@unocss/preset-rem-to-px&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    defineConfig,</span><br><span class="line">    presetAttributify,</span><br><span class="line">    presetIcons,</span><br><span class="line">    presetWind3,</span><br><span class="line">    transformerDirectives,</span><br><span class="line">    transformerVariantGroup,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;unocss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">shortcuts</span>: &#123; <span class="comment">// 自定义属性  一个属性可以对应多个UnoCSS类值</span></span><br><span class="line">        <span class="string">&#x27;flex-center&#x27;</span>: <span class="string">&#x27;flex justify-center items-center&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;flex-x-center&#x27;</span>: <span class="string">&#x27;flex justify-center&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;flex-y-center&#x27;</span>: <span class="string">&#x27;flex items-center&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;grid-center&#x27;</span>: <span class="string">&#x27;grid place-items-center&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;wh-full&#x27;</span>: <span class="string">&#x27;w-full h-full&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;flex-x-between&#x27;</span>: <span class="string">&#x27;flex items-center justify-between&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;flex-x-end&#x27;</span>: <span class="string">&#x27;flex items-center justify-end&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;absolute-lt&#x27;</span>: <span class="string">&#x27;absolute left-0 top-0&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;absolute-rt&#x27;</span>: <span class="string">&#x27;absolute right-0 top-0 &#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;fixed-lt&#x27;</span>: <span class="string">&#x27;fixed left-0 top-0&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">theme</span>: &#123;</span><br><span class="line">        <span class="attr">colors</span>: &#123; <span class="comment">// 自定义颜色</span></span><br><span class="line">            <span class="attr">primary</span>: <span class="string">&#x27;var(--el-color-primary)&#x27;</span>,</span><br><span class="line">            <span class="attr">red</span>: <span class="string">&#x27;#f53e31&#x27;</span>,</span><br><span class="line">            <span class="attr">gray_888</span>: <span class="string">&#x27;#888&#x27;</span>,</span><br><span class="line">            <span class="attr">gray_999</span>: <span class="string">&#x27;#999&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">presets</span>: [</span><br><span class="line">        <span class="title function_">presetWind3</span>(&#123;</span><br><span class="line">            <span class="attr">important</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">// 允许你直接在HTML元素上使用属性来定义样式，而不需要使用class。例如，&lt;div flex m=&quot;5&quot;&gt;&lt;/div&gt;可以等价于&lt;div class=&quot;flex m-5&quot;&gt;&lt;/div&gt;</span></span><br><span class="line">        <span class="title function_">presetAttributify</span>(),</span><br><span class="line">        <span class="title function_">presetIcons</span>(&#123;</span><br><span class="line">            <span class="attr">scale</span>: <span class="number">1.2</span>,</span><br><span class="line">            <span class="attr">warn</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title function_">presetRemToPx</span>(&#123; <span class="comment">// 根目录字体设置为4即可实现unocss的1为1px</span></span><br><span class="line">            <span class="attr">baseFontSize</span>: <span class="number">4</span>,</span><br><span class="line">        &#125;),</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// transformerDirectives() 可以使用@apply @screen theme函数</span></span><br><span class="line">    <span class="attr">transformers</span>: [</span><br><span class="line">        <span class="title function_">transformerDirectives</span>(),</span><br><span class="line">        <span class="title function_">transformerVariantGroup</span>(),</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">        <span class="comment">// 以下官网规则可自定义转换</span></span><br><span class="line">        <span class="comment">// [/^m-([.\d]+)$/, ([_, num]) =&gt; (&#123; margin: `$&#123;num&#125;px` &#125;)],</span></span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;virtual:uno.css&#x27;</span></span><br></pre></td></tr></table></figure><br><p><strong><font color='red'>3、UnoCSS中使用图标 </font></strong></p><p><a href="https://icon-sets.iconify.design/" title=" iconify官网">iconify官网</a>中的@iconify-jsonp&#x2F;ep图标</p><p>@iconify-jsonp&#x2F;ep</p><blockquote><p>语法：i前缀-ep图标库:xx（图标名称）</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">i-ep:chrome-filled</span> /&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502232318083.png" alt="image-20250223231812025"></p><br><h3 id="4、UnoCSS预设语法"><a href="#4、UnoCSS预设语法" class="headerlink" title="4、UnoCSS预设语法 "></a><strong><font color='red'>4、UnoCSS预设语法 </font></strong></h3><p>默认的 <code>@unocss/preset-uno</code> 预设（实验阶段）是一系列流行的原子化框架的通用超集，包括了 <code>Tailwind CSS</code>，<code>Windi CSS</code>，<code>Bootstrap</code>，<code>Tachyons</code> 等。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">w-<span class="number">10</span> h-<span class="number">10</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line">max-w-<span class="number">96</span> min-w-<span class="number">96</span></span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">96px</span>;</span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">96px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">text</span>-<span class="number">30</span></span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">30px</span></span><br><span class="line"></span><br><span class="line">rounded  rounded-<span class="number">2</span></span><br><span class="line">border-radius: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line"></span><br><span class="line">size-<span class="number">50</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line"></span><br><span class="line">py-<span class="number">2</span></span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">2px</span>;</span><br><span class="line"></span><br><span class="line">px-<span class="number">4</span></span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">4px</span>;</span><br><span class="line"> <span class="attribute">padding-right</span>: <span class="number">4px</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">font</span>-bold</span><br><span class="line"><span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">border</span>-<span class="number">4</span> // 边框宽度</span><br><span class="line"><span class="attribute">border-width</span>: <span class="number">4px</span>;</span><br><span class="line"></span><br><span class="line">box-<span class="attribute">border</span></span><br><span class="line"><span class="attribute">box-sizing</span>: border-box;</span><br><span class="line"></span><br><span class="line">leading-<span class="number">3</span></span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">3px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">text</span>-center</span><br><span class="line"><span class="attribute">text-align</span>: center;</span><br><span class="line"></span><br><span class="line">如果你的项目需要一次性自定义颜色，请考虑使用任意值符号来按需为该颜色生成一个类，而不是将其添加到你的主题中：</span><br><span class="line">class=&quot;c-<span class="selector-attr">[#f40]</span>&quot; //必须要用class</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">b</span>-<span class="selector-tag">b</span>-<span class="number">2</span> <span class="selector-tag">b</span>-solid <span class="selector-tag">b</span>-red</span><br><span class="line"><span class="attribute">border-bottom</span>: <span class="number">2px</span> solid red</span><br><span class="line"></span><br><span class="line">gap10</span><br><span class="line">gap: <span class="number">10px</span>;  <span class="attribute">flex</span>布局盒子之间距离</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502221552580.png&quot; alt=&quot;image-20250222155200521&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://</summary>
      
    
    
    
    <category term="工程化与质量" scheme="http://example.com/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96%E4%B8%8E%E8%B4%A8%E9%87%8F/"/>
    
    
    <category term="css" scheme="http://example.com/tags/css/"/>
    
    <category term="unocss" scheme="http://example.com/tags/unocss/"/>
    
  </entry>
  
  <entry>
    <title>element-Plus按需加载以及注意事项</title>
    <link href="http://example.com/posts/e3b10f75.html"/>
    <id>http://example.com/posts/e3b10f75.html</id>
    <published>2025-08-22T15:51:08.000Z</published>
    <updated>2026-01-27T15:41:13.666Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、依赖包安装"><a href="#一、依赖包安装" class="headerlink" title="一、依赖包安装"></a><strong><font color='red'>一、依赖包安装</font></strong></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pnpm install element-plus</span></span><br></pre></td></tr></table></figure><br><h3 id="二、Volar-支持"><a href="#二、Volar-支持" class="headerlink" title="二、Volar 支持"></a><strong><font color='red'>二、Volar 支持</font></strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/ tsconfig.json</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;element-plus/global&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="三、按需自动导入"><a href="#三、按需自动导入" class="headerlink" title="三、按需自动导入"></a><strong><font color='red'>三、按需自动导入</font></strong></h3><h4 id="3-1、安装"><a href="#3-1、安装" class="headerlink" title="3.1、安装 "></a><strong><font color='#10c300'>3.1、安装 </font></strong></h4><p>安装自动导入组件和函数的插件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pnpm add unplugin-vue-components unplugin-auto-import -D</span></span><br></pre></td></tr></table></figure><br><h4 id="3-2、配置"><a href="#3-2、配置" class="headerlink" title="3.2、配置 "></a><strong><font color='#10c300'>3.2、配置 </font></strong></h4><p>安装完成会默认在根目录生成<code>auto-imports.d.ts</code>和<code>components.d.ts</code>两个文件ts声明文件</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/ vite.<span class="property">config</span>.<span class="property">ts</span>配置</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">         <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">         <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>将生成的声明文件关联到ts的配置文件中去</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/ tsconfig.app.json</span><br><span class="line"><span class="comment">// 将auto-imports.d.ts和components.d.ts和env.d.ts三个文件统一放到根目录的types文件夹中，然后在include中直接引入types即可</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;types&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.vue&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="comment">// TypeScript编译器编译的文件</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p> 问题：只要新加组件和和函数就又会在根目录生成两个声明文件，但是我需要生成的文件在types文件中，怎么做呢？ 在<code>vite.config.ts</code>文件中配置声明文件存储的路径</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/ vite.<span class="property">config</span>.<span class="property">ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">            <span class="comment">// 自动导入 Vue 相关函数，如：ref, reactive, toRef 等</span></span><br><span class="line">            <span class="attr">imports</span>: [<span class="string">&#x27;vue&#x27;</span>, <span class="string">&#x27;pinia&#x27;</span>, <span class="string">&#x27;vue-router&#x27;</span>],</span><br><span class="line">         <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">            <span class="comment">// 指定自动导入 函数 TS类型声明文件路径，默认自动导入在根目录。</span></span><br><span class="line">            <span class="attr">dts</span>: <span class="string">&#x27;types/auto-imports.d.ts&#x27;</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">         <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">            <span class="comment">// 指定自动导入 组件 TS类型声明文件路径，默认自动导入在根目录。</span></span><br><span class="line">            <span class="attr">dts</span>: <span class="string">&#x27;types/components.d.ts&#x27;</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>怎么查看<code>components.d.ts</code>声明文件生效？鼠标放到使用的elementPlus组件上，会出现如图的ts。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250217102004143.png" alt="image-20250217102004143"></p><p>忽略<code>auto-imports.d.ts</code>和<code>components.d.ts</code>上传至仓库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">types/*</span><br><span class="line">!types/env.d.ts</span><br></pre></td></tr></table></figure><br><h3 id="四、element-plus-样式问题"><a href="#四、element-plus-样式问题" class="headerlink" title="四、element-plus 样式问题"></a><strong><font color='red'>四、element-plus 样式问题</font></strong></h3><p>当你使用unplugin-vue-components来引入ui库的时候，message, notification，toast 等引入样式不生效（弹窗在底部）</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250217104623237.png" alt="image-20250217104623237"></p><h4 id="4-1、全量引入（不推荐）"><a href="#4-1、全量引入（不推荐）" class="headerlink" title="4.1、全量引入（不推荐） "></a><strong><font color='#10c300'>4.1、全量引入（不推荐） </font></strong></h4><p>在main.ts中引入</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br></pre></td></tr></table></figure><br><h4 id="4-1、按需自动引入"><a href="#4-1、按需自动引入" class="headerlink" title="4.1、按需自动引入"></a><strong><font color='#10c300'>4.1、按需自动引入</font></strong></h4><h5 id="1）安装"><a href="#1）安装" class="headerlink" title="1）安装 "></a><strong><font color='cornflowerblue'>1）安装 </font></strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pnpm add vite-plugin-style-import -D</span></span><br></pre></td></tr></table></figure><br><h5 id="2）配置文件"><a href="#2）配置文件" class="headerlink" title="2）配置文件 "></a><strong><font color='cornflowerblue'>2）配置文件 </font></strong></h5><p>在 <code>vite.config.ts</code> 配置</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStyleImportPlugin, <span class="title class_">ElementPlusResolve</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-style-import&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">createStyleImportPlugin</span>(&#123;</span><br><span class="line">            <span class="comment">// 预设的和自定义二选一</span></span><br><span class="line">            <span class="attr">resolves</span>: [<span class="title class_">ElementPlusResolve</span>()], <span class="comment">// 预设的样式解析器</span></span><br><span class="line">            <span class="comment">// libs: [&#123; // 自定义样式的加载方式</span></span><br><span class="line">            <span class="comment">//     libraryName: &#x27;element-plus&#x27;,</span></span><br><span class="line">            <span class="comment">//     esModule: true,</span></span><br><span class="line">            <span class="comment">//     resolveStyle: (name: string) =&gt; &#123;</span></span><br><span class="line">            <span class="comment">//         return `element-plus/theme-chalk/$&#123;name&#125;.css`</span></span><br><span class="line">            <span class="comment">//     &#125;,</span></span><br><span class="line">            <span class="comment">// &#125;],</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="五、icon图标自动导入"><a href="#五、icon图标自动导入" class="headerlink" title="五、icon图标自动导入"></a><strong><font color='red'>五、icon图标自动导入</font></strong></h3><p>如果使用unocss原子CSS引擎，也可使用unocss的icon图标引入，详细见<a href="https://shixna.github.io/post/74efe575.html">unocss使用教程</a></p><h4 id="5-1、安装"><a href="#5-1、安装" class="headerlink" title="5.1、安装 "></a><strong><font color='#10c300'>5.1、安装 </font></strong></h4><p>使用<code>unplugin-icons</code>和<code>unplugin-auto-import</code>从<a href="https://icon-sets.iconify.design/" title=" iconify官网">iconify</a>中自动导入任何图标集，若安装unplugin-auto-import则不需再次安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pnpm add -D unplugin-icons unplugin-auto-import</span></span><br></pre></td></tr></table></figure><br><h4 id="5-2、配置文件"><a href="#5-2、配置文件" class="headerlink" title="5.2、配置文件"></a><strong><font color='#10c300'>5.2、配置文件</font></strong></h4><h5 id="1）vite-config-ts配置"><a href="#1）vite-config-ts配置" class="headerlink" title="1）vite.config.ts配置 "></a><strong><font color='cornflowerblue'>1）vite.config.ts配置 </font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">IconsResolver</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/resolver&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">            <span class="attr">resolvers</span>: [</span><br><span class="line">                <span class="title class_">IconsResolver</span>(), </span><br><span class="line">                <span class="comment">// IconsResolver(&#123;</span></span><br><span class="line">                <span class="comment">// prefix: &#x27;i&#x27;,</span></span><br><span class="line">                <span class="comment">// enabledCollections: [&#x27;ep&#x27;],</span></span><br><span class="line">                <span class="comment">// &#125;),</span></span><br><span class="line">            ],</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Icons</span>(&#123;</span><br><span class="line">            <span class="attr">autoInstall</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>网上很多教程有写在AutoImport中也需设置IconsResolver()，实际在AutoImport 下的 IconsResolver 中可以不添加 IconsResolver 配置，只在 Components 下的 IconsResolver 中进行相应配置就行</p><br><h5 id="2）自动导入icon-图标的格式"><a href="#2）自动导入icon-图标的格式" class="headerlink" title="2）自动导入icon 图标的格式"></a><strong><font color='cornflowerblue'>2）自动导入icon 图标的格式</font></strong></h5><p>{prefix}-{collection}-{icon}</p><p>即 ~ “前缀-使用的图标库名称-图标名” 格式形式来使用的，element-plus 的图标库名称是 “ep”，默认前缀是 “i”，需要改的话可以在 Components 配置项 的 IconsResolver 的<code>prefix</code>中进行相应配置</p><p>以elementPlus的<code>icon</code>为例（<a href="https://icon-sets.iconify.design/" title=" iconify官网">iconify</a>图标库中的也一样）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i-ep-Bowl</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 或者 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-icon</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i-ep-alarmClock</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果设置属性例如颜色、大写则必须使用<code>&lt;el-icon&gt;</code>包裹，然后在其上写属性</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-icon</span> <span class="attr">:size</span>=<span class="string">&quot;60&quot;</span> <span class="attr">color</span>=<span class="string">&quot;red&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i-ep-Plus</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h5 id="3）IconsResolver配置解析"><a href="#3）IconsResolver配置解析" class="headerlink" title="3）IconsResolver配置解析"></a><strong><font color='cornflowerblue'>3）IconsResolver配置解析</font></strong></h5><p>当IconsResolver()不设置参数的时候，<a href="https://icon-sets.iconify.design/" title=" iconify官网">iconify</a>图标库中的图标都能使用（这里面也包含了elementPlus的图标）</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">IconsResolver</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/resolver&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">            <span class="attr">resolvers</span>: [</span><br><span class="line">                <span class="title class_">IconsResolver</span>(), </span><br><span class="line">            ],</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Icons</span>(&#123;</span><br><span class="line">            <span class="attr">autoInstall</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502172329868.png" alt="image-20250217232957812"></p><p>怎么使用<a href="https://icon-sets.iconify.design/" title=" iconify官网">iconify</a>图标库中的图标呢？举例子</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502172349404.png" alt="image-20250217234948316"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502172353815.png" alt="image-20250217235318764"></p><p>当IconsResolver()设置参数的时候，自定义图标格式前缀、限制使用图标库。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">IconsResolver</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/resolver&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title class_">Components</span>(&#123;</span><br><span class="line">            <span class="attr">resolvers</span>: [</span><br><span class="line">                <span class="title class_">IconsResolver</span>(&#123;</span><br><span class="line">                <span class="attr">prefix</span>: <span class="string">&#x27;icon&#x27;</span>,</span><br><span class="line">                <span class="attr">enabledCollections</span>: [<span class="string">&#x27;ep&#x27;</span>, <span class="string">&#x27;mdi&#x27;</span>, <span class="string">&#x27;iconamoon&#x27;</span>],</span><br><span class="line">                &#125;),</span><br><span class="line">            ],</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Icons</span>(&#123;</span><br><span class="line">            <span class="attr">autoInstall</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// xxxx.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">icon-mdi-Bowl</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">icon-mdi-alarmClock</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">icon-iconamoon-arrow-bottom-right-1-fill</span> /&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502180003832.png" alt="image-20250218000329782"></p><p>怎么去看enabledCollections中定义的这个图标库名称呢？</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502180004288.png" alt="image-20250218000454202"></p><p><strong><code>注意</code></strong></p><p>当没做图标库限制的时候，使用了哪些图标库就会自动安装这个图标库的依赖，因此更建议使用IconsResolver({})自定义的去限制图标库</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250220170724230.png" alt="image-20250220170724230"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、依赖包安装&quot;&gt;&lt;a href=&quot;#一、依赖包安装&quot; class=&quot;headerlink&quot; title=&quot;一、依赖包安装&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、依赖包安装&lt;/font&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;figure cla</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
    <category term="element-Plus" scheme="http://example.com/tags/element-Plus/"/>
    
  </entry>
  
  <entry>
    <title>0-1搭建vue3项目及配置</title>
    <link href="http://example.com/posts/eb0b56b0.html"/>
    <id>http://example.com/posts/eb0b56b0.html</id>
    <published>2025-08-20T15:51:08.000Z</published>
    <updated>2026-01-27T15:41:13.666Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>由于vite脚手架要禁止*.cjs 和 eslint版本升级废弃rc配置文件， 故重新搭建。</p><p>核心采用**<code>antfu</code>**大神预设配置 替代prettier和eslint设置，保留stylelint原因是暂时antfu不支持。</p></blockquote><h3 id="1、前置条件"><a href="#1、前置条件" class="headerlink" title="1、前置条件"></a><strong><font color='red'>1、前置条件</font></strong></h3><h4 id="1-1、node版本"><a href="#1-1、node版本" class="headerlink" title="1.1、node版本"></a><strong><font color='#10c300'>1.1、node版本</font></strong></h4><p>node 最好&gt;20 因为eslint9的需要 本次项目node为20.15.1</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103820848.png" alt="image-20240828103820848"></p><h4 id="1-2、包管理器"><a href="#1-2、包管理器" class="headerlink" title="1.2、包管理器"></a><strong><font color='#10c300'>1.2、包管理器</font></strong></h4><p>包管理器 采用pnpm</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20241207213915592.png" alt="image-20241207213915592"></p><h4 id="1-3、VsCode插件"><a href="#1-3、VsCode插件" class="headerlink" title="1.3、VsCode插件"></a><strong><font color='#10c300'>1.3、VsCode插件</font></strong></h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.vscode/extensions.json</span><br><span class="line">它的作用是：当其他开发者用 VS Code 打开你的项目时，VS Code 会自动弹出提示，建议安装这些插件。</span><br><span class="line">recommendations：数组，列出推荐给团队成员的 VS Code 扩展插件 ID。</span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;recommendations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;Vue.volar&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;dbaeumer.vscode-eslint&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;esbenp.prettier-vscode&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;csstools.postcss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;stylelint.vscode-stylelint&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;antfu.unocss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;simonhe.to-unocss&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103527225.png" alt="image-20240828103527225"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103542672.png" alt="image-20240828103542672"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103556492.png" alt="image-20240828103556492"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103620621.png" alt="image-20240828103620621"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828103706879.png" alt="image-20240828103706879"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240828140147090.png" alt="image-20240828140147090"></p><br><h3 id="2、创建项目"><a href="#2、创建项目" class="headerlink" title="2、创建项目"></a><strong><font color='red'>2、创建项目</font></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建（二选一）</span></span><br><span class="line">pnpm create vite (vite官方)</span><br><span class="line">pnpm create vue@latest (vue官方)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 命名</span></span><br><span class="line">? Project name: » vite-project</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择框架</span></span><br><span class="line">    Vanilla</span><br><span class="line">&gt;   Vue</span><br><span class="line">    React</span><br><span class="line">    Preact</span><br><span class="line">    Lit</span><br><span class="line">    Svelte</span><br><span class="line">    Solid</span><br><span class="line">    Qwik</span><br><span class="line">    Others</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择自己需要的语言</span></span><br><span class="line">? Select a variant: »</span><br><span class="line">    TypeScript</span><br><span class="line">    JavaScript</span><br><span class="line">&gt;   Customize with create-vue (现成的模板——推荐)</span><br><span class="line">    Nuxt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选配</span></span><br><span class="line">√ 是否使用 TypeScript 语法？ » 是</span><br><span class="line">√ 是否启用 JSX 支持？  » 是</span><br><span class="line">√ 是否引入 Vue Router 进行单页面应用开发？ » 是</span><br><span class="line">√ 是否引入 Pinia 用于状态管理？ » 是</span><br><span class="line">√ 是否引入 Vitest 用于单元测试？  » 是</span><br><span class="line">√ 是否要引入一款端到端（End to End）测试工具？ » 不需要</span><br><span class="line">√ 是否引入 ESLint 用于代码质量检测？ » 否</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化依赖</span></span><br><span class="line">dependencies:</span><br><span class="line">+ pinia 2.3.1</span><br><span class="line">+ vue 3.5.13</span><br><span class="line">+ vue-router 4.5.0</span><br><span class="line"></span><br><span class="line">devDependencies:</span><br><span class="line">+ @tsconfig/node22 22.0.0</span><br><span class="line">+ @types/node 22.10.10</span><br><span class="line">+ @vitejs/plugin-vue 5.2.1</span><br><span class="line">+ @vitejs/plugin-vue-jsx 4.1.1</span><br><span class="line">+ @vue/tsconfig 0.7.0</span><br><span class="line">+ npm-run-all2 7.0.2</span><br><span class="line">+ typescript 5.7.3</span><br><span class="line">+ vite 6.0.11</span><br><span class="line">+ vite-plugin-vue-devtools 7.7.1</span><br><span class="line">+ vue-tsc 2.2.0</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202504020017399.png" alt="image-20250402001720296"></p><p>如果pnpm版本是 v10.1.0 及以上，安装依赖包的时候pnpm i会有这个警告提示。因为pnpm 从 v10.1.0 开始引入安全机制，默认禁止依赖包运行构建脚本（如 <code>postinstall</code>），需要手动批准。若未明确允许 <code>esbuild</code> 的脚本执行，则会出现此警告。</p><p><strong>解决：修改配置文件（适合长期配置）</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pnpm&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;onlyBuiltDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;esbuild&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="3、强制使用pnpm"><a href="#3、强制使用pnpm" class="headerlink" title="3、强制使用pnpm"></a><strong><font color='red'>3、强制使用pnpm</font></strong></h3><p><code>engines</code> 字段用于指定支持的 Node.js 版本以及其他依赖包的版本范围。它既不具有提示作用也不具有限制作用，它仅仅是一个标准，告诉使用者该软件包支持哪些版本的环境。</p><p><code>&quot;preinstall&quot;: &quot;npx only-allow pnpm&quot;</code>则具有强制作用，必须使用pnpm。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/ package.json</span><br><span class="line"><span class="attr">&quot;engines&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&gt;=20.15.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pnpm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&gt;=9.0.6&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;preinstall&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npx only-allow pnpm&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124112043588.png" alt="image-20250124112043588"></p><br><h3 id="4、-vscode-配置文件"><a href="#4、-vscode-配置文件" class="headerlink" title="4、.vscode 配置文件"></a><strong><font color='red'>4、.vscode 配置文件</font></strong></h3><blockquote><p>用于保存带代码格式化功能</p></blockquote><p><strong>.vscode&#x2F;setting.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 这行配置开启了文件嵌套功能，使其在文件资源管理器中生效。</span></span><br><span class="line">    <span class="attr">&quot;explorer.fileNesting.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 这是一个对象，其中定义了多个文件嵌套的模式。每个键值对定义了一个主文件和与之相关联的文件模式</span></span><br><span class="line">    <span class="attr">&quot;explorer.fileNesting.patterns&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;tsconfig.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsconfig.*.json, env.d.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;vite.config.*&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jsconfig*, vitest.config.*, cypress.config.*, playwright.config.*&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;package.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;package-lock.json, pnpm*, .yarnrc*, yarn*, .eslint*, eslint*, .prettier*, prettier*, .editorconfig, commitlint.config.*, lint-staged.config.*, stylelint.config.*, uno.config.*,.gitignore,.stylelintignore&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;typescript.tsdk&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./node_modules/typescript/lib&quot;</span><span class="punctuation">,</span> <span class="comment">// 配置 TypeScript 语言服务的 SDK 路径，指向本地的 TypeScript 库。</span></span><br><span class="line">    <span class="attr">&quot;npm.packageManager&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pnpm&quot;</span><span class="punctuation">,</span> <span class="comment">// 配置使用的包管理器为 pnpm。 设置主要影响 VS Code 内置的一些自动化任务和脚本运行，但并不会影响你在终端中手动输入的命令。</span></span><br><span class="line">    <span class="attr">&quot;editor.tabSize&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span> <span class="comment">// 设置编辑器中的制表符宽度为 4 个空格。</span></span><br><span class="line">    <span class="attr">&quot;editor.defaultFormatter&quot;</span><span class="punctuation">:</span> <span class="string">&quot;esbenp.prettier-vscode&quot;</span><span class="punctuation">,</span> <span class="comment">// 指定默认的代码格式化工具为 esbenp.prettier-vscode</span></span><br><span class="line">    <span class="comment">// 保存文件缓慢时，可以考虑开启以下 3 行配置。</span></span><br><span class="line">    <span class="attr">&quot;vue.server.maxOldSpaceSize&quot;</span><span class="punctuation">:</span> <span class="number">4096</span><span class="punctuation">,</span> <span class="comment">// 设置 Vue 服务器端渲染的最大内存限制为 4GB。</span></span><br><span class="line">    <span class="attr">&quot;vue.server.hybridMode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 Vue 服务器端渲染的混合模式。</span></span><br><span class="line">    <span class="attr">&quot;typescript.tsserver.maxTsServerMemory&quot;</span><span class="punctuation">:</span> <span class="number">4096</span><span class="punctuation">,</span> <span class="comment">// 设置 TypeScript 语言服务的最大内存限制为 4GB。</span></span><br><span class="line">    <span class="attr">&quot;files.eol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\n&quot;</span><span class="punctuation">,</span> <span class="comment">// 设置文件的行结束符为换行符（\n）。</span></span><br><span class="line">    <span class="attr">&quot;editor.guides.bracketPairs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用括号对高亮显示功能。</span></span><br><span class="line">    <span class="attr">&quot;editor.bracketPairColorization.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用括号对颜色突出显示功能。</span></span><br><span class="line">    <span class="attr">&quot;vue.inlayHints.missingProps&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 Vue 组件的属性提示功能。</span></span><br><span class="line">    <span class="attr">&quot;vue.autoInsert.dotValue&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 自动插入缺失的属性值。</span></span><br><span class="line">    <span class="attr">&quot;explorer.copyRelativePathSeparator&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/&quot;</span><span class="punctuation">,</span> <span class="comment">// 设置复制相对路径时使用的分隔符为正斜杠。</span></span><br><span class="line">    <span class="attr">&quot;search.exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置要排除的文件和目录，以减少不必要的搜索。</span></span><br><span class="line">        <span class="attr">&quot;**/node_modules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/*.log&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/*.log*&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/bower_components&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/dist&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/elehukouben&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.git&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.gitignore&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.svn&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.DS_Store&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.idea&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.vscode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/pnpm i.lock&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/tmp&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;out&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;dist&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;node_modules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;CHANGELOG.md&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;examples&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;res&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;screenshots&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;pnpm i-error.log&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.pnpm i&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;files.exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置要排除的文件和目录，以减少不必要的文件搜索和处理。</span></span><br><span class="line">        <span class="attr">&quot;**/.cache&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.editorconfig&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.eslintcache&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/bower_components&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.idea&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/tmp&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.git&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.svn&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.hg&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/CVS&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.DS_Store&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;files.watcherExclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置文件监视器中要排除的文件和目录，以减少不必要的文件监视。</span></span><br><span class="line">        <span class="attr">&quot;**/.git/objects/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.git/subtree-cache/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/.vscode/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/node_modules/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/tmp/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/bower_components/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/dist/**&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;**/pnpm i.lock&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eslint.useFlatConfig&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 ESLint 的扁平化配置。</span></span><br><span class="line">    <span class="attr">&quot;stylelint.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 启用 stylelint 验证。</span></span><br><span class="line">    <span class="attr">&quot;stylelint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// 配置要验证的文件类型，包括 CSS、LESS、SCSS、Vue、Sass。</span></span><br><span class="line">        <span class="string">&quot;css&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;less&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;postcss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;scss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;sass&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;path-intellisense.mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 配置路径别名，用于提高代码可读性和开发效率。</span></span><br><span class="line">        <span class="attr">&quot;@/&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceRoot&#125;/src&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.localesPaths&quot;: [&quot;src/locales/lang&quot;], // 配置 i18n-ally 插件的语言文件路径。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.keystyle&quot;: &quot;nested&quot;, // 配置 i18n-ally 插件的键风格为嵌套。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.sortKeys&quot;: true, // 配置 i18n-ally 插件的键排序。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.namespace&quot;: true, // 配置 i18n-ally 插件的命名空间。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.pathMatcher&quot;: &quot;&#123;locale&#125;/&#123;namespaces&#125;.&#123;ext&#125;&quot;, // 配置 i18n-ally 插件的路径匹配器。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.enabledParsers&quot;: [&quot;json&quot;], // 配置 i18n-ally 插件的启用解析器。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.sourceLanguage&quot;: &quot;en&quot;, // 配置 i18n-ally 插件的源语言。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.displayLanguage&quot;: &quot;zh-CN&quot;, // 配置 i18n-ally 插件的显示语言。</span></span><br><span class="line">    <span class="comment">// &quot;i18n-ally.enabledFrameworks&quot;: [&quot;vue&quot;, &quot;react&quot;], // 配置 i18n-ally 插件的启用框架。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 禁用默认格式化程序，改用eslint</span></span><br><span class="line">    <span class="attr">&quot;prettier.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;editor.formatOnSave&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 自动修复</span></span><br><span class="line">    <span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 保存时格式化</span></span><br><span class="line">        <span class="comment">// 保存时启用eslint格式化</span></span><br><span class="line">        <span class="attr">&quot;source.fixAll.eslint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;explicit&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="comment">// &quot;never&quot;表示在保存文件时，不会自动整理或排序import语句。性能消耗大，因此关闭。</span></span><br><span class="line">        <span class="attr">&quot;source.organizeImports&quot;</span><span class="punctuation">:</span> <span class="string">&quot;never&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="comment">// 保存时启用stylelint格式化less或是sass</span></span><br><span class="line">        <span class="attr">&quot;source.fixAll.stylelint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;explicit&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自定义 ESLint 规则的行为，关闭某些风格规则的警告，但仍然允许自动修复。</span></span><br><span class="line">     <span class="attr">&quot;eslint.rules.customizations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;style/*&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;format/*&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-indent&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-spacing&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-spaces&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-order&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-dangle&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*-newline&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*quotes&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;rule&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*semi&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;severity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;fixable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 禁用 CSS、LESS 和 SCSS 的内置验证。</span></span><br><span class="line">    <span class="attr">&quot;css.validate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;less.validate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;scss.validate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// 启用 ESLint 支持的所有语言类型</span></span><br><span class="line">    <span class="attr">&quot;eslint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;javascript&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;javascriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;typescript&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;typescriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;vue&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;html&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;markdown&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;json&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;jsonc&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;yaml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;toml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;xml&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;gql&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;graphql&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;astro&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;css&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;less&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;scss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pcss&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;postcss&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>这两行的作用就是文件嵌套作用</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;explorer.fileNesting.enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;explorer.fileNesting.patterns&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;tsconfig.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsconfig.*.json, env.d.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vite.config.*&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jsconfig*, vitest.config.*, cypress.config.*, playwright.config.*&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;package.json&quot;</span><span class="punctuation">:</span> <span class="string">&quot;package-lock.json, pnpm*, .yarnrc*, yarn*, .eslint*, eslint*, .prettier*, prettier*, .editorconfig&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124144015367.png" alt="image-20250124144015367"></p><br><h3 id="5、styleLint-【采用】"><a href="#5、styleLint-【采用】" class="headerlink" title="5、styleLint 【采用】"></a><strong><font color='red'>5、styleLint 【采用】</font></strong></h3><blockquote><p>less和sass 推荐只选一个</p></blockquote><p><strong><font color='#10c300'>5.1、依赖包 </font></strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">devDependencies<span class="punctuation">:</span></span><br><span class="line">+ less <span class="number">4.2</span><span class="number">.2</span></span><br><span class="line">+ postcss-less <span class="number">6.0</span><span class="number">.0</span></span><br><span class="line">+ sass <span class="number">1.83</span><span class="number">.4</span></span><br><span class="line">+ postcss-scss <span class="number">4.0</span><span class="number">.9</span></span><br><span class="line">+ postcss <span class="number">8.5</span><span class="number">.1</span></span><br><span class="line">+ postcss-html <span class="number">1.8</span><span class="number">.0</span></span><br><span class="line">+ stylelint <span class="number">16.13</span><span class="number">.2</span></span><br><span class="line">+ stylelint-config-recess-order <span class="number">6.0</span><span class="number">.0</span></span><br><span class="line">+ stylelint-config-standard <span class="number">37.0</span><span class="number">.0</span></span><br></pre></td></tr></table></figure><p><strong><font color='#10c300'>5.2、安装 </font></strong></p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 选择sass</span><br><span class="line">pnpm i sass postcss postcss-scss postcss-html stylelint stylelint-config-standard-scss stylelint-config-recess-order -D</span><br><span class="line"></span><br><span class="line"># 选择lees</span><br><span class="line">pnpm i less postcss postcss-less postcss-html stylelint stylelint-config-standard-less stylelint-config-recess-order -D</span><br></pre></td></tr></table></figure><table><thead><tr><th>依赖</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td>stylelint</td><td>stylelint核心库</td><td>stylelint</td></tr><tr><td>stylelint-config-standard</td><td>Stylelint 的标准配置，适用于普通的 CSS 文件</td><td>帮助开发者编写一致、规范的 CSS 代码。</td></tr><tr><td>stylelint-config-standard-scss</td><td>专门为 SCSS（Sass）文件设计的标准配置</td><td>在此stylelint-config-standard基础上扩展了对 SCSS 语法的支持</td></tr><tr><td>stylelint-config-standard-less</td><td>专门为 less文件设计的标准配置</td><td>在此stylelint-config-standard基础上扩展了对 less语法的支持</td></tr><tr><td>stylelint-config-recess-order</td><td>提供优化样式顺序配置</td><td>css样式书写顺序规范</td></tr><tr><td>postcss</td><td>处理 CSS 的工具</td><td>自动添加浏览器前缀、CSS 进行压缩、去除未使用的 CSS、合并相同的选择器等优化操作等等</td></tr><tr><td>postcss-scss</td><td>postcss的scss解析器</td><td>postcss-scss文档，支持css行类注释</td></tr><tr><td>postcss-html</td><td>解析html(类似html)的postcss语法</td><td>postcss-html文档</td></tr></tbody></table><p><strong>如果项目使用的是scss就使用stylelint-config-standard-scss，如果scss和less都没使用则安装stylelint-config-standard</strong></p><p><strong><font color='#10c300'>5.3、配置文件 </font></strong></p><p><strong>stylelint.config.mjs</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;stylelint&#x27;).Config</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// stylelint-config-standard 基础配置</span></span><br><span class="line">    <span class="comment">// stylelint-config-recess-order 样式顺序</span></span><br><span class="line">    <span class="attr">extends</span>: [<span class="string">&#x27;stylelint-config-standard-scss&#x27;</span>, <span class="string">&#x27;stylelint-config-recess-order&#x27;</span>],</span><br><span class="line">    <span class="comment">// 不同文件类型用不同解析器</span></span><br><span class="line">    <span class="attr">overrides</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">files</span>: [<span class="string">&#x27;**/*.(css|html|vue)&#x27;</span>],</span><br><span class="line">            <span class="attr">customSyntax</span>: <span class="string">&#x27;postcss-html&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 选less可以注释scss</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     files: [&#x27;*.less&#x27;, &#x27;**/*.less&#x27;],</span></span><br><span class="line">        <span class="comment">//     customSyntax: &#x27;postcss-less&#x27;,</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">// 选sass可以注释上面的less</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">files</span>: [<span class="string">&#x27;*.scss&#x27;</span>, <span class="string">&#x27;**/*.scss&#x27;</span>],</span><br><span class="line">            <span class="attr">customSyntax</span>: <span class="string">&#x27;postcss-scss&#x27;</span>,</span><br><span class="line">            <span class="attr">rules</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;scss/percent-placeholder-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">                <span class="string">&#x27;scss/at-mixin-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="comment">// &#x27;prettier/prettier&#x27;: true,</span></span><br><span class="line">        <span class="string">&#x27;media-feature-range-notation&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;scss/at-mixin-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;selector-not-notation&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;import-notation&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;function-no-unknown&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;selector-class-pattern&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;selector-pseudo-class-no-unknown&#x27;</span>: [</span><br><span class="line">            <span class="literal">true</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignorePseudoClasses</span>: [<span class="string">&#x27;global&#x27;</span>, <span class="string">&#x27;deep&#x27;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;selector-pseudo-element-no-unknown&#x27;</span>: [</span><br><span class="line">            <span class="literal">true</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignorePseudoElements</span>: [<span class="string">&#x27;v-deep&#x27;</span>, <span class="string">&#x27;:deep&#x27;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;at-rule-no-unknown&#x27;</span>: [</span><br><span class="line">            <span class="literal">true</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignoreAtRules</span>: [</span><br><span class="line">                    <span class="string">&#x27;tailwind&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;apply&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;variants&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;responsive&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;screen&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;function&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;if&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;each&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;include&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;mixin&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;extend&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;use&#x27;</span>,</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;no-empty-source&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;named-grid-areas-no-invalid&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;no-descending-specificity&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;font-family-no-missing-generic-family-keyword&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="string">&#x27;rule-empty-line-before&#x27;</span>: [</span><br><span class="line">            <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">ignore</span>: [<span class="string">&#x27;after-comment&#x27;</span>, <span class="string">&#x27;first-nested&#x27;</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;unit-no-unknown&#x27;</span>: [<span class="literal">true</span>, &#123; <span class="attr">ignoreUnits</span>: [<span class="string">&#x27;rpx&#x27;</span>] &#125;],</span><br><span class="line">        <span class="string">&#x27;order/order&#x27;</span>: [</span><br><span class="line">            [</span><br><span class="line">                <span class="string">&#x27;dollar-variables&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;custom-properties&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;at-rules&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;declarations&#x27;</span>,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;at-rule&#x27;</span>,</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;supports&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;at-rule&#x27;</span>,</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;media&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&#x27;rules&#x27;</span>,</span><br><span class="line">            ],</span><br><span class="line">            &#123; <span class="attr">severity</span>: <span class="string">&#x27;error&#x27;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">ignoreFiles</span>: [<span class="string">&#x27;**/*.js&#x27;</span>, <span class="string">&#x27;**/*.jsx&#x27;</span>, <span class="string">&#x27;**/*.tsx&#x27;</span>, <span class="string">&#x27;**/*.ts&#x27;</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><font color='#10c300'>5.4、新增脚本 </font></strong></p><p><strong>package.json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 修复报错</span></span><br><span class="line">    <span class="attr">&quot;lint:stylelint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;stylelint  \&quot;**/*.&#123;css,scss,less,vue,html&#125;\&quot; --fix&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong><font color='#10c300'>5.4、添加忽略文件 </font></strong></p><p><strong>.stylelintignore</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dist<span class="comment">/*</span></span><br><span class="line"><span class="comment">/public/*</span></span><br></pre></td></tr></table></figure><br><h3 id="6、antfu-组合prettier-eslint-【采用】"><a href="#6、antfu-组合prettier-eslint-【采用】" class="headerlink" title="6、antfu 组合prettier&amp;eslint 【采用】"></a><strong><font color='red'>6、antfu 组合prettier&amp;eslint 【采用】</font></strong></h3><blockquote><p>配置网站 <a href="https://github.com/antfu/eslint-config/tree/feat/support-eslint-9?tab=readme-ov-file">https://github.com/antfu/eslint-config/tree/feat/support-eslint-9?tab=readme-ov-file</a></p><p>先选一个unocss 免得后续再去安装unocss的@unocss&#x2F;eslint-plugin</p></blockquote><p><strong><font color='#10c300'>6.1、命令行界面 (CLI) 安装 </font></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/ 空格选择 回车下一步</span><br><span class="line">npx @antfu/eslint-config@latest</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124161525291.png" alt="image-20250124161525291"></p><p>最后一步选NO，配置setting.json中的内容，因为之前一次性配置了，因为这里选no。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">devDependencies<span class="punctuation">:</span></span><br><span class="line">+ @antfu/eslint-config <span class="number">3.16</span><span class="number">.0</span></span><br><span class="line">+ @unocss/eslint-plugin <span class="number">65.4</span><span class="number">.3</span></span><br><span class="line">+ eslint <span class="number">9.18</span><span class="number">.0</span></span><br><span class="line">+ eslint-plugin-format <span class="number">1.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><p>默认会添加这些依赖到包管理文件package.json（未安装），因此需要重新安装下依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i</span><br></pre></td></tr></table></figure><br><p><strong><font color='#10c300'>6.2、配置文件 </font></strong></p><blockquote><p>修改生成配置文件<code>eslint.config.js</code>为<code>eslint.config.mjs</code> 用于eslint规则校验</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">import antfu from &#x27;@antfu/eslint-config&#x27;</span><br><span class="line"></span><br><span class="line">export default antfu(</span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        stylistic<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            indent<span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span> <span class="comment">// 缩进</span></span><br><span class="line">            quotes<span class="punctuation">:</span> &#x27;single&#x27;<span class="punctuation">,</span> <span class="comment">// 单引号</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        formatters<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">//</span></span><br><span class="line">        typescript<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 支持ts</span></span><br><span class="line">        unocss<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 支持unocss</span></span><br><span class="line">        isInEditor<span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// 保存删除未引入的代码</span></span><br><span class="line">        vue<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            overrides<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="comment">// vue文件顺序</span></span><br><span class="line">                &#x27;vue/block-order&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;error&#x27;<span class="punctuation">,</span> <span class="punctuation">&#123;</span> order<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">[</span>&#x27;template&#x27;<span class="punctuation">,</span> &#x27;script&#x27;<span class="punctuation">]</span><span class="punctuation">,</span> &#x27;style&#x27;<span class="punctuation">]</span> <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span> </span><br><span class="line">                &#x27;vue/singleline-html-element-content-newline&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭单行元素内容换行</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        rules<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            &#x27;no-console&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭console检查</span></span><br><span class="line">            &#x27;no-debugger&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭debugger检查</span></span><br><span class="line">            &#x27;antfu/top-level-function&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 顶级函数检测(开启时会将箭头函数转换为普通函数)</span></span><br><span class="line">            &#x27;antfu/if-newline&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 禁止换行 例如 if (a) return a使这种return a不会换行</span></span><br><span class="line">            &#x27;style/brace-style&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭大括号风格检查(只要有大括号就会换行的情况)</span></span><br><span class="line">            &#x27;no-alert&#x27;<span class="punctuation">:</span> &#x27;off&#x27;<span class="punctuation">,</span> <span class="comment">// 关闭alert检查</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// 9x版本 忽略文件这种配置方式 废弃掉eslintignore</span></span><br><span class="line">        ignores<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            &#x27;*.md&#x27;<span class="punctuation">,</span></span><br><span class="line">            &#x27;**<span class="comment">/*.md&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.sh&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;.husky&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;.local&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;node_modules&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.md&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.woff&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;*.ttf&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;.idea&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;docs/**&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;public/**&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;/bin/**&#x27;,</span></span><br><span class="line"><span class="comment">            &#x27;Dockerfile&#x27;,</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">)</span></span><br><span class="line"><span class="comment"></span></span><br></pre></td></tr></table></figure><br><p><strong><font color='#10c300'>6.3、新增脚本 </font></strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint .&quot;</span><span class="punctuation">,</span> <span class="comment">// 检测</span></span><br><span class="line">    <span class="attr">&quot;lint:fix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint . --fix&quot;</span> <span class="comment">// 修复</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="7、-gitignore文件"><a href="#7、-gitignore文件" class="headerlink" title="7、.gitignore文件"></a><strong><font color='red'>7、.gitignore文件</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"># <span class="title class_">Logs</span></span><br><span class="line">logs</span><br><span class="line">*.<span class="property">log</span></span><br><span class="line">npm-debug.<span class="property">log</span>*</span><br><span class="line">yarn-debug.<span class="property">log</span>*</span><br><span class="line">yarn-error.<span class="property">log</span>*</span><br><span class="line">lerna-debug.<span class="property">log</span>*</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Diagnostic</span> <span class="title function_">reports</span> (<span class="attr">https</span>:<span class="comment">//nodejs.org/api/report.html)</span></span><br><span class="line">report.[<span class="number">0</span>-<span class="number">9</span>]*.[<span class="number">0</span>-<span class="number">9</span>]*.[<span class="number">0</span>-<span class="number">9</span>]*.[<span class="number">0</span>-<span class="number">9</span>]*.<span class="property">json</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Runtime</span> data</span><br><span class="line">pids</span><br><span class="line">*.<span class="property">pid</span></span><br><span class="line">*.<span class="property">seed</span></span><br><span class="line">*.<span class="property">pid</span>.<span class="property">lock</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Directory</span> <span class="keyword">for</span> instrumented libs generated by jscoverage/<span class="title class_">JSCover</span></span><br><span class="line">lib-cov</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Coverage</span> directory used by tools like istanbul</span><br><span class="line">coverage</span><br><span class="line">*.<span class="property">lcov</span></span><br><span class="line"></span><br><span class="line"># nyc test coverage</span><br><span class="line">.<span class="property">nyc_output</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Grunt</span> intermediate <span class="title function_">storage</span> (<span class="attr">https</span>:<span class="comment">//gruntjs.com/creating-plugins#storing-task-files)</span></span><br><span class="line">.<span class="property">grunt</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Bower</span> dependency <span class="title function_">directory</span> (<span class="attr">https</span>:<span class="comment">//bower.io/)</span></span><br><span class="line">bower_components</span><br><span class="line"></span><br><span class="line"># node-waf configuration</span><br><span class="line">.<span class="property">lock</span>-wscript</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Compiled</span> binary <span class="title function_">addons</span> (<span class="attr">https</span>:<span class="comment">//nodejs.org/api/addons.html)</span></span><br><span class="line">build/<span class="title class_">Release</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Dependency</span> directories</span><br><span class="line">node_modules/</span><br><span class="line">jspm_packages/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Snowpack</span> dependency <span class="title function_">directory</span> (<span class="attr">https</span>:<span class="comment">//snowpack.dev/)</span></span><br><span class="line">web_modules/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">TypeScript</span> cache</span><br><span class="line">*.<span class="property">tsbuildinfo</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Optional</span> npm cache directory</span><br><span class="line">.<span class="property">npm</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Optional</span> eslint cache</span><br><span class="line">.<span class="property">eslintcache</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Microbundle</span> cache</span><br><span class="line">.<span class="property">rpt2_cache</span>/</span><br><span class="line">.<span class="property">rts2_cache_cjs</span>/</span><br><span class="line">.<span class="property">rts2_cache_es</span>/</span><br><span class="line">.<span class="property">rts2_cache_umd</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Optional</span> <span class="variable constant_">REPL</span> history</span><br><span class="line">.<span class="property">node_repl_history</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Output</span> <span class="keyword">of</span> <span class="string">&#x27;npm pack&#x27;</span></span><br><span class="line">*.<span class="property">tgz</span></span><br><span class="line"></span><br><span class="line"># <span class="title class_">Yarn</span> <span class="title class_">Integrity</span> file</span><br><span class="line">.<span class="property">yarn</span>-integrity</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># parcel-bundler <span class="title function_">cache</span> (<span class="attr">https</span>:<span class="comment">//parceljs.org/)</span></span><br><span class="line">.<span class="property">cache</span></span><br><span class="line">.<span class="property">parcel</span>-cache</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Next</span>.<span class="property">js</span> build output</span><br><span class="line">.<span class="property">next</span></span><br><span class="line">out</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Nuxt</span>.<span class="property">js</span> build / generate output</span><br><span class="line">.<span class="property">nuxt</span></span><br><span class="line">dist</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Gatsby</span> files</span><br><span class="line">.<span class="property">cache</span>/</span><br><span class="line"># <span class="title class_">Comment</span> <span class="keyword">in</span> the public line <span class="keyword">in</span> <span class="keyword">if</span> your project uses <span class="title class_">Gatsby</span> and not <span class="title class_">Next</span>.<span class="property">js</span></span><br><span class="line"># <span class="attr">https</span>:<span class="comment">//nextjs.org/blog/next-9-1#public-directory-support</span></span><br><span class="line"># public</span><br><span class="line"></span><br><span class="line"># vuepress build output</span><br><span class="line">.<span class="property">vuepress</span>/dist</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Serverless</span> directories</span><br><span class="line">.<span class="property">serverless</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">FuseBox</span> cache</span><br><span class="line">.<span class="property">fusebox</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">DynamoDB</span> <span class="title class_">Local</span> files</span><br><span class="line">.<span class="property">dynamodb</span>/</span><br><span class="line"></span><br><span class="line"># <span class="title class_">TernJS</span> port file</span><br><span class="line">.<span class="property">tern</span>-port</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Stores</span> <span class="title class_">VSCode</span> versions used <span class="keyword">for</span> testing <span class="title class_">VSCode</span> extensions</span><br><span class="line">.<span class="property">vscode</span>-test</span><br><span class="line"></span><br><span class="line"># yarn v2</span><br><span class="line">.<span class="property">yarn</span>/cache</span><br><span class="line">.<span class="property">yarn</span>/unplugged</span><br><span class="line">.<span class="property">yarn</span>/build-state.<span class="property">yml</span></span><br><span class="line">.<span class="property">yarn</span>/install-state.<span class="property">gz</span></span><br><span class="line">.<span class="property">pnp</span>.*</span><br><span class="line"></span><br><span class="line">stats.<span class="property">html</span></span><br><span class="line"></span><br><span class="line">.<span class="property">stylelintcache</span></span><br></pre></td></tr></table></figure><br><h3 id="8、代码提交检查"><a href="#8、代码提交检查" class="headerlink" title="8、代码提交检查"></a><strong><font color='red'>8、代码提交检查</font></strong></h3><p>Husky + Lint-staged + Commitlint 来配置 Git 提交代码规范。</p><blockquote><p>核心内容是配置 <strong>Husky</strong> 的<code>pre-commit</code>和 <code>commit-msg</code> 两个钩子:</p><p>**<code>pre-commit</code>：**Husky + Lint-staged 整合实现 Git 提交前代码规范检测&#x2F;格式化 (前提：ESlint + Prettier + Stylelint 代码统一规范)；</p><p><strong><code>commit-msg</code>：</strong> Husky + Commitlint 整合实现生成规范化且高度自定义的 Git commit message。</p></blockquote><h4 id="8-1、husky-Git-钩子工具"><a href="#8-1、husky-Git-钩子工具" class="headerlink" title="8.1、husky Git 钩子工具 "></a><strong><font color='#10c300'>8.1、husky Git 钩子工具 </font></strong></h4><p>Husky 是 Git 钩子工具，可以设置在 git 各个阶段（<code>pre-commit</code>、<code>commit-msg</code> 等）触发。</p><p>官网<a href="https://typicode.github.io/husky">https://typicode.github.io/husky</a> 推荐安装指令</p><br><p><font color='orange'>命令行界面 (CLI) 安装</font></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky-init</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124173230055.png" alt="image-20250124173230055"></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240207141214268.png" alt="image-20240207141214268"></p><p>默认会添加这个依赖到包管理文件package.json（未安装），因此需要重新安装下依赖</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/ pnpm i</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20250124173359482.png" alt="image-20250124173359482"></p><br><h4 id="8-2、Lint-staged-检测提交代码"><a href="#8-2、Lint-staged-检测提交代码" class="headerlink" title="8.2、Lint-staged 检测提交代码 "></a><strong><font color='#10c300'>8.2、Lint-staged 检测提交代码 </font></strong></h4><blockquote><p>lint-staged 是一个在 git add 到暂存区的文件运行 linters (ESLint&#x2F;Prettier&#x2F;StyleLint) 的工具进行检测，避免在 git commit 提交时在整个项目执行。</p></blockquote><h5 id="1）安装"><a href="#1）安装" class="headerlink" title="1）安装 "></a><strong><font color='cornflowerblue'>1）安装 </font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i lint-staged -D</span><br></pre></td></tr></table></figure><h5 id="2）配置文件"><a href="#2）配置文件" class="headerlink" title="2）配置文件 "></a><strong><font color='cornflowerblue'>2）配置文件 </font></strong></h5><p><strong>a、新建 lint-staged.config.mjs 配置文件</strong></p><p>cache缓存能使钩子检测速度更快</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;lint-staged&#x27;).Config</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="string">&#x27;*.&#123;js,ts,tsx,vue&#125;&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;eslint --fix --cache --cache-location .eslintcache&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;*.&#123;scss,html&#125;&#x27;</span>: [</span><br><span class="line">        <span class="string">&#x27;stylelint --fix --cache --cache-location .stylelintcache --allow-empty-input&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;*.css&#x27;</span>: [<span class="string">&#x27;prettier --write&#x27;</span>],</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>b、package.json 中添加指令</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">    <span class="attr">&quot;lint:lint-staged&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p><strong>c、文件<code>.husky/pre-commit</code>修改提交前钩子命令</strong></p><p>提交的时候执行pre-commit文件中命令，然后触发package.json 中的lint:lint-staged，从而执行lint-staged.config.mjs配置文件去做检测。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!<span class="regexp">/usr/</span>bin/env sh</span><br><span class="line">. <span class="string">&quot;$(dirname -- &quot;</span>$0<span class="string">&quot;)/_/husky.sh&quot;</span></span><br><span class="line"></span><br><span class="line"># 添加该命令</span><br><span class="line">npm run <span class="attr">lint</span>:lint-staged --allow-empty</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240207143016869.png" alt="image-20240207143016869"></p><br><h4 id="8-3、Commitlint-检测提交命名"><a href="#8-3、Commitlint-检测提交命名" class="headerlink" title="8.3、Commitlint 检测提交命名 "></a><strong><font color='#10c300'>8.3、Commitlint 检测提交命名 </font></strong></h4><blockquote><p>Commitlint 检查您的提交消息是否符合 Conventional comm it format 规范。– <a href="https://commitlint.js.org/">Commitlint 官网</a></p></blockquote><h5 id="1）安装-1"><a href="#1）安装-1" class="headerlink" title="1）安装 "></a><strong><font color='cornflowerblue'>1）安装 </font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i @commitlint/cli @commitlint/config-conventional -D</span><br></pre></td></tr></table></figure><br><h5 id="2）语法规范"><a href="#2）语法规范" class="headerlink" title="2）语法规范 "></a><strong><font color='cornflowerblue'>2）语法规范 </font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 语法规范</span><br><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;footer&gt;</span><br><span class="line">       </span><br><span class="line">// 示例</span><br><span class="line">feat(用户模块): 新增用户登录功能</span><br><span class="line"></span><br><span class="line">此提交引入了一个新的用户登录功能，允许用户通过邮箱和密码进行身份验证。</span><br><span class="line">同时，还包含了输入字段的验证和错误处理。</span><br><span class="line"></span><br><span class="line">Closes #123</span><br></pre></td></tr></table></figure><br><h5 id="3）语法拆解说明"><a href="#3）语法拆解说明" class="headerlink" title="3）语法拆解说明"></a><strong><font color='cornflowerblue'>3）语法拆解说明</font></strong></h5><ol><li>头部（Header）<ul><li><strong><code>&lt;type&gt;</code></strong>: 提交的类型，常见的类型包括：<ul><li><code>feat</code>: 新增功能</li><li><code>fix</code>: 修复缺陷</li><li><code>docs</code>: 文档变更</li><li><code>style</code>: 代码格式（不影响功能）</li><li><code>refactor</code>: 代码重构</li><li><code>perf</code>: 性能优化</li><li><code>test</code>: 添加测试或改动已有测试</li><li><code>build</code>: 构建过程或外部依赖的变更</li><li><code>ci</code>: 修改 CI 配置</li><li><code>chore</code>: 其他杂项更改</li><li><code>revert</code>: 回滚提交</li></ul></li><li><strong><code>&lt;scope&gt;</code></strong>: 可选，表示提交影响的范围（如模块名、文件名等），例如 <code>ui</code> 或 <code>api</code>。可以用括号括起来。</li><li><strong><code>&lt;subject&gt;</code></strong>: 提交的简要描述，建议不超过 50 个字符，使用祈使句（例如：<code>add login feature</code>）。</li></ul></li><li><strong>正文（Body）</strong><ul><li>可选，用于详细描述提交的内容和背景。可以包含多行，建议每行不超过 72 个字符。</li><li>说明为什么要做这些更改，以及如何解决了问题或实现了功能。</li></ul></li><li><strong>尾部（Footer）</strong><ul><li>可选，通常用于引用相关的任务、问题编号或其他重要的元信息。</li><li>例如：<code>Closes #123</code> 或 <code>Fixes #456</code>，表示这个提交关闭或修复了特定的问题。</li></ul></li></ol><br><h5 id="4）注意"><a href="#4）注意" class="headerlink" title="4）注意 "></a><strong><font color='cornflowerblue'>4）注意 </font></strong></h5><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202502252255451.png" alt="image-20250225005214324"></p><br><h5 id="5）配置文件"><a href="#5）配置文件" class="headerlink" title="5）配置文件 "></a><strong><font color='cornflowerblue'>5）配置文件 </font></strong></h5><p>根目录创建 <code>commitlint.config.mjs</code> 配置文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">import(&quot;@commitlint/types&quot;).UserConfig</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">ignores</span>: [<span class="function">(<span class="params">commit</span>) =&gt;</span> commit.<span class="title function_">includes</span>(<span class="string">&quot;init&quot;</span>)],</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;@commitlint/config-conventional&quot;</span>],</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;body-leading-blank&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    <span class="string">&quot;footer-leading-blank&quot;</span>: [<span class="number">1</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">    <span class="string">&quot;header-max-length&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;always&quot;</span>, <span class="number">108</span>],</span><br><span class="line">    <span class="string">&quot;subject-empty&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>],</span><br><span class="line">    <span class="string">&quot;type-empty&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>],</span><br><span class="line">    <span class="string">&quot;subject-case&quot;</span>: [<span class="number">0</span>],</span><br><span class="line">    <span class="string">&quot;type-enum&quot;</span>: [</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      <span class="string">&quot;always&quot;</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="string">&quot;feat&quot;</span>, <span class="comment">// 新增功能</span></span><br><span class="line">        <span class="string">&quot;fix&quot;</span>, <span class="comment">// 修复缺陷</span></span><br><span class="line">        <span class="string">&quot;docs&quot;</span>, <span class="comment">// 文档变更</span></span><br><span class="line">        <span class="string">&quot;style&quot;</span>, <span class="comment">// 代码格式（不影响功能，例如空格、分号等格式修正）</span></span><br><span class="line">        <span class="string">&quot;refactor&quot;</span>, <span class="comment">// 代码重构（不包括 bug 修复、功能新增）</span></span><br><span class="line">        <span class="string">&quot;perf&quot;</span>, <span class="comment">// 性能优化</span></span><br><span class="line">        <span class="string">&quot;test&quot;</span>, <span class="comment">// 添加疏漏测试或已有测试改动</span></span><br><span class="line">        <span class="string">&quot;build&quot;</span>, <span class="comment">// 构建流程、外部依赖变更（如升级 npm 包、修改 webpack 配置等）</span></span><br><span class="line">        <span class="string">&quot;ci&quot;</span>, <span class="comment">// 修改 CI 配置、脚本</span></span><br><span class="line">        <span class="string">&quot;revert&quot;</span>, <span class="comment">// 回滚 commit</span></span><br><span class="line">        <span class="string">&quot;chore&quot;</span>, <span class="comment">// 对构建过程或辅助工具和库的更改（不影响源文件、测试用例）</span></span><br><span class="line">        <span class="string">&#x27;wip&#x27;</span>, <span class="comment">// 开发中临时提交</span></span><br><span class="line">      ],</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>执行下面命令生成 <code>commint-msg</code> 钩子用于 git 提交信息校验</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .<span class="property">husky</span>/commit-msg <span class="string">&quot;npx --no -- commitlint --edit $1&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20240207142542813.png" alt="image-20240207142542813"></p><br><h3 id="9、其他"><a href="#9、其他" class="headerlink" title="9、其他"></a><strong><font color='red'>9、其他</font></strong></h3><blockquote><p><strong>不使用antfu 直接使用prettier&amp;eslint &amp;styleLint</strong></p></blockquote><h4 id="9-1、prettier"><a href="#9-1、prettier" class="headerlink" title="9.1、prettier"></a><strong><font color='#10c300'>9.1、prettier</font></strong></h4><h5 id="1）安装-2"><a href="#1）安装-2" class="headerlink" title="1）安装 "></a><strong><font color='cornflowerblue'>1）安装 </font></strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i prettier -D</span><br></pre></td></tr></table></figure><h5 id="2）配置文件-1"><a href="#2）配置文件-1" class="headerlink" title="2）配置文件 "></a><strong><font color='cornflowerblue'>2）配置文件 </font></strong></h5><p>根目录创建 <code>prettier.config.mjs</code> 配置文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;prettier&#x27;).Config</span>&#125; */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">$schema</span>: <span class="string">&quot;https://json.schemastore.org/prettierrc&quot;</span>,</span><br><span class="line">  <span class="attr">semi</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">tabWidth</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">singleQuote</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">printWidth</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="attr">trailingComma</span>: <span class="string">&quot;es5&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="9-2、eslint"><a href="#9-2、eslint" class="headerlink" title="9.2、eslint"></a><strong><font color='#10c300'>9.2、eslint</font></strong></h4><blockquote><p><strong>使用9x版本 扁平化设计 导致很多插件版本滞后</strong></p></blockquote><h5 id="1）安装-3"><a href="#1）安装-3" class="headerlink" title="1）安装 "></a><strong><font color='cornflowerblue'>1）安装 </font></strong></h5><p>脚手架快速安装 然后pnpm i安装相关依赖包（如果创建项目的时候安装了，则不需要安装）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm create @eslint/config@latest</span><br></pre></td></tr></table></figure><p>额外安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i eslint-define-config eslint-plugin-import -D</span><br></pre></td></tr></table></figure><h5 id="2）配置文件-2"><a href="#2）配置文件-2" class="headerlink" title="2）配置文件 "></a><strong><font color='cornflowerblue'>2）配置文件 </font></strong></h5><p>修改<code>eslint.config.js</code>为<code>eslint.config.mjs</code>保持风格统一</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> globals <span class="keyword">from</span> <span class="string">&quot;globals&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pluginJs <span class="keyword">from</span> <span class="string">&quot;@eslint/js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> tseslint <span class="keyword">from</span> <span class="string">&quot;typescript-eslint&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pluginVue <span class="keyword">from</span> <span class="string">&quot;eslint-plugin-vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> pluginImport <span class="keyword">from</span> <span class="string">&quot;eslint-plugin-import&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineFlatConfig &#125; <span class="keyword">from</span> <span class="string">&quot;eslint-define-config&quot;</span>;</span><br><span class="line"><span class="comment">// 修复 https://eslint.nodejs.cn/blog/2024/05/eslint-compatibility-utilities/</span></span><br><span class="line"><span class="keyword">import</span> &#123; fixupPluginRules &#125; <span class="keyword">from</span> <span class="string">&quot;@eslint/compat&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineFlatConfig</span>([</span><br><span class="line">  <span class="comment">// 上面这一大截是官方的</span></span><br><span class="line">  &#123; <span class="attr">files</span>: [<span class="string">&quot;**/*.&#123;js,mjs,cjs,ts,vue&#125;&quot;</span>] &#125;,</span><br><span class="line">  pluginJs.<span class="property">configs</span>.<span class="property">recommended</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123; <span class="attr">globals</span>: globals.<span class="property">browser</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  ...tseslint.<span class="property">configs</span>.<span class="property">recommended</span>,</span><br><span class="line">  ...pluginVue.<span class="property">configs</span>[<span class="string">&quot;flat/essential&quot;</span>],</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&quot;**/*.vue&quot;</span>],</span><br><span class="line">    <span class="attr">languageOptions</span>: &#123;</span><br><span class="line">      <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">parser</span>: tseslint.<span class="property">parser</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 这是引入顺序插件</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">files</span>: [<span class="string">&quot;**/*.vue&quot;</span>, <span class="string">&quot;**/*.?([cm])ts&quot;</span>, <span class="string">&quot;**/*.?([cm])tsx&quot;</span>],</span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">      <span class="comment">// 修复插件还没升级到9版本</span></span><br><span class="line">      <span class="attr">import</span>: <span class="title function_">fixupPluginRules</span>(pluginImport),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">      <span class="comment">// 插件还没升级到9x版本</span></span><br><span class="line">      <span class="string">&quot;import/first&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">      <span class="string">&quot;import/no-duplicates&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">      <span class="string">&quot;import/order&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;error&quot;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">groups</span>: [</span><br><span class="line">            <span class="comment">/* </span></span><br><span class="line"><span class="comment">              builtin ：内置模块，如 path，fs等 Node.js内置模块。</span></span><br><span class="line"><span class="comment">              external ：外部模块，如 lodash ，react 等第三方库。</span></span><br><span class="line"><span class="comment">              internal ：内部模块，如相对路径的模块、包名前缀为 @ 的模块。</span></span><br><span class="line"><span class="comment">              unknown ：未知模块，如模块名没有指定扩展名或模块路径缺失扩展名。</span></span><br><span class="line"><span class="comment">              parent ：父级目录的模块。</span></span><br><span class="line"><span class="comment">              sibling ：同级目录的模块。</span></span><br><span class="line"><span class="comment">              index ：当前目录的 index 文件。</span></span><br><span class="line"><span class="comment">              object ：使用ES6 导入的模块。</span></span><br><span class="line"><span class="comment">              type ：使用 import type 导入的模块。</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            [<span class="string">&quot;builtin&quot;</span>, <span class="string">&quot;external&quot;</span>],</span><br><span class="line">            <span class="string">&quot;internal&quot;</span>,</span><br><span class="line">            [<span class="string">&quot;parent&quot;</span>, <span class="string">&quot;sibling&quot;</span>],</span><br><span class="line">            <span class="string">&quot;index&quot;</span>,</span><br><span class="line">            <span class="string">&quot;type&quot;</span>,</span><br><span class="line">            <span class="string">&quot;object&quot;</span>,</span><br><span class="line">            <span class="string">&quot;unknown&quot;</span>,</span><br><span class="line">          ],</span><br><span class="line">          <span class="attr">pathGroups</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">pattern</span>: <span class="string">&quot;../**&quot;</span>,</span><br><span class="line">              <span class="attr">group</span>: <span class="string">&quot;parent&quot;</span>,</span><br><span class="line">              <span class="attr">position</span>: <span class="string">&quot;after&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">pattern</span>: <span class="string">&quot;./*.scss&quot;</span>,</span><br><span class="line">              <span class="attr">group</span>: <span class="string">&quot;sibling&quot;</span>,</span><br><span class="line">              <span class="attr">position</span>: <span class="string">&quot;after&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          ],</span><br><span class="line">          <span class="comment">// 不同组之间是否换行。</span></span><br><span class="line">          <span class="comment">// &#x27;newlines-between&#x27;: &#x27;always&#x27;,</span></span><br><span class="line">          <span class="comment">// 根据字母顺序对每组内的引用进行排序。</span></span><br><span class="line">          <span class="attr">alphabetize</span>: &#123;</span><br><span class="line">            <span class="attr">order</span>: <span class="string">&quot;asc&quot;</span>,</span><br><span class="line">            <span class="attr">caseInsensitive</span>: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><br><h3 id="10、简化组件命名"><a href="#10、简化组件命名" class="headerlink" title="10、简化组件命名"></a><strong><font color='red'>10、简化组件命名</font></strong></h3><p><strong>正常组件命名</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>:<span class="string">&#x27;Person&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 下面的写法是setup语法糖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>使用<code>vite-plugin-vue-setup-extend</code></strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-vue-setup-extend -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="title class_">VueSetupExtend</span>() ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>组件中使用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="11、打包环境区分"><a href="#11、打包环境区分" class="headerlink" title="11、打包环境区分"></a><strong><font color='red'>11、打包环境区分</font></strong></h3><p>vite.config.ts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>返回四个参数：</strong></p><ul><li><code>mode</code>：当前的运行模式（例如 <code>development</code> 或 <code>production</code>），没配置env文件默认就只有这两个值。</li><li><code>command</code>：当前运行的命令（例如 <code>serve</code> 或 <code>build</code>），本地运行返回serve，使用打包之后返回的build</li><li><code>isSsrBuild</code>：是否在进行服务器端渲染的构建。</li><li><code>isPreview</code>：是否在预览模式下运行。</li></ul><p><strong>实践可知：</strong></p><p>在运行本地项目时：</p><p> 有无<code>.env</code>文件时，<code>vite.config.ts</code>文件中res返回都是<code>mode=&quot;development&quot;</code>，<code>command=&quot;serve&quot;</code>；</p><p>在运行打包项目时：</p><p> 默认无<code>.env</code>文件时，<code>vite.config.ts</code>文件中res返回<code>mode=&quot;production&quot;</code>，<code>command=&quot;build&quot;</code>；</p><p> 有<code>.env</code>文件时，根据打包的配置来的 ，如果你打包运行的是<code>.env.sit</code>文件，res返回的则是<code>mode=&quot;sit&quot;</code>，<code>command=&quot;build&quot;</code>；</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;run-p type-check \&quot;build-only &#123;@&#125;\&quot; --&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build:sit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build -- sit&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build:uat&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build -- uat&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build:prod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build -- production&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;type-check&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc --build&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build-only&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite build --mode&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>vite.config.ts 中访问.env文件：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> process <span class="keyword">from</span> <span class="string">&#x27;node:process&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig, loadEnv &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> env = <span class="title function_">loadEnv</span>(mode, process.<span class="title function_">cwd</span>())</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(env)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .env</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;local&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .env.sit</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;sit&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .env.uat</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;sit&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .env.product</span></span><br><span class="line"><span class="variable constant_">VITE_NODE_ENV</span> = <span class="string">&#x27;production&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="12、添加基准路径"><a href="#12、添加基准路径" class="headerlink" title="12、添加基准路径"></a><strong><font color='red'>12、添加基准路径</font></strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="string">&#x27;/pc/&#x27;</span>),</span><br><span class="line">    <span class="attr">routes</span>: [],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">base</span>: env.<span class="property">VITE_BASE_URL</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="13、添加打包的dist文件预览配置"><a href="#13、添加打包的dist文件预览配置" class="headerlink" title="13、添加打包的dist文件预览配置"></a><strong><font color='red'>13、添加打包的dist文件预览配置</font></strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;preview&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite preview&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><br><h3 id="14、本地代理服务配置"><a href="#14、本地代理服务配置" class="headerlink" title="14、本地代理服务配置"></a><strong><font color='red'>14、本地代理服务配置</font></strong></h3><p>官网<a href="https://cn.vitejs.dev/config/server-options.html#server-proxy">https://cn.vitejs.dev/config/server-options.html#server-proxy</a></p><p><code>vite.config.ts</code>配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">server</span>: &#123;</span><br><span class="line">        <span class="comment">// 监听所有公共ip</span></span><br><span class="line">        <span class="attr">host</span>: <span class="string">&#x27;0.0.0.0&#x27;</span>,</span><br><span class="line">        <span class="attr">cors</span>: <span class="literal">true</span>, <span class="comment">// 允许所有来源访问本地开发服务器的资源</span></span><br><span class="line">        <span class="attr">port</span>: <span class="number">3300</span>,</span><br><span class="line">        <span class="attr">proxy</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;/api&#x27;</span>: &#123; <span class="comment">// 代理前缀</span></span><br><span class="line">                <span class="comment">// 转发地址 前端请求http://localhost:3000/api/users代理后实际请求          http://www.example.com/users </span></span><br><span class="line">                <span class="attr">target</span>: <span class="string">&#x27;http://www.example.com&#x27;</span>,</span><br><span class="line">                <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">// 修改 Origin 头为目标地址</span></span><br><span class="line">                <span class="comment">// 移除路径中开头的 /api 前缀 例如：/api/users → /users</span></span><br><span class="line">                <span class="attr">rewrite</span>: <span class="function">(<span class="params">path: string</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>),</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>参数解析</strong></p><p>cors和changeOrigin</p><p>在 <code>vite.config.ts</code> 中，<code>cors: true</code> 和 <code>changeOrigin: true</code> 用于解决不同场景下的跨域问题，具体区别如下：</p><p>1、<strong><code>cors: true</code></strong></p><ul><li><strong>作用</strong>：配置开发服务器（Vite Dev Server）的 CORS 响应头，允许浏览器跨域访问本地开发服务器的资源。</li><li><strong>实现方式</strong>：<br>当设置为 <code>true</code> 时，Vite 会默认添加 <code>Access-Control-Allow-Origin: *</code> 响应头，允许所有来源的请求。若需更精细控制（如指定允许的域名），可通过 <code>CorsOptions</code> 对象配置。</li><li><strong>适用场景</strong>：<br>用于本地开发环境，解决前端资源（如静态文件）被其他域名访问时的 CORS 限制。例如，主应用加载微前端子应用的资源时可能需要此配置。</li></ul><p>2、<strong><code>changeOrigin: true</code></strong></p><ul><li><strong>作用</strong>：在代理请求时修改请求头的 <code>Origin</code> 字段为目标服务器的地址，绕过目标服务器的 CORS 校验。</li><li><strong>实现方式</strong>：<br>代理将前端请求的 <code>Origin</code>（如 <code>[http://localhost:3000 ](http://localhost:3000 )</code>）改为目标服务器的域名（如 <code>[https://apiservice.com ](https://apiservice.com )</code>），使目标服务器认为请求来自同源，从而避免 CORS 拦截。</li><li><strong>适用场景</strong>：<br>用于代理接口请求，尤其是当前端与后端分离开发时。例如，将 <code>/api</code> 路径的请求代理到 <code>[http://localhost:8080 ]</code>，并通过 <code>changeOrigin: true</code> 让后端正常响应。</li></ul><p><strong>两者的区别</strong></p><table><thead><tr><th>配置项</th><th>作用对象</th><th>核心目的</th><th>典型使用场景</th></tr></thead><tbody><tr><td><code>cors: true</code></td><td>Vite 开发服务器</td><td>允许浏览器跨域访问本地资源</td><td>微前端资源加载、本地静态服务</td></tr><tr><td><code>changeOrigin: true</code></td><td>代理请求</td><td>绕过目标服务器的 CORS 校验</td><td>接口代理到不同域的后端服务</td></tr></tbody></table><p><strong>注意事项</strong></p><ul><li><strong>优先级</strong>：<br><code>changeOrigin: true</code> 仅影响代理请求的 <code>Origin</code> 头，而 <code>cors: true</code> 影响的是 Vite 开发服务器自身的响应头。两者可同时使用。</li><li><strong>生产环境</strong>：<br><code>cors: true</code> 和代理配置仅在开发环境生效，生产环境需通过后端或 Nginx 配置 CORS。</li><li><strong>冲突处理</strong>：<br>若后端强制校验 <code>Origin</code>，需确保 <code>changeOrigin: true</code> 修改后的值与后端允许的域名一致</li></ul><br><h3 id="15、axios二次封装"><a href="#15、axios二次封装" class="headerlink" title="15、axios二次封装"></a><strong><font color='red'>15、axios二次封装</font></strong></h3><p><code>utils/request.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">AxiosResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Base</span> <span class="keyword">from</span> <span class="string">&#x27;@/utils/base&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">30000</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=UTF-8&#x27;</span> &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// request拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">config: customInternalAxiosRequestConfig</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (config.<span class="property">headersType</span>) &#123;</span><br><span class="line">        config.<span class="property">headers</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = config.<span class="property">headersType</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> base = <span class="title class_">Base</span>()</span><br><span class="line">    base.<span class="property">requestTime</span> = <span class="title function_">dayjs</span>().<span class="title function_">format</span>(<span class="string">&#x27;YYYYDDMMHmmss&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> &#123; params, data &#125; = config</span><br><span class="line">    <span class="keyword">const</span> newParams = &#123; ...(data || params), ...base &#125;</span><br><span class="line">    <span class="keyword">if</span> (params) &#123;</span><br><span class="line">        config.<span class="property">params</span> = newParams</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        config.<span class="property">data</span> = newParams</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function">(<span class="params">response: AxiosResponse</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; body, msgCd, msgInfo &#125; = response.<span class="property">data</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果响应是二进制流，则直接返回，用于下载文件、Excel 导出等(待测试)</span></span><br><span class="line">        <span class="keyword">if</span> (response.<span class="property">config</span>.<span class="property">responseType</span> === <span class="string">&#x27;blob&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> response</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 接口请求成功</span></span><br><span class="line">        <span class="keyword">if</span> (msgCd.<span class="title function_">slice</span>(-<span class="number">5</span>) === <span class="string">&#x27;00000&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> body</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 登录失效</span></span><br><span class="line">        <span class="keyword">if</span> (msgCd === <span class="string">&#x27;MPL99001&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">name</span> !== <span class="string">&#x27;login&#x27;</span>) &#123;</span><br><span class="line">                router.<span class="title function_">replace</span>(&#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">                    <span class="attr">query</span>: &#123; <span class="attr">redirect</span>: router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">fullPath</span> &#125;,</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 其他错误</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(msgInfo || <span class="string">&#x27;错误&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[ajax error]&#x27;</span>, error)</span><br><span class="line">        <span class="keyword">let</span> msgInfo = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">const</span> &#123; message &#125; = error</span><br><span class="line">        <span class="keyword">if</span> (message === <span class="string">&#x27;Network Error&#x27;</span>) &#123;</span><br><span class="line">            msgInfo = <span class="string">&#x27;操作失败，网络异常！&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (message.<span class="title function_">includes</span>(<span class="string">&#x27;timeout&#x27;</span>)) &#123;</span><br><span class="line">            msgInfo = <span class="string">&#x27;接口请求超时，请刷新页面后重试！&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (message.<span class="title function_">includes</span>(<span class="string">&#x27;Request failed with status code&#x27;</span>)) &#123;</span><br><span class="line">            msgInfo = <span class="string">`接口请求失败，请稍后重试！<span class="subst">$&#123;message.substr(message.length - <span class="number">3</span>)&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(msgInfo)</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure><p><code>api/user/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CommonAPI</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取首页信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 请求参数，默认为空对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span> 包含首页信息的Promise对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">homeInformationQuery</span>(<span class="params">data = &#123;&#125;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> request&lt;any, <span class="title class_">HomeInformationQueryResult</span>&gt;(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/fortune-business/v1/common/home-information-query&#x27;</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            data,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">CommonAPI</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 请求参数 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** 响应参数 */</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">HomeInformationQueryResult</span> &#123;</span><br><span class="line">    <span class="attr">fundInfoList</span>: <span class="title class_">FundInfoList</span></span><br><span class="line">    <span class="attr">newUserFlag</span>: boolean</span><br><span class="line">    <span class="attr">userSignFlag</span>: boolean</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">FundInfo</span> &#123;</span><br><span class="line">    <span class="attr">fundDesc</span>: string</span><br><span class="line">    <span class="attr">fundName</span>: string</span><br><span class="line">    <span class="attr">fundDayLy</span>: string</span><br><span class="line">    <span class="attr">fundIcon</span>: string</span><br><span class="line">    fundElectronicAccount?: any</span><br><span class="line">    <span class="attr">fundCorpId</span>: string</span><br><span class="line">    <span class="attr">fundNo</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存储全部基金的数组类型</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">FundInfoList</span> = <span class="title class_">FundInfo</span>[]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>***.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">UserAPI</span> <span class="keyword">from</span> <span class="string">&#x27;@/api/user&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">login</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title class_">CommonAPI</span>.<span class="title function_">homeInformationQuery</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">login</span>()</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="16、打包分析"><a href="#16、打包分析" class="headerlink" title="16、打包分析"></a><strong><font color='red'>16、打包分析</font></strong></h3><p>插件网站<a href="https://www.npmjs.com/package/rollup-plugin-visualizer">https://www.npmjs.com/package/rollup-plugin-visualizer</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add rollup-plugin-visualizer -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; visualizer &#125; <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-visualizer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">visualizer</span>(&#123;</span><br><span class="line">            <span class="comment">// 注意这里要设置为true，否则无效</span></span><br><span class="line">            <span class="attr">open</span>: !!((command === <span class="string">&#x27;build&#x27;</span> &amp;&amp; mode === <span class="string">&#x27;development&#x27;</span>)), </span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&#x27;stats.html&#x27;</span>, <span class="comment">// 分析图生成的文件名</span></span><br><span class="line">            <span class="attr">gzipSize</span>: <span class="literal">true</span>, <span class="comment">// 收集 gzip 大小并将其显示</span></span><br><span class="line">            <span class="attr">brotliSize</span>: <span class="literal">true</span>, <span class="comment">// 收集 brotli 大小并将其显示</span></span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="17、gzip压缩"><a href="#17、gzip压缩" class="headerlink" title="17、gzip压缩"></a><strong><font color='red'>17、gzip压缩</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm i vite-plugin-compression -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 压缩gzip</span></span><br><span class="line"><span class="keyword">import</span> viteCompression <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-compression&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="title function_">viteCompression</span>(&#123;</span><br><span class="line">        <span class="attr">verbose</span>: <span class="literal">true</span>, <span class="comment">// 是否在控制台输出压缩结果</span></span><br><span class="line">        <span class="attr">disable</span>: <span class="literal">false</span>, <span class="comment">// 是否禁用压缩</span></span><br><span class="line">        <span class="attr">deleteOriginFile</span>: <span class="literal">false</span>, <span class="comment">// 删除源文件</span></span><br><span class="line">        <span class="attr">threshold</span>: <span class="number">10240</span>, <span class="comment">// 文件大小超过此值时进行压缩，单位为字节即10kb</span></span><br><span class="line">        <span class="attr">algorithm</span>: <span class="string">&#x27;gzip&#x27;</span>, <span class="comment">// 压缩算法，可选 &#x27;gzip&#x27; 或 &#x27;brotli&#x27;</span></span><br><span class="line">        <span class="attr">ext</span>: <span class="string">&#x27;.gz&#x27;</span> <span class="comment">// 压缩后的文件扩展名</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>nginx服务器上还要对应配置</strong></p><p>在server节点下新增以下配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    </span><br><span class="line">    # 追加如下配置</span><br><span class="line">    # gzip - 动态压缩配置</span><br><span class="line">    gzip            on;                # 开启gzip压缩</span><br><span class="line">    gzip_vary       on;                # 添加Vary: Accept-Encoding响应头，支持CDN缓存</span><br><span class="line">    gzip_proxied    any;               # 对所有代理请求都进行压缩</span><br><span class="line">    gzip_comp_level 6;                 # 压缩级别6（1-9），平衡压缩率和CPU占用</span><br><span class="line">    # 指定哪些 MIME 类型的文件需要压缩</span><br><span class="line">    gzip_types      text/plain         # .txt文本文件</span><br><span class="line">                    text/css           # .css样式文件</span><br><span class="line">                    text/xml           # .xml文件</span><br><span class="line">                    text/javascript    # .js文件（旧MIME类型）</span><br><span class="line">                    application/json   # .json API响应</span><br><span class="line">                    application/javascript  # .js文件（新MIME类型）</span><br><span class="line">                    application/xml    # XML文件</span><br><span class="line">                    application/xml+rss     # RSS订阅</span><br><span class="line">                    application/rss+xml     # RSS订阅</span><br><span class="line">                    application/atom+xml    # Atom订阅</span><br><span class="line">                    image/svg+xml      # .svg矢量图</span><br><span class="line">                    font/ttf           # .ttf字体文件</span><br><span class="line">                    font/otf           # .otf字体文件</span><br><span class="line">                    font/woff          # .woff字体文件（虽然已压缩，但有时仍可获益）</span><br><span class="line">                    application/x-font-ttf       # 字体文件（兼容旧格式）</span><br><span class="line">                    application/x-javascript;    # JS文件（兼容旧格式）</span><br><span class="line">    </span><br><span class="line">    # gzip_static - 使用预先压缩的.gz文件</span><br><span class="line">    gzip_static     on;  # 优先使用构建时生成的.gz文件，提升性能</span><br><span class="line">    gzip_min_length 1k;  # 小于1KB的文件不压缩</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果是打包成docker镜像，Dockerfile可配置如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx:1.25.2-alpine-slim</span><br><span class="line"></span><br><span class="line">COPY dist /usr/share/nginx/html/</span><br><span class="line"></span><br><span class="line"># 开启gzip压缩配置</span><br><span class="line">RUN sed -i &#x27;/server_name  localhost;/a \</span><br><span class="line"> gzip on;</span><br><span class="line"> gzip_static on;</span><br><span class="line"> gzip_buffers  4 16k;</span><br><span class="line"> gzip_min_length 1k;</span><br><span class="line"> gzip_comp_level 9;</span><br><span class="line"> gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</span><br><span class="line"> gzip_proxied    any;</span><br><span class="line"> gzip_vary on;</span><br><span class="line"> gzip_disable &quot;MSIE [1-6]&quot;;&#x27;</span><br><span class="line"></span><br><span class="line"># 指定于外界交互的端口</span><br><span class="line">EXPOSE 80</span><br></pre></td></tr></table></figure><p>这些配置项的作用如下：</p><ul><li><code>gzip on;</code> 启用 Gzip 功能。</li><li><code>gzip_static on;</code> 允许 Nginx 直接返回已压缩的静态文件。</li><li><code>gzip_types</code> 指定需要压缩的文件类型。</li><li><code>gzip_vary on;</code> 添加 <code>Vary: Accept-Encoding</code> 头部，确保浏览器正确处理压缩文件。</li><li><code>gzip_comp_level</code> 设置压缩级别，数值越大压缩率越高，但性能消耗也越大（1-9）</li><li><code>gzip_buffers</code> 设置缓冲区大小。</li><li><code>gzip_http_version</code> 设置 HTTP 版本。</li><li><code>gzip_disable</code> 禁用对特定浏览器的 Gzip 压缩。</li><li><code>gzip_proxied</code> 用于控制 Gzip 压缩的行为，特别是在处理来自代理服务器的请求时。<strong>any</strong>: 对所有请求（包括来自代理的请求）执行 Gzip 压缩</li></ul><br><h3 id="18、图片压缩"><a href="#18、图片压缩" class="headerlink" title="18、图片压缩"></a><strong><font color='red'>18、图片压缩</font></strong></h3><p>插件网站<a href="https://www.npmjs.com/package/vite-plugin-image-optimizer">vite-plugin-image-optimizer </a>（弃用）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-image-optimizer -D</span><br><span class="line">pnpm add sharp -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ViteImageOptimizer</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-image-optimizer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title class_">ViteImageOptimizer</span>(&#123; <span class="comment">// 图片压缩</span></span><br><span class="line">            <span class="attr">png</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">jpeg</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">jpg</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">80</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">webp</span>: &#123;</span><br><span class="line">                <span class="attr">quality</span>: <span class="number">60</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>插件网站<a href="https://www.npmjs.com/package/vite-plugin-image-tools">vite-plugin-image-tools</a>（推荐）</p><p>vite插件，支持图片压缩和自动转webp，目前只支持’png’, ‘jpg’, ‘webp’, ‘avif’, ‘tiff’, ‘gif’</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pnpm add -D vite-plugin-image-tools</span><br><span class="line">pnpm add spritesmith -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VitePluginImageTools</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-image-tools&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="title class_">VitePluginImageTools</span>(&#123;</span><br><span class="line">      <span class="attr">quality</span>: <span class="number">80</span>, <span class="comment">// 图片质量</span></span><br><span class="line">        <span class="attr">enableWebp</span>: <span class="literal">true</span>, <span class="comment">// 开启webp转换</span></span><br><span class="line">        <span class="attr">limitSize</span>: <span class="number">10</span> * <span class="number">1024</span>, <span class="comment">// 小于10KB不做任何压缩转换处理（10KB = 10 * 1024 bytes）</span></span><br><span class="line">        <span class="attr">webpConfig</span>: &#123;</span><br><span class="line">            <span class="attr">deleteOriginImg</span>: <span class="literal">true</span>, <span class="comment">// 打包时删除原图，减少产物体积</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>参数</p><table><thead><tr><th>参数</th><th>类型</th><th>默认值</th><th>Description</th></tr></thead><tbody><tr><td>quality</td><td>number</td><td>80</td><td>图片质量 (1-100)</td></tr><tr><td>includes</td><td>string&#x2F;RegExp</td><td>‘’</td><td>‘<code>xxx.png&#39;.includs(inclouds) includes.test(&#39;xxx.png&#39;)</code>jpe?g</td></tr><tr><td>excludes</td><td>string&#x2F;RegExp</td><td>‘’</td><td>排除项，如：!’<code>xxx.png&#39;.includs(inclouds) !includes.test(&#39;xxx.png&#39;)</code></td></tr><tr><td>filter</td><td>function</td><td>() &#x3D;&gt; true</td><td>过滤方法，可自定义过滤图片逻辑，支持async 参数：图片路径 如： filter: (path) &#x3D;&gt; { return path.includes(‘.png’) }</td></tr><tr><td>compatibility</td><td>boolean</td><td>false</td><td>是否兼容低版本浏览器，生产环境生效， true：只有css中的图片会转webp（暂时只支持打包时候处理css） false：全部转webp</td></tr><tr><td>bodyWebpClassName</td><td>string</td><td>webp</td><td>body标签的webp class，用于生成兼容webp的class</td></tr><tr><td>enableWebp</td><td>boolean</td><td>false</td><td>生产环境是否转webp</td></tr><tr><td>enableDev</td><td>boolean</td><td>false</td><td>开发环境是否开启压缩</td></tr><tr><td>enableDevWebp</td><td>boolean</td><td>false</td><td>开发环境是否开启转webp</td></tr><tr><td>cacheDir</td><td>string</td><td>‘node_modules&#x2F;.cache&#x2F;vite-plugin-image’</td><td>缓存路径， 默认，只在开发环境生效</td></tr><tr><td>sharpConfig</td><td>Object</td><td>{ jpeg?: JpegOptions, jpg?: JpegOptions, png?: PngOptions, webp?: WebpOptions, avif?: AvifOptions, tiff?: TiffOptions, gif?: GifOptions}</td><td><a href="https://sharp.pixelplumbing.com/api-output/#_top">sharp配置</a></td></tr><tr><td>svgoConfig</td><td>Object</td><td>{plugins:[‘preset-default’,{name:’removerXMLNS’},{name:’removeViewBox’}],js2svg:{indent:2, pretty: true}}</td><td><a href="https://svgo.dev/docs/preset-default/">https://svgo.dev/docs/preset-default/</a></td></tr></tbody></table><p>✅ <strong>结论</strong>：<br><code>vite-plugin-image-tools</code> 默认不会删除原图，这是有意设计（兼容性考虑）。<br>如果你确定不需要原图，可以写 Node 脚本删除原图（不建议删除）</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">removeOriginalImages</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;remove-original-images&#x27;</span>,</span><br><span class="line">    <span class="title function_">closeBundle</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> outDir = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>) <span class="comment">// 输出目录</span></span><br><span class="line">      <span class="keyword">const</span> extsToRemove = [<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;.jpeg&#x27;</span>]</span><br><span class="line">      <span class="keyword">const</span> stack = [outDir]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">while</span> (stack.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> dir = stack.<span class="title function_">pop</span>()!</span><br><span class="line">        <span class="keyword">const</span> files = fs.<span class="title function_">readdirSync</span>(dir)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> file <span class="keyword">of</span> files) &#123;</span><br><span class="line">          <span class="keyword">const</span> fullPath = path.<span class="title function_">join</span>(dir, file)</span><br><span class="line">          <span class="keyword">const</span> stat = fs.<span class="title function_">statSync</span>(fullPath)</span><br><span class="line">          <span class="keyword">if</span> (stat.<span class="title function_">isDirectory</span>()) &#123;</span><br><span class="line">            stack.<span class="title function_">push</span>(fullPath)</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (extsToRemove.<span class="title function_">includes</span>(path.<span class="title function_">extname</span>(fullPath).<span class="title function_">toLowerCase</span>())) &#123;</span><br><span class="line">            fs.<span class="title function_">unlinkSync</span>(fullPath)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已删除原始图片文件&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 你的其他插件</span></span><br><span class="line">    <span class="title function_">removeOriginalImages</span>()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="19、解决ts无法识别路由中导入的vue组件"><a href="#19、解决ts无法识别路由中导入的vue组件" class="headerlink" title="19、解决ts无法识别路由中导入的vue组件"></a><strong><font color='red'>19、解决ts无法识别路由中导入的vue组件</font></strong></h3><p><code>env.d.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">declare module &#x27;*.vue&#x27; &#123;</span><br><span class="line">    import type &#123; DefineComponent &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">    const component: DefineComponent</span><br><span class="line">    export default component</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="20、将路由和pinia分离到独立模块"><a href="#20、将路由和pinia分离到独立模块" class="headerlink" title="20、将路由和pinia分离到独立模块"></a><strong><font color='red'>20、将路由和pinia分离到独立模块</font></strong></h3><p>将路由和pinia分离到独立模块，提高可维护性和可扩展性</p><p><code>/src/plugins/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; setupRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; setupStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">install</span>(<span class="params">app: App</span>) &#123;</span><br><span class="line">        <span class="comment">// 路由(router)</span></span><br><span class="line">        <span class="title function_">setupRouter</span>(app)</span><br><span class="line">        <span class="comment">// 状态管理(store)</span></span><br><span class="line">        <span class="title function_">setupStore</span>(app)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/router/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BASE_URL</span>),</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/home/index.vue&#x27;</span>),</span><br><span class="line">            <span class="attr">meta</span>: &#123; <span class="attr">requiresAuth</span>: <span class="literal">true</span>, <span class="attr">title</span>: <span class="string">&#x27;首页&#x27;</span> &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setupRouter</span> = (<span class="params">app: App</span>) =&gt; &#123;</span><br><span class="line">    app.<span class="title function_">use</span>(router)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/store/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局注册 store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">setupStore</span>(<span class="params">app: App</span>) &#123;</span><br><span class="line">    app.<span class="title function_">use</span>(pinia)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/main.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plugins <span class="keyword">from</span> <span class="string">&#x27;@/plugins&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(plugins)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><br><h3 id="21、添加mock工具"><a href="#21、添加mock工具" class="headerlink" title="21、添加mock工具"></a><strong><font color='red'>21、添加mock工具</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-mock-dev-server -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> mockDevServerPlugin <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-mock-dev-server&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        env.<span class="property">VITE_MOCK_DEV_SERVER</span> === <span class="string">&#x27;true&#x27;</span> ? <span class="title function_">mockDevServerPlugin</span>() : <span class="literal">null</span>,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>在项目根目录添加mock文件夹</p><p><code>mock/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;node:path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createDefineMock &#125; <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-mock-dev-server&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> defineMock = <span class="title function_">createDefineMock</span>(<span class="function">(<span class="params">mock</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 拼接url</span></span><br><span class="line">    mock.<span class="property">url</span> = path.<span class="title function_">join</span>(mock.<span class="property">url</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>tsconfig.app.</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;mock/**/*.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>mock/modules/home.mock.ts</code></p><p>这里命名中间一定要用mock，格式xxx.mock.ts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineMock &#125; <span class="keyword">from</span> <span class="string">&#x27;../index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineMock</span>([</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 获取首页信息</span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/fortune-business/v1/common/home-information-query&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: [<span class="string">&#x27;POST&#x27;</span>],</span><br><span class="line">        <span class="attr">body</span>: &#123;</span><br><span class="line">            <span class="attr">msgCd</span>: <span class="string">&#x27;00000&#x27;</span>,</span><br><span class="line">            <span class="attr">mockFlag</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&#x27;交易成功&#x27;</span>,</span><br><span class="line">            <span class="attr">body</span>: &#123;</span><br><span class="line">                <span class="attr">newUserFlag</span>: <span class="literal">false</span>, <span class="comment">// 是否新用户</span></span><br><span class="line">                <span class="attr">userSignFlag</span>: <span class="literal">true</span>, <span class="comment">// false需要用户签隐私协议</span></span><br><span class="line">                <span class="attr">fundInfoList</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">funType</span>: <span class="string">&#x27;稳健理财&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundDesc</span>: <span class="string">&#x27;稳健理财你真棒&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundName</span>: <span class="string">&#x27;汇添富和聚宝货币市场基金&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundDayLy</span>: <span class="string">&#x27;4.26&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundIcon</span>: <span class="string">&#x27;11&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundElectronicAccount</span>: <span class="literal">null</span>,</span><br><span class="line">                        <span class="attr">fundCorpId</span>: <span class="string">&#x27;MS-BANK&#x27;</span>,</span><br><span class="line">                        <span class="attr">fundNo</span>: <span class="string">&#x27;000600&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">])</span><br></pre></td></tr></table></figure><br><h3 id="22、添加ESLint配置检查器-启动项"><a href="#22、添加ESLint配置检查器-启动项" class="headerlink" title="22、添加ESLint配置检查器 启动项"></a><strong><font color='red'>22、添加ESLint配置检查器 启动项</font></strong></h3><p><code>package.json</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;eslint-config-inspector&quot;: &quot;pnpm dlx eslint --inspect-config&quot;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><br><h3 id="23、添加404页"><a href="#23、添加404页" class="headerlink" title="23、添加404页"></a><strong><font color='red'>23、添加404页</font></strong></h3><p><code>src/router/index.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">App</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_BASE_URL</span>),</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)*&#x27;</span>, <span class="comment">// Vue3 的写法，兼容子路径</span></span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/404.vue&#x27;</span>),</span><br><span class="line">            <span class="attr">meta</span>: &#123; <span class="attr">requiresAuth</span>: <span class="literal">false</span>, <span class="attr">title</span>: <span class="string">&#x27;中国移动支付-404&#x27;</span> &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setupRouter</span> = (<span class="params">app: App</span>) =&gt; &#123;</span><br><span class="line">    app.<span class="title function_">use</span>(router)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h3 id="24、引用scss文件"><a href="#24、引用scss文件" class="headerlink" title="24、引用scss文件"></a><strong><font color='red'>24、引用scss文件</font></strong></h3><p>添加scss文件</p><p><code>src/styles/common.scss</code></p><p><code>src/styles/mixin.scss</code></p><p><code>src/styles/variables.scss</code></p><p><strong><code>vite.config.ts</code></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode, command &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="attr">css</span>: &#123;</span><br><span class="line">            <span class="comment">// css预处理器</span></span><br><span class="line">            <span class="attr">preprocessorOptions</span>: &#123;</span><br><span class="line">                <span class="attr">scss</span>: &#123;</span><br><span class="line">                    <span class="attr">additionalData</span>: <span class="string">`</span></span><br><span class="line"><span class="string">                        @use &quot;@/styles/variables.scss&quot; as *;</span></span><br><span class="line"><span class="string">                        @use &quot;@/styles/mixin.scss&quot; as *;`</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="25、打包拆分-小图片转base64"><a href="#25、打包拆分-小图片转base64" class="headerlink" title="25、打包拆分 小图片转base64"></a><strong><font color='red'>25、打包拆分 小图片转base64</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add terser -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(<span class="function">(<span class="params">&#123; mode, command &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">assetsInlineLimit</span>: <span class="number">1024</span> * <span class="number">10</span>, <span class="comment">// 10kb以下，转Base64</span></span><br><span class="line">    <span class="attr">chunkSizeWarningLimit</span>: <span class="number">2000</span>, <span class="comment">// 消除打包大小超过500kb警告</span></span><br><span class="line">    <span class="attr">minify</span>: <span class="string">&#x27;terser&#x27;</span>, <span class="comment">// Vite 2.6.x 以上需要配置 minify: &quot;terser&quot;, terserOptions 才能生效</span></span><br><span class="line">    <span class="attr">terserOptions</span>: &#123;</span><br><span class="line">        <span class="attr">compress</span>: &#123;</span><br><span class="line">            <span class="attr">keep_infinity</span>: <span class="literal">true</span>, <span class="comment">// 防止 Infinity 被压缩成 1/0，这可能会导致 Chrome 上的性能问题</span></span><br><span class="line">            <span class="attr">drop_console</span>: mode === <span class="string">&#x27;production&#x27;</span>, <span class="comment">// 生产环境去除 console</span></span><br><span class="line">            <span class="attr">drop_debugger</span>: <span class="literal">true</span>, <span class="comment">// 生产环境去除 debugger</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">format</span>: &#123;</span><br><span class="line">            <span class="attr">comments</span>: <span class="literal">false</span>, <span class="comment">// 删除注释</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">        <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="comment">// 每个node_modules模块分成一个js文件</span></span><br><span class="line">            <span class="title function_">manualChunks</span>(<span class="params">id: string</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (id.<span class="title function_">includes</span>(<span class="string">&#x27;node_modules&#x27;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">const</span> packageName = id.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&#x27;node_modules/.pnpm/&#x27;</span>)[<span class="number">1</span>].<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>)[<span class="number">0</span>].<span class="title function_">toString</span>()</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 1.第三方依赖合并在一起</span></span><br><span class="line">                    <span class="comment">// return &#x27;vendor&#x27;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 2.把第三方依赖单独抽离出来</span></span><br><span class="line">                    <span class="comment">// return packageName</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 3.将较大型或常用的第三方库单独打包</span></span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;pinia&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;axios&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;dayjs&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;bowser&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;bowser&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;vue-router&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (packageName.<span class="title function_">includes</span>(<span class="string">&#x27;vue&#x27;</span>)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&#x27;vendor&#x27;</span> <span class="comment">// 其他第三方依赖合并在一起</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">entryFileNames</span>: <span class="string">&#x27;js/[name].[hash].js&#x27;</span>,</span><br><span class="line">            <span class="attr">chunkFileNames</span>: <span class="string">&#x27;js/[name].[hash].js&#x27;</span>,</span><br><span class="line">            <span class="attr">assetFileNames</span>: <span class="function">(<span class="params">assetInfo: any</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> info = assetInfo.<span class="property">name</span>.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">                <span class="keyword">let</span> extType = info[info.<span class="property">length</span> - <span class="number">1</span>]</span><br><span class="line">                <span class="keyword">if</span> (<span class="regexp">/\.(?:png|jpe?g|gif|svg|webp)(?:\?.*)?$/</span>.<span class="title function_">test</span>(assetInfo.<span class="property">name</span>)) &#123;</span><br><span class="line">                    extType = <span class="string">&#x27;img&#x27;</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/\.(?:mp4|webm|ogg|mp3|wav|aac)(?:\?.*)?$/i</span>.<span class="title function_">test</span>(assetInfo.<span class="property">name</span>)) &#123;</span><br><span class="line">                    extType = <span class="string">&#x27;media&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;extType&#125;</span>/[name].[hash].[ext]`</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="26、添加Vconsole打印"><a href="#26、添加Vconsole打印" class="headerlink" title="26、添加Vconsole打印"></a><strong><font color='red'>26、添加Vconsole打印</font></strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-vconsole vconsole -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> viteVConsole <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vconsole&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">         <span class="title function_">viteVConsole</span>(&#123;</span><br><span class="line">            <span class="attr">entry</span>: [path.<span class="title function_">resolve</span>(<span class="string">&#x27;src/main.ts&#x27;</span>)], <span class="comment">// 项目入口文件 [[1, 6]]</span></span><br><span class="line">            <span class="attr">enabled</span>: mode !== <span class="string">&#x27;production&#x27;</span>, <span class="comment">// 根据环境启用 [[3, 6]]</span></span><br><span class="line">            <span class="attr">localEnabled</span>: <span class="literal">true</span>, <span class="comment">// 本地开发时强制启用 [[6]]</span></span><br><span class="line">            <span class="attr">config</span>: &#123;</span><br><span class="line">                <span class="attr">theme</span>: <span class="string">&#x27;dark&#x27;</span>, <span class="comment">// 主题配置</span></span><br><span class="line">                <span class="attr">maxLogNumber</span>: <span class="number">1000</span>, <span class="comment">// 日志数量限制</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="27、简化SVG使用"><a href="#27、简化SVG使用" class="headerlink" title="27、简化SVG使用"></a><strong><font color='red'>27、简化SVG使用</font></strong></h3><p>插件网站<a href="https://www.npmjs.com/package/vite-svg-loader">https://www.npmjs.com/package/vite-svg-loader</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-svg-loader -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> svgLoader <span class="keyword">from</span> <span class="string">&#x27;vite-svg-loader&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">svgLoader</span>(&#123;</span><br><span class="line">            <span class="comment">// &#x27;url&#x27;: img标签引入 &#x27;raw&#x27;：demo元素 v-html引入   &#x27;component&#x27;: 组件展示</span></span><br><span class="line">            <span class="attr">defaultImport</span>: <span class="string">&#x27;url&#x27;</span>,</span><br><span class="line">            <span class="attr">svgo</span>: <span class="literal">true</span>, <span class="comment">// 启用SVGO优化</span></span><br><span class="line">            <span class="attr">svgoConfig</span>: &#123;</span><br><span class="line">                <span class="attr">multipass</span>: <span class="literal">false</span>, <span class="comment">// 关闭对SVG文件进行多次优化迭代（更彻底地压缩 SVG，会增加处理时间）</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// env.d.ts 模块声明</span><br><span class="line">/// &lt;reference types=&quot;vite-svg-loader&quot; /&gt;</span><br></pre></td></tr></table></figure><p><code>.vue文件使用</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- defaultImport: &#x27;url&#x27; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">w100</span> <span class="attr">:src</span>=<span class="string">&quot;logo&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- defaultImport: &#x27;raw&#x27; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">w100</span> <span class="attr">v-html</span>=<span class="string">&quot;logo&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- defaultImport: &#x27;component&#x27; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logo</span> <span class="attr">w100</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">&#x27;@/assets/logo.svg&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="28、px转换"><a href="#28、px转换" class="headerlink" title="28、px转换"></a><strong><font color='red'>28、px转换</font></strong></h3><h4 id="cnjm-postcss-px-to-viewport"><a href="#cnjm-postcss-px-to-viewport" class="headerlink" title="cnjm-postcss-px-to-viewport"></a><strong><font color='#10c300'>cnjm-postcss-px-to-viewport</font></strong></h4><p><strong><code>px转vw/vh</code></strong></p><p>插件网站<a href="https://www.npmjs.com/package/cnjm-postcss-px-to-viewport">https://www.npmjs.com/package/cnjm-postcss-px-to-viewport</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add cnjm-postcss-px-to-viewport -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import px2viewport from &#x27;cnjm-postcss-px-to-viewport&#x27;</span><br><span class="line"></span><br><span class="line">// https://vite.dev/config/</span><br><span class="line">export default defineConfig((&#123; mode &#125;) =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        css: &#123;</span><br><span class="line">            postcss: &#123;</span><br><span class="line">                plugins: [</span><br><span class="line">                    px2viewport(&#123;</span><br><span class="line">                        unitToConvert: &#x27;px&#x27;, // 要转化的单位</span><br><span class="line">                        viewportWidth: 750, // UI设计稿的宽度</span><br><span class="line">                        unitPrecision: 6, // 转换后的精度，即小数点位数</span><br><span class="line">                        propList: [&#x27;*&#x27;], // 指定转换的css属性的单位，*代表全部css属性的单位都进行转换</span><br><span class="line">                        viewportUnit: &#x27;vw&#x27;, // 指定需要转换成的视窗单位，默认vw</span><br><span class="line">                        fontViewportUnit: &#x27;vw&#x27;, // 指定字体需要转换成的视窗单位，默认vw</span><br><span class="line">                        selectorBlackList: [&#x27;ignore&#x27;], // 指定不转换为视窗单位的类名，</span><br><span class="line">                        minPixelValue: 1, // 默认值1，小于或等于1px则不进行转换</span><br><span class="line">                        mediaQuery: true, // 是否在媒体查询的css代码中也进行转换，默认false</span><br><span class="line">                        replace: true, // 是否转换后直接更换属性值</span><br><span class="line">                        exclude: [], // 设置忽略文件，用正则做目录名匹配</span><br><span class="line">                        landscape: false, // 是否处理横屏情况</span><br><span class="line">                        // 如果没有使用其他的尺寸来设计，下面这个方法可以不需要， 这个自定义的方法是针对处理vant组件下的设计稿为375问题</span><br><span class="line">                        customFun: (&#123; file &#125;: &#123; file: string &#125;) =&gt; &#123;</span><br><span class="line">                            const designWidth = path.join(file).includes(path.join(&#x27;node_modules&#x27;, &#x27;vant&#x27;))</span><br><span class="line">                                ? 375</span><br><span class="line">                                : 750</span><br><span class="line">                            return designWidth</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;),</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>在 TypeScript 中，<code>declare module</code> 用于声明一个模块的类型定义，通常在以下情况下使用：</p><ol><li><strong>没有类型定义文件的第三方库</strong>：如果你正在使用一个第三方库（如 <code>cnjm-postcss-px-to-viewport</code>），但该库没有提供官方的类型定义文件（例如 <code>.d.ts</code> 文件），你可以使用 <code>declare module</code> 来告诉 TypeScript 这个模块存在，从而避免编译时报错。</li><li><strong>临时解决方案</strong>：这是一个临时的声明，通常用于快速解决类型检查问题。它不会为模块提供具体的类型信息，只是告诉 TypeScript 这个模块是有效的。</li></ol><p><code>types/cnjm-postcss-px-to-viewport.d.ts</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare module &#x27;cnjm-postcss-px-to-viewport&#x27;</span><br></pre></td></tr></table></figure><p><code>tsconfig.node.json</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;extends&quot;: &quot;@tsconfig/node22/tsconfig.json&quot;,</span><br><span class="line">    &quot;compilerOptions&quot;: &#123;</span><br><span class="line">        &quot;types&quot;: [&quot;node&quot;, &quot;./types/vite.config.d.ts&quot;],</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;include&quot;: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>declare module ‘cnjm-postcss-px-to-viewport</strong></p><p>这行代码的意思是：</p><ul><li>声明一个名为 <code>&#39;cnjm-postcss-px-to-viewport&#39;</code> 的模块。</li><li>TypeScript 不会对该模块的导入进行类型检查。</li><li>你可以在项目中导入并使用这个模块，但它的类型是 <code>any</code>，即没有具体的类型信息。</li></ul><h4 id="vite-plugin-px2rem"><a href="#vite-plugin-px2rem" class="headerlink" title="vite-plugin-px2rem"></a><strong><font color='#10c300'>vite-plugin-px2rem</font></strong></h4><p><strong><code>px转rem</code></strong></p><p>插件网站<a href="https://www.npmjs.com/package/vite-plugin-px2rem#vite-plugin-px2rem">https://www.npmjs.com/package/vite-plugin-px2rem#vite-plugin-px2rem</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vite-plugin-px2rem -D</span><br></pre></td></tr></table></figure><p><code>vite.config.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">px2rem</span>(&#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="number">750</span>,</span><br><span class="line">            <span class="attr">rootFontSize</span>: <span class="number">16</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="29、预构建的依赖项"><a href="#29、预构建的依赖项" class="headerlink" title="29、预构建的依赖项"></a><strong><font color='red'>29、预构建的依赖项</font></strong></h3><p>强制预构建的依赖项，在开发服务器启动时，Vite 会预先处理这些库，以确保它们快速加载和解析</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">plugins</span>: [],</span><br><span class="line">    <span class="attr">optimizeDeps</span>: &#123;</span><br><span class="line">        <span class="attr">include</span>: [</span><br><span class="line">            <span class="string">&#x27;vue&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;vue-router&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;pinia&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;axios&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;@vueuse/core&#x27;</span>,</span><br><span class="line">         ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="30、计算白屏时间"><a href="#30、计算白屏时间" class="headerlink" title="30、计算白屏时间"></a><strong><font color='red'>30、计算白屏时间</font></strong></h3><p>白屏时间（First Paint Time）是一个非常重要的指标。它指的是从用户输入网址并按下回车键，到浏览器开始渲染页面内容的时间段。在这段时间内，用户看到的只是一个空白页面，因此白屏时间的长短直接影响了用户的体验。</p><h4 id="30-1、什么是白屏时间？"><a href="#30-1、什么是白屏时间？" class="headerlink" title="30.1、什么是白屏时间？"></a><strong><font color='#10c300'>30.1、什么是白屏时间？</font></strong></h4><p>白屏时间是指从用户发起页面请求到浏览器首次开始渲染页面内容的时间。具体来说，白屏时间包括以下几个阶段：</p><ol><li><strong>DNS解析</strong>：浏览器将域名解析为IP地址。</li><li><strong>建立TCP连接</strong>：浏览器与服务器建立TCP连接（三次握手）。</li><li><strong>发起HTTP请求</strong>：浏览器向服务器发送HTTP请求。</li><li><strong>服务器响应</strong>：服务器处理请求并返回响应数据。</li><li><strong>浏览器解析HTML</strong>：浏览器解析HTML文档并构建DOM树。</li><li><strong>浏览器渲染页面</strong>：浏览器根据DOM树和CSSOM树生成渲染树，并开始渲染页面。</li><li><strong>页面展示第一个标签</strong>：浏览器首次将页面内容渲染到屏幕上。</li></ol><p>白屏时间的长短直接影响了用户对网站的第一印象。如果白屏时间过长，用户可能会感到不耐烦，甚至直接关闭页面。因此，优化白屏时间是前端性能优化的重要目标之一。</p><br><h4 id="30-2、白屏时间的影响因素"><a href="#30-2、白屏时间的影响因素" class="headerlink" title="30.2、白屏时间的影响因素"></a><strong><font color='#10c300'>30.2、白屏时间的影响因素</font></strong></h4><p>白屏时间的长短受到多种因素的影响，主要包括以下几个方面：</p><ol><li><strong>网络性能</strong>：网络延迟、带宽、DNS解析时间等都会影响白屏时间。如果网络状况不佳，DNS解析和TCP连接建立的时间会变长，从而导致白屏时间增加。</li><li><strong>服务器性能</strong>：服务器的响应速度、处理能力等也会影响白屏时间。如果服务器响应缓慢，浏览器需要等待更长的时间才能接收到HTML文档。</li><li><strong>前端页面结构</strong>：HTML文档的大小、复杂度、外部资源的加载顺序等都会影响白屏时间。如果HTML文档过大或包含大量外部资源，浏览器需要更长的时间来解析和渲染页面。</li><li><strong>浏览器性能</strong>：浏览器的渲染引擎性能、缓存机制等也会影响白屏时间。不同浏览器的渲染性能可能存在差异，导致白屏时间不同。</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vite App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.ts&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 性能 观察器 观察者模式</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 获取所有的 性能 指标</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> entries = list.<span class="title function_">getEntries</span>()</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">const</span> entry <span class="keyword">of</span> entries) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// body 里的第一个 标签的渲染</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">// &#x27;first-paint&#x27; 表示页面首次开始绘制的时间点，也就是白屏结束的时间点</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (entry.<span class="property">name</span> === <span class="string">&#x27;first-paint&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">const</span> whiteScreenTime = entry.<span class="property">startTime</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="comment">// 1s=1000ms</span></span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`白屏时间：<span class="subst">$&#123;whiteScreenTime&#125;</span>ms`</span>)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 首次绘制 first-paint</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 首次内容绘制 first-contentful-paint 事件</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// observe 监听性能指标</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// buffered 属性设置为 true，表示包含性能时间线缓冲区中已经记录的相关事件</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// 这样即使在创建 PerformanceObserver 之前事件已经发生，也能被捕获到</span></span></span><br><span class="line"><span class="language-javascript">            observer.<span class="title function_">observe</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;paint&#x27;</span>, <span class="attr">buffered</span>: <span class="literal">true</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;由于vite脚手架要禁止*.cjs 和 eslint版本升级废弃rc配置文件， 故重新搭建。&lt;/p&gt;
&lt;p&gt;核心采用**&lt;code&gt;antfu&lt;/code&gt;**大神预设配置 替代prettier和eslint设置，保留stylelint原因是暂时a</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
  </entry>
  
  <entry>
    <title>TypeScrip装饰器</title>
    <link href="http://example.com/posts/5f5fe4d5.html"/>
    <id>http://example.com/posts/5f5fe4d5.html</id>
    <published>2025-08-17T16:51:08.000Z</published>
    <updated>2026-01-27T15:41:13.665Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a><strong><font color='red'>一、简介</font></strong></h3><ol><li>装饰器本质是一种特殊的<strong>函数</strong>，它可以对：类、属性、方法、参数进行扩展，同时能让代码更简洁。</li><li>装饰器自<code>2015</code>年在<code>ECMAScript-6</code>中被提出到现在，已将近10年。</li><li>截止目前，装饰器依然是实验性特性 ，需要开发者手动调整配置，来开启装饰器支持。</li><li>装饰器有 5 种：</li></ol><p>1、类装饰器<br>2、属性装饰器<br>3、方法装饰器<br>4、访问器装饰器<br>5、参数装饰器</p><blockquote><p>备注：虽然<code>TypeScript5.0</code>中可以直接使用<code>**类装饰器**</code>，但为了确保其他装饰器可用，现阶段使用时，仍建议使用<code>experimentalDecorators</code>配置来开启装饰器支持，而且不排除在来的版本中，官方会<strong>进一步调整</strong>装饰器的相关语法！<br>参考：<a href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-0-rc/"><strong>《TypeScript 5.0发版公告》</strong></a></p></blockquote><br><h3 id="二、类装饰器"><a href="#二、类装饰器" class="headerlink" title="二、类装饰器"></a><strong><font color='red'>二、类装饰器</font></strong></h3><h4 id="2-1、基本语法"><a href="#2-1、基本语法" class="headerlink" title="2.1、基本语法"></a><strong><font color='#10c300'>2.1、基本语法</font></strong></h4><p>类装饰器是一个应用在<strong>类声明</strong>上的<strong>函数</strong>，可以为类添加额外的功能，或添加额外的逻辑。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  Demo函数会在Person类定义时执行</span></span><br><span class="line"><span class="comment">  target参数是被装饰的类，即：Person</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用装饰器</span></span><br><span class="line"><span class="meta">@Demo</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123; <span class="comment">// 被装饰的类</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>:<span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;zhangsan&#x27;</span>);</span><br></pre></td></tr></table></figure><br><h4 id="2-2、应用举例"><a href="#2-2、应用举例" class="headerlink" title="2.2、应用举例"></a><strong><font color='#10c300'>2.2、应用举例</font></strong></h4><p>需求：定义一个装饰器，实现<code>Person</code>实例调用<code>toString</code>时返回<code>JSON.stringify</code>的执行结果。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用装饰器重写toString方法 + 封闭其原型对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CustomString</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 向被装饰类的原型上添加自定义的 toString 方法</span></span><br><span class="line">    target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 封闭其原型对象，禁止随意操作其原型对象</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">seal</span>(target.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 CustomString 装饰器</span></span><br><span class="line"><span class="meta">@CustomString</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁了`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">15</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">toString</span>()); <span class="comment">// [object Object]  使用装饰器后：&#x27;&#123;&quot;name&quot;:&quot;小明&quot;,&quot;age&quot;:15&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="built_in">any</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 当封闭其原型对象 此行会报错：Cannot add property a, object is not extensible</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="number">100</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">a</span>)</span><br></pre></td></tr></table></figure><br><h4 id="2-3、关于返回值"><a href="#2-3、关于返回值" class="headerlink" title="2.3、关于返回值"></a><strong><font color='#10c300'>2.3、关于返回值</font></strong></h4><p><strong>类装饰器有返回值</strong>：若类装饰器返回一个新的类，那这个新类将<strong>替换</strong>掉被装饰的类。<br><strong>类装饰器无返回值</strong>：若类装饰器无返回值或返回<code>undefined</code>，那被装饰的类<strong>不会</strong>被替换。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"><span class="attr">target</span>:<span class="title class_">Function</span></span>)&#123;</span><br><span class="line">  <span class="comment">// 装饰器有返回值时，该返回值会替换掉被装饰的类</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">class</span> &#123;</span><br><span class="line">    <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">200</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">300</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">400</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@demo</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>)</span><br></pre></td></tr></table></figure><br><h4 id="2-4、关于class构造类型"><a href="#2-4、关于class构造类型" class="headerlink" title="2.4、关于class构造类型"></a><strong><font color='#10c300'>2.4、关于class构造类型</font></strong></h4><blockquote><p>在 TypeScript 中，<code>Function</code> 类型所表示的范围十分广泛，包括：普通函数、箭头函数、方法等等。但并非<code>Function</code> 类型的函数都可以被 <code>new</code> 关键字实例化，例如箭头函数是不能被实例化的，那么 TypeScript 中概如何声明一个构造类型呢？有以下两种方式：</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  ○ new     表示：该类型是可以用new操作符调用。</span></span><br><span class="line"><span class="comment">  ○ ...args 表示：构造器可以接受【任意数量】的参数。</span></span><br><span class="line"><span class="comment">  ○ any[]   表示：构造器可以接受【任意类型】的参数。</span></span><br><span class="line"><span class="comment">  ○ &#123;&#125;      表示：返回类型是对象(非null、非undefined的对象)。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义Constructor类型，其含义是构造类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"><span class="attr">fn</span>:<span class="title class_">Constructor</span></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;&#125;</span><br><span class="line"><span class="title function_">test</span>(<span class="title class_">Person</span>)</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个构造类型，且包含一个静态属性 wife</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = &#123;</span><br><span class="line">  <span class="title function_">new</span>(...<span class="attr">args</span>: <span class="built_in">any</span>[]): &#123;&#125;; <span class="comment">// 构造签名</span></span><br><span class="line">  <span class="attr">wife</span>: <span class="built_in">string</span>; <span class="comment">// wife属性</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">static</span> wife = <span class="string">&#x27;asd&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"><span class="attr">fn</span>:<span class="title class_">Constructor</span></span>)&#123;&#125;</span><br><span class="line"><span class="title function_">test</span>(<span class="title class_">Person</span>)</span><br></pre></td></tr></table></figure><br><h4 id="2-5、替换被装饰的类"><a href="#2-5、替换被装饰的类" class="headerlink" title="2.5、替换被装饰的类"></a><strong><font color='#10c300'>2.5、替换被装饰的类</font></strong></h4><p>对于高级一些的装饰器，不仅仅是覆盖一个原型上的方法，还要有更多功能，例如添加新的方法和状态。</p><p>**需求：**设计一个<code>LogTime</code>装饰器，可以给实例添加一个属性，用于记录实例对象的创建时间，再添加一个方法用于读取创建时间。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// User接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="title function_">getTime</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义类型Class</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个装饰器，为类添加日志功能和创建时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title class_">LogTime</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Constructor</span>&gt;(<span class="attr">target</span>: T) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> target &#123; <span class="comment">// return一个类并且这个类继承了target传来的类</span></span><br><span class="line">        <span class="attr">createdTime</span>: <span class="title class_">Date</span>;</span><br><span class="line">        <span class="title function_">constructor</span>(<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123; <span class="comment">// 构造器可以接受任意数量/类型的参数</span></span><br><span class="line">            <span class="variable language_">super</span>(...args); <span class="comment">// 继承传递的任意参数</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">createdTime</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">// 记录对象创建时间</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">getTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">`该对象创建时间为：<span class="subst">$&#123;<span class="variable language_">this</span>.createdTime&#125;</span>`</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@LogTime</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>说：你好啊！`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user1 = <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">13</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user1.<span class="title function_">getTime</span>());</span><br></pre></td></tr></table></figure><br><h3 id="三、装饰器工厂"><a href="#三、装饰器工厂" class="headerlink" title="三、装饰器工厂"></a><strong><font color='red'>三、装饰器工厂</font></strong></h3><p><strong>装饰器工厂是一个返回装饰器函数的函数（装饰器工厂中会包含一个装饰器）</strong>，可以为装饰器添加参数，可以更灵活地控制装饰器的行为。 </p><p>**需求：**定义一个<code>LogInfo</code>类装饰器工厂，实现<code>Person</code>实例可以调用到<code>introduce</code>方法，且<code>introduce</code>中输出内容的次数，由<code>LogInfo</code>接收的参数决定。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123; <span class="comment">// 因为给原型上添加了个方法，因此要加个类型</span></span><br><span class="line">    <span class="attr">introduce</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个装饰器工厂 LogInfo，它接受一个参数 n，返回一个类装饰器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">LogInfo</span>(<span class="params"><span class="attr">n</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123; <span class="comment">// 装饰器函数，target 是被装饰的类</span></span><br><span class="line">        target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">introduce</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我的名字：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，我的年龄：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@LogInfo</span>(<span class="number">5</span>) <span class="comment">// 装饰器工厂需要有个()</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你好呀！&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="comment">// console.log(p1) // 打印的p1是：_classThis，转换的JS版本比较旧时，会出现，不必纠结</span></span><br><span class="line">p1.<span class="title function_">speak</span>()</span><br><span class="line">p1.<span class="title function_">introduce</span>()</span><br></pre></td></tr></table></figure><br><h3 id="四、装饰器组合"><a href="#四、装饰器组合" class="headerlink" title="四、装饰器组合"></a><strong><font color='red'>四、装饰器组合</font></strong></h3><blockquote><p><strong>装饰器组合</strong>即装饰器工厂和装饰器的组合</p></blockquote><h4 id="4-1、执行顺序"><a href="#4-1、执行顺序" class="headerlink" title="4.1、执行顺序"></a><strong><font color='#10c300'>4.1、执行顺序</font></strong></h4><p>装饰器可以组合使用，执行顺序为：先【<strong>由上到下</strong>】的执行所有的装饰器工厂，依次获取到装饰器，然后再【<strong>由下到上</strong>】执行所有的装饰器。<strong>（先执行装饰器工厂后执行装饰器，装饰器工厂由上往下，装饰器由下往上执行）</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//装饰器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test1</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test1&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//装饰器工厂</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test2工厂&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test2&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//装饰器工厂</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test3工厂&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test3&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//装饰器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test4</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;test4&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@test1</span></span><br><span class="line"><span class="meta">@test2</span>()</span><br><span class="line"><span class="meta">@test3</span>()</span><br><span class="line"><span class="meta">@test4</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  控制台打印：</span></span><br><span class="line"><span class="comment">    test2工厂</span></span><br><span class="line"><span class="comment">    test3工厂</span></span><br><span class="line"><span class="comment">    test4</span></span><br><span class="line"><span class="comment">    test3</span></span><br><span class="line"><span class="comment">    test2</span></span><br><span class="line"><span class="comment">    test1</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><br><h4 id="4-2、应用"><a href="#4-2、应用" class="headerlink" title="4.2、应用"></a><strong><font color='#10c300'>4.2、应用</font></strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义类型Class</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Constructor</span> = <span class="title function_">new</span> (...<span class="attr">args</span>: <span class="built_in">any</span>[]) =&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">introduce</span>(): <span class="built_in">void</span></span><br><span class="line">    <span class="title function_">getTime</span>(): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用装饰器重写toString方法 + 封闭其原型对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">customToString</span>(<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 向被装饰类的原型上添加自定义的 toString 方法</span></span><br><span class="line">    target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 封闭其原型对象，禁止随意操作其原型对象</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">seal</span>(target.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个装饰器，为类添加日志功能和创建时间</span></span><br><span class="line"><span class="keyword">function</span> <span class="title class_">LogTime</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Constructor</span>&gt;(<span class="attr">target</span>: T) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> target &#123;</span><br><span class="line">        <span class="attr">createdTime</span>: <span class="title class_">Date</span>;</span><br><span class="line">        <span class="title function_">constructor</span>(<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">            <span class="variable language_">super</span>(...args);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">createdTime</span> = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">// 记录对象创建时间</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">getTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">`该对象创建时间为：<span class="subst">$&#123;<span class="variable language_">this</span>.createdTime&#125;</span>`</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个装饰器工厂 LogInfo，它接受一个参数 n，返回一个类装饰器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">LogInfo</span>(<span class="params"><span class="attr">n</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 装饰器函数，target 是被装饰的类</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">        target.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">introduce</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我的名字：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，我的年龄：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@customToString</span></span><br><span class="line"><span class="meta">@LogInfo</span>(<span class="number">3</span>)</span><br><span class="line"><span class="meta">@LogTime</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你好呀！&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">toString</span>()) <span class="comment">// &#123;&quot;name&quot;:&quot;张三&quot;,&quot;age&quot;:18,&quot;createdTime&quot;:&quot;2024-11-22T02:49:25.234Z&quot;&#125;</span></span><br><span class="line">p1.<span class="title function_">introduce</span>() <span class="comment">// 打印3次：我的名字：张三，我的年龄：18</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">getTime</span>()) <span class="comment">// 该对象创建时间为：Fri Nov 22 2024 10:50:19 GMT+0800 (中国标准时间)</span></span><br></pre></td></tr></table></figure><br><h3 id="五、属性装饰器"><a href="#五、属性装饰器" class="headerlink" title="五、属性装饰器"></a><strong><font color='red'>五、属性装饰器</font></strong></h3><h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a><strong><font color='#10c300'>基本语法</font></strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  参数说明：</span></span><br><span class="line"><span class="comment">    ○ target: 对于静态属性来说值是类，对于实例属性来说值是类的原型对象。</span></span><br><span class="line"><span class="comment">    ○ propertyKey: 属性名。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(target, propertyKey)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@Demo</span> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="meta">@Demo</span> <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="meta">@Demo</span> <span class="keyword">static</span> <span class="attr">school</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br></pre></td></tr></table></figure><br><h4 id="关于属性遮蔽"><a href="#关于属性遮蔽" class="headerlink" title="关于属性遮蔽"></a><strong><font color='#10c300'>关于属性遮蔽</font></strong></h4><blockquote><p>常规逻辑：给实例对象this添加一个age属性，js会先查看是否有这个属性，没有就查看原型对象上是否有。如下代码在给原型对象添加age属性之前就已经new了一个实例对象，因此实例age是18 原型对象的age是130</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/ 常规</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">P1</span> = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;小明&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> value = <span class="number">130</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">v</span>) &#123;</span><br><span class="line">        value = v</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">P1</span>);  <span class="comment">// &#123;name: &#x27;小明&#x27;, age: 18&#125;  原型对象上age是130</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202411251647729.png" alt="image-20241125164721617"></p><blockquote><p>**属性遮蔽：**如下代码中：当构造器中的<code>this.age = age</code>试图在实例上赋值时，实际上是调用了原型上<code>age</code>属性的<code>set</code>方法。</p><p>逻辑：第一次执行到this.age &#x3D; age的时候。发现没有age就在原型对象找执行get方法这时候发现age是130，往下执行new一个实例对象的时候，因为这时候的age是原型对象中的，因此会执行set函数，将18赋值给age</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> value = <span class="number">130</span></span><br><span class="line"><span class="comment">// 使用defineProperty给Person原型添加age属性，并配置对应的get与set</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">val</span>) &#123;</span><br><span class="line">    value = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1)</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202411251701230.png" alt="image-20241125170107136"></p><br><h4 id="应用举例"><a href="#应用举例" class="headerlink" title="应用举例"></a><strong><font color='#10c300'>应用举例</font></strong></h4><blockquote><p>需求：定义一个<code>State</code>属性装饰器，来监视属性的修改。</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明一个装饰器函数 State，用于捕获数据的修改</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">State</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 存储属性的内部值</span></span><br><span class="line">    <span class="keyword">let</span> key = <span class="string">`__<span class="subst">$&#123;propertyKey&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 Object.defineProperty 替换类的原始属性</span></span><br><span class="line">    <span class="comment">// 重新定义属性，使其使用自定义的 getter 和 setter</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(target, propertyKey, &#123;</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>[key]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">set</span>(<span class="params"><span class="attr">newVal</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;propertyKey&#125;</span>的最新值为：<span class="subst">$&#123;newVal&#125;</span>`</span>);</span><br><span class="line">            <span class="variable language_">this</span>[key] = newVal</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="comment">//使用State装饰器</span></span><br><span class="line">    <span class="meta">@State</span> <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    school = <span class="string">&#x27;atguigu&#x27;</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;李四&#x27;</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">p1.<span class="property">age</span> = <span class="number">80</span></span><br><span class="line">p2.<span class="property">age</span> = <span class="number">90</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;------------------&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">age</span>) <span class="comment">//80</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">age</span>) <span class="comment">//90</span></span><br></pre></td></tr></table></figure><br><h3 id="六、方法装饰器"><a href="#六、方法装饰器" class="headerlink" title="六、方法装饰器"></a><strong><font color='red'>六、方法装饰器</font></strong></h3><h4 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a><strong><font color='#10c300'>基本语法</font></strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  参数说明：</span></span><br><span class="line"><span class="comment">    ○ target: 对于静态方法来说值是类，对于实例方法来说值是类的原型对象。</span></span><br><span class="line"><span class="comment">    ○ propertyKey:方法的名称。</span></span><br><span class="line"><span class="comment">    ○ descriptor: 方法的描述对象，其中value属性是被装饰的方法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PropertyDescriptor  自带的类型</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(target)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(propertyKey)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(descriptor)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="comment">// Demo装饰实例方法</span></span><br><span class="line">    <span class="meta">@Demo</span> <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好，我的名字：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，我的年龄：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Demo装饰静态方法</span></span><br><span class="line">    <span class="meta">@Demo</span> <span class="keyword">static</span> <span class="title function_">isAdult</span>(<span class="params"><span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">p1.<span class="title function_">speak</span>()</span><br></pre></td></tr></table></figure><br><h4 id="应用举例-1"><a href="#应用举例-1" class="headerlink" title="应用举例"></a><strong><font color='#10c300'>应用举例</font></strong></h4><ol><li>定义一个<code>Logger</code>方法装饰器，用于在方法执行前和执行后，均追加一些额外逻辑。</li><li>定义一个<code>Validate</code>方法装饰器，用于验证数据。</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Logger</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 保存原始方法</span></span><br><span class="line">    <span class="keyword">const</span> original = descriptor.<span class="property">value</span>;</span><br><span class="line">    <span class="comment">// 替换原始方法</span></span><br><span class="line">    descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;propertyKey&#125;</span>开始执行......`</span>)</span><br><span class="line">        <span class="keyword">const</span> result = original.<span class="title function_">call</span>(<span class="variable language_">this</span>, ...args)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;propertyKey&#125;</span>执行完毕......`</span>)</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Validate</span>(<span class="params"><span class="attr">maxValue</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">        <span class="comment">// 保存原始方法</span></span><br><span class="line">        <span class="keyword">const</span> original = descriptor.<span class="property">value</span>;</span><br><span class="line">        <span class="comment">// 替换原始方法</span></span><br><span class="line">        descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">            <span class="comment">// 自定义的验证逻辑</span></span><br><span class="line">            <span class="keyword">if</span> (args[<span class="number">0</span>] &gt; maxValue) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;年龄非法！&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 如果所有参数都符合要求，则调用原始方法</span></span><br><span class="line">            <span class="keyword">return</span> original.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="meta">@Logger</span> <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好，我的名字：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，我的年龄：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Validate</span>(<span class="number">120</span>)</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">isAdult</span>(<span class="params"><span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">p1.<span class="title function_">speak</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="title function_">isAdult</span>(<span class="number">100</span>))</span><br></pre></td></tr></table></figure><br><h3 id="七、访问器装饰器"><a href="#七、访问器装饰器" class="headerlink" title="七、访问器装饰器"></a><strong><font color='red'>七、访问器装饰器</font></strong></h3><h4 id="基本语法-2"><a href="#基本语法-2" class="headerlink" title="基本语法"></a><strong><font color='#10c300'>基本语法</font></strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  参数说明：</span></span><br><span class="line"><span class="comment">    ○ target: </span></span><br><span class="line"><span class="comment">        1. 对于实例访问器来说值是【所属类的原型对象】。</span></span><br><span class="line"><span class="comment">        2. 对于静态访问器来说值是【所属类】。</span></span><br><span class="line"><span class="comment">    ○ propertyKey:访问器的名称。</span></span><br><span class="line"><span class="comment">    ○ descriptor: 描述对象。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(propertyKey)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(descriptor)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="meta">@Demo</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">address</span>()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;北京宏福科技园&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Demo</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">get</span> <span class="title function_">country</span>()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;中国&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="应用举例-2"><a href="#应用举例-2" class="headerlink" title="应用举例"></a><strong><font color='#10c300'>应用举例</font></strong></h4><p>需求：对<code>Weather</code>类的<code>temp</code>属性的<code>set</code>访问器进行限制，设置的最低温度<code>-50</code>，最高温度<code>50</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">RangeValidate</span>(<span class="params"><span class="attr">min</span>: <span class="built_in">number</span>, <span class="attr">max</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">        <span class="comment">// 保存原始的 setter 方法，以便在后续调用中使用</span></span><br><span class="line">        <span class="keyword">const</span> originalSetter = descriptor.<span class="property">set</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 重写 setter 方法，加入范围验证逻辑</span></span><br><span class="line">        descriptor.<span class="property">set</span> = <span class="keyword">function</span> (<span class="params"><span class="attr">value</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">            <span class="comment">// 检查设置的值是否在指定的最小值和最大值之间</span></span><br><span class="line">            <span class="keyword">if</span> (value &lt; min || value &gt; max) &#123;</span><br><span class="line">                <span class="comment">// 如果值不在范围内，抛出错误</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`<span class="subst">$&#123;propertyKey&#125;</span>的值应该在 <span class="subst">$&#123;min&#125;</span> 到 <span class="subst">$&#123;max&#125;</span>之间！`</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果值在范围内，且原始 setter 方法存在，则调用原始 setter 方法</span></span><br><span class="line">            <span class="keyword">if</span> (originalSetter) &#123;</span><br><span class="line">                originalSetter.<span class="title function_">call</span>(<span class="variable language_">this</span>, value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Weather</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">_temp</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">_temp</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_temp</span> = _temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设置温度范围在 -50 到 50 之间</span></span><br><span class="line">    <span class="meta">@RangeValidate</span>(-<span class="number">50</span>, <span class="number">50</span>)</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">temp</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_temp</span> = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">temp</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_temp</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> w1 = <span class="keyword">new</span> <span class="title class_">Weather</span>(<span class="number">25</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(w1)</span><br><span class="line">w1.<span class="property">temp</span> = <span class="number">67</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(w1)</span><br></pre></td></tr></table></figure><br><h3 id="八、参数装饰器"><a href="#八、参数装饰器" class="headerlink" title="八、参数装饰器"></a><strong><font color='red'>八、参数装饰器</font></strong></h3><h4 id="基本语法-3"><a href="#基本语法-3" class="headerlink" title="基本语法"></a><strong><font color='#10c300'>基本语法</font></strong></h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  参数说明：</span></span><br><span class="line"><span class="comment">    ○ target:</span></span><br><span class="line"><span class="comment">      1.如果修饰的是【实例方法】的参数，target 是类的【原型对象】。</span></span><br><span class="line"><span class="comment">      2.如果修饰的是【静态方法】的参数，target 是【类】。</span></span><br><span class="line"><span class="comment">    ○ propertyKey：参数所在的方法的名称。</span></span><br><span class="line"><span class="comment">    ○ parameterIndex: 参数在函数参数列表中的索引，从 0 开始。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">object</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">parameterIndex</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(target)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(propertyKey)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(parameterIndex)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span></span>) &#123; &#125;</span><br><span class="line">  <span class="title function_">speak</span>(<span class="params"><span class="meta">@Demo</span> <span class="attr">message1</span>: <span class="built_in">any</span>, <span class="attr">mesage2</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>想对说：<span class="subst">$&#123;message1&#125;</span>，<span class="subst">$&#123;mesage2&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="应用举例-3"><a href="#应用举例-3" class="headerlink" title="应用举例"></a><strong><font color='#10c300'>应用举例</font></strong></h4><p>需求：定义方法装饰器<code>Validate</code>，同时搭配参数装饰器<code>NotNumber</code>，来对<code>speak</code>方法的参数类型进行限制。</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">NotNumber</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">any</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">parameterIndex</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 初始化或获取当前方法的参数索引列表</span></span><br><span class="line">    <span class="keyword">let</span> <span class="attr">notNumberArr</span>: <span class="built_in">number</span>[] = target[<span class="string">`__notNumber_<span class="subst">$&#123;propertyKey&#125;</span>`</span>] || [];</span><br><span class="line">    <span class="comment">// 将当前参数索引添加到列表中</span></span><br><span class="line">    notNumberArr.<span class="title function_">push</span>(parameterIndex);</span><br><span class="line">    <span class="comment">// 将列表存储回目标对象</span></span><br><span class="line">    target[<span class="string">`__notNumber_<span class="subst">$&#123;propertyKey&#125;</span>`</span>] = notNumberArr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法装饰器定义</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Validate</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">any</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> method = descriptor.<span class="property">value</span>;</span><br><span class="line">    descriptor.<span class="property">value</span> = <span class="keyword">function</span> (<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">        <span class="comment">// 获取被标记为不能为空的参数索引列表</span></span><br><span class="line">        <span class="keyword">const</span> <span class="attr">notNumberArr</span>: <span class="built_in">number</span>[] = target[<span class="string">`__notNumber_<span class="subst">$&#123;propertyKey&#125;</span>`</span>] || [];</span><br><span class="line">        <span class="comment">// 检查参数是否为 null 或 undefined</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> index <span class="keyword">of</span> notNumberArr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> args[index] === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`方法 <span class="subst">$&#123;propertyKey&#125;</span> 中索引为 <span class="subst">$&#123;index&#125;</span> 的参数不能是数字！`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 调用原始方法</span></span><br><span class="line">        <span class="keyword">return</span> method.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> descriptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Validate</span></span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"><span class="meta">@NotNumber</span> <span class="attr">message1</span>: <span class="built_in">any</span>, <span class="attr">mesage2</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>想对说：<span class="subst">$&#123;message1&#125;</span>，<span class="subst">$&#123;mesage2&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">s1.<span class="title function_">speak</span>(<span class="number">100</span>, <span class="number">200</span>);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、简介&quot;&gt;&lt;a href=&quot;#一、简介&quot; class=&quot;headerlink&quot; title=&quot;一、简介&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、简介&lt;/font&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;装饰器本质是一种特殊的&lt;st</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="typeScript" scheme="http://example.com/tags/typeScript/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript快速上手</title>
    <link href="http://example.com/posts/9dd4ce81.html"/>
    <id>http://example.com/posts/9dd4ce81.html</id>
    <published>2025-08-17T15:51:08.000Z</published>
    <updated>2026-01-27T15:41:13.665Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、-TypeScript简介"><a href="#一、-TypeScript简介" class="headerlink" title="一、 TypeScript简介"></a><strong><font color='red'>一、 TypeScript简介</font></strong></h3><ol><li><p>TypeScript 由**<code>微软</code><strong>开发，是基于JavaScript 的一个</strong><code>扩展语言</code>**。</p></li><li><p>TypeScript 包含了JavaScript 的所有内容，即: TypeScript 是JavaScript的**<code>超集</code>**。</p></li><li><p>TypeScript 增加了：静态类型检查、接口、泛型等很多**<code>现代开发特性</code><strong>，因此更适合</strong><code>大型项目</code>**的开发。</p></li><li><p>TypeScript 需要**<code>编译</code>**为JavaScript ，然后交给浏览器或其他JavaScript 运行环境执行。</p></li></ol><h3 id="二、为何需要TypeScript"><a href="#二、为何需要TypeScript" class="headerlink" title="二、为何需要TypeScript"></a><strong><font color='red'>二、为何需要TypeScript</font></strong></h3><h4 id="2-1、今非昔比的JavaScript-了解"><a href="#2-1、今非昔比的JavaScript-了解" class="headerlink" title="2.1、今非昔比的JavaScript (了解) "></a><strong><font color='#10c300'>2.1、今非昔比的JavaScript (了解) </font></strong></h4><ul><li>JavaScript当年诞生时的定位是浏览器**<code>脚本语言</code><strong>，用于在网页中嵌入一些</strong><code>简单的逻辑</code>**，而且代码量很少。</li><li>随着时间的推移，JavaScript变得越来越流行，如今的JavaScript已经可以**<code>全栈编程</code>**了。</li><li>现如今的JavaScript**<code>应用场景</code><strong>比当年</strong><code>丰富</code><strong>的多，</strong><code>代码量</code><strong>也比当年</strong><code>大很多</code>**，随便一 个JavaScript项目的代码量，可以轻松的达到几万行，甚至十几万行!</li><li>然而JavaScript当年 “<strong><code>出生简陋</code></strong>“，没考虑到如今的应用场景和代码量，逐渐的就出现了**<code>很多困扰</code>**。</li></ul><h4 id="2-2、JavaScript中的困扰"><a href="#2-2、JavaScript中的困扰" class="headerlink" title="2.2、JavaScript中的困扰"></a><strong><font color='#10c300'>2.2、JavaScript中的困扰</font></strong></h4><h5 id="1）、不清不楚的数据类型"><a href="#1）、不清不楚的数据类型" class="headerlink" title="1）、不清不楚的数据类型"></a><strong><font color='cornflowerblue'>1）、不清不楚的数据类型</font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> welcome = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="title function_">welcome</span>() <span class="comment">//此行报错: TypeError: welcome is not a function</span></span><br></pre></td></tr></table></figure><h5 id="2）、有漏洞的逻辑"><a href="#2）、有漏洞的逻辑" class="headerlink" title="2）、有漏洞的逻辑"></a><strong><font color='cornflowerblue'>2）、有漏洞的逻辑</font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="title class_">Date</span>.<span class="title function_">now</span>() % <span class="number">2</span> ? <span class="string">&#x27;奇数&#x27;</span> : <span class="string">&#x27;偶数 &#x27;</span></span><br><span class="line"><span class="keyword">if</span> (str !== <span class="string">&#x27;奇数&#x27;</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">&#x27;偶数&#x27;</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;world&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3）、访问不存在的属性"><a href="#3）、访问不存在的属性" class="headerlink" title="3）、访问不存在的属性"></a><strong><font color='cornflowerblue'>3）、访问不存在的属性</font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">15</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> area = obj.<span class="property">width</span> * obj.<span class="property">heigth</span>; <span class="comment">// heigth单词写错找不到这个属性</span></span><br></pre></td></tr></table></figure><h5 id="4）、低级的拼写错误"><a href="#4）、低级的拼写错误" class="headerlink" title="4）、低级的拼写错误"></a><strong><font color='cornflowerblue'>4）、低级的拼写错误</font></strong></h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> message = <span class="string">&#x27;hello , world&#x27;</span></span><br><span class="line">message.<span class="title function_">toUperCase</span>() <span class="comment">// toUperCase拼写错误</span></span><br></pre></td></tr></table></figure><h4 id="2-3、静态类型检查"><a href="#2-3、静态类型检查" class="headerlink" title="2.3、静态类型检查"></a><strong><font color='#10c300'>2.3、静态类型检查</font></strong></h4><ul><li>在代码运行前进行检查，发现代码的错误或不合理之处，减小运行时异常的出现的几率，此种检查叫**<code>「静态类型检查』</code><strong>，TypeScript 和核心就是「静态类型检查』，简言之就是</strong><code>把运行时的错误前置</code>**。</li><li>同样的功能，TypeScript的代码量要**<code>大于</code><strong>JavaScript，但由于 TypeScript 的代码结构更加清晰，在后期代码的维护中 TypeScript 却</strong><code>远胜于</code>** JavaScript。</li></ul><br><h3 id="三、编译TypeScript"><a href="#三、编译TypeScript" class="headerlink" title="三、编译TypeScript"></a><strong><font color='red'>三、编译TypeScript</font></strong></h3><p>ypeScript 官方提供的编译器叫做 tsc，可以将 TypeScript 脚本编译成 JavaScript 脚本。</p><blockquote><p>浏览器不能直接运行TypeScript代码，需要编译为JavaScript再交由浏览器解析器执行。</p></blockquote><h4 id="3-1、命令行编译"><a href="#3-1、命令行编译" class="headerlink" title="3.1、命令行编译"></a><strong><font color='#10c300'>3.1、命令行编译</font></strong></h4><blockquote><p>要把.ts 文件编译为.js 文件，需要配置TypeScript 的编译环境，步骤如下:</p></blockquote><p><strong>1）、创建一个demo.ts文件</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;person.name&#125;</span>,我今年<span class="subst">$&#123;person.age&#125;</span>岁了`</span>)</span><br></pre></td></tr></table></figure><p><strong>2）、全局安装TypeScript</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i typescript -g</span><br><span class="line">tsc -v 查看版本号</span><br></pre></td></tr></table></figure><p><strong>3）、使用命令编译.ts文件</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc demo.ts</span><br></pre></td></tr></table></figure><br><h4 id="3-2、自动化编译"><a href="#3-2、自动化编译" class="headerlink" title="3.2、自动化编译"></a><strong><font color='#10c300'>3.2、自动化编译</font></strong></h4><p><strong>1）、创建TypeScript编译控制文件</strong></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --init</span><br></pre></td></tr></table></figure><blockquote><p>工程中会生成一个tsconfig. json配置文件，其中包含着很多编译时的配置。<br>观察发现，默认编译的JS版本是ES7，我们可以手动调整为其他版本。</p></blockquote><p><strong>2）、监视目录中的.ts 文件变化</strong></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tsc --watch  // 监视整个工程的ts文件</span><br><span class="line">tsc --watch index.ts   // 监视指定的ts文件</span><br></pre></td></tr></table></figure><p><strong>3）、小优化：当编译出错时不生成.js 文件</strong></p><p>在tsconfig. json文件中配置 “noEmitOnError”: true,  </p><br><h3 id="四、ts-node-模块"><a href="#四、ts-node-模块" class="headerlink" title="四、ts-node 模块"></a><strong><font color='red'>四、ts-node 模块</font></strong></h3><p><a href="https://github.com/TypeStrong/ts-node">ts-node</a> 是一个非官方的 npm 模块，可以直接运行 TypeScript 代码。</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">全局安装</span><br><span class="line">npm install -g ts-node</span><br><span class="line"></span><br><span class="line">在当前目录运行 TypeScript 脚本</span><br><span class="line">ts-node index.ts</span><br></pre></td></tr></table></figure><p>如果只是想简单运行 TypeScript 代码看看结果，ts-node 不失为一个便捷的方法。</p><br><h3 id="五、类型声明"><a href="#五、类型声明" class="headerlink" title="五、类型声明"></a><strong><font color='red'>五、类型声明</font></strong></h3><p>使⽤ : 来对变量或函数形参，进⾏类型声明：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">string</span> <span class="comment">//变量a只能存储字符串</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>: <span class="built_in">number</span> <span class="comment">//变量b只能存储数值</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>: <span class="built_in">boolean</span> <span class="comment">//变量c只能存储布尔值</span></span><br><span class="line"> </span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">a = <span class="number">100</span> <span class="comment">//警告：不能将类型“number”分配给类型“string”</span></span><br><span class="line"></span><br><span class="line">b = <span class="number">666</span></span><br><span class="line">b = <span class="string">&#x27;你好&#x27;</span><span class="comment">//警告：不能将类型“string”分配给类型“number”</span></span><br><span class="line"></span><br><span class="line">c = <span class="literal">true</span></span><br><span class="line">c = <span class="number">666</span> <span class="comment">//警告：不能将类型“number”分配给类型“boolean”</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数x必须是数字，参数y也必须是数字，函数返回值也必须是数字</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"><span class="attr">x</span>:<span class="built_in">number</span>,<span class="attr">y</span>:<span class="built_in">number</span></span>):<span class="built_in">number</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>,<span class="number">200</span>)</span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>,<span class="string">&#x27;200&#x27;</span>) <span class="comment">//警告：类型“string”的参数不能赋给类型“number”的参数</span></span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>,<span class="number">200</span>,<span class="number">300</span>) <span class="comment">//警告：应有 2 个参数，但获得 3 个</span></span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>) </span><br></pre></td></tr></table></figure><p>在 : 后也可以写字⾯量类型，不过实际开发中⽤的不多。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="string">&#x27;你好&#x27;</span> <span class="comment">//a的值只能为字符串“你好”</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>: <span class="number">100</span> <span class="comment">//b的值只能为数字100</span></span><br><span class="line"></span><br><span class="line">a = <span class="string">&#x27;欢迎&#x27;</span><span class="comment">//警告：不能将类型“&quot;欢迎&quot;”分配给类型“&quot;你好&quot;”</span></span><br><span class="line">b = <span class="number">200</span> <span class="comment">//警告：不能将类型“200”分配给类型“100”</span></span><br></pre></td></tr></table></figure><br><h3 id="六、类型推断"><a href="#六、类型推断" class="headerlink" title="六、类型推断"></a><strong><font color='red'>六、类型推断</font></strong></h3><p>TS 会根据我们的代码，进⾏类型推导，例如下⾯代码中的变量 d ，只能存储数字</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> d = -<span class="number">99</span> <span class="comment">// TypeScript会推断出变量d的类型是数字</span></span><br><span class="line">d = <span class="literal">false</span> <span class="comment">// 警告：不能将类型“boolean”分配给类型“number”</span></span><br></pre></td></tr></table></figure><blockquote><p>但要注意，类型推断不是万能的，⾯对复杂类型时推断容易出问题，所以尽量还是明确的编写类<br>型声明！</p></blockquote><br><h3 id="七、类型总览"><a href="#七、类型总览" class="headerlink" title="七、类型总览"></a><strong><font color='red'>七、类型总览</font></strong></h3><h4 id="7-1、JavaScript-中的数据类型"><a href="#7-1、JavaScript-中的数据类型" class="headerlink" title="7.1、JavaScript 中的数据类型"></a><strong><font color='#10c300'>7.1、JavaScript 中的数据类型</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">① string</span><br><span class="line">② number</span><br><span class="line">③ boolean</span><br><span class="line">④ <span class="literal">null</span></span><br><span class="line">⑤ <span class="literal">undefined</span></span><br><span class="line">⑥ bigint</span><br><span class="line">⑦ symbol</span><br><span class="line">⑧ object</span><br><span class="line">备注：其中 object 包含： <span class="title class_">Array</span> 、 <span class="title class_">Function</span> 、 <span class="title class_">Date</span> 、 <span class="title class_">Error</span> 等......</span><br></pre></td></tr></table></figure><h4 id="7-2、TypeScript-中的数据类型"><a href="#7-2、TypeScript-中的数据类型" class="headerlink" title="7.2、TypeScript 中的数据类型"></a><strong><font color='#10c300'>7.2、TypeScript 中的数据类型</font></strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 上述所有 <span class="title class_">JavaScript</span> 类型</span><br><span class="line"><span class="number">2.</span> 六个新类型：</span><br><span class="line">    ① any</span><br><span class="line">    ② unknown</span><br><span class="line">    ③ never</span><br><span class="line">    ④ <span class="keyword">void</span></span><br><span class="line">    ⑤ tuple</span><br><span class="line">    ⑥ enum</span><br><span class="line"><span class="number">3.</span> 两个⽤于⾃定义类型的⽅式：</span><br><span class="line">    ① type</span><br><span class="line">    ② interface</span><br></pre></td></tr></table></figure><h4 id="7-3、注意点"><a href="#7-3、注意点" class="headerlink" title="7.3、注意点"></a><strong><font color='#10c300'>7.3、注意点</font></strong></h4><blockquote><p>在 JavaScript 中的这些内置构造函数： Number 、 String 、 Boolean ，⽤于创建对应的包装对象， 在⽇常开发时很少使⽤，在 TypeScript 中也是同理，所以在 TypeScript 中进⾏类型声明时，通常都是⽤⼩写的 number 、 string 、 boolean</p></blockquote><p>例如下⾯代码：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">str1</span>: <span class="built_in">string</span></span><br><span class="line">str1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="comment">// str1 = new String(&#x27;hello&#x27;) //报错</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> str1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str2</span>: <span class="title class_">String</span></span><br><span class="line">str2 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str2 = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;hello&#x27;</span>) <span class="comment">// 创建一个包装对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> str2) <span class="comment">// object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str2.<span class="title function_">valueOf</span>()) <span class="comment">// &#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><ol><li><p>原始类型 VS 包装对象<br> **原始类型：**如 number 、 string 、 boolean ，在 JavaScript 中是简单数据类型，它们在内存中占⽤空间少，处理速度快。<br> **包装对象：**如 Number 对象、 String 对象、 Boolean 对象，是复杂类型，在内存中占⽤更多空间，在⽇常开发时很少由开发⼈员⾃⼰创建包装对象。</p></li><li><p>⾃动装箱：JavaScript 在必要时会⾃动将原始类型包装成对象，以便调⽤⽅法或访问属性</p></li></ol></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原始类型字符串</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当访问str.length时，JavaScript引擎做了以下⼯作：</span></span><br><span class="line"><span class="keyword">let</span> size = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 1. ⾃动装箱：创建⼀个临时的String对象包装原始字符串</span></span><br><span class="line">    <span class="keyword">let</span> tempStringObject = <span class="keyword">new</span> <span class="title class_">String</span>(str);</span><br><span class="line">    <span class="comment">// 2. 访问String对象的length属性</span></span><br><span class="line">    <span class="keyword">let</span> lengthValue = tempStringObject.<span class="property">length</span>;</span><br><span class="line">    <span class="comment">// 3. 销毁临时对象，返回⻓度值</span></span><br><span class="line">    <span class="comment">// （JavaScript引擎⾃动处理对象销毁，开发者⽆感知）</span></span><br><span class="line">    <span class="keyword">return</span> lengthValue;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(size); <span class="comment">// 输出: 5</span></span><br></pre></td></tr></table></figure><br><h3 id="八、常用类型与语法"><a href="#八、常用类型与语法" class="headerlink" title="八、常用类型与语法"></a><strong><font color='red'>八、常用类型与语法</font></strong></h3><h4 id="8-1、any"><a href="#8-1、any" class="headerlink" title="8.1、any"></a><strong><font color='#10c300'>8.1、any</font></strong></h4><blockquote><p><code>any</code> 的含义是：任意类型，⼀旦将变量类型限制为 any ，那就意味着放弃了对该变量的类型检查。</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 明确的表示a的类型是 any —— 【显式的any】</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">any</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下对a的赋值，均⽆警告</span></span><br><span class="line">a = <span class="number">100</span></span><br><span class="line">a = <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">a = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有明确的表示b的类型是any，但TS主动推断出来b是any —— 隐式的any</span></span><br><span class="line"><span class="keyword">let</span> b</span><br><span class="line"></span><br><span class="line"><span class="comment">//以下对b的赋值，均⽆警告</span></span><br><span class="line">b = <span class="number">100</span></span><br><span class="line">b = <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">b = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 注意点：any类型的变量，可以赋值给任意类型的变量 */</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>:<span class="built_in">any</span></span><br><span class="line">c = <span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="built_in">string</span></span><br><span class="line">x = c <span class="comment">// ⽆警告</span></span><br></pre></td></tr></table></figure><br><h4 id="8-2、unknown"><a href="#8-2、unknown" class="headerlink" title="8.2、unknown"></a><strong><font color='#10c300'>8.2、unknown</font></strong></h4><blockquote><p><code>unknown</code> 的含义是：未知类型，适⽤于：起初不确定数据的具体类型，要后期才能确定</p></blockquote><p><font color='orange' size="3">1）、unknown 可以理解为⼀个类型安全的 any </font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置a的类型为unknown</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">unknown</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//以下对a的赋值，均符合规范</span></span><br><span class="line">a = <span class="number">100</span></span><br><span class="line">a = <span class="literal">false</span></span><br><span class="line">a = <span class="string">&#x27;你好&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置x的数据类型为string</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="built_in">string</span></span><br><span class="line">x = a <span class="comment">//警告：不能将类型“unknown”分配给类型“string”</span></span><br></pre></td></tr></table></figure><p><font color='orange' size="3">2）、unknown 会强制开发者在使用之前进行类型检查，从而提供更强的类型安全性</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置a的类型为unknown</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">unknown</span></span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>:<span class="built_in">string</span></span><br><span class="line"><span class="comment">// x = a // 不能将类型“unknown”分配给类型“string”。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//解决</span></span><br><span class="line"><span class="comment">//第⼀种⽅式：加类型判断</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> a === <span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line"> x = a</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第⼆种⽅式：加断⾔</span></span><br><span class="line">x = a <span class="keyword">as</span> <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第三种⽅式：加断⾔</span></span><br><span class="line">x = &lt;<span class="built_in">string</span>&gt;a</span><br></pre></td></tr></table></figure><p><font color='orange' size="3">3）、读取 any 类型数据的任何属性都不会报错，而 unknown 正好与之相反</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">str1</span>: <span class="built_in">string</span></span><br><span class="line">str1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str1.<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str2</span>: <span class="built_in">any</span></span><br><span class="line">str2 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str2.<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str3</span>: <span class="built_in">unknown</span></span><br><span class="line">str3 = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">str3.<span class="title function_">toUpperCase</span>() <span class="comment">//警告：“str3”的类型为“未知”</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤断⾔强制指定str3的类型为string</span></span><br><span class="line">(str3 <span class="keyword">as</span> <span class="built_in">string</span>).<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br><span class="line">(&lt;<span class="built_in">string</span>&gt;str3).<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br></pre></td></tr></table></figure><br><h4 id="8-3、never"><a href="#8-3、never" class="headerlink" title="8.3、never"></a><strong><font color='#10c300'>8.3、never</font></strong></h4><blockquote><p><code>never</code> 的含义是：任何值都不是，即：不能有值，例如 undefined 、 null 、 ‘’ 、 0 都不⾏！</p><p>注意：在函数中不写return，默认返回undeifned。</p></blockquote><p><font color='orange' size="3">1）、几乎不用 never 去直接限制变量，因为没有意义，例如：</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 指定a的类型为never，那就意味着a以后不能存任何的数据了 */</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">never</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下对a的所有赋值都会有警告</span></span><br><span class="line">a = <span class="number">1</span></span><br><span class="line">a = <span class="literal">true</span></span><br><span class="line">a = <span class="literal">undefined</span></span><br><span class="line">a = <span class="literal">null</span></span><br></pre></td></tr></table></figure><p><font color='orange' size="3">2）、never ⼀般是 TypeScript 主动推断出来的，例如：</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定a的类型为string</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">string</span></span><br><span class="line"><span class="comment">// 给a设置⼀个值</span></span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> a === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">toUpperCase</span>())</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// TypeScript会推断出此处的a是never，因为没有任何⼀个值符合此处的逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font color='orange' size="3">3）、never 也可用于限制函数的返回值</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 限制throwError函数不需要有任何返回值，任何值都不⾏，像undeifned、null都不⾏</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throwError</span>(<span class="params"><span class="attr">str</span>: <span class="built_in">string</span></span>): <span class="built_in">never</span> &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;程序异常退出:&#x27;</span> + str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="8-4、void"><a href="#8-4、void" class="headerlink" title="8.4、void "></a><strong><font color='#10c300'>8.4、void </font></strong></h4><blockquote><p><code>void</code> 的含义是空，即：函数不返回任何值，调⽤者也不应依赖其返回值进⾏<strong><code>任何操作</code></strong>，即不能对返回值进行操作！</p></blockquote><p><font color='orange' size="3">1）、void 通常用于函数返回值声明</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">logMessage</span>(<span class="string">&quot;你好&quot;</span>);</span><br></pre></td></tr></table></figure><p>**注意：**编码者没有编写 return 指定函数返回值，所以 logMessage 函数是没有显式返回值的，但会有⼀个隐式返回值 ，是 undefined ，虽然函数返回类型为 void ，但也是可以接受 undefined 的，简单记： undefined 是 void 可以接受的⼀种“空”。</p><p><font color='orange' size="3">2）、以下写法均符合规范</font></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ⽆警告</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ⽆警告</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ⽆警告</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><font color='orange' size="3">3）、那限制函数返回值时，是不是 undefined 和 void 就没区别呢？</font></p><p>有区别。因为还有这句话 ：<strong>【返回值类型为 void 的函数，调用者不应依赖其返回值进行任何操作！】</strong></p><p>对比下面两段代码：<strong>可知返回类型为void的不能操作其返回值，返回类型为undefined的可操作其返回值</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">logMessage</span>(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (result) &#123;</span><br><span class="line">  <span class="comment">// 此⾏报错：⽆法测试 &quot;void&quot; 类型的表达式的真实性</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;logMessage有返回值&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="literal">undefined</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">logMessage</span>(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (result) &#123;</span><br><span class="line">  <span class="comment">// 此⾏⽆警告</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;logMessage有返回值&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>理解 void 与 undefined</strong><br>void 是⼀个广泛的概念，⽤来表达“空”，⽽ undefined 则是这种“空”的具体实现。</p><p>​因此可以说 undefined 是 void 能接受的⼀种“空”的状态。</p><p>​也可以理解为： void 包含 undefined ，但 void 所表达的语义超越了 undefined ， void 是⼀种意图上的约定，而不仅仅是特定值的限制。 </p></blockquote><p><strong>总结：</strong></p><p>如果⼀个函数返回类型为 void ，那么：</p><ol><li>从语法上讲：函数是可以返回 undefined 的，至于显式返回，还是隐式返回，这无所谓！</li><li>从语义上讲：函数调用者不应关心函数返回的值，也不应依赖返回值进行任何操作！即使我们知道它返回了 undefined 。</li></ol><br><h4 id="8-5、object"><a href="#8-5、object" class="headerlink" title="8.5、object"></a><strong><font color='#10c300'>8.5、object</font></strong></h4><blockquote><p>关于 object 与 Object ，直接说结论：实际开发中⽤的相对较少，因为范围太⼤了。</p></blockquote><h5 id="1）、object（小写）和Object（大写）"><a href="#1）、object（小写）和Object（大写）" class="headerlink" title="1）、object（小写）和Object（大写）"></a><strong><font color='cornflowerblue'>1）、object（小写）和Object（大写）</font></strong></h5><p><strong>object（小写）</strong></p><p><strong><code>object</code></strong> （小写）的含义是：所有**<code>非原始类型</code><strong>，可存储：对象、函数、数组等，由于限制的范围</strong><code>比较宽泛</code><strong>，在实际开发中使用的</strong><code>相对较少</code>**。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>:<span class="built_in">object</span> <span class="comment">//a的值可以是任何【⾮原始类型】，包括：对象、函数、数组等</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码，是将【⾮原始类型】赋给a，所以均符合要求</span></span><br><span class="line">a = &#123;&#125;</span><br><span class="line">a = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line">a = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line">a = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">a = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;&#125;</span><br><span class="line">a = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码，是将【原始类型】赋给a，有警告</span></span><br><span class="line">a = <span class="number">1</span> <span class="comment">// 警告：不能将类型“number”分配给类型“object”</span></span><br><span class="line">a = <span class="literal">true</span> <span class="comment">// 警告：不能将类型“boolean”分配给类型“object”</span></span><br><span class="line">a = <span class="string">&#x27;你好&#x27;</span> <span class="comment">// 警告：不能将类型“string”分配给类型“object” </span></span><br><span class="line">a = <span class="literal">null</span> <span class="comment">// 警告：不能将类型“null”分配给类型“object”</span></span><br><span class="line">a = <span class="literal">undefined</span> <span class="comment">// 警告：不能将类型“undefined”分配给类型“object”</span></span><br></pre></td></tr></table></figure><p><strong>Object（大写）</strong></p><ul><li>官方描述：所有可以调用Object 方法的类型。</li><li>简单记忆：除了 undefined 和 null 的任何值。</li><li>由于限制的范围实在太大了！所以实际开发中使用频率极低。</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">b</span>:<span class="title class_">Object</span> <span class="comment">//b的值必须是Object的实例对象（除去undefined和null的任何值）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码，均⽆警告，因为给a赋的值，都是Object的实例对象</span></span><br><span class="line">b = &#123;&#125;</span><br><span class="line">b = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line">b = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line">b = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">b = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;&#125;</span><br><span class="line">b = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line">b = <span class="number">1</span> <span class="comment">// 1不是Object的实例对象，但其包装对象是Object的实例</span></span><br><span class="line">b = <span class="literal">true</span> <span class="comment">// truue不是Object的实例对象，但其包装对象是Object的实例</span></span><br><span class="line">b = <span class="string">&#x27;你好&#x27;</span> <span class="comment">// “你好”不是Object的实例对象，但其包装对象是Object的实例</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码均有警告</span></span><br><span class="line">b = <span class="literal">null</span> <span class="comment">// 警告：不能将类型“null”分配给类型“Object”</span></span><br><span class="line">b = <span class="literal">undefined</span> <span class="comment">// 警告：不能将类型“undefined”分配给类型“Object”</span></span><br></pre></td></tr></table></figure><br><h5 id="2）、声明对象类型"><a href="#2）、声明对象类型" class="headerlink" title="2）、声明对象类型"></a><strong><font color='cornflowerblue'>2）、声明对象类型</font></strong></h5><p><strong>A. 实际开发中，限制一般对象，通常使用以下形式</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 限制person1对象必须有name属性，age为可选属性</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person1</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>?: <span class="built_in">number</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 含义同上，也能⽤分号做分隔</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person2</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">age</span>?: <span class="built_in">number</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 含义同上，也能⽤换⾏做分隔</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person3</span>: &#123;</span><br><span class="line"> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line"> <span class="attr">age</span>?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如下赋值均可以</span></span><br><span class="line">person1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;</span><br><span class="line">person2 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line">person3 = &#123;<span class="attr">name</span>:<span class="string">&#x27;王五&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如下赋值不合法，因为person3的类型限制中，没有对gender属性的说明</span></span><br><span class="line">person3 = &#123;<span class="attr">name</span>:<span class="string">&#x27;王五&#x27;</span>,<span class="attr">gender</span>:<span class="string">&#x27;男&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><p><strong>B.索引签名： 允许定义对象可以具有<code>任意数量的属性</code>，这些属性的键和类型是可变的，<code>常用于：描述类型不确定的属性，（具有动态属性的对象）</code></strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 限制person对象必须有name属性，可选age属性但值必须是数字，同时可以有任意数量、任意类型的其他属性</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123;</span><br><span class="line"> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line"> <span class="attr">age</span>?: <span class="built_in">number</span></span><br><span class="line"> [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">any</span> <span class="comment">// 索引签名，完全可以不⽤key这个单词，换成其他的也可以</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值合法</span></span><br><span class="line">person = &#123;</span><br><span class="line"> <span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line"> <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line"> <span class="attr">gender</span>:<span class="string">&#x27;男&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="3）、声明函数类型"><a href="#3）、声明函数类型" class="headerlink" title="3）、声明函数类型"></a><strong><font color='cornflowerblue'>3）、声明函数类型</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">count</span>: <span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">count = <span class="keyword">function</span> (<span class="params">x, y</span>) &#123;</span><br><span class="line"> <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>备注：</strong></p><ul><li>TypeScript 中的 &#x3D;&gt; 在函数类型声明时表示函数类型，描述其<strong>参数类型和返回类型</strong>。</li><li>JavaScript 中的 &#x3D;&gt; 是⼀种定义函数的语法，是具体的函数实现。</li><li>函数类型声明还可以使用：接口、自定义类型等方式，下文中会详细讲解</li></ul></blockquote><br><h5 id="4）、声明数组类型"><a href="#4）、声明数组类型" class="headerlink" title="4）、声明数组类型"></a><strong><font color='cornflowerblue'>4）、声明数组类型</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: <span class="built_in">string</span>[]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr3</span>:<span class="title class_">Array</span>&lt;&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>?:<span class="built_in">number</span></span><br><span class="line">    [<span class="attr">key</span>:<span class="built_in">string</span>]:<span class="built_in">any</span></span><br><span class="line">&#125;&gt;</span><br><span class="line">    </span><br><span class="line">arr1 = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">arr2 = [<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>]</span><br><span class="line">arr3 = [&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">123</span>,</span><br><span class="line">    <span class="attr">sex</span>:<span class="string">&#x27;male&#x27;</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure><p>备注：上述代码中的 Array<string> 属于泛型，下⽂会详细讲解。</p><br><h4 id="8-6、-tuple"><a href="#8-6、-tuple" class="headerlink" title="8.6、 tuple"></a><strong><font color='#10c300'>8.6、 tuple</font></strong></h4><blockquote><p>元组 (Tuple) 是⼀种特殊的<strong>数组类型</strong>，可以<strong>存储固定数量</strong>的元素，并且每个元素的类型是<strong>已知的</strong>且<strong>可以不同</strong>。元组⽤于精确描述⼀组值的类型， ? 表示可选元素。</p></blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第⼀个元素必须是 string 类型，第⼆个元素必须是 number 类型。</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: [<span class="built_in">string</span>,<span class="built_in">number</span>]</span><br><span class="line"><span class="comment">// 第⼀个元素必须是 number 类型，第⼆个元素是可选的，如果存在，必须是 boolean 类型。</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: [<span class="built_in">number</span>,<span class="built_in">boolean</span>?]</span><br><span class="line"><span class="comment">// 第⼀个元素必须是 number 类型，后⾯的元素可以是任意数量的 string 类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr3</span>: [<span class="built_in">number</span>,...<span class="built_in">string</span>[]]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以赋值</span></span><br><span class="line">arr1 = [<span class="string">&#x27;hello&#x27;</span>,<span class="number">123</span>]</span><br><span class="line">arr2 = [<span class="number">100</span>,<span class="literal">false</span>]</span><br><span class="line">arr2 = [<span class="number">200</span>]</span><br><span class="line">arr3 = [<span class="number">100</span>,<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>]</span><br><span class="line">arr3 = [<span class="number">100</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不可以赋值，arr1声明时是两个元</span></span><br><span class="line">arr1 = [<span class="string">&#x27;hello&#x27;</span>,<span class="number">123</span>,<span class="literal">false</span>]</span><br></pre></td></tr></table></figure><br><h4 id="8-7、enum"><a href="#8-7、enum" class="headerlink" title="8.7、enum"></a><strong><font color='#10c300'>8.7、enum</font></strong></h4><blockquote><p>枚举（ enum ）可以定义**<code>⼀组命名常量</code>**，它能增强代码的可读性，也让代码更好维护。</p></blockquote><p>如下代码的功能是：根据调用walk 时传⼊的不同参数，执行不同的逻辑，存在的问题是调用 walk 时**<code>传参</code>时没有任何提示，编码者很容易写错<code>传参字符串内容</code>**；并且用于判断逻辑的 up 、 down 、 left 、 right 是连续且相关的⼀组值，那此时就特别适合使用枚举（ enum ）。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">walk</span>(<span class="params"><span class="attr">str</span>:<span class="built_in">string</span></span>) &#123;</span><br><span class="line"> <span class="keyword">if</span> (str === <span class="string">&#x27;up&#x27;</span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【上】⾛&quot;</span>);</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">&#x27;down&#x27;</span>) &#123; <span class="comment">// 或在这里写错单词导致和传入的参数不一致没有提示报错</span></span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【下】⾛&quot;</span>);</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">&#x27;left&#x27;</span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【左】⾛&quot;</span>);</span><br><span class="line"> &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">&#x27;right&#x27;</span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【右】⾛&quot;</span>);</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未知⽅向&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">walk</span>(<span class="string">&#x27;up&#x27;</span>)</span><br><span class="line"><span class="title function_">walk</span>(<span class="string">&#x27;down&#x27;</span>) <span class="comment">// 在这里写错传参没有提示</span></span><br><span class="line"><span class="title function_">walk</span>(<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"><span class="title function_">walk</span>(<span class="string">&#x27;right&#x27;</span>)</span><br></pre></td></tr></table></figure><br><h5 id="1）、数字枚举"><a href="#1）、数字枚举" class="headerlink" title="1）、数字枚举"></a><strong><font color='cornflowerblue'>1）、数字枚举</font></strong></h5><p>数字枚举⼀种最常见的枚举类型，其成员的值会**<code>自动递增</code><strong>，且数字枚举还具备</strong><code>反向映射</code><strong>的特点，在下面代码的打印中，不难发现：可以</strong><code>通过值来获取对应的枚举成员名称</code>** 。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义⼀个描述【上下左右】⽅向的枚举Direction</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line"> <span class="title class_">Up</span>,</span><br><span class="line"> <span class="title class_">Down</span>,</span><br><span class="line"> <span class="title class_">Left</span>,</span><br><span class="line"> <span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>) <span class="comment">// 打印Direction会看到如下内容</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> &#123;</span></span><br><span class="line"><span class="comment">     0:&#x27;Up&#x27;, </span></span><br><span class="line"><span class="comment">     1:&#x27;Down&#x27;, </span></span><br><span class="line"><span class="comment">     2:&#x27;Left&#x27;, </span></span><br><span class="line"><span class="comment">     3:&#x27;Right&#x27;, </span></span><br><span class="line"><span class="comment">     Up:0, </span></span><br><span class="line"><span class="comment">     Down:1, </span></span><br><span class="line"><span class="comment">     Left:2,</span></span><br><span class="line"><span class="comment">     Right:3</span></span><br><span class="line"><span class="comment"> &#125; </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 反向映射</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>[<span class="number">0</span>]) <span class="comment">// Up</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 此⾏代码报错，枚举中的属性是只读的</span></span><br><span class="line"><span class="title class_">Direction</span>.<span class="property">Up</span> = <span class="string">&#x27;shang&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20241015001709926.png" alt="image-20241015001709926"></p><p>也可以指定枚举成员的初始值，其后的成员值会自动递增。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line"> <span class="title class_">Up</span> = <span class="number">6</span>,</span><br><span class="line"> <span class="title class_">Down</span>,</span><br><span class="line"> <span class="title class_">Left</span>,</span><br><span class="line"> <span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>); <span class="comment">// 输出: 6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">Down</span>); <span class="comment">// 输出: 7</span></span><br></pre></td></tr></table></figure><p>使用数字枚举完成刚才 walk 函数中的逻辑，此时我们发现： 代码更加直观易读，而且类型安全，同时也更易于维护。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">  <span class="title class_">Up</span>,</span><br><span class="line">  <span class="title class_">Down</span>,</span><br><span class="line">  <span class="title class_">Left</span>,</span><br><span class="line">  <span class="title class_">Right</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">walk</span>(<span class="params"><span class="attr">n</span>: <span class="title class_">Direction</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Up</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【上】⾛&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【下】⾛&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Left</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【左】⾛&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Right</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【右】⾛&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未知⽅向&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">walk</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>);</span><br><span class="line"><span class="title function_">walk</span>(<span class="title class_">Direction</span>.<span class="property">Down</span>);</span><br></pre></td></tr></table></figure><br><h5 id="2）、字符串枚举"><a href="#2）、字符串枚举" class="headerlink" title="2）、字符串枚举"></a><strong><font color='cornflowerblue'>2）、字符串枚举</font></strong></h5><p>枚举成员的值是字符串，丢失反向映射。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line"> <span class="title class_">Up</span> = <span class="string">&quot;up&quot;</span>,</span><br><span class="line"> <span class="title class_">Down</span> = <span class="string">&quot;down&quot;</span>,</span><br><span class="line"> <span class="title class_">Left</span> = <span class="string">&quot;left&quot;</span>,</span><br><span class="line"> <span class="title class_">Right</span> = <span class="string">&quot;right&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">dir</span>: <span class="title class_">Direction</span> = <span class="title class_">Direction</span>.<span class="property">Up</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dir); <span class="comment">// 输出: &quot;up&quot;</span></span><br></pre></td></tr></table></figure><br><h5 id="3）、常量枚举"><a href="#3）、常量枚举" class="headerlink" title="3）、常量枚举"></a><strong><font color='cornflowerblue'>3）、常量枚举</font></strong></h5><blockquote><p>官⽅描述：常量枚举是⼀种特殊枚举类型，它使⽤ const 关键字定义，在编译时会被**<code>内联</code><strong>，</strong><code>避免</code><strong>生成⼀些</strong><code>额外</code>**的代码。</p></blockquote><p><strong>何为编译时内联？</strong><br>所谓“内联”其实就是 TypeScript 在编译时，会将<strong>枚举成员引⽤<strong>替换为它们的</strong>实际值</strong>，而不是生成额外的枚举对象。这可以减少生成的 JavaScript 代码量，并提⾼运行时性能。</p><p>使用普通枚举的 TypeScript 代码如下</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Directions</span> &#123;</span><br><span class="line"> <span class="title class_">Up</span>,</span><br><span class="line"> <span class="title class_">Down</span>,</span><br><span class="line"> <span class="title class_">Left</span>,</span><br><span class="line"> <span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> x = <span class="title class_">Directions</span>.<span class="property">Up</span>; <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p>编译后⽣成的 JavaScript 代码量较⼤ ：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Directions</span>;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params">Directions</span>) &#123;</span><br><span class="line">    <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Up&quot;</span>] = <span class="number">0</span>] = <span class="string">&quot;Up&quot;</span>;</span><br><span class="line">    <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Down&quot;</span>] = <span class="number">1</span>] = <span class="string">&quot;Down&quot;</span>;</span><br><span class="line">    <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Left&quot;</span>] = <span class="number">2</span>] = <span class="string">&quot;Left&quot;</span>;</span><br><span class="line">    <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Right&quot;</span>] = <span class="number">3</span>] = <span class="string">&quot;Right&quot;</span>;</span><br><span class="line">&#125;)(<span class="title class_">Directions</span> || (<span class="title class_">Directions</span> = &#123;&#125;));</span><br><span class="line"><span class="keyword">let</span> x = <span class="title class_">Directions</span>.<span class="property">Up</span>;</span><br></pre></td></tr></table></figure><p>  使用常量枚举的 TypeScript 代码如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">enum</span> <span class="title class_">Directions</span> &#123;</span><br><span class="line"> <span class="title class_">Up</span>,</span><br><span class="line"> <span class="title class_">Down</span>,</span><br><span class="line"> <span class="title class_">Left</span>,</span><br><span class="line"> <span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> x = <span class="title class_">Directions</span>.<span class="property">Up</span>;</span><br></pre></td></tr></table></figure><p>编译后生成的 JavaScript 代码量较小：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> x = <span class="number">0</span> <span class="comment">/* Directions.Up */</span>;</span><br></pre></td></tr></table></figure><br><h4 id="8-8、type"><a href="#8-8、type" class="headerlink" title="8.8、type"></a><strong><font color='#10c300'>8.8、type</font></strong></h4><blockquote><p><strong><code>type</code></strong> 可以为任意类型创建别名，让代码更简洁、可读性更强，同时能更⽅便地进⾏类型复⽤和扩展。</p></blockquote><h5 id="1）、基本用法"><a href="#1）、基本用法" class="headerlink" title="1）、基本用法"></a><font color='orange' size="4">1）、基本用法</font></h5><p>类型别名使用 type 关键字定义， type后跟类型名称，例如下⾯代码中 num 是类型别名。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> num = <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">price</span>: num</span><br><span class="line">price = <span class="number">100</span></span><br></pre></td></tr></table></figure><h5 id="2）、联合类型"><a href="#2）、联合类型" class="headerlink" title="2）、联合类型"></a><strong><font color='cornflowerblue'>2）、联合类型</font></strong></h5><p>联合类型是⼀种⾼级类型，它表示⼀个值可以是几种不同类型之⼀。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Status</span> = <span class="built_in">number</span> | <span class="built_in">string</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Gender</span> = <span class="string">&#x27;男&#x27;</span> | <span class="string">&#x27;⼥&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printStatus</span>(<span class="params"><span class="attr">status</span>: <span class="title class_">Status</span></span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(status);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logGender</span>(<span class="params"><span class="attr">str</span>:<span class="title class_">Gender</span></span>)&#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printStatus</span>(<span class="number">404</span>);</span><br><span class="line"><span class="title function_">printStatus</span>(<span class="string">&#x27;200&#x27;</span>);</span><br><span class="line"><span class="title function_">printStatus</span>(<span class="string">&#x27;501&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">logGender</span>(<span class="string">&#x27;男&#x27;</span>)</span><br><span class="line"><span class="title function_">logGender</span>(<span class="string">&#x27;⼥&#x27;</span>)</span><br></pre></td></tr></table></figure><h5 id="3）、交叉类型"><a href="#3）、交叉类型" class="headerlink" title="3）、交叉类型"></a><strong><font color='cornflowerblue'>3）、交叉类型</font></strong></h5><p>交叉类型（Intersection Types）允许将多个类型合并为⼀个类型。合并后的类型将拥有所有被合并类型的成员。交叉类型通常⽤于对象类型。 </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//⾯积</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Area</span> = &#123;</span><br><span class="line">  <span class="attr">height</span>: <span class="built_in">number</span>; <span class="comment">//⾼</span></span><br><span class="line">  <span class="attr">width</span>: <span class="built_in">number</span>; <span class="comment">//宽</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//地址</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Address</span> = &#123;</span><br><span class="line">  <span class="attr">num</span>: <span class="built_in">number</span>; <span class="comment">//楼号</span></span><br><span class="line">  <span class="attr">cell</span>: <span class="built_in">number</span>; <span class="comment">//单元号</span></span><br><span class="line">  <span class="attr">room</span>: <span class="built_in">string</span>; <span class="comment">//房间号</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义类型House，且House是Area和Address组成的交叉类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">House</span> = <span class="title class_">Area</span> &amp; <span class="title class_">Address</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">house</span>: <span class="title class_">House</span> = &#123;</span><br><span class="line">  <span class="attr">height</span>: <span class="number">180</span>,</span><br><span class="line">  <span class="attr">width</span>: <span class="number">75</span>,</span><br><span class="line">  <span class="attr">num</span>: <span class="number">6</span>,</span><br><span class="line">  <span class="attr">cell</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">room</span>: <span class="string">&quot;702&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><h4 id="8-9、⼀个特殊情况"><a href="#8-9、⼀个特殊情况" class="headerlink" title="8.9、⼀个特殊情况"></a><strong><font color='#10c300'>8.9、⼀个特殊情况</font></strong></h4><p>先来观察如下两段代码：</p><p><strong>代码段1（正常）</strong></p><p>在函数定义时，限制函数返回值为 void ，那么函数的返回值就必须是空。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="comment">// 返回undefined合法</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 以下返回均不合法</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">demo</span>();</span><br></pre></td></tr></table></figure><p><strong>代码段2（特殊）</strong></p><p>使用**<code>类型声明</code>**限制函数返回值为 void 时， <strong><code>TypeScript 并不会严格要求函数返回空</code></strong>。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">LogFunc</span> = <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f1</span>: <span class="title class_">LogFunc</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">100</span>; <span class="comment">// 允许返回⾮空值</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f2</span>: <span class="title class_">LogFunc</span> = <span class="function">() =&gt;</span> <span class="number">200</span>; <span class="comment">// 允许返回⾮空值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f3</span>: <span class="title class_">LogFunc</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">300</span>; <span class="comment">// 允许返回⾮空值</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>为什么会这样？</strong></p><p>​       是为了确保如下代码成⽴，我们知道 Array.prototype.push 的返回值是⼀个数字，而 Array.prototype.forEach ⽅法期望其回调的返回类型是 void 。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> src = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> dst = [<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">src.<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> dst.<span class="title function_">push</span>(el));</span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202410161530513.png" alt="image-20241016153006361"></p><br><h4 id="8-10、class类相关知识"><a href="#8-10、class类相关知识" class="headerlink" title="8.10、class类相关知识"></a><strong><font color='#10c300'>8.10、class类相关知识</font></strong></h4><ol><li>通过class 关键字创建类，类名我们还是习惯性定义<strong>首字母大写</strong>；</li><li>类里面有个constructor 函数，可以接受传递过来的参数，同时返回实例对象；</li><li>constructor 函数，只要 new 生成实例时，就会自动调用这个函数，如果我们不写这个函数，类也会自动生成这个函数；</li><li>多个函数方法之间不需要添加逗号分隔；</li><li>生成实例 new 不能省略；</li><li>语法规范： 创建类，类名后面不要加小括号。生成实例，类名后面加小括号。构造函数不需要加function；</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 属性声明</span></span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">hobby</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造器</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">hobby</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hobby</span> = hobby</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ⽅法</span></span><br><span class="line">    <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人信息：我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁！`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">hobbyCategory</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人爱好：我爱<span class="subst">$&#123;<span class="variable language_">this</span>.hobby&#125;</span>！`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">info</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Person实例</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;蔡徐坤&quot;</span>, <span class="number">23</span>, <span class="string">&quot;唱跳rap&quot;</span>);</span><br><span class="line">p1.<span class="title function_">info</span>()</span><br><span class="line">p1.<span class="title function_">hobbyCategory</span>()</span><br><span class="line"><span class="comment">// 个人信息：我叫蔡徐坤，今年23岁！</span></span><br><span class="line"><span class="comment">// 个人爱好：我爱唱跳rap！</span></span><br><span class="line"><span class="comment">// 个人信息：我叫蔡徐坤，今年23岁！</span></span><br></pre></td></tr></table></figure><br><h5 id="1）、子类继承父类–extends"><a href="#1）、子类继承父类–extends" class="headerlink" title="1）、子类继承父类–extends"></a><strong><font color='cornflowerblue'>1）、子类继承父类–extends</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 属性声明</span></span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">hobby</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造器</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">hobby</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hobby</span> = hobby</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ⽅法</span></span><br><span class="line">    <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人信息：我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁！`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">hobbyCategory</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人爱好：我爱<span class="subst">$&#123;<span class="variable language_">this</span>.hobby&#125;</span>！`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">info</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Student实例   继承了父类的构造器和方法，即子类中有了一个和父类一样的构造器和方法</span></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;小阿米&quot;</span>, <span class="number">18</span>, <span class="string">&quot;打篮球&quot;</span>);</span><br><span class="line">s1.<span class="title function_">info</span>()</span><br><span class="line">s1.<span class="title function_">hobbyCategory</span>()</span><br><span class="line"><span class="comment">// 个人信息：我叫小阿米，今年18岁！</span></span><br><span class="line"><span class="comment">// 个人爱好：我爱打篮球！</span></span><br><span class="line"><span class="comment">// 个人信息：我叫小阿米，今年18岁！</span></span><br></pre></td></tr></table></figure><p><strong>注意点：</strong></p><p>当在有继承的子类中给构造器添加属性，必须使用super，要不然会报错：派生类的构造函数必须包含 “super” 调用。<img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202410171520923.png" alt="image-20241017152057771"></p><p>如下便是super的使用方法</p><br><h5 id="2）、子类访问父类–super"><a href="#2）、子类访问父类–super" class="headerlink" title="2）、子类访问父类–super"></a><strong><font color='cornflowerblue'>2）、子类访问父类–super</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 属性声明</span></span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">hobby</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造器</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">hobby</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hobby</span> = hobby</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ⽅法</span></span><br><span class="line">    <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人信息：我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁！`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">hobbyCategory</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`个人爱好：我爱<span class="subst">$&#123;<span class="variable language_">this</span>.hobby&#125;</span>！`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">info</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">sex</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;男/女&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="comment">// 当子类使用继承extends时，在子类即相当继承了父类的构造器constructor和方法，如果需要在子类给自己添加属性，在构造器的入参需要添加父类属性对应的参数。</span></span><br><span class="line">    <span class="comment">// 例如这里父类构造器的属性name、age和hobby，也要写在子类构造器的入参中，最后添加子类添加自己新增的形参(name: string, age: number, hobby: string, grade: number)。</span></span><br><span class="line">    <span class="comment">// super 必须在子类this之前调用，super(name, age, hobby)</span></span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">hobby</span>: <span class="built_in">string</span>, <span class="attr">grade</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age, hobby)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">grade</span> = grade</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁，数学考了<span class="subst">$&#123;<span class="variable language_">this</span>.grade&#125;</span>分`</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">info</span>() <span class="comment">// super.info() 两个一样</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="title function_">sex</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;在子类重写从父类继承的方法：男&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;许诺&quot;</span>, <span class="number">16</span>, <span class="string">&quot;打篮球&quot;</span>, <span class="number">98</span>);</span><br><span class="line">s1.<span class="title function_">study</span>()</span><br><span class="line">s1.<span class="title function_">sex</span>()</span><br><span class="line"><span class="comment">// 我叫许诺，今年16岁，数学考了98分</span></span><br><span class="line"><span class="comment">// 个人信息：我叫许诺，今年16岁！</span></span><br><span class="line"><span class="comment">// 在子类重写从⽗类继承的⽅法：男</span></span><br></pre></td></tr></table></figure><p><strong>override修饰符的作用</strong></p><p>在子类重写从父类继承的方法时，如果方法名和父类不一致的时候会报错提示。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202410211437631.png" alt="image-20241021143724489"></p><br><h4 id="8-11、属性修饰符-ts中才有"><a href="#8-11、属性修饰符-ts中才有" class="headerlink" title="8.11、属性修饰符(ts中才有)"></a><strong><font color='#10c300'>8.11、属性修饰符(ts中才有)</font></strong></h4><table><thead><tr><th>修饰符</th><th>含义</th><th>具体规则</th></tr></thead><tbody><tr><td>public</td><td>公开的</td><td>可以被：<strong><code>类内部</code></strong>、<strong><code>子类</code></strong>、**<code>类外部</code>**访问 。</td></tr><tr><td>protected</td><td>受保护的</td><td>可以被：<strong><code>类内部</code></strong>、**<code>子类</code>**访问。</td></tr><tr><td>private</td><td>私有的</td><td>可以被：**<code>类内部</code>**访问。</td></tr><tr><td>readonly</td><td>只读属性</td><td>属性⽆法修改。</td></tr></tbody></table><br><h5 id="1）、public-修饰符"><a href="#1）、public-修饰符" class="headerlink" title="1）、public 修饰符"></a><strong><font color='cornflowerblue'>1）、public 修饰符</font></strong></h5><p>一般不写public，默认就是 public。可以被：<strong><code>类内部</code></strong>、<strong><code>子类</code></strong>、**<code>类外部</code>**访问 </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>:<span class="built_in">string</span>, <span class="attr">age</span>:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="comment">// 1、类内部访问</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="title function_">info</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 2、子类访问</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">age</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;45&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Son</span>(<span class="string">&#x27;Jack&#x27;</span>, <span class="string">&#x27;18&#x27;</span>)</span><br><span class="line"><span class="comment">// 3、外部访问</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(s1.<span class="property">name</span>);</span><br></pre></td></tr></table></figure><p><strong>属性的简写形式</strong></p><p>必须有修饰符才能简写</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/ 完整写法</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/ 简写形式 </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="2）、protected-修饰符"><a href="#2）、protected-修饰符" class="headerlink" title="2）、protected 修饰符"></a><strong><font color='cornflowerblue'>2）、protected 修饰符</font></strong></h5><p>  可以被：<strong><code>类内部</code></strong>、**<code>子类</code>**访问。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">protected</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">protected</span> <span class="attr">age</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">getDetails</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="comment">// 类中能访问受保护的name和age属性</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`我叫：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，年龄是：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">introduce</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 类中能访问受保护的getDetails⽅法</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="title function_">getDetails</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// ⼦类中可以访问getDetails</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getDetails</span>()</span><br><span class="line">        <span class="comment">// ⼦类中可以访问name</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>正在努⼒学习`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;杨超越&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;杨哈哈&#x27;</span>, <span class="number">33</span>)</span><br><span class="line">p1.<span class="title function_">introduce</span>()</span><br><span class="line">s1.<span class="title function_">study</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码均报错</span></span><br><span class="line"><span class="comment">// p1.getDetails()</span></span><br><span class="line"><span class="comment">// p1.name</span></span><br><span class="line"><span class="comment">// p1.age</span></span><br></pre></td></tr></table></figure><br><h5 id="3）、private-修饰符"><a href="#3）、private-修饰符" class="headerlink" title="3）、private 修饰符"></a><strong><font color='cornflowerblue'>3）、private 修饰符</font></strong></h5><p>可以被：**<code>类内部</code>**访问。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="comment">// IDCard属性为私有的(private)属性，只能在【类内部】使⽤</span></span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> <span class="title class_">IDCard</span>: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">getPrivateInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 类内部可以访问私有的(private)属性 —— IDCard</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`身份证号码为：<span class="subst">$&#123;<span class="variable language_">this</span>.IDCard&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 类内部可以访问受保护的(protected)属性 —— name和age</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`我叫: <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, 今年刚满<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getFullInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 类内部可以访问公开的getInfo⽅法，也可以访问私有的getPrivateInfo⽅法</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">getInfo</span>() + <span class="string">&#x27;，&#x27;</span> + <span class="variable language_">this</span>.<span class="title function_">getPrivateInfo</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;110114198702034432&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">getFullInfo</span>())</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">getInfo</span>())</span><br><span class="line"><span class="comment">// 以下代码均报错</span></span><br><span class="line"><span class="comment">// p1.IDCard</span></span><br><span class="line"><span class="comment">// p1.getPrivateInfo()</span></span><br></pre></td></tr></table></figure><br><h5 id="4）、readonly-修饰符"><a href="#4）、readonly-修饰符" class="headerlink" title="4）、readonly 修饰符"></a><strong><font color='cornflowerblue'>4）、readonly 修饰符</font></strong></h5><p>  属性无法修改。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="attr">vin</span>: <span class="built_in">string</span>, <span class="comment">//⻋辆识别码，为只读属性</span></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="attr">year</span>: <span class="built_in">number</span>, <span class="comment">//出⼚年份，为只读属性</span></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">color</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">sound</span>: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="comment">// 打印⻋辆信息</span></span><br><span class="line">    <span class="title function_">displayInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`</span></span><br><span class="line"><span class="string">            识别码：<span class="subst">$&#123;<span class="variable language_">this</span>.vin&#125;</span>,</span></span><br><span class="line"><span class="string">            出⼚年份：<span class="subst">$&#123;<span class="variable language_">this</span>.year&#125;</span>,</span></span><br><span class="line"><span class="string">            颜⾊：<span class="subst">$&#123;<span class="variable language_">this</span>.color&#125;</span>,</span></span><br><span class="line"><span class="string">            ⾳响：<span class="subst">$&#123;<span class="variable language_">this</span>.sound&#125;</span></span></span><br><span class="line"><span class="string">        `</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> car = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&#x27;1HGCM82633A123456&#x27;</span>, <span class="number">2018</span>, <span class="string">&#x27;⿊⾊&#x27;</span>, <span class="string">&#x27;Bose⾳响&#x27;</span>);</span><br><span class="line">car.<span class="property">color</span> = <span class="string">&#x27;红色&#x27;</span></span><br><span class="line">car.<span class="title function_">displayInfo</span>()</span><br><span class="line"><span class="comment">// 以下代码均错误：不能修改 readonly 属性</span></span><br><span class="line"><span class="comment">// car.vin = &#x27;897WYE87HA8SGDD8SDGHF&#x27;; </span></span><br><span class="line"><span class="comment">// car.year = 2020; </span></span><br></pre></td></tr></table></figure><br><h4 id="8-12、抽象类"><a href="#8-12、抽象类" class="headerlink" title="8.12、抽象类"></a><strong><font color='#10c300'>8.12、抽象类</font></strong></h4><blockquote><ul><li>概述：抽象类是⼀种**<code>无法被实例化</code><strong>的类，专门用来定义类的</strong><code>结构和行为</code><strong>，类中可以写</strong><code>抽象方法</code><strong>，也可以写</strong><code>具体实现</code><strong>。抽象类主要用来为其派生类提供⼀个</strong><code>基础结构</code><strong>，要求其派生类(子类)</strong><code>必须实现</code>**其中的抽象方法。</li><li>简记：抽象类**<code>不能实例化</code><strong>，其属性和方法是</strong><code>可以被继承</code><strong>，抽象类⾥可以有</strong><code>普通方法</code><strong>、也可以有</strong><code>抽象方法</code><strong>、抽象类中</strong><code>写抽象方法</code><strong>，在</strong><code>子类实现</code><strong>抽象方法、抽象类和抽象方法需要</strong><code>用abstract定义</code>**。</li></ul></blockquote><p><strong>通过以下场景，理解抽象类：</strong></p><p>我们定义⼀个抽象类 Package ，表示所有包裹的基本结构。任何包裹都有重量属性 weight，包裹都需要计算运费。但不同类型的包裹（如：标准速度、特快专递）都有不同的运费计算方式，因此用于计算运费的calculate方法是⼀个抽象方法，必须由具体的派生类(子类)实现。 </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义抽象类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Package</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">weight</span>: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 抽象⽅法：⽤来计算运费，不同类型包裹有不同的计算⽅式</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="title function_">calculate</span>(): <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通⽤⽅法：打印包裹详情</span></span><br><span class="line">    <span class="title function_">printPackage</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`包裹重量为: <span class="subst">$&#123;<span class="variable language_">this</span>.weight&#125;</span>kg，运费为: <span class="subst">$&#123;<span class="variable language_">this</span>.calculate()&#125;</span>元`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 标准包裹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StandardPackage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Package</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="attr">weight</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">unitPrice</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; <span class="variable language_">super</span>(weight) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实现抽象⽅法：计算运费</span></span><br><span class="line">    <span class="title function_">calculate</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">weight</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 特快包裹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExpressPackage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Package</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span> (<span class="params"></span></span><br><span class="line"><span class="params">        <span class="attr">weight</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> <span class="attr">unitPrice</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> <span class="attr">additional</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; <span class="variable language_">super</span>(weight) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">calculate</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">weight</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">10</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span> + (<span class="variable language_">this</span>.<span class="property">weight</span> - <span class="number">10</span>) * <span class="variable language_">this</span>.<span class="property">additional</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">weight</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建标准包裹实例</span></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">StandardPackage</span>(<span class="number">10</span>, <span class="number">5</span>)</span><br><span class="line">s1.<span class="title function_">printPackage</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建特快包裹实例</span></span><br><span class="line"><span class="keyword">const</span> e1 = <span class="keyword">new</span> <span class="title class_">ExpressPackage</span>(<span class="number">13</span>,<span class="number">8</span>,<span class="number">2</span>)</span><br><span class="line">e1.<span class="title function_">printPackage</span>()</span><br></pre></td></tr></table></figure><p><strong>总结：何时使用抽象类？</strong></p><ol><li>定义通用接口：⼀组相关的类定义通用的⾏为（方法或属性）时。</li><li>提供基础实现：在抽象类中提供某些方法或为其提供基础实现，这样派⽣类就可以继承这些实现。</li><li>确保关键实现：强制派生类实现⼀些关键行为。</li><li>共享代码和逻辑：当多个类需要共享部分代码时，抽象类可以避免代码重复。</li></ol><br><h4 id="8-13、interface（接口）"><a href="#8-13、interface（接口）" class="headerlink" title="8.13、interface（接口）"></a><strong><font color='#10c300'>8.13、interface（接口）</font></strong></h4><h5 id="1）、定义类接口"><a href="#1）、定义类接口" class="headerlink" title="1）、定义类接口"></a><strong><font color='cornflowerblue'>1）、定义类接口</font></strong></h5><p>类是无法直接使用extends继承接口的，只能使用implements去实现接口。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PersonInterface接⼝，⽤与限制Person类的格式</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="title function_">speak</span>(<span class="attr">n</span>: <span class="built_in">number</span>): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义⼀个类 Person，实现 PersonInterface 接⼝</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="comment">// 实现接⼝中的 speak ⽅法</span></span><br><span class="line">    <span class="title function_">speak</span>(<span class="attr">n</span>: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; n; index++) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, 今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建⼀个 Person 类的实例 p1</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;雷军&#x27;</span>, <span class="number">44</span>)</span><br><span class="line">p1.<span class="title function_">speak</span>(<span class="number">3</span>)</span><br><span class="line"><span class="comment">// 我叫雷军, 今年44岁</span></span><br><span class="line"><span class="comment">// 我叫雷军, 今年44岁</span></span><br><span class="line"><span class="comment">// 我叫雷军, 今年44岁</span></span><br></pre></td></tr></table></figure><br><h5 id="2）、定义对象接口"><a href="#2）、定义对象接口" class="headerlink" title="2）、定义对象接口"></a><strong><font color='cornflowerblue'>2）、定义对象接口</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">UserInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">gender</span>: <span class="built_in">string</span> <span class="comment">// 只读属性</span></span><br><span class="line">    <span class="attr">age</span>?: <span class="built_in">number</span> <span class="comment">// 可选属性</span></span><br><span class="line">    <span class="attr">run</span>: <span class="function">(<span class="params"><span class="attr">n</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">user</span>: <span class="title class_">UserInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="title function_">run</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`奔跑了<span class="subst">$&#123;n&#125;</span>⽶`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><h5 id="3）、定义函数接口"><a href="#3）、定义函数接口" class="headerlink" title="3）、定义函数接口"></a><strong><font color='cornflowerblue'>3）、定义函数接口</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">CountInterface</span> &#123;</span><br><span class="line">    (<span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">count</span>: <span class="title class_">CountInterface</span> = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里注意区分接口定义类型和普通定义类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">count</span>: <span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">count = <span class="keyword">function</span> (<span class="params">x, y</span>) &#123;</span><br><span class="line"> <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="4）、接口之间的继承"><a href="#4）、接口之间的继承" class="headerlink" title="4）、接口之间的继承"></a><strong><font color='cornflowerblue'>4）、接口之间的继承</font></strong></h5><p>⼀个 interface 继承另⼀个 interface ，从而实现代码的复用</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> <span class="comment">// 年龄</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StudentInterface</span> <span class="keyword">extends</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span> <span class="comment">// 年级</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">stu</span>: <span class="title class_">StudentInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;⾼三&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h5 id="5）、接口自动合并（可重复定义）"><a href="#5）、接口自动合并（可重复定义）" class="headerlink" title="5）、接口自动合并（可重复定义）"></a><strong><font color='cornflowerblue'>5）、接口自动合并（可重复定义）</font></strong></h5><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> <span class="comment">// 年龄</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span> <span class="comment">// 年级</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">stu</span>: <span class="title class_">PersonInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;⾼三&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>总结：何时使⽤接口？</strong></p><ol><li>定义对象的格式： 描述数据模型、API 响应格式、配置对象……..等等，是开发中用的最多的场景。</li><li>类的契约：规定⼀个类需要实现哪些属性和⽅法。</li><li>扩展已有接⼝：⼀般用于扩展第三⽅库的类型， 这种特性在⼤型项目中可能会用到。</li></ol></blockquote><br><h4 id="8-14、一些相似概念的区别"><a href="#8-14、一些相似概念的区别" class="headerlink" title="8.14、一些相似概念的区别"></a><strong><font color='#10c300'>8.14、一些相似概念的区别</font></strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> <span class="comment">// 年龄</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StudentInterface</span> <span class="keyword">extends</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span> <span class="comment">// 年级</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">stu</span>: <span class="title class_">StudentInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;⾼三&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="1）、interface-与-type-的区别"><a href="#1）、interface-与-type-的区别" class="headerlink" title="1）、interface 与 type 的区别"></a><strong><font color='cornflowerblue'>1）、interface 与 type 的区别</font></strong></h5><blockquote><p><strong>相同点：</strong> interface 和 type 都可以⽤于定义**<code>对象结构</code>**，在定义对象结构时两者可以互换。</p><p><strong>不同点：</strong></p><ul><li>interface ：更专注于定义**<code>对象</code><strong>和</strong><code>类</code>**的结构，⽀持继承、合并。</li><li>type ：可以定义**<code>类型别名、联合类型、交叉类型</code>**，但不支持继承和自动合并。</li></ul></blockquote><p><strong>interface 和 type 都可以定义对象结构</strong> </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使⽤ interface 定义 Person 对象</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">speak</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤ type 定义 Person 对象</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PersonType</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">speak</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤PersonInterface</span></span><br><span class="line"><span class="comment">// let person: PersonInterface = &#123;</span></span><br><span class="line"><span class="comment">//     name: &#x27;张三&#x27;,</span></span><br><span class="line"><span class="comment">//     age: 18,</span></span><br><span class="line"><span class="comment">//     speak() &#123;</span></span><br><span class="line"><span class="comment">//         console.log(`我叫：$&#123;this.name&#125;，年龄：$&#123;this.age&#125;`)</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤PersonType</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">PersonType</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫：<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，年龄：<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>interface 可以继承、合并</strong> </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span> <span class="comment">// 年龄</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">speak</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StudentInterface</span> <span class="keyword">extends</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span> <span class="comment">// 年级</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">student</span>: <span class="title class_">StudentInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;⾼⼆&#x27;</span>,</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>, <span class="variable language_">this</span>.<span class="property">age</span>, <span class="variable language_">this</span>.<span class="property">grade</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>type 的交叉类型</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使⽤ type 定义 Person 类型，并通过交叉类型实现属性的合并</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PersonType</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>; <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>; <span class="comment">// 年龄</span></span><br><span class="line">&#125; &amp; &#123;</span><br><span class="line">    <span class="attr">speak</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤ type 定义 Student 类型，并通过交叉类型继承 PersonType</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">StudentType</span> = <span class="title class_">PersonType</span> &amp; &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span>; <span class="comment">// 年级</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">student</span>: <span class="title class_">StudentType</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;⾼⼆&#x27;</span>,</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>, <span class="variable language_">this</span>.<span class="property">age</span>, <span class="variable language_">this</span>.<span class="property">grade</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><h5 id="2）、interface-与-抽象类的区别"><a href="#2）、interface-与-抽象类的区别" class="headerlink" title="2）、interface 与 抽象类的区别"></a><strong><font color='cornflowerblue'>2）、interface 与 抽象类的区别</font></strong></h5><blockquote><p>**相同点：**都能定义⼀个类的格式（定义类应遵循的契约）</p><p><strong>不相同：</strong></p><ul><li>接口：<strong><code>只能</code><strong>描述</strong><code>结构</code></strong>，<strong><code>不能</code><strong>有任何</strong><code>实现代码</code></strong>，⼀个类可以实现**<code>多个</code>**接口。</li><li>抽象类：既可以包含**<code>抽象方法</code><strong>，也可以包含</strong><code>具体方法</code><strong>， ⼀个类只能继承</strong><code>⼀个</code>**抽象类。</li></ul></blockquote><p><strong>⼀个类可以实现多个接⼝</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// FlyInterface 接⼝</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">FlyInterface</span> &#123;</span><br><span class="line">    <span class="title function_">fly</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义 SwimInterface 接⼝</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SwimInterface</span> &#123;</span><br><span class="line">    <span class="title function_">swim</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Duck 类实现了 FlyInterface 和 SwimInterface 两个接⼝</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Duck</span> <span class="keyword">implements</span> <span class="title class_">FlyInterface</span>, <span class="title class_">SwimInterface</span> &#123;</span><br><span class="line">    <span class="title function_">fly</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;鸭⼦可以⻜&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">swim</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;鸭⼦可以游泳&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建⼀个 Duck 实例</span></span><br><span class="line"><span class="keyword">const</span> duck = <span class="keyword">new</span> <span class="title class_">Duck</span>();</span><br><span class="line">duck.<span class="title function_">fly</span>(); <span class="comment">// 输出: 鸭⼦可以⻜</span></span><br><span class="line">duck.<span class="title function_">swim</span>(); <span class="comment">// 输出: 鸭⼦可以游泳</span></span><br></pre></td></tr></table></figure><br><h3 id="九、泛型"><a href="#九、泛型" class="headerlink" title="九、泛型"></a><strong><font color='red'>九、泛型</font></strong></h3><blockquote><p>泛型允许我们在定义函数、类或接口时，使用类型参数来**<code>表示未指定的类型</code><strong>，这些参数</strong><code>在具体使用时</code><strong>，才被</strong><code>指定具体的类型</code>**，泛型能让同⼀段代码适用于多种类型，同时仍然保持类型的安全性。</p></blockquote><p>举例：如下代码中<code>&lt;T&gt;</code>就是泛型，（不一定非叫 T ），设置泛型后即可在函数中使用 T 来表示该类型：</p><h4 id="9-1、泛型函数"><a href="#9-1、泛型函数" class="headerlink" title="9.1、泛型函数"></a><strong><font color='#10c300'>9.1、泛型函数</font></strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logData</span>(<span class="params"><span class="attr">data</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">logData</span>(<span class="number">11</span>)</span><br><span class="line"><span class="title function_">logData</span>(<span class="string">&#x27;hello&#x27;</span>) <span class="comment">// 报错：类型“string”的参数不能赋给类型“number”的参数</span></span><br></pre></td></tr></table></figure><p>上述当定义好了函数的形参是一个数值类型，那么在调用函数时传入的实参也必须时数值类型。</p><p><strong>思考？能不能让函数的形参是一个动态的类型呢？根据函数实参传入的类型而动态变化呢……</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> logData&lt;T&gt;(<span class="attr">data</span>: T): <span class="built_in">void</span> &#123; <span class="comment">// 这里的&lt;&gt;中的值就像形参的类型，（）中就类似使用该类型</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;</span><br><span class="line">logData&lt;<span class="built_in">number</span>&gt;(<span class="number">11</span>) <span class="comment">// &lt;&gt;中的值就像传的实参类型</span></span><br><span class="line">logData&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数返回的结果即传入参数时</span></span><br><span class="line"><span class="keyword">function</span> logData&lt;T&gt;(<span class="attr">data</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">&#125;</span><br><span class="line">logData&lt;<span class="built_in">number</span>&gt;(<span class="number">11</span>)</span><br><span class="line">logData&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>泛型可以有多个</strong> </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> logData&lt;T, U&gt;(<span class="attr">data1</span>: T, <span class="attr">data2</span>: U): T | U &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data1, data2)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Date</span>.<span class="title function_">now</span>() % <span class="number">2</span> ? data1 : data2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">logData&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt;(<span class="number">100</span>, <span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">logData&lt;<span class="built_in">string</span>, <span class="built_in">boolean</span>&gt;(<span class="string">&#x27;ok&#x27;</span>, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure><br><h4 id="9-2、泛型接口"><a href="#9-2、泛型接口" class="headerlink" title="9.2、泛型接口"></a><strong><font color='#10c300'>9.2、泛型接口</font></strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">extraInfo</span>: T</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">JobInfo</span> = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">company</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">p1</span>:<span class="title class_">PersonInterface</span>&lt;<span class="built_in">string</span>&gt; = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Jack&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">13</span>,</span><br><span class="line">    <span class="attr">extraInfo</span>: <span class="string">&#x27;成绩棒棒哒&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">p2</span>:<span class="title class_">PersonInterface</span>&lt;<span class="built_in">number</span>&gt; = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Jack&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">13</span>,</span><br><span class="line">    <span class="attr">extraInfo</span>: <span class="number">250</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">p3</span>:<span class="title class_">PersonInterface</span>&lt;<span class="title class_">JobInfo</span>&gt; = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Jack&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">13</span>,</span><br><span class="line">    <span class="attr">extraInfo</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;你好&#x27;</span>,</span><br><span class="line">        <span class="attr">company</span>: <span class="string">&#x27;亚新科技&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><h4 id="9-3、泛型约束"><a href="#9-3、泛型约束" class="headerlink" title="9.3、泛型约束"></a><strong><font color='#10c300'>9.3、泛型约束</font></strong></h4><p>T extends object 是泛型约束的一种表现。</p><p>extends表示具体的泛型类型只能是 object 类型， 某个变量如果能断言成 object类型[变量 as object ] ， 那么这个变量的类型符合 <strong>T extends object</strong> 。就是说该变量的类型可以是T的具体化类型</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">LengthInterface</span> &#123;</span><br><span class="line">    <span class="attr">length</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 约束规则是：传⼊的类型T必须满足这个接口的类型</span></span><br><span class="line"><span class="keyword">function</span> logPerson&lt;T <span class="keyword">extends</span> <span class="title class_">LengthInterface</span>&gt;(<span class="attr">data</span>: T): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">length</span>)</span><br><span class="line">&#125;</span><br><span class="line">logPerson&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错：因为number不具备length属性</span></span><br><span class="line"><span class="comment">// logPerson&lt;number&gt;(100)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">通过 T <span class="keyword">extends</span> <span class="title class_">LengthInterface</span>，我们告知 <span class="title class_">TypeScript</span> 编译器，T 必须具备 <span class="title class_">LengthInterface</span> 中的所有属性（即 length 属性）。</span><br></pre></td></tr></table></figure><br><h4 id="9-4、泛型类"><a href="#9-4、泛型类" class="headerlink" title="9.4、泛型类"></a><strong><font color='#10c300'>9.4、泛型类</font></strong></h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">extraInfo</span>: T</span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁了`</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">extraInfo</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 测试代码1</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&quot;tom&quot;</span>, <span class="number">30</span>, <span class="number">250</span>);</span><br><span class="line"><span class="comment">// 测试代码2</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">JobInfo</span> = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">company</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>&lt;<span class="title class_">JobInfo</span>&gt;(<span class="string">&quot;tom&quot;</span>, <span class="number">30</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;研发总监&#x27;</span>, <span class="attr">company</span>: <span class="string">&#x27;发发发科技公司&#x27;</span> &#125;);</span><br></pre></td></tr></table></figure><br><h3 id="十、类型声明文件"><a href="#十、类型声明文件" class="headerlink" title="十、类型声明文件"></a><strong><font color='red'>十、类型声明文件</font></strong></h3><p>类型声明文件是 TypeScript 中的⼀种特殊文件，通常以 .d.ts 作为扩展名。它的主要作用是为现有的 JavaScript 代码提供类型信息，使得 TypeScript 能够在使⽤这些 JavaScript 库或模块时进行类型检查和提示。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// demo.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mul</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// demo.d.ts   这个文件一般不需要自己写</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">mul</span>(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; add, mul &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; add, mul &#125; <span class="keyword">from</span> <span class="string">&quot;./demo.js&quot;</span>; <span class="comment">// 如果没有提供demo.d.ts文件这里会报错。</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="title function_">add</span>(<span class="number">2</span>, <span class="number">3</span>); <span class="comment">// x 类型为 number</span></span><br><span class="line"><span class="keyword">const</span> y = <span class="title function_">mul</span>(<span class="number">4</span>, <span class="number">5</span>); <span class="comment">// y 类型为 number</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y)</span><br></pre></td></tr></table></figure><p>xxx.d.ts 项目中这个这种类型的文件一般都放在@types文件夹中，一般主流的js库都会提供这个文件，例如jquery</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/image-20241107234141285.png" alt="image-20241107234141285"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;一、-TypeScript简介&quot;&gt;&lt;a href=&quot;#一、-TypeScript简介&quot; class=&quot;headerlink&quot; title=&quot;一、 TypeScript简介&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、 TypeScript简介</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="typeScript" scheme="http://example.com/tags/typeScript/"/>
    
  </entry>
  
  <entry>
    <title>vue3快速上手</title>
    <link href="http://example.com/posts/2b28ddcc.html"/>
    <id>http://example.com/posts/2b28ddcc.html</id>
    <published>2025-08-15T15:51:08.000Z</published>
    <updated>2026-01-27T15:41:13.665Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、-Vue3简介"><a href="#一、-Vue3简介" class="headerlink" title="一、 Vue3简介"></a><strong><font color='red'>一、 Vue3简介</font></strong></h2><ul><li><p>2020年9月18日，<code>Vue.js</code>发布版<code>3.0</code>版本，代号：<code>One Piece</code>（n</p></li><li><p>经历了：<a href="https://github.com/vuejs/core/commits/main">4800+次提交</a>、<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">40+个RFC</a>、<a href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+次PR</a>、<a href="https://github.com/vuejs/core/graphs/contributors">300+贡献者</a></p></li><li><p>官方发版地址：<a href="https://github.com/vuejs/core/releases/tag/v3.0.0">Release v3.0.0 One Piece · vuejs&#x2F;core</a></p></li><li><p>截止2023年10月，最新的公开版本为：<code>3.3.4</code></p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152256164.png" alt="image.png" style="zoom:30%;" /> &#96;&#96;</p></li></ul><h3 id="1-1、性能的提升"><a href="#1-1、性能的提升" class="headerlink" title="1.1、性能的提升 "></a><strong><font color='#10c300'>1.1、性能的提升 </font></strong></h3><ul><li><p>打包大小减少<code>41%</code>。</p></li><li><p>初次渲染快<code>55%</code>, 更新渲染快<code>133%</code>。</p></li><li><p>内存减少<code>54%</code>。</p></li></ul><h3 id="1-2、源码的升级"><a href="#1-2、源码的升级" class="headerlink" title="1.2、源码的升级 "></a><strong><font color='#10c300'>1.2、源码的升级 </font></strong></h3><ul><li><p>使用<code>Proxy</code>代替<code>defineProperty</code>实现响应式。</p></li><li><p>重写虚拟<code>DOM</code>的实现和<code>Tree-Shaking</code>。</p></li></ul><h3 id="1-3、拥抱TypeScript"><a href="#1-3、拥抱TypeScript" class="headerlink" title="1.3、拥抱TypeScript "></a><strong><font color='#10c300'>1.3、拥抱TypeScript </font></strong></h3><ul><li><code>Vue3</code>可以更好的支持<code>TypeScript</code>。</li></ul><h3 id="1-4、新的特性"><a href="#1-4、新的特性" class="headerlink" title="1.4、新的特性 "></a><strong><font color='#10c300'>1.4、新的特性 </font></strong></h3><ol><li><p><code>Composition API</code>（组合<code>API</code>）：</p><ul><li><p><code>setup</code></p></li><li><p><code>ref</code>与<code>reactive</code></p></li><li><p><code>computed</code>与<code>watch</code></p><p>……</p></li></ul></li><li><p>新的内置组件：</p><ul><li><p><code>Fragment</code></p></li><li><p><code>Teleport</code></p></li><li><p><code>Suspense</code></p><p>……</p></li></ul></li><li><p>其他改变：</p><ul><li><p>新的生命周期钩子</p></li><li><p><code>data</code> 选项应始终被声明为一个函数</p></li><li><p>移除<code>keyCode</code>支持作为<code> v-on</code> 的修饰符</p><p>……</p></li></ul></li></ol><br><h2 id="二、创建Vue3工程"><a href="#二、创建Vue3工程" class="headerlink" title="二、创建Vue3工程"></a><strong><font color='red'>二、创建Vue3工程</font></strong></h2><h3 id="2-1、基于-vue-cli-创建"><a href="#2-1、基于-vue-cli-创建" class="headerlink" title="2.1、基于 vue-cli 创建 "></a><strong><font color='#10c300'>2.1、基于 vue-cli 创建 </font></strong></h3><p>点击查看<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">官方文档</a></p><blockquote><p>备注：目前<code>vue-cli</code>已处于维护模式，官方推荐基于 <code>Vite</code> 创建项目。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span></span><br><span class="line">vue <span class="literal">--version</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 安装或者升级你的@vue/cli </span></span><br><span class="line">npm install <span class="literal">-g</span> @vue/<span class="built_in">cli</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 执行创建命令</span></span><br><span class="line">vue create vue_test</span><br><span class="line"></span><br><span class="line"><span class="comment">##  随后选择3.x</span></span><br><span class="line"><span class="comment">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span></span><br><span class="line"><span class="comment">##  &gt; 3.x</span></span><br><span class="line"><span class="comment">##    2.x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 启动</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><br><h3 id="2-2、基于-vite-创建（推荐）"><a href="#2-2、基于-vite-创建（推荐）" class="headerlink" title="2.2、基于 vite 创建（推荐） "></a><strong><font color='#10c300'>2.2、基于 vite 创建（推荐） </font></strong></h3><p><code>vite</code> 是新一代前端构建工具，官网地址：<a href="https://vitejs.cn/">https://vitejs.cn</a>，<code>vite</code>的优势如下：</p><ul><li>轻量快速的热重载（<code>HMR</code>），能实现极速的服务启动。</li><li>对 <code>TypeScript</code>、<code>JSX</code>、<code>CSS</code> 等支持开箱即用。</li><li>真正的按需编译，不再等待整个应用编译完成。</li><li><code>webpack</code>构建 与 <code>vite</code>构建对比图如下：</li></ul><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152256390.png" alt="webpack构建" title="webpack构建" style="zoom:20%;box-shadow:0 0 10px black" /><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152256695.png" alt="vite构建" title="vite构建" style="zoom: 20%;box-shadow:0 0 10px black" /></p><ul><li>具体操作如下（点击查看<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application">官方文档</a>）</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 1.创建命令</span></span><br><span class="line">npm create vue@latest</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.具体配置</span></span><br><span class="line"><span class="comment">## 配置项目名称</span></span><br><span class="line">√ Project name: vue3_test</span><br><span class="line"><span class="comment">## 是否添加TypeScript支持</span></span><br><span class="line">√ Add TypeScript?  Yes</span><br><span class="line"><span class="comment">## 是否添加JSX支持</span></span><br><span class="line">√ Add JSX Support?  No</span><br><span class="line"><span class="comment">## 是否添加路由环境</span></span><br><span class="line">√ Add Vue Router <span class="keyword">for</span> Single Page Application development?  No</span><br><span class="line"><span class="comment">## 是否添加pinia环境</span></span><br><span class="line">√ Add Pinia <span class="keyword">for</span> state management?  No</span><br><span class="line"><span class="comment">## 是否添加单元测试</span></span><br><span class="line">√ Add Vitest <span class="keyword">for</span> Unit Testing?  No</span><br><span class="line"><span class="comment">## 是否添加端到端测试方案</span></span><br><span class="line">√ Add an <span class="keyword">End</span><span class="literal">-to-End</span> Testing Solution? » No</span><br><span class="line"><span class="comment">## 是否添加ESLint语法检查</span></span><br><span class="line">√ Add ESLint <span class="keyword">for</span> code quality?  Yes</span><br><span class="line"><span class="comment">## 是否添加Prettiert代码格式化</span></span><br><span class="line">√ Add Prettier <span class="keyword">for</span> code formatting?  No</span><br></pre></td></tr></table></figure><p><code>自己动手编写一个</code>App组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好啊！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>, <span class="comment">// 组件名</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.app</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>安装官方推荐的<code>vscode</code>插件： </p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152308687.png" alt="image-20240515230813598"></p><p>总结：</p><ul><li><code>Vite</code> 项目中，<code>index.html</code> 是项目的入口文件，在项目最外层。</li><li>加载<code>index.html</code>后，<code>Vite</code> 解析 <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> 指向的<code>JavaScript</code>。</li><li><code>Vue3</code>**中是通过 **<code>createApp</code> 函数创建一个应用实例。</li></ul><br><h3 id="2-3、一个简单的效果"><a href="#2-3、一个简单的效果" class="headerlink" title="2.3、一个简单的效果 "></a><strong><font color='#10c300'>2.3、一个简单的效果 </font></strong></h3><p><code>Vue3</code>向下兼容<code>Vue2</code>语法，且<code>Vue3</code>中的模板中可以没有根标签</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            年龄+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showTel&quot;</span>&gt;</span></span><br><span class="line">            点我查看联系方式</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">tel</span>: <span class="string">&#x27;13888888888&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;zhang-san&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">showTel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">tel</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h2 id="三、Vue3核心语法"><a href="#三、Vue3核心语法" class="headerlink" title="三、Vue3核心语法"></a><strong><font color='red'>三、Vue3核心语法</font></strong></h2><h3 id="3-1、OptionsAPI-与-CompositionAPI"><a href="#3-1、OptionsAPI-与-CompositionAPI" class="headerlink" title="3.1、OptionsAPI 与 CompositionAPI"></a><strong><font color='#10c300'>3.1、OptionsAPI 与 CompositionAPI</font></strong></h3><ul><li><code>Vue2</code>的<code>API</code>设计是<code>Options</code>（配置）风格的。</li><li><code>Vue3</code>的<code>API</code>设计是<code>Composition</code>（组合）风格的。</li></ul><br><h4 id="1）、Options-API-的弊端"><a href="#1）、Options-API-的弊端" class="headerlink" title="1）、Options API 的弊端"></a><strong><font color='cornflowerblue'>1）、Options API 的弊端</font></strong></h4><p><code>Options</code>类型的 <code>API</code>，数据、方法、计算属性等，是分散在：<code>data</code>、<code>methods</code>、<code>computed</code>中的，若想新增或者修改一个需求，就需要分别修改：<code>data</code>、<code>methods</code>、<code>computed</code>，不便于维护和复用。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312523.gif" alt="1.gif" style="zoom:70%;border-radius:20px" /><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312829.gif" alt="2.gif" style="zoom:70%;border-radius:20px" /></p><br><h4 id="2）、Composition-API-的优势"><a href="#2）、Composition-API-的优势" class="headerlink" title="2）、Composition API 的优势"></a><strong><font color='cornflowerblue'>2）、Composition API 的优势</font></strong></h4><p>可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。</p><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312436.gif" alt="3.gif" style="height:300px;border-radius:10px"  /><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312956.gif" alt="4.gif" style="height:300px;border-radius:10px"  /></p><blockquote><p>说明：以上四张动图原创作者：大帅老猿</p></blockquote><br><h3 id="3-2、拉开序幕的-setup"><a href="#3-2、拉开序幕的-setup" class="headerlink" title="3.2、拉开序幕的 setup"></a><strong><font color='#10c300'>3.2、拉开序幕的 setup</font></strong></h3><h4 id="1）、setup-概述"><a href="#1）、setup-概述" class="headerlink" title="1）、setup 概述"></a><strong><font color='cornflowerblue'>1）、setup 概述</font></strong></h4><p><code>setup</code>是<code>Vue3</code>中一个新的配置项，值是一个函数，它是 <code>Composition API</code> <strong>“表演的舞台</strong><em><strong>”</strong></em>，组件中所用到的：数据、方法、计算属性、监视……等等，均配置在<code>setup</code>中。</p><p>特点如下：</p><ul><li><code>setup</code>函数返回的对象中的内容，可直接在模板中使用。</li><li><code>setup</code>中访问<code>this</code>是<code>undefined</code>。</li><li><strong><code>setup</code></strong> <strong>函数会在<code>beforeCreate</code>之前调用，它是“领先”所有钩子执行的</strong>。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            年龄+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showTel&quot;</span>&gt;</span></span><br><span class="line">            点我查看联系方式</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 数据，原来写在data中（注意：此时的name、age、tel数据都不是响应式数据）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> name = <span class="string">&#x27;张三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> age = <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> tel = <span class="string">&#x27;13888888888&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 方法，原来写在methods中</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            name = <span class="string">&#x27;zhang-san&#x27;</span> <span class="comment">// 注意：此时这么修改name页面是不变化的</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            age += <span class="number">1</span> <span class="comment">// 注意：此时这么修改age页面是不变化的</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(age)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(tel)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 返回一个对象，对象中的内容，模板中可以直接使用</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123; name, age, tel, changeName, changeAge, showTel &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h4 id="2）、setup-的返回值"><a href="#2）、setup-的返回值" class="headerlink" title="2）、setup 的返回值"></a><strong><font color='cornflowerblue'>2）、setup 的返回值</font></strong></h4><ul><li>若返回一个<strong>对象</strong>：则对象中的：属性、方法等，在模板中均可以直接使用**（重点关注）。**</li><li>若返回一个<strong>函数</strong>：则可以自定义渲染内容将直接渲染在页面，代码如下：</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">()=&gt;</span> <span class="string">&#x27;你好啊！&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3）、setup-与-Options-API-的关系"><a href="#3）、setup-与-Options-API-的关系" class="headerlink" title="3）、setup 与 Options API 的关系"></a><font color='orange' size="4">3）、setup 与 Options API 的关系</font></h4><ul><li><p><code>Vue2</code> 的配置（<code>data</code>、<code>methos</code>……）中<strong>可以访问到</strong> <code>setup</code>中的属性、方法。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; c &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;Person&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> name = <span class="string">&#x27;张三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123; name &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">c</span>: <span class="variable language_">this</span>.<span class="property">name</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>但在<code>setup</code>中<strong>不能访问到</strong><code>Vue2</code>的配置（<code>data</code>、<code>methos</code>……）。</p></li><li><p>如果与<code>Vue2</code>冲突，则<code>setup</code>优先。</p></li></ul><br><h4 id="4）、setup-语法糖"><a href="#4）、setup-语法糖" class="headerlink" title="4）、setup 语法糖"></a><strong><font color='cornflowerblue'>4）、setup 语法糖</font></strong></h4><p><code>setup</code>函数有一个语法糖，这个语法糖，可以让我们把<code>setup</code>独立出去（默认会把里面的数据return出去），代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changName&quot;</span>&gt;</span>修改名字<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changAge&quot;</span>&gt;</span>年龄+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showTel&quot;</span>&gt;</span>点我查看联系方式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>:<span class="string">&#x27;Person&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 下面的写法是setup语法糖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>) <span class="comment">//undefined</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 数据（注意：此时的name、age、tel都不是响应式数据）</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> name = <span class="string">&#x27;张三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> age = <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> tel = <span class="string">&#x27;13888888888&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    name = <span class="string">&#x27;李四&#x27;</span><span class="comment">//注意：此时这么修改name页面是不变化的</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changAge</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(age)</span></span><br><span class="line"><span class="language-javascript">    age += <span class="number">1</span> <span class="comment">//注意：此时这么修改age页面是不变化的</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(tel)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>**扩展：**上述代码，还需要编写一个不写<code>setup</code>的<code>script</code>标签，去指定组件名字，比较麻烦，我们可以借助<code>vite</code>中的插件简化</p><ol><li>第一步：<code>npm i vite-plugin-vue-setup-extend -D</code></li><li>第二步：<code>vite.config.ts</code></li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="title class_">VueSetupExtend</span>() ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>第三步：</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=<span class="string">&quot;ts&quot;</span> name=<span class="string">&quot;Person&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><br><h3 id="3-3、ref-创建：基本类型的响应式数据"><a href="#3-3、ref-创建：基本类型的响应式数据" class="headerlink" title="3.3、ref 创建：基本类型的响应式数据"></a><strong><font color='#10c300'>3.3、ref 创建：基本类型的响应式数据</font></strong></h3><ul><li>**作用：**定义响应式变量。</li><li><strong>语法：</strong><code>let xxx = ref(初始值)</code>。</li><li>**返回值：**一个<code>RefImpl</code>的实例对象，简称<code>ref对象</code>或<code>ref</code>，<code>ref</code>对象的<code>value</code><strong>属性是响应式的</strong>。</li><li><strong>注意点：</strong><ul><li><code>JS</code>中操作数据需要：<code>xxx.value</code>，但模板中不需要<code>.value</code>，直接使用即可。</li><li>对于<code>let name = ref(&#39;张三&#39;)</code>来说，<code>name</code>不是响应式的，<code>name.value</code>是响应式的。</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>修改名字<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span>年龄+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showTel&quot;</span>&gt;</span>点我查看联系方式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// name和age是一个RefImpl的实例对象，简称ref对象，它们的value属性是响应式的。</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;张三&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// tel就是一个普通的字符串，不是响应式的</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> tel = <span class="string">&#x27;13888888888&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// JS中操作ref对象时候需要.value</span></span></span><br><span class="line"><span class="language-javascript">    name.<span class="property">value</span> = <span class="string">&#x27;李四&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 注意：name不是响应式的，name.value是响应式的，所以如下代码并不会引起页面的更新。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// name = ref(&#x27;zhang-san&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// JS中操作ref对象时候需要.value</span></span></span><br><span class="line"><span class="language-javascript">    age.<span class="property">value</span> += <span class="number">1</span> </span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(age.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">showTel</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(tel)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="3-4、reactive-创建：对象类型的响应式数据"><a href="#3-4、reactive-创建：对象类型的响应式数据" class="headerlink" title="3.4、reactive 创建：对象类型的响应式数据"></a><strong><font color='#10c300'>3.4、reactive 创建：对象类型的响应式数据</font></strong></h3><ul><li><strong>作用：<strong>定义一个</strong>响应式对象</strong>（基本类型不要用它，要用<code>ref</code>，否则报错）</li><li><strong>语法：</strong><code>let 响应式对象= reactive(源对象)</code>。</li><li>**返回值：**一个<code>Proxy</code>的实例对象，简称：响应式对象。</li><li><strong>注意点：</strong><code>reactive</code>定义的响应式数据是“深层次”的。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>汽车信息：一台&#123;&#123; car.brand &#125;&#125;汽车，价值&#123;&#123; car.price &#125;&#125;万<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>游戏列表：<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>测试：&#123;&#123;obj.a.b.c.d&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCarPrice&quot;</span>&gt;</span>修改汽车价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeFirstGame&quot;</span>&gt;</span>修改第一游戏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123; <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> games = <span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa01&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;英雄联盟&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa02&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王者荣耀&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa03&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;原神&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> obj = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">a</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">b</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">c</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">d</span>:<span class="number">666</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeCarPrice</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  car.<span class="property">price</span> += <span class="number">10</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeFirstGame</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  games[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&#x27;流星蝴蝶剑&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  obj.<span class="property">a</span>.<span class="property">b</span>.<span class="property">c</span>.<span class="property">d</span> = <span class="number">999</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="3-5、ref-创建：对象类型的响应式数据"><a href="#3-5、ref-创建：对象类型的响应式数据" class="headerlink" title="3.5、ref 创建：对象类型的响应式数据"></a><strong><font color='#10c300'>3.5、ref 创建：对象类型的响应式数据</font></strong></h3><ul><li>其实<code>ref</code>接收的数据可以是：<strong>基本类型</strong>、<strong>对象类型</strong>。</li><li>若<code>ref</code>接收的是对象类型，内部其实也是调用了<code>reactive</code>函数。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>汽车信息：一台&#123;&#123; car.brand &#125;&#125;汽车，价值&#123;&#123; car.price &#125;&#125;万<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>游戏列表：<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>测试：&#123;&#123;obj.a.b.c.d&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCarPrice&quot;</span>&gt;</span>修改汽车价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeFirstGame&quot;</span>&gt;</span>修改第一游戏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> car = <span class="title function_">ref</span>(&#123; <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> games = <span class="title function_">ref</span>([</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa01&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;英雄联盟&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa02&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王者荣耀&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123; <span class="attr">id</span>: <span class="string">&#x27;ahsgdyfa03&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;原神&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> obj = <span class="title function_">ref</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">a</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">b</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">c</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">d</span>:<span class="number">666</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(car)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeCarPrice</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  car.<span class="property">value</span>.<span class="property">price</span> += <span class="number">10</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeFirstGame</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  games.<span class="property">value</span>[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&#x27;流星蝴蝶剑&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  obj.<span class="property">value</span>.<span class="property">a</span>.<span class="property">b</span>.<span class="property">c</span>.<span class="property">d</span> = <span class="number">999</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="3-6、ref-对比-reactive"><a href="#3-6、ref-对比-reactive" class="headerlink" title="3.6、ref 对比 reactive"></a><strong><font color='#10c300'>3.6、ref 对比 reactive</font></strong></h3><p><strong>宏观角度看：</strong></p><ol><li><p><code>ref</code>用来定义：<strong>基本类型数据</strong>、<strong>对象类型数据</strong>；</p></li><li><p><code>reactive</code>用来定义：<strong>对象类型数据</strong>。</p></li></ol><ul><li><strong>区别：</strong></li></ul><ol><li><p><code>ref</code>创建的变量必须使用<code>.value</code>（可以使用<code>Vue - Official</code>插件自动添加<code>.value</code>）。</p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312093.png" alt="自动补充value" style="zoom:50%;border-radius:20px" /> </li><li><p><strong><code>reactive</code>重新分配一个新对象，会失去响应式（可以使用Object.assign去整体替换）。</strong></p></li></ol><ul><li><strong>使用原则：</strong></li></ul><ol><li>若需要一个基本类型的响应式数据，必须使用<code>ref</code>。</li><li>若需要一个响应式对象，层级不深，<code>ref</code>、<code>reactive</code>都可以。</li><li>若需要一个响应式对象，且层级较深，推荐使用<code>reactive</code>。</li></ol><br><h3 id="3-7、toRefs-与-toRef"><a href="#3-7、toRefs-与-toRef" class="headerlink" title="3.7、toRefs 与 toRef"></a><strong><font color='#10c300'>3.7、toRefs 与 toRef</font></strong></h3><blockquote><p>从一个响应式对象中解构对象，解构出来的属性必丢失响应，因此需要使用到toRefs 与 toRef</p><p>例如：let route &#x3D; useRoute()<br>let { query } &#x3D; route  &#x2F;&#x2F; 这里的query响应必定会丢失<br>修改：let { query } &#x3D; toRefs(route)</p></blockquote><ul><li>作用：将一个响应式对象中的每一个属性，<strong>转换为ref对象</strong>（响应式）。</li><li>备注：<code>toRefs</code>与<code>toRef</code>功能一致，但<code>toRefs</code>可以批量转换。</li><li>语法如下：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123;person.name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123;person.age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>性别：&#123;&#123;person.gender&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span>修改名字<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span>修改年龄<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeGender&quot;</span>&gt;</span>修改性别<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref,reactive,toRefs,toRef&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>, <span class="attr">gender</span>:<span class="string">&#x27;男&#x27;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 通过toRefs将person对象中的n个属性批量取出，且依然保持响应式的能力</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> &#123;name,gender&#125; =  <span class="title function_">toRefs</span>(person) <span class="comment">// 将person中的属性名对应的属性值都转变成ref对象</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 通过toRef将person对象中的age属性取出，且依然保持响应式的能力</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> age = <span class="title function_">toRef</span>(person,<span class="string">&#x27;age&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    name.<span class="property">value</span> += <span class="string">&#x27;~&#x27;</span> <span class="comment">// 因为转换成了ref对象，所以用.value赋值</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    age.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeGender</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    gender.<span class="property">value</span> = <span class="string">&#x27;女&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="3-8、computed"><a href="#3-8、computed" class="headerlink" title="3.8、computed"></a><strong><font color='#10c300'>3.8、computed</font></strong></h3><p>作用：根据已有数据计算出新数据（和<code>Vue2</code>中的<code>computed</code>作用一致）。</p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152312559.gif" style="zoom:20%;" />  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">    姓：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;firstName&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    全名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeFullName&quot;</span>&gt;</span>全名改为：li-si<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;ref,computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> firstName = <span class="title function_">ref</span>(<span class="string">&#x27;zhang&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> lastName = <span class="title function_">ref</span>(<span class="string">&#x27;san&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 计算属性——只读取，不修改</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/* let fullName = computed(()=&gt;&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    return firstName.value + &#x27;-&#x27; + lastName.value</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">  &#125;) */</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">   <span class="comment">/* function changeFullName() &#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    fullName.value = &#x27;li-si&#x27;;  // 报错：无法为“value”赋值，因为它是只读属性</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">  &#125; */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 计算属性——既读取又修改</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> fullName = <span class="title function_">computed</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 读取</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> firstName.<span class="property">value</span> + <span class="string">&#x27;-&#x27;</span> + lastName.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 修改</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">set</span>(<span class="params">newVal</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人修改了fullName&#x27;</span>,val)</span></span><br><span class="line"><span class="language-javascript">      firstName.<span class="property">value</span> = newVal.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>]</span></span><br><span class="line"><span class="language-javascript">      lastName.<span class="property">value</span> = newVal.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">1</span>]</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">changeFullName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    fullName.<span class="property">value</span> = <span class="string">&#x27;li-si&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125; </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="3-9、watch"><a href="#3-9、watch" class="headerlink" title="3.9、watch"></a><strong><font color='#10c300'>3.9、watch</font></strong></h3><ul><li>作用：监视数据的变化（和<code>Vue2</code>中的<code>watch</code>作用一致）</li><li>特点：<code>Vue3</code>中的<code>watch</code>只能监视以下<strong>四种数据</strong>：<blockquote><ol><li><code>ref</code>定义的数据。</li><li><code>reactive</code>定义的数据。</li><li>函数返回一个值（<code>getter</code>函数）。</li><li>一个包含上述内容的数组。</li></ol></blockquote></li></ul><p>我们在<code>Vue3</code>中使用<code>watch</code>的时候，通常会遇到以下几种情况：</p><h4 id="1）、情况一：监视ref定义的基本类型数据"><a href="#1）、情况一：监视ref定义的基本类型数据" class="headerlink" title="1）、情况一：监视ref定义的基本类型数据"></a><strong><font color='cornflowerblue'>1）、情况一：监视ref定义的基本类型数据</font></strong></h4><p>监视<code>ref</code>定义的【基本类型】数据：直接写数据名即可，监视的是其<code>value</code>值的改变。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>情况一：监视【ref】定义的【基本类型】数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123; sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeSum&quot;</span>&gt;</span></span><br><span class="line">            点我sum+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeSum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    sum.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 监视，情况一：监视【ref】定义的【基本类型】数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> stopWatch = <span class="title function_">watch</span>(sum, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sum变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (newValue &gt;= <span class="number">10</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 当值大于等于10的时候就停止监听</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">stopWatch</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2）、情况二：监视ref定义的对象类型数据"><a href="#2）、情况二：监视ref定义的对象类型数据" class="headerlink" title="2）、情况二：监视ref定义的对象类型数据"></a><strong><font color='cornflowerblue'>2）、情况二：监视ref定义的对象类型数据</font></strong></h4><p>监视<code>ref</code>定义的【对象类型】数据：直接写数据名，监视的是对象的【地址值】，若想监视对象内部的数据，要手动开启深度监视。</p><blockquote><p>注意：</p><ul><li><p>若修改的是<code>ref</code>定义的对象中的属性，<code>newValue</code> 和 <code>oldValue</code> 都是新值，因为它们是同一个对象。</p></li><li><p>若修改整个<code>ref</code>定义的对象，<code>newValue</code> 是新值， <code>oldValue</code> 是旧值，因为不是同一个对象了。</p></li></ul></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>情况二：监视【ref】定义的【对象类型】数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            修改年龄</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePerson&quot;</span>&gt;</span></span><br><span class="line">            修改整个人</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> person = <span class="title function_">ref</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span>.<span class="property">name</span> += <span class="string">&#x27;~&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span>.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changePerson</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>: <span class="number">90</span> &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    watch的第一个参数是：被监视的数据</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    watch的第二个参数是：监视的回调</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    watch的第三个参数是：配置对象（deep、immediate等等.....）</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">*/</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 这里有几个问题需要注意：</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 1、监视【ref】定义的【对象类型】数据，监视的是对象的地址值(整个对象变化才会触发监听)</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 调用changeName和changeAge方法不会触发这个监听，changePerson则会触发</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(person, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 2、若想监视对象内部属性的变化，需要手动开启深度监视</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 调用changeName、changeAge、changePerson方法都会会触发这个监听</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 调用changeName、changeAge监听某属性值的变化，新值和旧值都是一样的，因为这里没有改变对象的地址值，导致指向的都是同一个地址(reactive定义的对象也一样)。changePerson是对person赋予一个新的对象，引用地址改变了因此新值和旧值才会不一样</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(person, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;, &#123; <span class="attr">deep</span>: <span class="literal">true</span>, <span class="attr">immediate</span>: <span class="literal">true</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3）、情况三：监视reactive定义的对象类型数据"><a href="#3）、情况三：监视reactive定义的对象类型数据" class="headerlink" title="3）、情况三：监视reactive定义的对象类型数据"></a><strong><font color='cornflowerblue'>3）、情况三：监视reactive定义的对象类型数据</font></strong></h4><p>监视<code>reactive</code>定义的【对象类型】数据，且默认开启了深度监视。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>情况三：监视【reactive】定义的【对象类型】数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            修改年龄</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePerson&quot;</span>&gt;</span></span><br><span class="line">            修改整个人</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>测试：&#123;&#123; obj.a.b.c &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">            修改obj.a.b.c</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> person = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> obj = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">a</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">b</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">c</span>: <span class="number">666</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">name</span> += <span class="string">&#x27;~&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changePerson</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Object</span>.<span class="title function_">assign</span>(person, &#123; <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>: <span class="number">80</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    obj.<span class="property">a</span>.<span class="property">b</span>.<span class="property">c</span> = <span class="number">888</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// changeName、hangeAge这里改变的对象里面的属性值，对象的引用地址没改变因此新值和旧值都是一样，   changePerson中由于是reactive定义的响应式对象不能直接赋值，需要使用Object.assign()给源对象添加可枚        举属性，因为是给原对象添加可枚举属性，所以可知原对象的引用地址没变，因此新值和旧值也是一样的。</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(person, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(obj, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Obj变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4）、情况四：监视ref-reactive定义的对象类型数据中的某个属性"><a href="#4）、情况四：监视ref-reactive定义的对象类型数据中的某个属性" class="headerlink" title="4）、情况四：监视ref&#x2F;reactive定义的对象类型数据中的某个属性"></a><strong><font color='cornflowerblue'>4）、情况四：监视ref&#x2F;reactive定义的对象类型数据中的某个属性</font></strong></h4><p>监视<code>ref</code>或<code>reactive</code>定义的【对象类型】数据中的<strong>某个属性</strong>，注意点如下：</p><ol><li>若该属性值<strong>不是</strong>【对象类型】，需要写成函数形式。</li><li>若该属性值是<strong>依然</strong>是【对象类型】，可直接编，也可写成函数，建议写成函数。</li></ol><p><strong>结论：监视的要是对象里的属性，那么最好写函数式</strong></p><p><strong>注意点：若是对象监视的是地址值，需要关注对象内部，需要手动开启深度监视。</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            修改年龄</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeC1&quot;</span>&gt;</span></span><br><span class="line">            修改第一台车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeC2&quot;</span>&gt;</span></span><br><span class="line">            修改第二台车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCar&quot;</span>&gt;</span></span><br><span class="line">            修改整个车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> person = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">car</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">c1</span>: <span class="string">&#x27;奔驰&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">c2</span>: <span class="string">&#x27;宝马&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">name</span> += <span class="string">&#x27;~&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeC1</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span>.<span class="property">c1</span> = <span class="string">&#x27;奥迪&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeC2</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span>.<span class="property">c2</span> = <span class="string">&#x27;大众&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeCar</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span> = &#123; <span class="attr">c1</span>: <span class="string">&#x27;雅迪&#x27;</span>, <span class="attr">c2</span>: <span class="string">&#x27;爱玛&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 这里有几个问题需要注意：</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 1、监视响应式对象中的某个属性，且该属性是基本类型的，要写成函数式</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> person.<span class="property">name</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person.name变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 2、监视响应式对象中的某个属性，且该属性是对象类型的</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 2-1、直接写监听的属性对象person.car(不推荐)，当改变整个car对象不会触发监听，当改变car对象中的某个属性则会触发监听。</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(person.<span class="property">car</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person.car变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 2-2、直接写监听的属性为一个有返回值的函数() =&gt; person.car  推荐，当改变整个car对象会触发监听，当改变car对象中的某个属性则不会触发监听，需开启深度监听。</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> person.<span class="property">car</span>, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person.car变化了&#x27;</span>, newValue, oldValue)</span></span><br><span class="line"><span class="language-javascript">&#125;, &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="5）、情况五：监视上述的多个数据"><a href="#5）、情况五：监视上述的多个数据" class="headerlink" title="5）、情况五：监视上述的多个数据"></a><strong><font color='cornflowerblue'>5）、情况五：监视上述的多个数据</font></strong></h4><p>监视上述的多个数据</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>情况五：监视上述的多个数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>姓名：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            修改年龄</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeC1&quot;</span>&gt;</span></span><br><span class="line">            修改第一台车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeC2&quot;</span>&gt;</span></span><br><span class="line">            修改第二台车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCar&quot;</span>&gt;</span></span><br><span class="line">            修改整个车</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> person = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">car</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">c1</span>: <span class="string">&#x27;奔驰&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">c2</span>: <span class="string">&#x27;宝马&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">name</span> += <span class="string">&#x27;~&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeC1</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span>.<span class="property">c1</span> = <span class="string">&#x27;奥迪&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeC2</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span>.<span class="property">c2</span> = <span class="string">&#x27;大众&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeCar</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">car</span> = &#123; <span class="attr">c1</span>: <span class="string">&#x27;雅迪&#x27;</span>, <span class="attr">c2</span>: <span class="string">&#x27;爱玛&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 监视，情况五：监视上述的多个数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(</span></span><br><span class="line"><span class="language-javascript">    [<span class="function">() =&gt;</span> person.<span class="property">name</span>, person.<span class="property">car</span>],</span></span><br><span class="line"><span class="language-javascript">    <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person.car变化了&#x27;</span>, newValue, oldValue) <span class="comment">// 生成的是一个数组</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="3-10、watchEffect"><a href="#3-10、watchEffect" class="headerlink" title="3.10、watchEffect"></a><strong><font color='#10c300'>3.10、watchEffect</font></strong></h3><ul><li><p>官网：立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。</p></li><li><p><code>watch</code>对比<code>watchEffect</code></p><blockquote><ol><li><p>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</p></li><li><p><code>watch</code>：要明确指出监视的数据</p></li><li><p><code>watchEffect</code>：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性），初始化的时候会执行一次。</p></li></ol></blockquote></li><li><p>示例代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>需求：水温达到50℃，或水位达到20cm，则联系服务器<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">            水温：&#123;&#123; temp &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>水位：&#123;&#123; height &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePrice&quot;</span>&gt;</span></span><br><span class="line">            水温+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeSum&quot;</span>&gt;</span></span><br><span class="line">            水位+10</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref, watch, watchEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> temp = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> height = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changePrice</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    temp.<span class="property">value</span> += <span class="number">10</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeSum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    height.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 用watch实现，需要明确的指出要监视：temp、height</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> stopWtach1 = <span class="title function_">watch</span>([temp, height], <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 从value中获取最新的temp值、height值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> [newTemp, newHeight] = value</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 室温达到50℃，或水位达到20cm，立刻联系服务器</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (newTemp &gt;= <span class="number">50</span> || newHeight &gt;= <span class="number">20</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;demo&#x27;</span>)?.<span class="property">innerText</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;联系服务器&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (newTemp &gt;= <span class="number">100</span> || newHeight &gt;= <span class="number">50</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;清理了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">stopWtach1</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 用watchEffect实现，不用</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> stopWtach = <span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 室温达到50℃，或水位达到20cm，立刻联系服务器</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (temp.<span class="property">value</span> &gt;= <span class="number">50</span> || height.<span class="property">value</span> &gt;= <span class="number">20</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;demo&#x27;</span>)?.<span class="property">innerText</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;联系服务器&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 水温达到100，或水位达到50，取消监视</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (temp.<span class="property">value</span> === <span class="number">100</span> || height.<span class="property">value</span> === <span class="number">50</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;清理了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">stopWtach</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><br><h3 id="3-11、标签的-ref-属性"><a href="#3-11、标签的-ref-属性" class="headerlink" title="3.11、标签的 ref 属性"></a><font color='red' size="">3.11、标签的 ref 属性</font></h3><p>作用：用于注册模板引用。</p><blockquote><ul><li><p>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</p></li><li><p>用在组件标签上，获取的是组件实例对象。</p></li></ul></blockquote><p>用在普通<code>DOM</code>标签上：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;guiGu&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;title1&quot;</span>&gt;</span></span><br><span class="line">            尚硅谷</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">ref</span>=<span class="string">&quot;title2&quot;</span>&gt;</span></span><br><span class="line">            前端</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span> <span class="attr">ref</span>=<span class="string">&quot;title3&quot;</span>&gt;</span></span><br><span class="line">            Vue</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showLog&quot;</span>&gt;</span></span><br><span class="line">            点我打印内容</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> title1 = <span class="title function_">ref</span>() <span class="comment">// 变量命名要和ref定义的命名一致</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> title2 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> title3 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">showLog</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 通过id获取元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> t1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;guiGu&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 打印内容(三种ts的断言方式)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>((t1 <span class="keyword">as</span> <span class="title class_">HTMLElement</span>).<span class="property">innerText</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// console.log((&lt;HTMLElement&gt;t1).innerText);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// console.log(t1?.innerText)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/************************************/</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 通过ref获取元素</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(title1.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(title2.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(title3.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>用在组件标签上：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父组件father.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateGeGe&quot;</span>&gt;</span></span><br><span class="line">            更新哥哥的信息</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateDiDi&quot;</span>&gt;</span></span><br><span class="line">            更新弟弟的信息</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Person</span> <span class="attr">ref</span>=<span class="string">&quot;ren&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Person1</span> <span class="attr">ref</span>=<span class="string">&quot;ren1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Person1</span> <span class="keyword">from</span> <span class="string">&#x27;./Person1.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Person</span> <span class="keyword">from</span> <span class="string">&#x27;./Person.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> ren = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> ren1 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">updateGeGe</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    ren.<span class="property">value</span>.<span class="title function_">execute</span>()</span></span><br><span class="line"><span class="language-javascript">    ren.<span class="property">value</span>.<span class="property">name</span> = <span class="string">&#x27;张大三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    ren.<span class="property">value</span>.<span class="property">age</span> = <span class="number">22</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">updateDiDi</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    ren1.<span class="property">value</span>.<span class="property">name</span> = <span class="string">&#x27;大米&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    ren1.<span class="property">value</span>.<span class="property">age</span> = <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.index</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">255</span> <span class="number">193</span> <span class="number">170</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 子组件Person.vue中要使用defineExpose暴露内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gege&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>哥哥组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineExpose, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;张三&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">execute</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已执行哥哥组件中的方法&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用defineExpose将组件中的数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; name, age, execute &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.gege</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">160</span> <span class="number">235</span> <span class="number">255</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 子组件Person1.vue中要使用defineExpose暴露内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;didi&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>弟弟组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineExpose, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;小米&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">12</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用defineExpose将组件中的数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; name, age &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.didi</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">163</span> <span class="number">157</span> <span class="number">255</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="3-12、组件的-refs-属性"><a href="#3-12、组件的-refs-属性" class="headerlink" title="3.12、组件的$refs  属性"></a><strong><font color='#10c300'>3.12、组件的$refs  属性</font></strong></h3><blockquote><p>获取到页面所有组件的ref实例对象</p></blockquote><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408080057790.png" alt="image-20240808005710611"></p><p><strong>父组件（father.vue）</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;update($refs)&quot;</span>&gt;</span></span><br><span class="line">            更新兄弟的信息</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Person</span> <span class="attr">ref</span>=<span class="string">&quot;ren&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Person1</span> <span class="attr">ref</span>=<span class="string">&quot;ren1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Person1</span> <span class="keyword">from</span> <span class="string">&#x27;./index1.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Person</span> <span class="keyword">from</span> <span class="string">&#x27;./index.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> ren = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> ren1 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">update</span>(<span class="params">refs: any</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(refs)</span></span><br><span class="line"><span class="language-javascript">    refs.<span class="property">ren</span>.<span class="property">name</span> = <span class="string">&#x27;张大三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    refs.<span class="property">ren</span>.<span class="property">age</span> = <span class="number">22</span></span></span><br><span class="line"><span class="language-javascript">    refs.<span class="property">ren</span>.<span class="title function_">execute</span>()</span></span><br><span class="line"><span class="language-javascript">    refs.<span class="property">ren1</span>.<span class="property">name</span> = <span class="string">&#x27;大米&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    refs.<span class="property">ren1</span>.<span class="property">age</span> = <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.index</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">255</span> <span class="number">193</span> <span class="number">170</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>子组件（Person.vue）</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gege&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>哥哥组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineExpose, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;张三&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">18</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">execute</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;已执行哥哥组件中的方法&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用defineExpose将组件中的数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; name, age, execute &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.gege</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">160</span> <span class="number">235</span> <span class="number">255</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>子组件（Person1.vue）</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;didi&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>弟弟组件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>姓名：&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>年龄：&#123;&#123; age &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineExpose, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;小米&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> age = <span class="title function_">ref</span>(<span class="number">12</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用defineExpose将组件中的数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; name, age &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.didi</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">163</span> <span class="number">157</span> <span class="number">255</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="3-13、props"><a href="#3-13、props" class="headerlink" title="3.13、props"></a><strong><font color='#10c300'>3.13、props</font></strong></h3><blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/ types/index.<span class="property">ts</span></span><br><span class="line"><span class="comment">// 定义一个接口，限制每个Person对象的格式</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">PersonInter</span> &#123;</span><br><span class="line"><span class="attr">id</span>:<span class="built_in">string</span>,</span><br><span class="line"><span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个自定义类型Persons</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">Persons</span> = <span class="title class_">Array</span>&lt;<span class="title class_">PersonInter</span>&gt;</span><br></pre></td></tr></table></figure><p><code>App.vue</code>中代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Person</span> <span class="attr">:list</span>=<span class="string">&quot;persons&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> type &#123; <span class="title class_">Persons</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./types&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Person</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Person.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let persons:Persons = reactive([</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> persons = reactive&lt;<span class="title class_">Persons</span>&gt;([</span></span><br><span class="line"><span class="language-javascript">    &#123; <span class="attr">id</span>: <span class="string">&#x27;e98219e12&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123; <span class="attr">id</span>: <span class="string">&#x27;e98219e13&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123; <span class="attr">id</span>: <span class="string">&#x27;e98219e14&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Person.vue</code>中代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123; item.name &#125;&#125;--&#123;&#123; item.age &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineProps &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 第一种写法：仅接收</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let props = defineProps([&#x27;list&#x27;])</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 第二种写法：接收+限制类型，因为传来的可能不止一个数据，因此在泛型中用一个对象包裹</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let props = defineProps&lt;&#123; list: Persons; aa?: string &#125;&gt;();</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 第三种写法：接收+限制类型+指定默认值+限制必要性</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// .....withDefaults  指定默认值</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// .....Persons 限制类型</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// .....list?: 限制必要性 :父组件必须要  ?: 父组件可不传  ts语法</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">withDefaults</span>(defineProps&lt;&#123; list?: <span class="title class_">Persons</span> &#125;&gt;(), &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">list</span>: <span class="function">() =&gt;</span> [&#123; <span class="attr">id</span>: <span class="string">&#x27;asdasg01&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;小猪佩奇&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;],</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(props)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><p><strong>易懂</strong></p><p>在 Vue 3 中使用 TypeScript 时，你可以通过 withDefaults 函数来为 defineProps 定义的 props 设置默认值。withDefaults 函数允许你指定默认值，同时保持 TypeScript 的类型检查。</p><p>以下是如何在 TypeScript 中为 defineProps 设置默认值的示例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">假设你有一个子组件 PasswordDialog.vue，你可以这样定义和接收 lianlianMercNo，并为其设置默认值：</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 使用接收到的 lianlianMercNo --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Merchant Number: &#123;&#123; lianlianMercNo &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineProps, withDefaults &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 定义 props 的类型</span></span></span><br><span class="line"><span class="language-javascript">interface <span class="title class_">Props</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    lianlianMercNo?: number <span class="comment">// 将其设为可选</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用 withDefaults 来为 props 设置默认值</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">withDefaults</span>(defineProps&lt;<span class="title class_">Props</span>&gt;(), &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">lianlianMercNo</span>: <span class="number">1234</span>, <span class="comment">// 设置默认值</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">在父组件中，你可以这样使用这个子组件并传递 lianlianMercNo：</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">PasswordDialog</span> <span class="attr">ref</span>=<span class="string">&quot;passwordRef&quot;</span> <span class="attr">lianlian-merc-no</span>=<span class="string">&quot;4444&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">PasswordDialog</span> <span class="keyword">from</span> <span class="string">&#x27;./PasswordDialog.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在这个示例中：</p><p>子组件 PasswordDialog.vue 中定义了一个 Props 接口，其中 lianlianMercNo 属性是可选的（使用 ? 标记）。<br>使用 withDefaults 函数将 defineProps<Props>() 包裹起来，并为 lianlianMercNo 设置默认值 1234。<br>如果父组件没有传递 lianlianMercNo，则 PasswordDialog 组件会使用默认值 1234。<br>这样，你就可以在 TypeScript 中为 defineProps 设置默认值，同时保持类型检查。</p><br><h3 id="3-14、生命周期"><a href="#3-14、生命周期" class="headerlink" title="3.14、生命周期"></a><strong><font color='#10c300'>3.14、生命周期</font></strong></h3><ul><li><p>概念：<code>Vue</code>组件实例在创建时要经历一系列的初始化步骤，在此过程中<code>Vue</code>会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：生命周期钩子</p></li><li><p>规律：</p><blockquote><p>生命周期整体分为四个阶段，分别是：<strong>创建、挂载、更新、销毁</strong>，每个阶段都有两个钩子，一前一后。</p></blockquote></li><li><p><code>Vue2</code>的生命周期</p><blockquote><p>创建阶段：<code>beforeCreate</code>、<code>created</code></p><p>挂载阶段：<code>beforeMount</code>、<code>mounted</code></p><p>更新阶段：<code>beforeUpdate</code>、<code>updated</code></p><p>销毁阶段：<code>beforeDestroy</code>、<code>destroyed</code></p></blockquote></li><li><p><code>Vue3</code>的生命周期</p><blockquote><p>创建阶段：<code>setup</code></p><p>挂载阶段：<code>onBeforeMount</code>、<code>onMounted</code></p><p>更新阶段：<code>onBeforeUpdate</code>、<code>onUpdated</code></p><p>卸载阶段：<code>onBeforeUnmount</code>、<code>onUnmounted</code></p></blockquote></li><li><p>常用的钩子：<code>onMounted</code>(挂载完毕)、<code>onUpdated</code>(更新完毕)、<code>onBeforeUnmount</code>(卸载之前)</p></li><li><p><strong>注意项：(重点)</strong></p><p><strong>到底是子组件挂载(onMounted)先执行还是父组件的挂载(onMounted)先执行？</strong></p><p>答：先执行子组件的挂载再执行父组件的挂载，vue项目中app.vue是所有组件的顶级组件，因此它的挂载是最后执行</p></li><li><p>示例代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123; sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeSum&quot;</span>&gt;</span></span><br><span class="line">            点我sum+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- vue3写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;Person&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    onBeforeMount,</span></span><br><span class="line"><span class="language-javascript">    onBeforeUnmount,</span></span><br><span class="line"><span class="language-javascript">    onBeforeUpdate,</span></span><br><span class="line"><span class="language-javascript">    onMounted,</span></span><br><span class="line"><span class="language-javascript">    onUnmounted,</span></span><br><span class="line"><span class="language-javascript">    onUpdated,</span></span><br><span class="line"><span class="language-javascript">    ref,</span></span><br><span class="line"><span class="language-javascript">&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeSum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    sum.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setup&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 生命周期钩子</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onBeforeMount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;挂载之前&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;挂载完毕&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onBeforeUpdate</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;更新之前&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onUpdated</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;更新完毕&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;卸载之前&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;卸载完毕&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><br><h3 id="3-15、自定义hook"><a href="#3-15、自定义hook" class="headerlink" title="3.15、自定义hook"></a><strong><font color='#10c300'>3.15、自定义hook</font></strong></h3><blockquote><p>接口地址：<a href="https://dog.ceo/api/breed/pembroke/images/random">https://dog.ceo/api/breed/pembroke/images/random</a>  随机获取一张狗的图片(有的时候须要梯子)</p></blockquote><ul><li><p>什么是<code>hook</code>？—— 本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装，类似于<code>vue2.x</code>中的<code>mixin</code>。</p></li><li><p>自定义<code>hook</code>的优势：复用代码, 让<code>setup</code>中的逻辑更清楚易懂。</p></li><li><p>useSum.ts和useDog.ts中的可以分别写onMounted钩子</p></li></ul><p>示例代码：</p><ul><li><p><code>useSum.ts</code>中内容如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> -= <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">increment</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//向外部暴露数据</span></span><br><span class="line">  <span class="keyword">return</span> &#123;sum,increment,decrement&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>useDog.ts</code>中内容如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; onMounted, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> dogList = reactive&lt;string[]&gt;([])</span><br><span class="line">    <span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getDog</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        loading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://dog.ceo/api/breed/pembroke/images/random&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            dogList.<span class="title function_">push</span>(res.<span class="property">data</span>.<span class="property">message</span>)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">getDog</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 向外暴露数据</span></span><br><span class="line">    <span class="keyword">return</span> &#123; dogList, loading, getDog &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>组件中具体使用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123; sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span></span><br><span class="line">        点我+1</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;decrement&quot;</span>&gt;</span></span><br><span class="line">        点我-1</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-for</span>=<span class="string">&quot;(u, index) in dogList.urlList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;(u as string)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-show</span>=<span class="string">&quot;dogList.isLoading&quot;</span>&gt;</span>加载中......<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getDog&quot;</span>&gt;</span></span><br><span class="line">        再来一只狗</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> useDog <span class="keyword">from</span> <span class="string">&#x27;./hooks/useDog&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> useSum <span class="keyword">from</span> <span class="string">&#x27;./hooks/useSum&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; sum, increment, decrement &#125; = <span class="title function_">useSum</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; dogList, getDog &#125; = <span class="title function_">useDog</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><br><h2 id="四、-路由"><a href="#四、-路由" class="headerlink" title="四、 路由"></a><strong><font color='red'>四、 路由</font></strong></h2><h3 id="4-1、对路由的理解"><a href="#4-1、对路由的理解" class="headerlink" title="4.1、对路由的理解"></a><strong><font color='#10c300'>4.1、对路由的理解</font></strong></h3><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152313677.png" alt="image-20231018144351536" style="zoom:20%;border-radius:40px" /> <br><h3 id="4-2、基本切换效果"><a href="#4-2、基本切换效果" class="headerlink" title="4.2、基本切换效果"></a><strong><font color='#10c300'>4.2、基本切换效果</font></strong></h3><ul><li><p><code>Vue3</code>中要使用<code>vue-router</code>的最新版本，目前是<code>4</code>版本。</p></li><li><p>路由配置文件代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个路由器，并暴露出去</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/About.vue&#x27;</span></span><br><span class="line"><span class="comment">// 引入一个一个可能要呈现组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/News.vue&#x27;</span></span><br><span class="line"><span class="comment">// 第一步：引入createRouter</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二步：创建路由器</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(), <span class="comment">// 路由器的工作模式（稍后讲解）</span></span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        <span class="comment">// 一个一个的路由规则</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 暴露出去router</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>main.ts</code>代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>App.vue</code>代码如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>Vue路由测试<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 导航区 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navigate&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">to</span>=<span class="string">&quot;/news&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>新闻<span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 展示区 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main-content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">RouterView</span>&gt;</span><span class="tag">&lt;/<span class="name">RouterView</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;<span class="title class_">RouterLink</span>,<span class="title class_">RouterView</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>  </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><br><h3 id="4-3、-两个注意点"><a href="#4-3、-两个注意点" class="headerlink" title="4.3、 两个注意点"></a><strong><font color='#10c300'>4.3、 两个注意点</font></strong></h3><blockquote><ol><li><p>路由组件通常存放在<code>pages</code> 或 <code>views</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</p></li><li><p>通过点击导航，视觉效果上“消失” 了的路由组件，默认是被<strong>卸载</strong>掉的，需要的时候再去<strong>挂载</strong>。</p></li></ol></blockquote><br><h3 id="4-4、路由器工作模式"><a href="#4-4、路由器工作模式" class="headerlink" title="4.4、路由器工作模式"></a><strong><font color='#10c300'>4.4、路由器工作模式</font></strong></h3><ol><li><p><strong><code>history</code>模式</strong></p><blockquote><p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统的网站<code>URL</code>。</p><p>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有<code>404</code>错误。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHistory</span>(), <span class="comment">//history模式</span></span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li><li><p><strong><code>hash</code>模式</strong></p><blockquote><p>优点：兼容性更好，因为不需要服务器端处理路径。</p><p>缺点：<code>URL</code>带有<code>#</code>不太美观，且在<code>SEO</code>优化方面相对较差。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHashHistory</span>(), <span class="comment">//hash模式</span></span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li></ol><br><h3 id="4-5、to的两种写法"><a href="#4-5、to的两种写法" class="headerlink" title="4.5、to的两种写法"></a><strong><font color='#10c300'>4.5、to的两种写法</font></strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 第一种：to的字符串写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>主页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 第二种：to的对象写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;path:&#x27;/home&#x27;&#125;&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="4-6、命名路由"><a href="#4-6、命名路由" class="headerlink" title="4.6、命名路由"></a><strong><font color='#10c300'>4.6、命名路由</font></strong></h3><p>作用：可以简化路由跳转及传参（后面就讲）。</p><p>给路由规则命名：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>跳转路由：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--简化前：需要写完整的路径（to的字符串写法） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/news/detail&quot;</span>&gt;</span>跳转<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--简化后：直接通过名字跳转（to的对象写法配合name属性） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;guanyu&#x27;&#125;&quot;</span>&gt;</span>跳转<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure><br><h3 id="4-7、嵌套路由"><a href="#4-7、嵌套路由" class="headerlink" title="4.7、嵌套路由"></a><strong><font color='#10c300'>4.7、嵌套路由</font></strong></h3><ol><li><p>编写<code>News</code>的子路由：<code>Detail.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; query.content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; query &#125; = <span class="title function_">toRefs</span>(<span class="title function_">useRoute</span>())</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>配置路由规则，使用<code>children</code>配置项：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">            <span class="attr">children</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line">                    <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>, <span class="comment">// 子路由的路径不需要加斜杠/</span></span><br><span class="line">                    <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>记得去<code>News.vue</code>组件中预留一个<code>&lt;router-view&gt;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// News.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;news&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">RouterLink</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        name: &#x27;Detail&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        query: &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                            id: item.id,</span></span></span><br><span class="line"><span class="string"><span class="tag">                            content: item.content,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        &#125;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                    &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                    &#123;&#123; item.title &#125;&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RouterView</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;News&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> list = <span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻1的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻2的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻3&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻3的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202406140004977.png" alt="image-20240614000448855"></p><br><h3 id="4-8、路由传参"><a href="#4-8、路由传参" class="headerlink" title="4.8、路由传参"></a><strong><font color='#10c300'>4.8、路由传参</font></strong></h3><h4 id="1）、query参数"><a href="#1）、query参数" class="headerlink" title="1）、query参数"></a><strong><font color='cornflowerblue'>1）、query参数</font></strong></h4><p><strong>传递参数</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// News.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;news&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">RouterLink</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        name: &#x27;Detail&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        query: &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                            id: item.id,</span></span></span><br><span class="line"><span class="string"><span class="tag">                            content: item.content,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        &#125;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                    &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                    &#123;&#123; item.title &#125;&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RouterView</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;News&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> list = <span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻1的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻2的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">id</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">title</span>: <span class="string">&#x27;新闻3&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">content</span>: <span class="string">&#x27;新闻3的详情&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>接收参数：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// Detail.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; query.content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; query &#125; = <span class="title function_">toRefs</span>(<span class="title function_">useRoute</span>())</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h4 id="2）、params参数"><a href="#2）、params参数" class="headerlink" title="2）、params参数"></a><strong><font color='#10c300'>2）、params参数</font></strong></h4><p><strong><code>需在路由中占位</code></strong></p><p><strong>传递参数</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 跳转并携带params参数（to的对象写法） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;news&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">RouterLink</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                        name: &#x27;Detail&#x27;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        params: &#123;</span></span></span><br><span class="line"><span class="string"><span class="tag">                            id: item.id,</span></span></span><br><span class="line"><span class="string"><span class="tag">                            content: item.content,</span></span></span><br><span class="line"><span class="string"><span class="tag">                        &#125;,</span></span></span><br><span class="line"><span class="string"><span class="tag">                    &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                    &#123;&#123; item.title &#125;&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RouterView</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>接收参数：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123; params.id &#125;&#125;、&#123;&#123; params.content &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; params &#125; = <span class="title function_">toRefs</span>(<span class="title function_">useRoute</span>())</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>在路由中占位：</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(), <span class="comment">// 路由的工作模式</span></span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/News.vue&#x27;</span>),</span><br><span class="line">            <span class="attr">children</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:content?&#x27;</span>, <span class="comment">// 占位要和跳转传参保持一致  ？：是可传可不传</span></span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;Detail&#x27;</span>,</span><br><span class="line">                    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/Detail.vue&#x27;</span>),</span><br><span class="line">                &#125;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>备注1：传递<code>params</code>参数时，若使用<code>to</code>的对象写法，必须使用<code>name</code>配置项，不能用<code>path</code>。</p><p>备注2：传递<code>params</code>参数时，需要提前在路由中占位。</p></blockquote><br><h3 id="4-9、路由的props配置"><a href="#4-9、路由的props配置" class="headerlink" title="4.9、路由的props配置"></a><strong><font color='#10c300'>4.9、路由的props配置</font></strong></h3><blockquote><p>上述路由接收参数的时候、需要写大量的代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> &#123; params, query &#125; = <span class="title function_">toRefs</span>(<span class="title function_">useRoute</span>());</span><br></pre></td></tr></table></figure></blockquote><p>props作用：让路由组件更方便的收到参数（可以将路由参数作为<code>props</code>传给组件），在组件中直接用defineProps便可接收到其他路由组件传递过来的参数</p><p>这种写法其实就是类似于自定义组件的传参</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">类似于<span class="tag">&lt;<span class="name">Detail</span> <span class="attr">a</span>=<span class="string">“1”</span> <span class="attr">b</span>=<span class="string">&quot;2&quot;</span> <span class="attr">c</span>=<span class="string">&quot;3&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">Detail</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><strong><font color='orange'>1）、props的布尔值写法（只适用于params传参）</font></strong></p><p>作用：将路由收到的所有<strong>params参数</strong>作为props传给当前组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- orderList.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;orderList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> @<span class="attr">click</span>=<span class="string">&quot;toDetail&quot;</span>&gt;</span></span><br><span class="line">                跳转到详情页</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">toDetail</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    router.<span class="title function_">push</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;detail&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">params</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">id</span>: <span class="string">&#x27;323243&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">content</span>: <span class="string">&#x27;详情内容&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 路由index.ts --&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">name:&#x27;detail&#x27;,</span><br><span class="line">path:&#x27;detail/:id/:content?&#x27;,</span><br><span class="line">component:Detail,</span><br><span class="line">    props:true</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- detail.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; id &#125;&#125;、&#123;&#123; content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;content&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><font color='orange'>2）、props的函数写法</font></strong></p><p>作用：把返回的对象中每一组key-value作为props传给Detail组件(params、query可使用，更推荐query使用)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- orderList.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;orderList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> @<span class="attr">click</span>=<span class="string">&quot;toDetail&quot;</span>&gt;</span></span><br><span class="line">                跳转到详情页</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">toDetail</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    router.<span class="title function_">push</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;detail&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">query</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">id</span>: <span class="string">&#x27;323243&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">content</span>: <span class="string">&#x27;详情内容&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 路由index.ts --&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">name:&#x27;detail&#x27;,</span><br><span class="line">path:&#x27;detail&#x27;,</span><br><span class="line">component:Detail,</span><br><span class="line">  props(route)&#123; // route中能取到query和params</span><br><span class="line">        return route.query</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- detail.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; id &#125;&#125;、&#123;&#123; content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;content&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong><font color='orange'>3）、props的对象写法</font></strong></p><p>作用：把对象中的每一组key-value作为props传给Detail组件（不常用）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- orderList.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;orderList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> @<span class="attr">click</span>=<span class="string">&quot;toDetail&quot;</span>&gt;</span></span><br><span class="line">                跳转到详情页</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">toDetail</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    router.<span class="title function_">push</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;detail&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 路由index.ts --&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">name:&#x27;xiang&#x27;,</span><br><span class="line">path:&#x27;detail/:id/:content?&#x27;,</span><br><span class="line">component:Detail,</span><br><span class="line">  props: &#123; // 这种不能接收到动态参数，在业务中意义不大，不常用</span><br><span class="line">        id: 666,</span><br><span class="line">        content: &#x27;哈哈&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- detail.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;detail&quot;</span>&gt;</span>&#123;&#123; id &#125;&#125;、&#123;&#123; content &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;content&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>**注意：**这里都是应用在路由组件中，而不是自定义组件中。所以当组件中有使用defineProps接收参数的时候，首先要确认这是路由组件还是自定义组件。</p><br><h3 id="4-10、-replace属性"><a href="#4-10、-replace属性" class="headerlink" title="4.10、 replace属性"></a><strong><font color='#10c300'>4.10、 replace属性</font></strong></h3><ol><li><p>作用：控制路由跳转时操作浏览器历史记录的模式。</p></li><li><p>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>：</p><ul><li><code>push</code>是追加历史记录（默认值）。</li><li><code>replace</code>是替换当前记录。</li></ul></li><li><p>开启<code>replace</code>模式：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RouterLink</span> <span class="attr">replace</span> <span class="attr">.......</span>&gt;</span>News<span class="tag">&lt;/<span class="name">RouterLink</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><br><h3 id="4-11、-编程式导航"><a href="#4-11、-编程式导航" class="headerlink" title="4.11、 编程式导航"></a><strong><font color='#10c300'>4.11、 编程式导航</font></strong></h3><p>路由组件的两个重要的属性：<code>$route</code>和<code>$router</code>变成了两个<code>hooks</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute,useRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">parmas</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">push</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">replace</span>)</span><br></pre></td></tr></table></figure><br><h3 id="4-12、-重定向"><a href="#4-12、-重定向" class="headerlink" title="4.12、 重定向"></a><strong><font color='#10c300'>4.12、 重定向</font></strong></h3><ol><li><p>作用：将特定的路径，重新定向到已有路由。</p></li><li><p>具体编码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">&#x27;/about&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><br><h2 id="五、pinia"><a href="#五、pinia" class="headerlink" title="五、pinia "></a><strong><font color='red'>五、pinia </font></strong></h2><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152313396.gif" alt="pinia_example" style="zoom:30%;border:3px solid" /> <h3 id="5-1、-搭建-pinia-环境"><a href="#5-1、-搭建-pinia-环境" class="headerlink" title="5.1、 搭建 pinia 环境"></a><strong><font color='#10c300'>5.1、 搭建 pinia 环境</font></strong></h3><p>第一步：<code>npm install pinia</code></p><p>第二步：操作<code>src/main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 引入createPinia，用于创建pinia */</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 创建pinia */</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用插件 */</span>&#123;&#125;</span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>此时开发者工具中已经有了<code>pinia</code>选项</p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152313752.png" style="zoom:80%;border:1px solid black;border-radius:10px" /><br><h3 id="5-2、-选项式-Stores"><a href="#5-2、-选项式-Stores" class="headerlink" title="5.2、 选项式 Stores"></a><strong><font color='#10c300'>5.2、 选项式 Stores</font></strong></h3><blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;&#125;) <span class="comment">// 第二个参数是个对象</span></span><br></pre></td></tr></table></figure></blockquote><h4 id="1）、存储-读取数据"><a href="#1）、存储-读取数据" class="headerlink" title="1）、存储+读取数据"></a><strong><font color='cornflowerblue'>1）、存储+读取数据</font></strong></h4><ol><li><p><code>Store</code>是一个保存：<strong>状态</strong>、<strong>业务逻辑</strong> 的实体，每个组件都可以<strong>读取</strong>、<strong>写入</strong>它。</p></li><li><p>它有三个概念：<code>state</code>、<code>getter</code>、<code>action</code>，相当于组件中的： <code>data</code>、 <code>computed</code> 和 <code>methods</code>。</p></li><li><p>具体编码：<strong><code>src/store/countStore.ts</code></strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">6</span>,</span><br><span class="line">      <span class="attr">school</span>: <span class="string">&#x27;尚硅谷&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>具体编码：<strong><code>src/store/loveTalkStore.ts</code></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useLoveTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">loveTalkList</span>:[</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada01&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;你今天有点怪，哪里怪？怪好看的！&#x27;</span>&#125;,</span><br><span class="line">     &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada02&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;草莓、蓝莓、蔓越莓，你想我了没？&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada03&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;心里给你留了一块地，我的死心塌地&#x27;</span>&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件中使用<code>state</code>中的数据</p><p><strong><code>Count.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123; countStore.sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Count&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 引入对应的useXxxxxStore</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;useCountStore&#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/countStore&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="string">``</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 调用useXxxxxStore得到对应的store</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong><code>LoveTalk.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;talk in loveTalkStore.loveTalkList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;talk.id&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; talk.content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Count&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; useLoveTalkStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/loveTalkStore&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> loveTalkStore = <span class="title function_">useLoveTalkStore</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><br><h4 id="2）、-修改数据-三种方式"><a href="#2）、-修改数据-三种方式" class="headerlink" title="2）、 修改数据 (三种方式)"></a><strong><font color='cornflowerblue'>2）、 修改数据 (三种方式)</font></strong></h4><ol><li><p><strong>第一种修改方式，直接修改</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在vue组件中修改</span></span><br><span class="line">countStore.<span class="property">sum</span> = <span class="number">666</span></span><br></pre></td></tr></table></figure></li><li><p><strong>第二种修改方式：批量修改</strong></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在vue组件中修改</span></span><br><span class="line"><span class="comment">// 1）对象形式</span></span><br><span class="line">countStore.$patch(&#123;</span><br><span class="line">  <span class="attr">sum</span>:<span class="number">999</span>,</span><br><span class="line">  <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2）函数形式</span></span><br><span class="line">countStore.$patch(<span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  state.<span class="property">sum</span>=<span class="number">999</span>,</span><br><span class="line">  state.<span class="property">school</span>=<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p><strong>第三种修改方式：借助<code>action</code>修改（<code>action</code>中可以编写一些业务逻辑）</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在pinia中修改</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//加</span></span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">value:number</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sum</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="comment">//操作countStore中的sum</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> += value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在组件中调用action</span></span><br><span class="line"><span class="keyword">let</span> optVal = <span class="title function_">ref</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span><br><span class="line"><span class="comment">//在函数中调用</span></span><br><span class="line">countStore.<span class="title function_">increment</span>(optVal.<span class="property">value</span>)</span><br></pre></td></tr></table></figure></li></ol><br><h4 id="3）、-storeToRefs"><a href="#3）、-storeToRefs" class="headerlink" title="3）、 storeToRefs"></a><strong><font color='cornflowerblue'>3）、 storeToRefs</font></strong></h4><ul><li>借助<code>storeToRefs</code>将<code>store</code>中的<strong>数据</strong>(state，getters)转为<code>ref</code>响应对象，方便在模板中使用。</li><li>注意：<code>pinia</code>提供的<code>storeToRefs</code>只会将数据做转换，而<code>Vue</code>的<code>toRefs</code>会转换<code>store</code>中所有的数据（actions  state等等）。</li><li>action 的 increment 可以直接解构，无需使用 storeToRefs</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Count&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; useCountStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/count&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/* 引入storeToRefs */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">/* 得到countStore */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">/* 使用storeToRefs转换countStore，随后解构(action 的 increment 可以直接解构无需使用storeToRefs) */</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123;sum&#125; = <span class="title function_">storeToRefs</span>(countStore)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202406250019336.png" alt="image-20240625001950272"></p><br><h4 id="4）、-getters"><a href="#4）、-getters" class="headerlink" title="4）、 getters"></a><strong><font color='cornflowerblue'>4）、 getters</font></strong></h4><ol><li><p>概念：当<code>state</code>中的数据，需要经过处理后再使用时，可以使用<code>getters</code>配置。</p></li><li><p>追加<code>getters</code>配置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="comment">/************/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">1</span>,</span><br><span class="line">      <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="comment">// 箭头函数</span></span><br><span class="line">    <span class="attr">doubleSum</span>: (state): <span class="function"><span class="params">number</span> =&gt;</span> state.<span class="property">sum</span> * <span class="number">2</span>,</span><br><span class="line">    <span class="comment">// 普通函数</span></span><br><span class="line">    <span class="title function_">upperSchool</span>(): string &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="variable language_">this</span>.<span class="property">school</span> = <span class="string">&#x27;希望小学&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>组件中读取数据：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123; sum &#125;&#125;, 当前sun的两倍&#123;&#123; doubleSum &#125;&#125;。 小明的多大了？ &#123;&#123; age &#125;&#125;岁<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前学校为：&#123;&#123; upperSchool &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useCountStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/countStore&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; sum, age, doubleSum, upperSchool &#125; = <span class="title function_">storeToRefs</span>(countStore)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><br><h4 id="5）、-subscribe"><a href="#5）、-subscribe" class="headerlink" title="5）、 $subscribe"></a><strong><font color='cornflowerblue'>5）、 $subscribe</font></strong></h4><p>通过 store 的 <code>$subscribe()</code> 方法侦听 <code>state</code> 及其变化</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// loveTalkStore.ts</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; nanoid &#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useLoveTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;loveTalk&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">loveTalkList</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;loveTalkList&#x27;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || [],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        <span class="keyword">async</span> <span class="title function_">getLoveTalk</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;</span><br><span class="line">                <span class="attr">data</span>: &#123; <span class="attr">content</span>: title &#125;,</span><br><span class="line">            &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span>)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">loveTalkList</span>.<span class="title function_">unshift</span>(&#123; <span class="attr">id</span>: <span class="title function_">nanoid</span>(), title &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在组件中使用 LoveTalk.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;LoveTalk&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;queryLoveTalk&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            获取一句土味情话</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in loveTalkList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;&#123; item.title &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; useLoveTalkStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/loveTalkStore&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> loveTalkStore = <span class="title function_">useLoveTalkStore</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; getLoveTalk &#125; = loveTalkStore</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> &#123; loveTalkList &#125; = <span class="title function_">storeToRefs</span>(loveTalkStore)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">queryLoveTalk</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">getLoveTalk</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 组件中使用$subscribe</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">loveTalkStore.$subscribe(<span class="function">(<span class="params">mutate, state</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;talkStore里面保存的数据发生了变化&#x27;</span>, mutate, state)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;loveTalkList&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(state.<span class="property">loveTalkList</span>))</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="5-3、-store组合式写法"><a href="#5-3、-store组合式写法" class="headerlink" title="5.3、 store组合式写法"></a><strong><font color='#10c300'>5.3、 store组合式写法</font></strong></h3><p>和选项式写法唯一不同的是pinia中的defineStor()中的写法不一样，其他都一样(在组件中修改数据，使用一些api)</p><blockquote><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, <span class="function">() =&gt;</span> &#123; <span class="comment">// 第二个参数是个函数</span></span><br><span class="line">    <span class="keyword">return</span> &#123;&#125; <span class="comment">// 需要把定义的数据/方法return出去</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote><p> <strong><code>loveTalkStore.ts</code></strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; nanoid &#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useLoveTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;loveTalk&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// talkList就是state</span></span><br><span class="line">    <span class="keyword">const</span> loveTalkList = <span class="title function_">reactive</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;loveTalkList&#x27;</span>) <span class="keyword">as</span> string) || [])</span><br><span class="line"></span><br><span class="line">    <span class="comment">// getATalk函数相当于action</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getLoveTalk</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 发请求，下面这行的写法是：连续解构赋值+重命名</span></span><br><span class="line">        <span class="keyword">const</span> &#123;</span><br><span class="line">            <span class="attr">data</span>: &#123; <span class="attr">content</span>: title &#125;,</span><br><span class="line">        &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span>)</span><br><span class="line">        <span class="comment">// 把请求回来的字符串，包装成一个对象</span></span><br><span class="line">        <span class="keyword">const</span> obj = &#123; <span class="attr">id</span>: <span class="title function_">nanoid</span>(), title &#125;</span><br><span class="line">        <span class="comment">// 放到数组中</span></span><br><span class="line">        loveTalkList.<span class="title function_">unshift</span>(obj)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; loveTalkList, getLoveTalk &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong><code>countStore.ts </code></strong> </p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StoreData</span> &#123;</span><br><span class="line">    <span class="attr">sum</span>: <span class="built_in">number</span></span><br><span class="line">    <span class="attr">school</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> sum = <span class="title function_">ref</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">const</span> school = <span class="title function_">ref</span>(<span class="string">&#x27;school&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> doubleSum = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> sum.<span class="property">value</span> * <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">const</span> upperSchool = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> school)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"><span class="attr">val</span>: <span class="title class_">StoreData</span></span>) =&gt; &#123;</span><br><span class="line">        sum.<span class="property">value</span> += val.<span class="property">sum</span></span><br><span class="line">        school.<span class="property">value</span> = val.<span class="property">school</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; sum, school, doubleSum, upperSchool, increment &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h2 id="六、组件通信"><a href="#六、组件通信" class="headerlink" title="六、组件通信"></a><strong><font color='red'>六、组件通信</font></strong></h2><p><strong><code>Vue3</code>组件通信和<code>Vue2</code>的区别：</strong></p><ul><li>移出事件总线，使用<code>mitt</code>代替。</li></ul><ul><li><code>vuex</code>换成了<code>pinia</code>。</li><li>把<code>.sync</code>优化到了<code>v-model</code>里面了。</li><li>把<code>$listeners</code>所有的东西，合并到<code>$attrs</code>中了。</li><li><code>$children</code>被砍掉了。</li></ul><p><strong>常见搭配形式：</strong></p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152313505.png" alt="image-20231119185900990" style="zoom:60%;" /> <br><h3 id="6-1、-props"><a href="#6-1、-props" class="headerlink" title="6.1、 props"></a><strong><font color='#10c300'>6.1、 props</font></strong></h3><p>概述：<code>props</code>是使用频率最高的一种通信方式，常用与 ：<strong>父 ↔ 子</strong>。</p><ul><li>若 <strong>父传子</strong>：属性值是<strong>非函数</strong>。</li><li>若 <strong>子传父</strong>：属性值是<strong>函数</strong>。</li></ul><p><strong><code>父组件：Father.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>汽车：&#123;&#123; car &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>儿子给的玩具：&#123;&#123; toy &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child</span> <span class="attr">:car</span>=<span class="string">&quot;car&quot;</span> <span class="attr">:send-toy</span>=<span class="string">&quot;getToy&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> car = <span class="title function_">ref</span>(<span class="string">&#x27;奔驰&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> toy = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getToy</span>(<span class="params">val: string</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    toy.<span class="property">value</span> = val</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><code>子组件：Child.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>玩具：&#123;&#123; toy &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>父亲给的车：&#123;&#123; car &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;giveToy&quot;</span>&gt;</span></span><br><span class="line">            把玩具给父亲</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>([<span class="string">&#x27;car&#x27;</span>, <span class="string">&#x27;sendToy&#x27;</span>]) <span class="comment">// 接收参数</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> toy = <span class="title function_">ref</span>(<span class="string">&#x27;奥特曼&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">giveToy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    props.<span class="title function_">sendToy</span>(toy.<span class="property">value</span>) <span class="comment">// 通过函数的形参将子级的数据传递给父级函数的实参并调用</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="6-2、-自定义事件defineEmits"><a href="#6-2、-自定义事件defineEmits" class="headerlink" title="6.2、 自定义事件defineEmits"></a><strong><font color='#10c300'>6.2、 自定义事件defineEmits</font></strong></h3><ol><li>概述：自定义事件常用于：<strong>子 &#x3D;&gt; 父。</strong></li><li>注意区分好：原生事件、自定义事件。</li></ol><ul><li>原生事件：<ul><li>事件名是特定的（<code>click</code>、<code>mosueenter</code>等等）    </li><li>事件对象<code>$event</code>: 是包含事件相关信息的对象（<code>pageX</code>、<code>pageY</code>、<code>target</code>、<code>keyCode</code>）</li></ul></li><li>自定义事件：<ul><li>事件名是任意名称</li><li><strong style="color:red">事件对象<code>$event</code>: 是调用<code>emit</code>时所提供的数据，可以是任意类型！！！</strong ></li></ul></li></ul><p><strong><code>父组件：Father.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>子给的玩具：&#123;&#123; toy &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 给子组件Child绑定事件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child</span> @<span class="attr">send-toy</span>=<span class="string">&quot;saveToy&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> toy = <span class="title function_">ref</span>(<span class="string">&#x27;______&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 用于保存传递过来的玩具</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">saveToy</span>(<span class="params">value: string</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    toy.<span class="property">value</span> = value</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong><code>子组件：Child.vue</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>玩具：&#123;&#123; toy &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;giveToy&quot;</span>&gt;</span></span><br><span class="line">            把玩具给父亲</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 声明事件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emits = <span class="title function_">defineEmits</span>([<span class="string">&#x27;send-toy&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> toy = <span class="title function_">ref</span>(<span class="string">&#x27;奥特曼&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">giveToy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">emits</span>(<span class="string">&#x27;send-toy&#x27;</span>, toy.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><strong>扩展</strong>：当有多个参数的时候，获取事件对象就需要使用$event去占位</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test(5, 6, $event)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           测试</span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&gt;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&gt;<span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">a, b, e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&gt;&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure></blockquote><br><h3 id="6-3、-mitt"><a href="#6-3、-mitt" class="headerlink" title="6.3、 mitt"></a><strong><font color='#10c300'>6.3、 mitt</font></strong></h3><p>概述：与消息订阅与发布（<code>pubsub</code>）功能类似，可以实现任意组件间通信。</p><p>【第一步】：安装<code>mitt</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add mitt</span><br></pre></td></tr></table></figure><p>【第二步】：新建文件：<code>src\utils\emitter.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入mitt </span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;mitt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建emitter</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建并暴露mitt</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 其他页面使用的语法</span></span><br><span class="line"><span class="comment">  // 绑定事件(接收)</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;abc&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;abc事件被触发&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;xyz&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;xyz事件被触发&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // 触发事件(传递)</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;abc&#x27;,666)</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;xyz&#x27;,777)</span></span><br><span class="line"><span class="comment">  &#125;, 1000);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // 解绑事某个件</span></span><br><span class="line"><span class="comment">     emitter.off(&#x27;abc&#x27;)</span></span><br><span class="line"><span class="comment">    // 清理全部事件</span></span><br><span class="line"><span class="comment">    emitter.all.clear()</span></span><br><span class="line"><span class="comment">  &#125;, 3000); </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>【第三步】：<strong>接收数据的组件中</strong>：绑定事件、同时在销毁前解绑事件：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定事件</span></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;send-toy&#x27;</span>,<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send-toy事件被触发&#x27;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// 解绑事件</span></span><br><span class="line">  emitter.<span class="title function_">off</span>(<span class="string">&#x27;send-toy&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>【第四步】：<strong>提供数据的组件</strong>，在合适的时候触发事件</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendToy</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// 触发事件</span></span><br><span class="line">  emitter.<span class="title function_">emit</span>(<span class="string">&#x27;send-toy&#x27;</span>,toy.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意这个重要的内置关系，总线依赖着这个内置关系</strong></p><br><h3 id="6-4、-v-model"><a href="#6-4、-v-model" class="headerlink" title="6.4、 v-model"></a><strong><font color='#10c300'>6.4、 v-model</font></strong></h3><p>概述：实现 <strong>父↔子</strong> 之间相互通信。</p><h4 id="1）、v-model用在html标签上（前序知识）"><a href="#1）、v-model用在html标签上（前序知识）" class="headerlink" title="1）、v-model用在html标签上（前序知识）"></a><strong><font color='cornflowerblue'>1）、v-model用在html标签上（前序知识）</font></strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- html标签上使用v-model指令 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userName&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- html标签上使用v-model本质 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:value</span>=<span class="string">&quot;userName&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">input</span>=<span class="string">&quot;userName = ($event.target as HTMLInputElement).value&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br></pre></td></tr></table></figure><p><strong>使用：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:value</span>=<span class="string">&quot;userName&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">input</span>=<span class="string">&quot;userName = ($event.target as HTMLInputElement).value&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">---------- 等同于如下代码 ----------</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;userName&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;change&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> userName = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">change</span>(<span class="params">e: Event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> inputElement = e.<span class="property">target</span> <span class="keyword">as</span> <span class="title class_">HTMLInputElement</span></span></span><br><span class="line"><span class="language-javascript">    userName.<span class="property">value</span> = inputElement.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2）、v-model用在组件标签上（前序知识）"><a href="#2）、v-model用在组件标签上（前序知识）" class="headerlink" title="2）、v-model用在组件标签上（前序知识）"></a><strong><font color='cornflowerblue'>2）、v-model用在组件标签上（前序知识）</font></strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件标签上使用v-model指令 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">v-model</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 组件标签上v-model的本质 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">:modelValue</span>=<span class="string">&quot;userName&quot;</span> @<span class="attr">update:model-value</span>=<span class="string">&quot;userName = $event&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">**注意：**</span><br><span class="line"><span class="comment">&lt;!-- 在组件标签上v-model本质中，vue2和vue3稍微有所不同 --&gt;</span></span><br><span class="line"></span><br><span class="line">传参名：</span><br><span class="line">- vue2</span><br><span class="line">:value</span><br><span class="line">- vue3</span><br><span class="line">:modelValue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">自定义事件名：</span><br><span class="line">- vue2</span><br><span class="line">@input</span><br><span class="line">- vue3</span><br><span class="line">@update:model-value</span><br></pre></td></tr></table></figure><p><strong>使用：</strong></p><p><code>Father.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">v-model</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><code>AtguiguInput.vue</code>组件中：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 将接收的value值赋给input元素的value属性，目的是：为了呈现数据 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 给input元素绑定原生input事件，触发input事件时，进而触发update:model-value事件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:value</span>=<span class="string">&quot;modelValue&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">input</span>=<span class="string">&quot;emit(&#x27;update:model-value&#x27;, $event.target.value)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;AtguiguInput&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 接收props</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;modelValue&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 声明事件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;update:model-value&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// Vue 3.4+ 写法</span><br><span class="line">// 父组件</span><br><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">v-model</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">// 子组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;model&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 1. 就这一行，没了！</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> model = <span class="title function_">defineModel</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>案例：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 父组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">VanPopupComponent</span> <span class="attr">v-model:sign-show</span>=<span class="string">&quot;signShow&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> signShow = <span class="title function_">ref</span>(<span class="literal">true</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// 子组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model:show</span>=<span class="string">&quot;localSignShow&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">position</span>=<span class="string">&quot;bottom&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span> <span class="attr">closeable</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">update:show</span>=<span class="string">&quot;onUpdateSignShow&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;popup-title&quot;</span>&gt;</span>签约提示<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;popup-content&quot;</span>&gt;</span>54545<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">interface <span class="title class_">VanPopupProps</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">signShow</span>: boolean</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">withDefaults</span>(defineProps&lt;<span class="title class_">VanPopupProps</span>&gt;(), &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">signShow</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;update:signShow&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> localSignShow = <span class="title function_">ref</span>(props.<span class="property">signShow</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> props.<span class="property">signShow</span>, <span class="function"><span class="params">val</span> =&gt;</span> localSignShow.<span class="property">value</span> = val)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">onUpdateSignShow</span> = (<span class="params">val: boolean</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    localSignShow.<span class="property">value</span> = val</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">emit</span>(<span class="string">&#x27;update:signShow&#x27;</span>, val)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Vue 3.4+ 简写</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 父组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">VanPopupComponent</span> <span class="attr">v-model:sign-show</span>=<span class="string">&quot;signShow&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> signShow = <span class="title function_">ref</span>(<span class="literal">true</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 子组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model:show</span>=<span class="string">&quot;signShow&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">position</span>=<span class="string">&quot;bottom&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span> <span class="attr">closeable</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;popup-title&quot;</span>&gt;</span>签约提示<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;popup-content&quot;</span>&gt;</span>54545<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 因为父组件将v-model默认名modelValue改成了sign-show，因此defineModel(&#x27;signShow&#x27;)中需要传递个修改之后的名字</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> signShow = defineModel&lt;boolean&gt;(<span class="string">&#x27;signShow&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-1、修改传递参数的默认值"><a href="#2-1、修改传递参数的默认值" class="headerlink" title="2-1、修改传递参数的默认值"></a>2-1、修改传递参数的默认值</h5><p>更换<code>modelValue</code>，例如改成<code>abc</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 也可以更换value，例如改成abc--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">v-model:abc</span>=<span class="string">&quot;userName&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 上面代码的本质如下 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">AtguiguInput</span> <span class="attr">:abc</span>=<span class="string">&quot;userName&quot;</span> @<span class="attr">update:abc</span>=<span class="string">&quot;userName = $event&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>组件中：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:value</span>=<span class="string">&quot;abc&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">input</span>=<span class="string">&quot;emit(&#x27;update:abc&#x27;, $event.target.value)&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;AtguiguInput&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 接收props</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;abc&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 声明事件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;update:abc&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-2、组件标签上多次使用v-model"><a href="#2-2、组件标签上多次使用v-model" class="headerlink" title="2-2、组件标签上多次使用v-model"></a>2-2、组件标签上多次使用<code>v-model</code></h5><p>如果<code>value</code>可以更换，那么就可以在组件标签上多次使用<code>v-model</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot; v-model:xyz=&quot;password&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>组件中：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 组件标签上多次使用`v-model` --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;ming&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;emits(&#x27;update:ming&#x27;, ($event.target as HTMLInputElement).value)&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;mima&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;emits(&#x27;update:mima&#x27;, ($event.target as HTMLInputElement).value)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;AtguiguInput&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;ming&#x27;</span>, <span class="string">&#x27;mima&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emits = <span class="title function_">defineEmits</span>([<span class="string">&#x27;update:ming&#x27;</span>, <span class="string">&#x27;update:mima&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-3、v-model二次封装组件"><a href="#2-3、v-model二次封装组件" class="headerlink" title="2-3、v-model二次封装组件"></a>2-3、<code>v-model</code>二次封装组件</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 子组件</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">v-model</span>=<span class="string">&quot;getShow&quot;</span> <span class="attr">title</span>=<span class="string">&quot;Shipping address&quot;</span> <span class="attr">width</span>=<span class="string">&quot;80%&quot;</span>&gt;</span></span><br><span class="line">        你好</span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">modelValue</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">default</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> emits = <span class="title function_">defineEmits</span>([<span class="string">&quot;update:model-value&quot;</span>]);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> getShow = <span class="title function_">computed</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">get</span>: <span class="function">() =&gt;</span> props.<span class="property">modelValue</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">set</span>: <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">emits</span>(<span class="string">&quot;update:model-value&quot;</span>, val);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">父组件</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">StatisticsDialog</span> <span class="attr">v-model</span>=<span class="string">&quot;dialogTableVisible&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> dialogTableVisible = <span class="title function_">ref</span>(<span class="literal">false</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="6-5、-attrs"><a href="#6-5、-attrs" class="headerlink" title="6.5、 $attrs"></a><strong><font color='#10c300'>6.5、 $attrs</font></strong></h3><ol><li><p>概述：<code>$attrs</code>用于实现<strong>当前组件的父组件</strong>，向<strong>当前组件的子组件</strong>通信（<strong>祖→孙</strong>）。</p></li><li><p>具体说明：<code>$attrs</code>是一个对象，包含所有父组件传入的标签属性。</p><blockquote><p> 注意：<code>$attrs</code>会自动排除<code>props</code>中声明的属性(可以认为声明过的 <code>props</code> 被子组件自己“消费”了)，即<code>$attrs</code>中可以取到组件传递过来的参数，如果传值过来的参数在<code>props</code>中声明了，则不会在 <code>$attrs</code>中展示</p></blockquote></li></ol><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408072317842.png" alt="image-20240807231752669"></p><p><strong><code>知识扩展</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">v-bind</span>=<span class="string">&quot;&#123;x:100,y:200&#125;&quot;</span>/&gt;</span></span><br><span class="line">等价于</span><br><span class="line"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">:x:100</span> <span class="attr">:y:200</span>&#125;&quot;/&gt;</span></span><br></pre></td></tr></table></figure><p><strong>父组件：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child</span> <span class="attr">:a</span>=<span class="string">&quot;a&quot;</span> <span class="attr">:b</span>=<span class="string">&quot;b&quot;</span> <span class="attr">:c</span>=<span class="string">&quot;c&quot;</span> <span class="attr">:d</span>=<span class="string">&quot;d&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;&#123; x: 100, y: 200 &#125;&quot;</span> <span class="attr">:update-a</span>=<span class="string">&quot;updateA&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> a = <span class="title function_">ref</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> b = <span class="title function_">ref</span>(<span class="number">2</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> c = <span class="title function_">ref</span>(<span class="number">3</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> d = <span class="title function_">ref</span>(<span class="number">4</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">updateA</span>(<span class="params">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    a.<span class="property">value</span> += value</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>子组件：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">GrandChild</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">GrandChild</span> <span class="keyword">from</span> <span class="string">&#x27;./GrandChild.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>孙组件：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grand-child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>孙组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>a：&#123;&#123; a &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>b：&#123;&#123; b &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>c：&#123;&#123; c &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>d：&#123;&#123; d &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>x：&#123;&#123; x &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>y：&#123;&#123; y &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateA(666)&quot;</span>&gt;</span></span><br><span class="line">            点我更新A</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;GrandChild&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineProps</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;updateA&#x27;</span>])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="6-6、-refs-parent"><a href="#6-6、-refs-parent" class="headerlink" title="6.6、 $refs  $parent"></a><strong><font color='#10c300'>6.6、 $refs  $parent</font></strong></h3><ol><li><p>概述：</p><ul><li><code>$refs</code>用于 ：<strong>父→子。</strong></li><li><code>$parent</code>用于：<strong>子→父。</strong></li></ul></li><li><p>原理如下：</p><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td><code>$refs</code></td><td>值为对象，包含所有被<code>ref</code>属性标识的<code>DOM</code>元素或组件实例。</td></tr><tr><td><code>$parent</code></td><td>值为对象，当前组件的父组件实例对象。</td></tr></tbody></table></li></ol><p><strong>父组件：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>房产：&#123;&#123; house &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeToy&quot;</span>&gt;</span></span><br><span class="line">            修改Child1的玩具</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeComputer&quot;</span>&gt;</span></span><br><span class="line">            修改Child2的电脑</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getAllChild($refs)&quot;</span>&gt;</span></span><br><span class="line">            让所有孩子的书变多</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child1</span> <span class="attr">ref</span>=<span class="string">&quot;c1&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child2</span> <span class="attr">ref</span>=<span class="string">&quot;c2&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child1</span> <span class="keyword">from</span> <span class="string">&#x27;./Child1.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child2</span> <span class="keyword">from</span> <span class="string">&#x27;./Child2.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> c1 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> c2 = <span class="title function_">ref</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> house = <span class="title function_">ref</span>(<span class="number">4</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeToy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    c1.<span class="property">value</span>.<span class="property">toy</span> = <span class="string">&#x27;小猪佩奇&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeComputer</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    c2.<span class="property">value</span>.<span class="property">computer</span> = <span class="string">&#x27;华为&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">getAllChild</span>(<span class="params">refs: &#123; [key: string]: any &#125;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> refs) &#123;</span></span><br><span class="line"><span class="language-javascript">        refs[key].<span class="property">book</span> += <span class="number">3</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 向外部提供数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; house &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.father</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">165</span> <span class="number">164</span> <span class="number">164</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.father</span> <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>子组件：Child1.vue</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>子组件1<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>玩具：&#123;&#123; toy &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>书籍：&#123;&#123; book &#125;&#125; 本<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;minusHouse($parent)&quot;</span>&gt;</span></span><br><span class="line">            干掉父亲的一套房产</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child1&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> toy = <span class="title function_">ref</span>(<span class="string">&#x27;奥特曼&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> book = <span class="title function_">ref</span>(<span class="number">3</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 方法</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">minusHouse</span>(<span class="params">parent: any</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(parent)</span></span><br><span class="line"><span class="language-javascript">    parent.<span class="property">house</span> -= <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 把数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; toy, book &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.child1</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> black;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>子组件：Child2.vue</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>子组件2<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>电脑：&#123;&#123; computer &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>书籍：&#123;&#123; book &#125;&#125; 本<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Child2&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> computer = <span class="title function_">ref</span>(<span class="string">&#x27;联想&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> book = <span class="title function_">ref</span>(<span class="number">6</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 把数据交给外部</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">defineExpose</span>(&#123; computer, book &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.child2</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> black;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202408112200074.png" alt="image-20240811220050879"></p><br><h3 id="6-7、-provide、inject"><a href="#6-7、-provide、inject" class="headerlink" title="6.7、 provide、inject"></a><strong><font color='#10c300'>6.7、 provide、inject</font></strong></h3><ol><li><p>概述：实现<strong>祖孙组件</strong>直接通信</p></li><li><p>具体使用：</p><ul><li>在祖先组件中通过<code>provide</code>配置向后代组件提供数据</li><li>在后代组件中通过<code>inject</code>配置来声明接收数据</li></ul></li><li><p>具体编码：</p><p>【第一步】父组件中，使用<code>provide</code>提供数据</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>父组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>银子：&#123;&#123; money &#125;&#125;万元<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>车子：一辆&#123;&#123; car.brand &#125;&#125;车，价值&#123;&#123; car.price &#125;&#125;万元<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Father&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; provide, reactive, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> money = <span class="title function_">ref</span>(<span class="number">100</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> car = <span class="title function_">reactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">brand</span>: <span class="string">&#x27;奔驰&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">price</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">updateMoney</span>(<span class="params">value: number</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    money.<span class="property">value</span> -= value</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 向后代提供数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 语法：provide(命名, 传参);</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">provide</span>(<span class="string">&#x27;moneyContext&#x27;</span>, &#123; money, updateMoney &#125;) <span class="comment">// 注意money不能用money.value，用.vue就是传递的一个数字 而不是一个响应式数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>, car)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.father</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">165</span> <span class="number">164</span> <span class="number">164</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>注意：子组件中不用编写任何东西，是不受到任何打扰的</p></blockquote><p>【第二步】孙组件中使用<code>inject</code>配置项接受数据。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grand-child&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是孙组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>银子：&#123;&#123; money &#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>车子：一辆&#123;&#123; car.brand &#125;&#125;车，价值&#123;&#123; car.price &#125;&#125;万元<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateMoney(6)&quot;</span>&gt;</span></span><br><span class="line">            花爷爷的钱</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;GrandChild&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// inject(命名, 默认参数);</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; money, updateMoney &#125; = <span class="title function_">inject</span>(<span class="string">&#x27;moneyContext&#x27;</span>, &#123; <span class="attr">money</span>: <span class="number">0</span>, <span class="attr">updateMoney</span>: <span class="function">(<span class="params">param: number</span>) =&gt;</span> &#123;&#125; &#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>, &#123; <span class="attr">brand</span>: <span class="string">&#x27;未知&#x27;</span>, <span class="attr">price</span>: <span class="number">0</span> &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.grand-child</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> black;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><br><h3 id="6-8、-pinia"><a href="#6-8、-pinia" class="headerlink" title="6.8、 pinia"></a><strong><font color='#10c300'>6.8、 pinia</font></strong></h3><p>参考之前<code>pinia</code>部分的讲解</p><br><h3 id="6-9、-slot"><a href="#6-9、-slot" class="headerlink" title="6.9、 slot"></a><strong><font color='#10c300'>6.9、 slot</font></strong></h3><h4 id="1）、-默认插槽"><a href="#1）、-默认插槽" class="headerlink" title="1）、 默认插槽"></a><strong><font color='cornflowerblue'>1）、 默认插槽</font></strong></h4><p><img src="https://picgo-2024.oss-cn-beijing.aliyuncs.com/img/202405152313702.png" alt="img"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;今日热门游戏&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span><br><span class="line">子组件中：</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 默认插槽 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2）、-具名插槽"><a href="#2）、-具名插槽" class="headerlink" title="2）、 具名插槽"></a><strong><font color='cornflowerblue'>2）、 具名插槽</font></strong></h4><p>父组件：v-slot: xxx<br>子组件：name&#x3D; “xxx”</p><p>其中v-slot: xxx 可以简写成 #xxx</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;今日热门游戏&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:s1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">s2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>更多<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span><br><span class="line"></span><br><span class="line">子组件中：</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;s1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;s2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3）、-作用域插槽"><a href="#3）、-作用域插槽" class="headerlink" title="3）、 作用域插槽 "></a><strong><font color='cornflowerblue'>3）、 作用域插槽 </font></strong></h4><ol><li><p>理解：插槽的内容无法访问到子组件的状态，然而在某些场景下插槽的内容可能想要同时使用父组件域内和子组件域内的数据。要做到这一点，我们需要一种方法来让子组件在渲染时将一部分数据提供给插槽。</p></li><li><p>具体编码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">  <span class="tag">&lt;<span class="name">Game</span> <span class="attr">v-slot</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span>  // 这几种写法都一样</span><br><span class="line">  <span class="comment">&lt;!-- &lt;Game v-slot:default=&quot;slotProps&quot;&gt; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;Game #default=&quot;slotProps&quot;&gt; --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;Game #=&quot;params&quot;&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;g in slotProps.games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;g.id&quot;</span>&gt;</span>&#123;&#123; g.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Game</span>&gt;</span></span><br><span class="line"></span><br><span class="line">子组件中：</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;category&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>今日游戏榜单<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:games</span>=<span class="string">&quot;games&quot;</span> <span class="attr">a</span>=<span class="string">&quot;哈哈&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Category&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> games = <span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asgdytsa01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;英雄联盟&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asgdytsa02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;王者荣耀&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asgdytsa03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;红色警戒&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asgdytsa04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;斗罗大陆&#x27;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><br><h2 id="七、-directive自定义指令"><a href="#七、-directive自定义指令" class="headerlink" title="七、 directive自定义指令"></a><strong><font color='red'>七、 directive自定义指令</font></strong></h2><blockquote><p>TIP</p><p>只有当所需功能只能通过直接的 DOM 操作来实现时，才应该使用自定义指令。其他情况下应该尽可能地使用 <code>v-bind</code> 这样的内置指令来声明式地使用模板，这样更高效，也对服务端渲染更友好。</p></blockquote><p>自定义指令会有<strong>指令钩子</strong>，当需要在指令中用到多个钩子则需要使用对象的形式来完成。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 局部</span></span><br><span class="line"><span class="keyword">const</span> vFocus = &#123;</span><br><span class="line">    <span class="title function_">created</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">... ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局</span></span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line"><span class="title function_">created</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">... ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>如果只需要需要在 <code>mounted</code> 和 <code>updated</code> 钩子上上实现相同的行为，除此之外并不需要其他钩子。这种情况下我们可以直接用一个函数来定义指令</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 局部</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">vFocus</span> = el =&gt; el.<span class="title function_">focus</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局</span></span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, <span class="function">(<span class="params">el, binding, vnode</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h3 id="7-1、-局部自定义指令"><a href="#7-1、-局部自定义指令" class="headerlink" title="7.1、 局部自定义指令"></a><strong><font color='#10c300'>7.1、 局部自定义指令</font></strong></h3><h4 id="1）、在使用语法糖"><a href="#1）、在使用语法糖" class="headerlink" title="1）、在使用语法糖"></a><strong><font color='cornflowerblue'>1）、在使用语法糖</font></strong></h4><p>在使用<code>&lt;script setup&gt;</code>的情况下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-focus</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vFocus = &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">mounted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>(),</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 简写形式</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// const vFocus = el =&gt; el.focus();</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="1）、在未使用语法糖"><a href="#1）、在未使用语法糖" class="headerlink" title="1）、在未使用语法糖"></a><strong><font color='cornflowerblue'>1）、在未使用语法糖</font></strong></h4><p>在没有使用 <code>&lt;script setup&gt;</code> 的情况下，自定义指令需要通过 <code>directives</code> 选项注册：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-focus</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">directives</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">focus</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">mounted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>(),</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 简写形式1</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// focus(el) &#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// el.focus();</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 简写形式2</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// focus: el =&gt; el.focus()</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/* ... */</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="7-2、-全局自定义指令"><a href="#7-2、-全局自定义指令" class="headerlink" title="7.2、 全局自定义指令"></a><strong><font color='#10c300'>7.2、 全局自定义指令</font></strong></h3><p>将一个自定义指令全局注册到应用层级也是一种常见的做法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使 v-focus 在所有组件中都可用</span></span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">created</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">  ... ...</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 简写</span></span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, <span class="function">(<span class="params">el, binding, vnode</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure> <br><h3 id="7-3、-指令钩子"><a href="#7-3、-指令钩子" class="headerlink" title="7.3、 指令钩子"></a><strong><font color='#10c300'>7.3、 指令钩子</font></strong></h3><p>一个指令的定义对象可以提供几种钩子函数 (都是可选的)：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> myDirective = &#123;</span><br><span class="line">      <span class="comment">// 在绑定元素的 attribute 前</span></span><br><span class="line">      <span class="comment">// 或事件监听器应用前调用</span></span><br><span class="line">      <span class="title function_">created</span>(<span class="params">el, binding, vnode</span>) &#123;</span><br><span class="line">        <span class="comment">// 下面会介绍各个参数的细节</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 在元素被插入到 DOM 前调用</span></span><br><span class="line">      <span class="title function_">beforeMount</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">      <span class="comment">// 在绑定元素的父组件</span></span><br><span class="line">      <span class="comment">// 及他自己的所有子节点都挂载完成后调用</span></span><br><span class="line">      <span class="title function_">mounted</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">      <span class="comment">// 绑定元素的父组件更新前调用</span></span><br><span class="line">      <span class="title function_">beforeUpdate</span>(<span class="params">el, binding, vnode, prevVnode</span>) &#123;&#125;,</span><br><span class="line">      <span class="comment">// 在绑定元素的父组件</span></span><br><span class="line">      <span class="comment">// 及他自己的所有子节点都更新后调用</span></span><br><span class="line">      <span class="title function_">updated</span>(<span class="params">el, binding, vnode, prevVnode</span>) &#123;&#125;,</span><br><span class="line">      <span class="comment">// 绑定元素的父组件卸载前调用</span></span><br><span class="line">      <span class="title function_">beforeUnmount</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;,</span><br><span class="line">      <span class="comment">// 绑定元素的父组件卸载后调用</span></span><br><span class="line">      <span class="title function_">unmounted</span>(<span class="params">el, binding, vnode</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><font color='orange' size="4">钩子参数</font></strong></p><p>指令的钩子会传递以下几种参数：</p><ul><li><code>el</code>：指令绑定到的元素。这可以用于直接操作 DOM。</li><li><code>binding</code>：一个对象，包含以下属性。<ul><li><code>value</code>：传递给指令的值。例如在 <code>v-my-directive=&quot;1 + 1&quot;</code> 中，值是 <code>2</code>。</li><li><code>oldValue</code>：之前的值，仅在 <code>beforeUpdate</code> 和 <code>updated</code> 中可用。无论值是否更改，它都可用。</li><li><code>arg</code>：传递给指令的参数 (如果有的话)。例如在 <code>v-my-directive:foo</code> 中，参数是 <code>&quot;foo&quot;</code>。</li><li><code>modifiers</code>：一个包含修饰符的对象 (如果有的话)。例如在 <code>v-my-directive.foo.bar</code> 中，修饰符对象是 <code>&#123; foo: true, bar: true &#125;</code>。</li><li><code>instance</code>：使用该指令的组件实例。</li><li><code>dir</code>：指令的定义对象。</li></ul></li><li><code>vnode</code>：代表绑定元素的底层 VNode。</li><li><code>prevVnode</code>：代表之前的渲染中指令所绑定元素的 VNode。仅在 <code>beforeUpdate</code> 和 <code>updated</code> 钩子中可用。</li></ul><p>举例来说，像下面这样使用指令：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-example:foo.bar</span>=<span class="string">&quot;baz&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>binding</code> 参数会是一个这样的对象：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  arg: &#x27;foo&#x27;,</span><br><span class="line">  modifiers: &#123; bar: true &#125;,</span><br><span class="line">  value: /* `baz` 的值 */,</span><br><span class="line">  oldValue: /* 上一次更新时 `baz` 的值 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>和内置指令类似，自定义指令的参数也可以是动态的。举例来说：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-<span class="attr">example</span>:[arg]=<span class="string">&quot;value&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="comment">// 这里指令的参数会基于组件的 arg 数据属性响应式地更新。</span></span><br></pre></td></tr></table></figure><br><h3 id="7-4、-简化形式"><a href="#7-4、-简化形式" class="headerlink" title="7.4、 简化形式"></a><strong><font color='#10c300'>7.4、 简化形式</font></strong></h3><p>对于自定义指令来说，一个很常见的情况是仅仅需要在 <code>mounted</code> 和 <code>updated</code> 上实现相同的行为，除此之外并不需要其他钩子。这种情况下我们可以直接用一个函数来定义指令，如下所示：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-color</span>=<span class="string">&quot;color&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;color&#x27;</span>, <span class="function">(<span class="params">el, binding</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 这会在 `mounted` 和 `updated` 时都调用</span></span><br><span class="line">  el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><h2 id="八、-其它-API"><a href="#八、-其它-API" class="headerlink" title="八、 其它 API"></a><strong><font color='red'>八、 其它 API</font></strong></h2><h3 id="8-1、-shallowRef-与-shallowReactiv"><a href="#8-1、-shallowRef-与-shallowReactiv" class="headerlink" title="8.1、 shallowRef 与 shallowReactiv"></a><strong><font color='#10c300'>8.1、 shallowRef 与 shallowReactiv</font></strong></h3><h4 id="1）、-shallowRef"><a href="#1）、-shallowRef" class="headerlink" title="1）、 shallowRef"></a><strong><font color='cornflowerblue'>1）、 shallowRef</font></strong></h4><ol><li><p>作用：创建一个响应式数据，但只对顶层属性进行响应式处理。</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar = <span class="title function_">shallowRef</span>(initialValue);</span><br></pre></td></tr></table></figure></li><li><p>特点：只跟踪<strong>引用值</strong>的变化，不关心值内部的属性变化。简单来说只对 XXX.value &#x3D; ‘111’的生效   对 obj.value.xxx &#x3D; ‘111’不生效。</p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>求和为：&#123;&#123; sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>名字为：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄为：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeSum&quot;</span>&gt;</span></span><br><span class="line">            sum+1</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName&quot;</span>&gt;</span></span><br><span class="line">            修改名字</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeAge&quot;</span>&gt;</span></span><br><span class="line">            修改年龄</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePerson&quot;</span>&gt;</span></span><br><span class="line">            修改整个人</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; shallowRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> sum = <span class="title function_">shallowRef</span>(<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> person = <span class="title function_">shallowRef</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">age</span>: <span class="number">18</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeSum</span>(<span class="params"></span>) &#123; <span class="comment">// 改变视图</span></span></span><br><span class="line"><span class="language-javascript">    sum.<span class="property">value</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeName</span>(<span class="params"></span>) &#123; <span class="comment">// 未改变视图</span></span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span>.<span class="property">name</span> = <span class="string">&#x27;李四&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeAge</span>(<span class="params"></span>) &#123; <span class="comment">// 未改变视图</span></span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span>.<span class="property">age</span> += <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changePerson</span>(<span class="params"></span>) &#123; <span class="comment">// 改变视图</span></span></span><br><span class="line"><span class="language-javascript">    person.<span class="property">value</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;tony&#x27;</span>, <span class="attr">age</span>: <span class="number">100</span> &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2）、-shallowReactive"><a href="#2）、-shallowReactive" class="headerlink" title="2）、 shallowReactive"></a><strong><font color='cornflowerblue'>2）、 shallowReactive</font></strong></h4><ol><li><p>作用：创建一个浅层响应式对象，只会使对象的最顶层属性变成响应式的，对象内部的嵌套属性则不会变成响应式的</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myObj = <span class="title function_">shallowReactive</span>(&#123; ... &#125;);</span><br></pre></td></tr></table></figure></li><li><p>特点：对象的顶层属性是响应式的，但嵌套对象的属性不是。<strong>简单来说只对第一层的属性值生效</strong></p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>求和为：&#123;&#123; sum &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>名字为：&#123;&#123; person.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>年龄为：&#123;&#123; person.age &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>汽车为：&#123;&#123; car &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeBrand&quot;</span>&gt;</span></span><br><span class="line">            修改品牌</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeColor&quot;</span>&gt;</span></span><br><span class="line">            修改颜色</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeEngine&quot;</span>&gt;</span></span><br><span class="line">            修改发动机</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; shallowReactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> car = <span class="title function_">shallowReactive</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">barnd</span>: <span class="string">&#x27;奔驰&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">options</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">color</span>: <span class="string">&#x27;红色&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">engine</span>: <span class="string">&#x27;V8&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeBrand</span>(<span class="params"></span>) &#123; <span class="comment">// 改变视图</span></span></span><br><span class="line"><span class="language-javascript">    car.<span class="property">barnd</span> = <span class="string">&#x27;宝马&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeColor</span>(<span class="params"></span>) &#123; <span class="comment">// 改变视图</span></span></span><br><span class="line"><span class="language-javascript">    car.<span class="property">options</span>.<span class="property">color</span> = <span class="string">&#x27;紫色&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">changeEngine</span>(<span class="params"></span>) &#123; <span class="comment">// 改变视图</span></span></span><br><span class="line"><span class="language-javascript">    car.<span class="property">options</span>.<span class="property">engine</span> = <span class="string">&#x27;V12&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3）、-总结"><a href="#3）、-总结" class="headerlink" title="3）、 总结"></a><strong><font color='cornflowerblue'>3）、 总结</font></strong></h4><blockquote><p>通过使用 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> 和 <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> 来绕开深度响应。浅层式 <code>API</code> 创建的状态只在其顶层是响应式的，对所有深层的对象不会做任何处理，避免了对每一个内部属性做响应式所带来的性能成本，这使得属性的访问变得更快，可提升性能。</p></blockquote><br><h3 id="8-2、-readonly-与-shallowReadonly"><a href="#8-2、-readonly-与-shallowReadonly" class="headerlink" title="8.2、 readonly 与 shallowReadonly"></a><strong><font color='#10c300'>8.2、 readonly 与 shallowReadonly</font></strong></h3><h4 id="1）、-readonly"><a href="#1）、-readonly" class="headerlink" title="1）、 readonly"></a><strong><font color='cornflowerblue'>1）、 readonly</font></strong></h4><ol><li><p>作用：用于创建一个对象的深只读副本。</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> readOnlyCopy = <span class="title function_">readonly</span>(original); <span class="comment">// readonly的参数必须是一个响应式数据</span></span><br></pre></td></tr></table></figure></li><li><p>特点：</p><ul><li>对象的所有嵌套属性都将变为只读。</li><li>任何尝试修改这个对象的操作都会被阻止（在开发模式下，还会在控制台中发出警告）。</li></ul></li><li><p>应用场景：</p><ul><li>创建不可变的状态快照。</li><li>保护全局状态或配置不被修改。</li></ul></li></ol><h4 id="2）、-shallowReadonly"><a href="#2）、-shallowReadonly" class="headerlink" title="2）、 shallowReadonly"></a><strong><font color='cornflowerblue'>2）、 shallowReadonly</font></strong></h4><ol><li><p>作用：与 <code>readonly</code> 类似，但只作用于对象的顶层属性。</p></li><li><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> shallowReadOnlyCopy = <span class="title function_">shallowReadonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>特点：</p><ul><li><p>只将对象的顶层属性设置为只读，对象内部的嵌套属性仍然是可变的。</p></li><li><p>适用于只需保护对象顶层属性的场景。</p></li></ul></li></ol><br><h3 id="8-3、toRaw-与-markRaw"><a href="#8-3、toRaw-与-markRaw" class="headerlink" title="8.3、toRaw 与 markRaw"></a><strong><font color='#10c300'>8.3、toRaw 与 markRaw</font></strong></h3><h4 id="1）、-toRaw"><a href="#1）、-toRaw" class="headerlink" title="1）、 toRaw"></a><strong><font color='cornflowerblue'>1）、 toRaw</font></strong></h4><ol><li><p>作用：用于获取一个响应式对象的原始对象， <code>toRaw</code> 返回的对象不再是响应式的，不会触发视图更新。</p><blockquote><p>官网描述：这是一个可以用于临时读取而不引起代理访问&#x2F;跟踪开销，或是写入而不触发更改的特殊方法。不建议保存对原始对象的持久引用，请谨慎使用。</p></blockquote><blockquote><p>何时使用？ —— 在需要将响应式对象传递给非 <code>Vue</code> 的库或外部系统时，使用 <code>toRaw</code> 可以确保它们收到的是普通对象</p></blockquote></li><li><p>具体编码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive,toRaw,markRaw,isReactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* toRaw */</span></span><br><span class="line"><span class="comment">// 响应式对象</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">// 原始对象</span></span><br><span class="line"><span class="keyword">let</span> rawPerson = <span class="title function_">toRaw</span>(person)</span><br></pre></td></tr></table></figure></li></ol><h4 id="2）、-markRaw"><a href="#2）、-markRaw" class="headerlink" title="2）、 markRaw "></a><strong><font color='cornflowerblue'>2）、 markRaw </font></strong></h4><ol><li><p>作用：标记一个对象，使其<strong>永远不会</strong>变成响应式的。</p><blockquote><p>例如使用<code>mockjs</code>时，为了防止误把<code>mockjs</code>变为响应式对象，可以使用 <code>markRaw</code> 去标记<code>mockjs</code></p></blockquote></li><li><p>编码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citys = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;北京&#x27;</span>&#125;,    </span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;上海&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;天津&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;重庆&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br></pre></td></tr></table></figure></li></ol><br><h3 id="8-4、customRef-自定义ref"><a href="#8-4、customRef-自定义ref" class="headerlink" title="8.4、customRef(自定义ref)"></a><strong><font color='#10c300'>8.4、customRef(自定义ref)</font></strong></h3><p>作用：创建一个自定义的<code>ref</code>，并对其依赖项跟踪和更新触发进行逻辑控制。</p><p>实现防抖效果hooks（<code>useSumRef.ts</code>）：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; customRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"><span class="attr">initValue</span>: <span class="built_in">string</span>, <span class="attr">delay</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="comment">// track() 跟踪   trigger() 触发</span></span><br><span class="line">    <span class="keyword">const</span> msg = <span class="title function_">customRef</span>(<span class="function">(<span class="params">track, trigger</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="attr">timer</span>: <span class="built_in">number</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="title function_">track</span>() <span class="comment">// 告诉Vue数据msg很重要，要对msg持续关注，一旦变化就更新</span></span><br><span class="line">                <span class="keyword">return</span> initValue</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">                <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">                timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    initValue = value</span><br><span class="line">                    <span class="title function_">trigger</span>() <span class="comment">// 通知Vue数据msg变化了</span></span><br><span class="line">                &#125;, delay)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123; msg &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>组件中使用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;msg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">name</span>=<span class="string">&quot;App&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> useMsgRef <span class="keyword">from</span> <span class="string">&#x27;./useMsgRef&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用Vue提供的默认ref定义响应式数据，数据一变，页面就更新</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// let msg = ref(&#x27;你好&#x27;)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 使用useMsgRef来定义一个响应式数据且有延迟效果</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> &#123; msg &#125; = <span class="title function_">useMsgRef</span>(<span class="string">&#x27;你好&#x27;</span>, <span class="number">2000</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h2 id="九、Vue3新组件"><a href="#九、Vue3新组件" class="headerlink" title="九、Vue3新组件"></a><strong><font color='red'>九、Vue3新组件</font></strong></h2><h3 id="9-1、-Teleport"><a href="#9-1、-Teleport" class="headerlink" title="9.1、 Teleport"></a><strong><font color='#10c300'>9.1、 Teleport</font></strong></h3><ul><li>什么是Teleport？—— Teleport 是一种能够将我们的<strong>组件html结构</strong>移动到指定位置的技术。</li></ul><p><code> app.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        你好</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span><br><span class="line">        // to：插到指定的html位置</span><br><span class="line">        <span class="tag">&lt;<span class="name">Modal</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Modal</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Modal.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Modal.vue</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是一个弹窗<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是弹窗中的一些内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>关闭弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="9-2、-Suspense-实验性功能"><a href="#9-2、-Suspense-实验性功能" class="headerlink" title="9.2、 Suspense(实验性功能)"></a><strong><font color='#10c300'>9.2、 Suspense(实验性功能)</font></strong></h3><ul><li>等待异步组件时渲染一些额外内容，让应用有更好的用户体验 </li><li>使用步骤： <ul><li>异步引入组件</li><li>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></li></ul></li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent,<span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="comment">// defineAsyncComponent可使组件变成异步组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./Child.vue&#x27;</span>)) </span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是App组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> #<span class="attr">fallback</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span>加载中.......<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br><h3 id="9-3、-全局API转移到应用对象"><a href="#9-3、-全局API转移到应用对象" class="headerlink" title="9.3、 全局API转移到应用对象"></a><strong><font color='#10c300'>9.3、 全局API转移到应用对象</font></strong></h3><ul><li><p><code>app.component</code>：注册全局组件</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- hello.<span class="property">vue</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>helloWord<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- main.<span class="property">ts</span> --&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Child.vue&#x27;</span>;</span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;Child&#x27;</span>, <span class="title class_">Child</span>);</span><br><span class="line"></span><br><span class="line">&lt;!-- app.<span class="property">vue</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p><code>app.config.globalProperties</code>：用于注册能够被应用内所有组件实例访问到的全局属性的对象</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- main.<span class="property">ts</span> --&gt;</span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">msg</span> = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&#x27;vue&#x27;</span> &#123; <span class="comment">// 解决msg在其他页面使用时ts报错，可单独写一个文件中，不推荐过度使用</span></span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="built_in">number</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- app.<span class="property">vue</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p><code>app.mount</code></p></li><li><p><code>app.unmount</code></p></li><li><p><code>app.use</code></p></li></ul><br><h3 id="9-4、其他"><a href="#9-4、其他" class="headerlink" title="9.4、其他"></a><strong><font color='#10c300'>9.4、其他</font></strong></h3><ul><li><p>过渡类名 <code>v-enter</code> 修改为 <code>v-enter-from</code>、过渡类名 <code>v-leave</code> 修改为 <code>v-leave-from</code>。</p></li><li><p><code>keyCode</code> 作为 <code>v-on</code> 修饰符的支持。</p></li><li><p><code>v-model</code> 指令在组件上的使用已经被重新设计，替换掉了 <code>v-bind.sync。</code></p></li><li><p><code>v-if</code> 和 <code>v-for</code> 在同一个元素身上使用时的优先级发生了变化。</p></li><li><p>移除了<code>$on</code>、<code>$off</code> 和 <code>$once</code> 实例方法。</p></li><li><p>移除了过滤器 <code>filter</code>。</p></li><li><p>移除了<code>$children</code> 实例 <code>propert</code>。</p><p>……&#96;&#96;</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;一、-Vue3简介&quot;&gt;&lt;a href=&quot;#一、-Vue3简介&quot; class=&quot;headerlink&quot; title=&quot;一、 Vue3简介&quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;一、 Vue3简介&lt;/font&gt;&lt;/strong&gt;&lt;/h2&gt;&lt;ul</summary>
      
    
    
    
    <category term="框架与生态" scheme="http://example.com/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E7%94%9F%E6%80%81/"/>
    
    
    <category term="vue3" scheme="http://example.com/tags/vue3/"/>
    
  </entry>
  
  <entry>
    <title>ES6模块化之export和import的用法</title>
    <link href="http://example.com/posts/82ba275f.html"/>
    <id>http://example.com/posts/82ba275f.html</id>
    <published>2025-08-12T15:51:08.000Z</published>
    <updated>2026-01-27T15:41:13.664Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ES6中export和import一般的用法有两种</p><ol><li>命名导出（Named exports）</li><li>默认导出（Default exports）</li></ol></blockquote><h2 id="一、export-命名导出"><a href="#一、export-命名导出" class="headerlink" title="一、export 命名导出"></a>一、export 命名导出</h2><p>就是每一个需要导出的数据类型都要有一个name(变量名)，统一引入一定要带有<code>&#123;&#125;</code>，即便只有一个需要导出的数据类型。<strong>这种写法清爽直观，是推荐的写法。</strong></p><p><strong>导出：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/ profile.<span class="property">js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法1：</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> firstName = <span class="string">&#x27;Michael&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">v2</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">&#x27;这是一个函数&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法2(常用)：</span></span><br><span class="line"><span class="keyword">let</span> firstName = <span class="string">&#x27;Michael&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">v2</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">&#x27;这是一个函数&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">firstName,</span><br><span class="line">    v2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>导入：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/ test.<span class="property">vue</span>中</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入该文件应该使用重命名之后的变量名</span></span><br><span class="line"><span class="keyword">import</span> &#123; firstName, v2 &#125; <span class="keyword">from</span> <span class="string">&#x27;./profile.js&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="1-1、别名引入（Aliasing-named-imports）"><a href="#1-1、别名引入（Aliasing-named-imports）" class="headerlink" title="1.1、别名引入（Aliasing named imports）"></a><font color='red' size="">1.1、别名引入（Aliasing named imports）</font></h3><p>当从不同模块引入的变量名相同的时候</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;speak&#125; <span class="keyword">from</span> <span class="string">&#x27;./cow.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;speak&#125; <span class="keyword">from</span> <span class="string">&#x27;./goat.js&#x27;</span></span><br></pre></td></tr></table></figure><p>这些写法显然会造成混乱</p><p>正切应该使用<code>as</code>关键字，将输入的变量重命名。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;speak <span class="keyword">as</span> cowSpeak&#125; <span class="keyword">from</span> <span class="string">&#x27;./cow.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;speak <span class="keyword">as</span> goatSpeak&#125; <span class="keyword">from</span> <span class="string">&#x27;./goat.js&#x27;</span></span><br></pre></td></tr></table></figure><p>可是，当从每个模块需要引入的方法很多的时候，这种写法就显得十分的繁琐、冗长，例如</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  speak <span class="keyword">as</span> cowSpeak,</span><br><span class="line">  eat <span class="keyword">as</span> cowEat,</span><br><span class="line">  drink <span class="keyword">as</span> cowDrink</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./cow.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  speak <span class="keyword">as</span> goatSpeak,</span><br><span class="line">  eat <span class="keyword">as</span> goatEat,</span><br><span class="line">  drink <span class="keyword">as</span> goatDrink</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./goat.js&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">cowSpeak</span>() <span class="comment">// moo</span></span><br><span class="line"><span class="title function_">cowEat</span>() <span class="comment">// cow eats</span></span><br><span class="line"><span class="title function_">goatSpeak</span>() <span class="comment">// baa</span></span><br><span class="line"><span class="title function_">goatDrink</span>() <span class="comment">// goat drinks</span></span><br></pre></td></tr></table></figure><p>解决方案就是命名空间引入了</p><h3 id="1-2、命名空间引入（Namespace-imports）"><a href="#1-2、命名空间引入（Namespace-imports）" class="headerlink" title="1.2、命名空间引入（Namespace imports）"></a><font color='red' size="">1.2、命名空间引入（Namespace imports）</font></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> cow <span class="keyword">from</span> <span class="string">&#x27;./cow.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> goat <span class="keyword">from</span> <span class="string">&#x27;./goat.js&#x27;</span></span><br><span class="line"></span><br><span class="line">cow.<span class="title function_">speak</span>() <span class="comment">// moo</span></span><br><span class="line">goat.<span class="title function_">speak</span>() <span class="comment">// baa</span></span><br></pre></td></tr></table></figure><p>十分的简洁优雅</p><h3 id="1-3、as关键字重命名"><a href="#1-3、as关键字重命名" class="headerlink" title="1.3、as关键字重命名"></a><font color='red' size="">1.3、as关键字重命名</font></h3><p>通常情况下，<code>export</code>输出的变量就是本来的名字，但是可以<strong>使用<code>as</code>关键字重命名</strong>。</p><p><strong>导出：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/ profile.<span class="property">js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">v1</span>(<span class="params"></span>) &#123; ... &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">v2</span>(<span class="params"></span>) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  v1 <span class="keyword">as</span> streamV1,</span><br><span class="line">  v2 <span class="keyword">as</span> streamV2</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>导入：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/ test.<span class="property">vue</span>中</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入该文件应该使用重命名之后的变量名</span></span><br><span class="line"><span class="keyword">import</span> &#123; streamV1, streamV2 &#125; <span class="keyword">from</span> <span class="string">&#x27;./profile.js&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="二、export-default-默认导出"><a href="#二、export-default-默认导出" class="headerlink" title="二、export default 默认导出"></a>二、export default 默认导出</h2><p>默认导出就不需要name了，但是一个js文件中只能有一个export default。</p><p><strong>导出：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="keyword">export</span>-<span class="keyword">default</span>.<span class="property">js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者写成</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123; ... &#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> foo;</span><br></pre></td></tr></table></figure><p><strong>导入：</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/ test.<span class="property">vue</span></span><br><span class="line"><span class="comment">// 加载该模块时，`import`命令可以为该匿名函数指定任意名字。</span></span><br><span class="line"><span class="keyword">import</span> customName <span class="keyword">from</span> <span class="string">&#x27;./export-default&#x27;</span>;</span><br><span class="line"><span class="title function_">customName</span>();</span><br></pre></td></tr></table></figure><p>其实这种导出方式可以看成是命名导出的变异 ，只不过把命名写成了default。</p><h4 id="2-1、export-default也能导出多个变量"><a href="#2-1、export-default也能导出多个变量" class="headerlink" title="2.1、export default也能导出多个变量"></a><font color='red' size="">2.1、export default也能导出多个变量</font></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/ <span class="keyword">export</span>-<span class="keyword">default</span>.<span class="property">js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="title function_">v2</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;这是一个函数&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">aa</span>: <span class="number">6666</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者写成</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">v2</span> = (<span class="params"></span>) =&gt; &#123; <span class="keyword">return</span> <span class="string">&#x27;这是一个函数&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> aa = <span class="number">6666</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  v2,</span><br><span class="line">  aa</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># main.<span class="property">js</span></span><br><span class="line"><span class="keyword">import</span> fn <span class="keyword">from</span> <span class="string">&#x27;.export-default.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fn.<span class="title function_">v2</span>(), fn.<span class="property">aa</span>)  <span class="comment">// 这是一个函数  6666</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ES6中export和import一般的用法有两种&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;命名导出（Named exports）&lt;/li&gt;
&lt;li&gt;默认导出（Default exports）&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;一</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
  </entry>
  
  <entry>
    <title>Date()/Math()对象方法</title>
    <link href="http://example.com/posts/79541cc.html"/>
    <id>http://example.com/posts/79541cc.html</id>
    <published>2025-08-07T15:51:08.000Z</published>
    <updated>2026-01-27T15:41:13.664Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Date-对象"><a href="#Date-对象" class="headerlink" title="Date 对象"></a>Date 对象</h3><p>Date 对象用于处理日期与时间。</p><p>创建 Date 对象： <strong>new Date()</strong></p><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>()    <span class="comment">//Sat Aug 10 2019 10:47:16 GMT+0800 (中国标准时间)</span></span><br><span class="line"><span class="keyword">let</span> y = dt.<span class="title function_">getFullYear</span>()    <span class="comment">//年</span></span><br><span class="line"><span class="keyword">let</span> m = dt.<span class="title function_">getMonth</span>() + <span class="number">1</span>   <span class="comment">//月</span></span><br><span class="line"><span class="keyword">let</span> d = dt.<span class="title function_">getDate</span>()        <span class="comment">//日</span></span><br><span class="line"><span class="keyword">let</span> hh = dt.<span class="title function_">getHours</span>()      <span class="comment">//时</span></span><br><span class="line"><span class="keyword">let</span> mm = dt.<span class="title function_">getMinutes</span>()    <span class="comment">//分</span></span><br><span class="line"><span class="keyword">let</span> ss = dt.<span class="title function_">getSeconds</span>()    <span class="comment">//秒</span></span><br><span class="line"><span class="keyword">let</span> ww = dt.<span class="title function_">getDay</span>()        <span class="comment">//星期</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(y + <span class="string">&#x27;年-&#x27;</span> + m + <span class="string">&#x27;月-&#x27;</span> + d + <span class="string">&#x27;日-&#x27;</span> + hh + <span class="string">&#x27;:&#x27;</span> + mm + <span class="string">&#x27;:&#x27;</span> + ss + <span class="string">&#x27; 星期&#x27;</span> + ww);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mi = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()    </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mi);   <span class="comment">// 返回 1970 年 1 月 1 日至今的毫秒数。</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Date</span>.<span class="title function_">now</span>()  <span class="comment">//返回 1970 年 1 月 1 日至今的毫秒数。</span></span><br><span class="line"></span><br><span class="line">#<span class="number">1514345477</span>毫秒的时间</span><br><span class="line"><span class="keyword">let</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">1514345477</span>)   <span class="comment">//Sun Jan 18 1970 20:39:05 GMT+0800 (中国标准时间)</span></span><br><span class="line">#当前的时间</span><br><span class="line"><span class="keyword">let</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>()    <span class="comment">//Sat Aug 10 2019 10:47:16 GMT+0800 (中国标准时间)</span></span><br><span class="line">#当不足两位数的时候就在前面补<span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> m = (dt.<span class="title function_">getMonth</span>() + <span class="number">1</span> +<span class="string">&#x27;&#x27;</span>).<span class="title function_">padStar</span>(<span class="number">2</span>,<span class="string">&#x27;0&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>new Date().getTime() 和 Date.now() 和new Date().valueOf()和+new Date()</strong></p><p><strong>都是获取1970年1月1日截止到现在时刻的时间戳，但是从性能上来讲</strong> <strong>Date.now()要快于new.Date().getTime()可以从代码执行上来看</strong></p><p><strong>+new Date()等同于new Date().valueOf()</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>()</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()</span><br><span class="line">  &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>()    <span class="comment">//default: 8.759033203125ms</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>()</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">  <span class="title class_">Date</span>.<span class="title function_">now</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>()   <span class="comment">//default: 2.578125ms</span></span><br></pre></td></tr></table></figure><br><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2025-11-13T10:01:53</span><br></pre></td></tr></table></figure><p>这里的 <strong><code>T</code></strong> 是一种常见的时间格式分隔符，通常出现在 <strong>ISO 8601</strong> 标准的日期时间表示法中。</p><p>解释：</p><ul><li><strong><code>2025-11-13</code></strong> 表示日期（年-月-日）</li><li><strong><code>T</code></strong> 是日期与时间的分隔符（不是字母 T 的含义，而是标准规定的一个字符）</li><li><strong><code>10:01:53</code></strong> 表示时间（时:分:秒）</li></ul><p>ISO 8601 格式特点：</p><ul><li>使用 <code>YYYY-MM-DD</code> 表示日期</li><li>用 <code>T</code> 分隔日期和时间</li><li>时间可以带时区信息，例如：<ul><li><code>2025-11-13T10:01:53Z</code> 表示 UTC 时间</li><li><code>2025-11-13T10:01:53+08:00</code> 表示东八区时间（中国标准时间）</li></ul></li></ul><p>举例：</p><ul><li><code>2025-11-13T10:01:53</code> → 2025年11月13日 上午10点01分53秒（没有时区信息，通常默认本地时间）</li><li><code>2025-11-13T10:01:53Z</code> → UTC 时间</li><li><code>2025-11-13T10:01:53+08:00</code> → UTC+8 时区时间</li></ul><br><h3 id="Math-对象"><a href="#Math-对象" class="headerlink" title="Math 对象"></a>Math 对象</h3><p>Math 对象用于执行数学任务。</p><p>Math 对象并不像 Date 和 String 那样是对象的类，因此没有构造函数 Math()。</p><h4 id="1、abs-方法"><a href="#1、abs-方法" class="headerlink" title="1、abs() 方法"></a>1、abs() 方法</h4><blockquote><p>返回一个数的绝对值。</p></blockquote><h6 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#  <span class="title class_">Math</span>.<span class="title function_">abs</span>(x)</span><br><span class="line">x：必需。必须是一个数值。</span><br></pre></td></tr></table></figure><h6 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="number">7.25</span>);  <span class="comment">//7.25</span></span><br><span class="line"><span class="keyword">var</span> b=<span class="title class_">Math</span>.<span class="title function_">abs</span>(-<span class="number">7.25</span>); <span class="comment">//7.25</span></span><br><span class="line"><span class="keyword">var</span> c=<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="literal">null</span>);  <span class="comment">//0</span></span><br><span class="line"><span class="keyword">var</span> d=<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="string">&quot;Hello&quot;</span>); <span class="comment">//NaN</span></span><br><span class="line"><span class="keyword">var</span> e=<span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="number">2</span>+<span class="number">3</span>);  <span class="comment">//5</span></span><br></pre></td></tr></table></figure><h4 id="2、ceil-方法"><a href="#2、ceil-方法" class="headerlink" title="2、ceil() 方法"></a>2、ceil() 方法</h4><blockquote><p>向上取整</p></blockquote><h6 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#  <span class="title class_">Math</span>.<span class="title function_">ceil</span>(x)</span><br><span class="line">x：必需。必须是一个数值。</span><br></pre></td></tr></table></figure><h6 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">0.60</span>); <span class="comment">//1</span></span><br><span class="line"><span class="keyword">var</span> b=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">0.40</span>); <span class="comment">//1</span></span><br><span class="line"><span class="keyword">var</span> c=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">5</span>); <span class="comment">//5</span></span><br><span class="line"><span class="keyword">var</span> d=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">5.1</span>); <span class="comment">//6</span></span><br><span class="line"><span class="keyword">var</span> e=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">5.1</span>); <span class="comment">//-5</span></span><br><span class="line"><span class="keyword">var</span> f=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">5.9</span>); <span class="comment">//-5</span></span><br></pre></td></tr></table></figure><h4 id="3、floor-方法"><a href="#3、floor-方法" class="headerlink" title="3、floor() 方法"></a>3、floor() 方法</h4><blockquote><p>向下取整</p></blockquote><h6 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#  <span class="title class_">Math</span>.<span class="title function_">floor</span>(x)</span><br><span class="line">x：必需。必须是一个数值。</span><br></pre></td></tr></table></figure><h6 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">0.60</span>); <span class="comment">//0</span></span><br><span class="line"><span class="keyword">var</span> b=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">0.40</span>); <span class="comment">//0</span></span><br><span class="line"><span class="keyword">var</span> c=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">5</span>); <span class="comment">//5</span></span><br><span class="line"><span class="keyword">var</span> d=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">5.1</span>); <span class="comment">//5</span></span><br><span class="line"><span class="keyword">var</span> e=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">5.1</span>); <span class="comment">//-6</span></span><br><span class="line"><span class="keyword">var</span> f=<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">5.9</span>); <span class="comment">//-6</span></span><br></pre></td></tr></table></figure><h4 id="4、random-方法"><a href="#4、random-方法" class="headerlink" title="4、random() 方法"></a>4、random() 方法</h4><blockquote><p>返回介于 0（包含） ~ 1（不包含） 之间的一个随机数。</p></blockquote><h6 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#  <span class="title class_">Math</span>.<span class="title function_">random</span>()</span><br></pre></td></tr></table></figure><h6 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#实例<span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> a=<span class="title class_">Math</span>.<span class="title function_">random</span>();</span><br><span class="line"></span><br><span class="line">#实例<span class="number">2</span>  取得介于 <span class="number">1</span> 到 <span class="number">10</span> 之间的一个随机数</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">floor</span>((<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">10</span>)+<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h4 id="5、round-方法"><a href="#5、round-方法" class="headerlink" title="5、round() 方法"></a>5、round() 方法</h4><blockquote><p>四舍五入</p></blockquote><h6 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#  <span class="title class_">Math</span>.<span class="title function_">round</span>(x)</span><br><span class="line">x：必需。必须是一个数值</span><br></pre></td></tr></table></figure><h6 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#实例<span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> a=<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">2.60</span>);  <span class="comment">//3</span></span><br><span class="line"><span class="keyword">var</span> b=<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">2.50</span>);  <span class="comment">//3</span></span><br><span class="line"><span class="keyword">var</span> c=<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">2.49</span>);  <span class="comment">//2</span></span><br><span class="line"><span class="keyword">var</span> d=<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">2.60</span>);  <span class="comment">//-3</span></span><br><span class="line"><span class="keyword">var</span> e=<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">2.50</span>);  <span class="comment">//-2</span></span><br><span class="line"><span class="keyword">var</span> f=<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">2.49</span>);  <span class="comment">//-2</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;Date-对象&quot;&gt;&lt;a href=&quot;#Date-对象&quot; class=&quot;headerlink&quot; title=&quot;Date 对象&quot;&gt;&lt;/a&gt;Date 对象&lt;/h3&gt;&lt;p&gt;Date 对象用于处理日期与时间。&lt;/p&gt;
&lt;p&gt;创建 Date 对象： &lt;strong&gt;new D</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
  </entry>
  
  <entry>
    <title>String方法集</title>
    <link href="http://example.com/posts/5e5dbec2.html"/>
    <id>http://example.com/posts/5e5dbec2.html</id>
    <published>2025-08-05T15:51:08.000Z</published>
    <updated>2026-01-27T15:41:13.664Z</updated>
    
    <content type="html"><![CDATA[<h3 id="charAt"><a href="#charAt" class="headerlink" title="charAt() "></a><strong><font color='red'>charAt() </font></strong></h3><p>**返回新的值，**返回指定位置的字符</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">charAt</span>(<span class="number">2</span>)</span><br><span class="line">#返回值</span><br><span class="line">L</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">charAt</span>(str.<span class="property">length</span>-<span class="number">1</span>); </span><br><span class="line">#返回值</span><br><span class="line">D</span><br></pre></td></tr></table></figure><br><h3 id="charCodeAt"><a href="#charCodeAt" class="headerlink" title="charCodeAt()"></a><strong><font color='red'>charCodeAt()</font></strong></h3><p>**返回新的值，**返回指定位置字符的 Unicode 编码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;HELLO WORLD&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">charCodeAt</span>(<span class="number">0</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="number">72</span></span><br></pre></td></tr></table></figure><br><h3 id="fromCharCode"><a href="#fromCharCode" class="headerlink" title="fromCharCode() "></a><strong><font color='red'>fromCharCode() </font></strong></h3><p>**返回新的值，**可接受一个指定的 Unicode 值，返回一个字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(<span class="number">72</span>,<span class="number">69</span>,<span class="number">76</span>,<span class="number">76</span>,<span class="number">79</span>); </span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;HELLO&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="concat"><a href="#concat" class="headerlink" title="concat() "></a><strong><font color='red'>concat() </font></strong></h3><p>**返回新的值，**用于连接两个或多个字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;中国&#x27;</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">&#x27;真的&#x27;</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="string">&#x27;很伟大&#x27;</span></span><br><span class="line"><span class="keyword">let</span> d = a.<span class="title function_">concat</span>(b, c)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;中国真的很伟大&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a><strong><font color='red'>indexOf()</font></strong></h3><p>返回某个指定的字符串值在字符串中<strong>首次出现</strong>的位置(<strong>空格也算一个位置</strong>)。如果没有找到匹配的字符串则返回 -1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">indexOf</span>(searchvalue,start)</span><br><span class="line">searchvalue：必需。规定需检索的字符串值。</span><br><span class="line">start：可选的整数参数，规定在字符串中开始检索的位置。</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">indexOf</span>(<span class="string">&quot;e&quot;</span>);  <span class="comment">//1</span></span><br><span class="line"><span class="keyword">var</span> n= str.<span class="title function_">indexOf</span>(<span class="string">&quot;o&quot;</span>,<span class="number">5</span>); <span class="comment">// 7 这个的o是从索引5开始的 也就是字符串中的第二o</span></span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">indexOf</span>(<span class="string">&#x27;z&#x27;</span>)； <span class="comment">//-1 字符串中没有z   就返回-1</span></span><br></pre></td></tr></table></figure><br><h3 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf() "></a><strong><font color='red'>lastIndexOf() </font></strong></h3><p>返回一个指定的字符串值<strong>最后出现</strong>的位置，如果没有找到匹配的字符串则返回 -1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;abcdefabcdef&quot;</span>;  </span><br><span class="line"><span class="comment">//从右往左第一个f的索引</span></span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;f&quot;</span>);  <span class="comment">//11 最后一个f的索引</span></span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;f&quot;</span>,<span class="number">6</span>); <span class="comment">//5 从后前前去除6个 取剩下字符串的最后一个f的索引</span></span><br></pre></td></tr></table></figure><br><h3 id="slice"><a href="#slice" class="headerlink" title="slice() "></a><strong><font color='red'>slice() </font></strong></h3><p>**返回新的值，**截取字符串的某个部分，和substring类似</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">slice</span>(start,end)</span><br><span class="line">start：必须. 从哪一个下标开始截取（包含）。第一个字符位置为 <span class="number">0</span></span><br><span class="line">end：可选。 紧接着要截取到下标为多少的（不包含）。若未指定此参数，则从start到最后</span><br><span class="line">   </span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">slice</span>(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;ello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">slice</span>(<span class="number">3</span>); </span><br><span class="line">#返回值</span><br><span class="line">lo world!</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是负数的话-1就是截取一个 -2就是截取2个 以此类推</span></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">slice</span>(-<span class="number">1</span>);   <span class="comment">//d</span></span><br></pre></td></tr></table></figure><br><h3 id="substring"><a href="#substring" class="headerlink" title="substring()"></a><strong><font color='red'>substring()</font></strong></h3><p>**返回新的值，**截取字符串的某个部分</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">substring</span>(<span class="keyword">from</span>, to)</span><br><span class="line"><span class="keyword">from</span>：必需。从哪一个下标开始截取（包含）。第一个字符位置为 <span class="number">0</span></span><br><span class="line">to：可选。紧接着要截取到下标为多少的（不包含）</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">substring</span>(<span class="number">3</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;lo world!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">substring</span>(<span class="number">3</span>,<span class="number">7</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;lo w&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="substr"><a href="#substr" class="headerlink" title="substr() "></a><strong><font color='red'>substr() </font></strong></h3><p>**返回新的值，**在字符串中截取从开始下标开始的指定数目的字符</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">substr</span>(start,length)</span><br><span class="line">start：必需。要抽取的子串的起始下标(包含)。必须是数值。</span><br><span class="line">ength：可选。截取的位数。如果省略了该参数，那么返回的是从开始位置到结尾的字串。</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">substr</span>(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;llo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">substr</span>(<span class="number">2</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;llo world!&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="replace"><a href="#replace" class="headerlink" title="replace()"></a><strong><font color='red'>replace()</font></strong></h3><p>**返回新的值，**用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">replace</span>(regexp/substr,replacement)</span><br><span class="line">regexp/<span class="attr">substr</span>: 必需。规定子字符串或要替换的模式的 <span class="title class_">RegExp</span> 对象。</span><br><span class="line">    <span class="attr">replacement</span>: 必需。一个字符串值。规定了替换文本或生成替换文本的函数。</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Visit Microsoft! Visit Microsoft!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">replace</span>(<span class="string">&quot;Microsoft&quot;</span>,<span class="string">&quot;Runoob&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;Visit Runoob!Visit Microsoft!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Mr Blue has a blue house and a blue car&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">replace</span>(<span class="regexp">/blue/g</span>,<span class="string">&quot;red&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;Mr Blue has a red house and a red car&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;我是你爸爸&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = <span class="string">&#x27;叫爷爷&#x27;</span></span><br><span class="line"><span class="comment">//这里不能用/str/gi去接收一个参数  只能用new RegExp(str, &#x27;g&#x27;)接收一个赋值的参数</span></span><br><span class="line"><span class="comment">// let a = str.replace(/str/gi,&#x27;爷&#x27;); </span></span><br><span class="line"><span class="keyword">let</span> a = str.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(str, <span class="string">&#x27;g&#x27;</span>), newStr);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;叫爷爷&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="match"><a href="#match" class="headerlink" title="match() "></a><strong><font color='red'>match() </font></strong></h3><p>**返回新的值，**可在字符串内检索指定的值，或找到一个或多个正则表达式的匹配。它返回指定的值（数组）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">match</span>(searchvalue)  <span class="comment">// 匹配字符串</span></span><br><span class="line"># string.<span class="title function_">match</span>(regexp)  <span class="comment">// 匹配正则</span></span><br><span class="line"><span class="attr">searchvalue</span>: 规定要检索的字符串值。</span><br><span class="line"><span class="attr">regexp</span>: 规定要匹配的模式的 <span class="title class_">RegExp</span> 对象。</span><br><span class="line">    </span><br><span class="line">regexp的时候在很大程度上有赖于 regexp 是否具有标志 g。</span><br><span class="line">没有标志 g，那么 <span class="title function_">match</span>() 方法就只能在 string 中执行一次匹配。如果没有找到任何匹配的文本， <span class="title function_">match</span>() 将返回 <span class="literal">null</span>。否则，它将返回一个数组，其中存放了与它找到的匹配文本有关的信息。该数组的第 <span class="number">0</span> 个元素存放的是匹配文本，而其余的元素存放的是与正则表达式的子表达式匹配的文本。除了这些常规的数组元素之外，返回的数组还含有两个对象属性。index 属性声明的是匹配文本的起始字符在 stringObject 中的位置，input 属性声明的是对 string 的引用</span><br></pre></td></tr></table></figure><p><strong>匹配字符串</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world!&quot;</span></span><br><span class="line"><span class="keyword">var</span> value = str.<span class="title function_">match</span>(<span class="string">&quot;world&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> value1 = str.<span class="title function_">match</span>(<span class="string">&quot;world&quot;</span>).<span class="title function_">toString</span>()</span><br><span class="line"><span class="keyword">var</span> value2 = str.<span class="title function_">match</span>(<span class="string">&quot;World&quot;</span>) <span class="comment">// W是大写</span></span><br><span class="line">#返回值分别是</span><br><span class="line">[<span class="string">&#x27;world&#x27;</span>, <span class="attr">index</span>: <span class="number">6</span>, <span class="attr">input</span>: <span class="string">&#x27;Hello world!&#x27;</span>, <span class="attr">groups</span>: <span class="literal">undefined</span>]</span><br><span class="line"><span class="string">&#x27;world&#x27;</span></span><br><span class="line"><span class="literal">null</span></span><br></pre></td></tr></table></figure><p><strong>匹配正则</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;chrome MicroMessenger&#x27;</span></span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">match</span>(<span class="regexp">/chrome/i</span>)</span><br><span class="line"><span class="keyword">var</span> n1 = str.<span class="title function_">match</span>(<span class="regexp">/chrome/i</span>).<span class="title function_">toString</span>()</span><br><span class="line"><span class="keyword">var</span> n2 = str.<span class="title function_">match</span>(<span class="regexp">/chrome/g</span>)</span><br><span class="line">#返回值分别是</span><br><span class="line">[<span class="string">&#x27;chrome&#x27;</span>, <span class="attr">index</span>: <span class="number">0</span>, <span class="attr">input</span>: <span class="string">&#x27;chrome MicroMessenger&#x27;</span>, <span class="attr">groups</span>: <span class="literal">undefined</span>]</span><br><span class="line"><span class="string">&#x27;chrome&#x27;</span></span><br><span class="line">[<span class="string">&#x27;chrome&#x27;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="search"><a href="#search" class="headerlink" title="search() "></a><strong><font color='red'>search() </font></strong></h3><p>**返回新的值，**用于检索指定字符或检索与正则表达式相匹配字符，如果没有找到任何匹配项，则返回 -1。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Mr. Blue has a blue house&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">search</span>(<span class="string">&quot;blue&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="number">15</span></span><br><span class="line"></span><br><span class="line">#实例<span class="number">1</span>  忽略大小写</span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Mr. Blue has a blue house&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">search</span>(<span class="regexp">/blue/i</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><br><h3 id="includes"><a href="#includes" class="headerlink" title="includes() "></a><strong><font color='red'>includes() </font></strong></h3><p>**返回布尔值，**判断字符串是否包含指定的字符。如果找到匹配的字符串则返回 true，否则返回 false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world, welcome to the Runoob。&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">includes</span>(<span class="string">&quot;world&quot;</span>); </span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world, welcome to the Runoob.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">includes</span>(<span class="string">&quot;world&quot;</span>, <span class="number">12</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure><br><h3 id="split"><a href="#split" class="headerlink" title="split()"></a><strong><font color='red'>split()</font></strong></h3><p>**返回新的值，**把一个字符串分割成字符串数组（字符串转数组）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">split</span>(separator,limit)</span><br><span class="line">separator：可选。字符串或正则表达式，从该参数指定的地方分割 string <span class="title class_">Object</span>。</span><br><span class="line">limit：可选。 该参数可指定返回的数组的最大长度。</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newStr = str.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;H&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot; &quot;</span>, <span class="string">&quot;w&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;r&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;d&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;How are you doing today?&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n=str.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>,<span class="number">3</span>); <span class="comment">// 用空格分割，并且数组长度为3</span></span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&#x27;How&#x27;</span>,<span class="string">&#x27;are&#x27;</span>,<span class="string">&#x27;you&#x27;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="trim"><a href="#trim" class="headerlink" title="trim()"></a><strong><font color='red'>trim()</font></strong></h3><p>**返回新的值，**去除字符串的头尾空格。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;       Runoob        &quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">trim</span>();</span><br><span class="line">#返回值</span><br><span class="line"><span class="title class_">Runoob</span></span><br></pre></td></tr></table></figure><br><h3 id="repeat"><a href="#repeat" class="headerlink" title="repeat() "></a><strong><font color='red'>repeat() </font></strong></h3><p><strong>返回新的值</strong>，字符串复制指定次数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">repeat</span>(count)</span><br><span class="line">count：必需，设置要复制的次数。</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Runoob&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">repeat</span>(<span class="number">2</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;RunoobRunoob&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="toLowerCase"><a href="#toLowerCase" class="headerlink" title="toLowerCase() "></a><strong><font color='red'>toLowerCase() </font></strong></h3><p>**返回新的值，**用于把字符串转换为小写。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;RUNRON&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">toLowerCase</span>()  </span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;runron&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="toUpperCase"><a href="#toUpperCase" class="headerlink" title="toUpperCase()"></a><strong><font color='red'>toUpperCase()</font></strong></h3><p>**返回新的值，**用于把字符串转换为大写。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;runron&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">toUpperCase</span>()</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;RUNRON&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="startsWith"><a href="#startsWith" class="headerlink" title="startsWith() "></a><strong><font color='red'>startsWith() </font></strong></h3><p>**返回新的值，**判断参数字符串是否在原字符串的头部。如果是以指定的子字符串开头返回 true，否则 false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">startsWith</span>(searchvalue, start)</span><br><span class="line">searchvalue：必需，要查找的字符串。</span><br><span class="line">start：可选，查找的开始位置，默认为 <span class="number">0</span>。</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world, welcome to the Runoob.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">startsWith</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Hello world, welcome to the Runoob.&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = str.<span class="title function_">startsWith</span>(<span class="string">&quot;world&quot;</span>, <span class="number">6</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><br><h3 id="endsWith"><a href="#endsWith" class="headerlink" title="endsWith()"></a><strong><font color='red'>endsWith()</font></strong></h3><p>**返回新的值，**判断参数字符串是否在原字符串的尾部。如果是以指定的子字符串开头返回 true，否则 false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">endsWith</span>(searchvalue, start)</span><br><span class="line">searchvalue：必需，要查找的字符串。</span><br><span class="line">start：可选，查找的开始位置，默认为 <span class="number">0</span>。</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> string = <span class="string">&quot;apple,banana,orange&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> n = string.<span class="title function_">endsWith</span>(<span class="string">&quot;apple&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure><br><h3 id="padStart"><a href="#padStart" class="headerlink" title="padStart()"></a><strong><font color='red'>padStart()</font></strong></h3><p>**返回新的值，**表示用参数字符串补全头部；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># string.<span class="title function_">padStart</span>(num，<span class="title class_">String</span>)</span><br><span class="line">num：第一个参数是指定生成的字符串的最小长度</span><br><span class="line"><span class="title class_">String</span>：补全字符串的参数字符串 如果没有指定第二个参数，默认用空格填充。</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="keyword">let</span> n =a.<span class="title function_">padStart</span>(<span class="number">5</span>, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;ooabc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果指定的长度小于或者等于原字符串的长度，则返回原字符串:</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="string">&quot;hello&quot;</span>.<span class="title function_">padStart</span>(<span class="number">5</span>,<span class="string">&quot;A&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果原字符串加上补全字符串长度大于指定长度，则截去超出的补的字符串</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="string">&quot;qqqqq4&quot;</span>.<span class="title function_">padStart</span>(<span class="number">11</span>,<span class="string">&quot;,wwwwww6&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;,wwwwqqqqq4&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="keyword">var</span> n = a.<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;01&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="padEnd"><a href="#padEnd" class="headerlink" title="padEnd() "></a><strong><font color='red'>padEnd() </font></strong></h3><p>返回新的值，表示用参数字符串补全尾部；</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="keyword">let</span> n =a.<span class="title function_">padStart</span>(<span class="number">5</span>, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;abcoo&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="valueOf-NaN"><a href="#valueOf-NaN" class="headerlink" title="valueOf() "></a><strong><font color='red'>valueOf() </font></strong></h3><p>返回 String 对象的原始值。</p><p>通常由 JavaScript 在后台自动进行调用，而不是显式地处于代码中。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> n = str.<span class="title function_">valueOf</span>();</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&#x27;Hello world!&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;charAt&quot;&gt;&lt;a href=&quot;#charAt&quot; class=&quot;headerlink&quot; title=&quot;charAt() &quot;&gt;&lt;/a&gt;&lt;strong&gt;&lt;font color=&#39;red&#39;&gt;charAt() &lt;/font&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;**返回新的</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
  </entry>
  
  <entry>
    <title>Array方法集</title>
    <link href="http://example.com/posts/2b2e443a.html"/>
    <id>http://example.com/posts/2b2e443a.html</id>
    <published>2025-08-03T15:51:08.000Z</published>
    <updated>2026-01-27T15:41:13.664Z</updated>
    
    <content type="html"><![CDATA[<p>**改变原数组(变异)：**push()和pop()，shift() 和 unshift()，sort()，splice()，reverse()</p><p>**返回新数组(非变异)：**join()，concat()，slice()… …等</p><h3 id="map"><a href="#map" class="headerlink" title="map()"></a><strong><font color='red'>map()</font></strong></h3><p>**返回新的数组，**获取某个数组对象中满足条件的单个属性组成一个新的数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mapStudentsName = students.<span class="title function_">map</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">name</span>)</span><br><span class="line">#返回值：</span><br><span class="line">[<span class="string">&quot;sam&quot;</span>, <span class="string">&quot;john&quot;</span>, <span class="string">&quot;dean&quot;</span>, <span class="string">&quot;timothy&quot;</span>, <span class="string">&quot;frank&quot;</span>, <span class="string">&quot;timothy&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mapStudentsName = students.<span class="title function_">map</span>(<span class="function"><span class="params">student</span> =&gt;</span> (&#123;<span class="attr">name</span>: student.<span class="property">name</span>&#125;))</span><br><span class="line">#返回值：</span><br><span class="line">[<span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>,<span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="filter"><a href="#filter" class="headerlink" title="filter()"></a><strong><font color='red'>filter()</font></strong></h3><p>**返回新的数组，**返回所有满足条件的新数组（遍历数组所有内容 返回所有满足条件的），如果没有符合条件的元素返回 undefined</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> filteredStudentAge = students.<span class="title function_">filter</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">age</span> &gt;= <span class="number">24</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line">[&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;sam&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">26</span>, <span class="string">&quot;score&quot;</span>: <span class="number">80</span>&#125;,&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;john&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">25</span>, <span class="string">&quot;score&quot;</span>: <span class="number">86</span>&#125;]</span><br></pre></td></tr></table></figure><h3 id="find"><a href="#find" class="headerlink" title="find()"></a><strong><font color='red'>find()</font></strong></h3><p>**返回新的值，**如果有一个元素满足条件就返回这个元素，剩余的元素不会再执行检测，如果没有符合条件的元素返回 undefined</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> findStudentsName = students.<span class="title function_">find</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">name</span> === <span class="string">&#x27;timothy&#x27;</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;timothy&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="string">&quot;score&quot;</span>: <span class="number">95</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">findStudentsName.<span class="property">name</span> = <span class="string">&#x27;小米&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(students)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;sam&#x27;, age: 26, score: 80 &#125;,</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;john&#x27;, age: 25, score: 86 &#125;,</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;dean&#x27;, age: 20, score: 78 &#125;,</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;小米&#x27;, age: 18, score: 95 &#125;,</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;frank&#x27;, age: 21, score: 67 &#125;,</span></span><br><span class="line"><span class="comment">&#123; name: &#x27;timothy&#x27;, age: 8, score: 30 &#125;</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><br><h3 id="findIndex"><a href="#findIndex" class="headerlink" title="findIndex() "></a><strong><font color='red'>findIndex() </font></strong></h3><p>**返回新的值，**如果有一个元素满足条件就返回这个元素的索引，剩余的元素不会再执行检测，如果没有符合条件的元素返回-1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> findStudentsName = students.<span class="title function_">findIndex</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">name</span> === <span class="string">&#x27;timothy&#x27;</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><br><h3 id="some"><a href="#some" class="headerlink" title="some()"></a><strong><font color='red'>some()</font></strong></h3><p>**返回一个布尔值，**如果有一个元素满足条件，则表达式返回true, 剩余的元素不会再执行检测</p><p>some在碰到return true的时候，中止循环</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> someStudentsName = students.<span class="title function_">some</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">age</span> &lt; <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><br><h3 id="every"><a href="#every" class="headerlink" title="every()"></a><strong><font color='red'>every()</font></strong></h3><p>**返回一个布尔值，**数组内所有元素都要满足条件才返回true， 如有一个不满足就返回false 剩余的元素不会再执行检测，不会对空数组进行检测，空数组调用返回的是true</p><p>every在碰到return false的时候，中止循环</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> everyStudentsName = students.<span class="title function_">every</span>(<span class="function"><span class="params">student</span> =&gt;</span> student.<span class="property">age</span> &lt; <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure><br><h3 id="includes"><a href="#includes" class="headerlink" title="includes()"></a><strong><font color='red'>includes()</font></strong></h3><p>**返回一个布尔值，**用来判断一个数组是否包含一个指定的值，包含则返回true，否则false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruitArr = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>,<span class="string">&#x27;lemon&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> includesApple = fruitArr.<span class="title function_">includes</span>(<span class="string">&#x27;apple&#x27;</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><br><h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a><strong><font color='red'>reduce()</font></strong></h3><p><strong>累加器 计算总分数</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># 语法：array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur, index, arr</span>) =&gt;</span> &#123;...&#125;, init)</span><br><span class="line"> <span class="attr">prev</span>: 必需。初始值init, 或者计算结束后的返回值。初始值<span class="number">0</span>即init设置的值</span><br><span class="line">        <span class="attr">cur</span>: 必需。当前正在处理的数组元素(类似遍历出来的每一项)</span><br><span class="line">        <span class="attr">index</span>: 可选。表示当前正在处理的数组元素的索引，若提供init值，则索引为<span class="number">0</span>，否则索引为<span class="number">1</span>；</span><br><span class="line">        <span class="attr">arr</span>: 可选。当前元素所属的数组。</span><br><span class="line">        <span class="attr">init</span>: 可选。传递给函数的初始值，不传值默认为数组第一项（第一次传给prev的）</span><br><span class="line">        </span><br><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reduceSum = students.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur</span>) =&gt;</span> &#123; </span><br><span class="line">    <span class="keyword">return</span> prev + cur.<span class="property">score</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">436</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numbers = [<span class="number">65</span>, <span class="number">44</span>, <span class="number">12</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> aa = numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">prev, cur</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(prev); <span class="comment">// init不传值默认初始值是65</span></span><br><span class="line"><span class="keyword">return</span> prev + cur;</span><br><span class="line">&#125;);</span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">125</span></span><br></pre></td></tr></table></figure><br><h3 id="reduceRight"><a href="#reduceRight" class="headerlink" title="reduceRight()"></a><strong><font color='red'>reduceRight()</font></strong></h3><p><strong>累加器 计算总分数</strong></p><p>reduceRight() 方法的功能和 <a href="https://www.runoob.com/jsref/jsref-reduce.html">reduce()</a> 功能是一样的，不同的是 reduceRight() 从数组的末尾向前将数组中的数组项做累加。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 语法：array.<span class="title function_">reduceRight</span>(<span class="function">(<span class="params">prev, cur, index, arr</span>) =&gt;</span> &#123;...&#125;, init)</span><br><span class="line"> <span class="attr">prev</span>: 必需。初始值init, 或者计算结束后的返回值。初始值<span class="number">0</span>即init设置的值</span><br><span class="line">        <span class="attr">cur</span>: 必需。当前正在处理的数组元素(类似遍历出来的每一项)</span><br><span class="line">        <span class="attr">index</span>: 可选。表示当前正在处理的数组元素的索引，若提供init值，则索引为<span class="number">0</span>，否则索引为<span class="number">1</span>；</span><br><span class="line">        <span class="attr">arr</span>: 可选。当前元素所属的数组。</span><br><span class="line">        <span class="attr">init</span>: 可选。传递给函数的初始值，不传值默认为数组最后一项（第一次传给prev的）</span><br><span class="line">       </span><br><span class="line"> <span class="keyword">var</span> numbers = [<span class="number">65</span>, <span class="number">44</span>, <span class="number">12</span>, <span class="number">4</span>];</span><br><span class="line"> <span class="keyword">let</span> aa = numbers.<span class="title function_">reduceRight</span>(<span class="function">(<span class="params">prev, cur</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(prev); <span class="comment">// init不传值默认初始值是4</span></span><br><span class="line">   <span class="keyword">return</span> prev + cur;</span><br><span class="line"> &#125;);</span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">125</span></span><br></pre></td></tr></table></figure><br><h3 id="concat"><a href="#concat" class="headerlink" title="concat()"></a><strong><font color='red'>concat()</font></strong></h3><p>**返回新的数组，**连接两个或更多的数组，并返回结果</p><p>现在推荐扩展运算符：const concatArray &#x3D; […[1, 2, 3, 4, 5],  …[‘a’, ‘b’]]</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> concatArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].<span class="title function_">concat</span>([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"></span><br><span class="line">#返回值：</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span> ]</span><br></pre></td></tr></table></figure><br><h3 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a><strong><font color='red'>indexOf()</font></strong></h3><p><strong>返回数组中某个指定的第一个元素的索引</strong>。如果在数组中没找到指定元素则返回 -1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 语法：array.<span class="title function_">indexOf</span>(item,start)</span><br><span class="line">     <span class="attr">item</span>:必须。查找的元素。</span><br><span class="line">     <span class="attr">start</span>:可选的整数参数，规定在数组中开始检索的位置</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fruitArr = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>,<span class="string">&#x27;lemon&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> indexOfArray = fruitArr.<span class="title function_">indexOf</span>(<span class="string">&#x27;apple&#x27;</span>)</span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fruitArr = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> indexOfArray = fruitArr.<span class="title function_">indexOf</span>(<span class="string">&#x27;apple&#x27;</span>, <span class="number">3</span>)</span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><br><h3 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf() "></a><strong><font color='red'>lastIndexOf() </font></strong></h3><p><strong>返回数组中某个指定的元素最后出现的索引</strong>。如果在数组中没找到指定元素则返回 -1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#语法：array.<span class="title function_">lastIndexOf</span>(item,start)</span><br><span class="line">     <span class="attr">item</span>:必须。查找的元素。</span><br><span class="line">     <span class="attr">start</span>:可选的整数参数，规定在数组中开始检索的位置</span><br><span class="line">     </span><br><span class="line">从右往左第一个<span class="title class_">Apple</span>的索引</span><br><span class="line"><span class="keyword">const</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Orange&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> a = fruits.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;Apple&quot;</span>);</span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">4</span></span><br><span class="line"></span><br><span class="line">从索引<span class="number">4</span>(包含)开始从右往左第一个<span class="title class_">Apple</span>的索引</span><br><span class="line"><span class="keyword">const</span> fruits=[<span class="string">&quot;Banana&quot;</span>,<span class="string">&quot;Orange&quot;</span>,<span class="string">&quot;Apple&quot;</span>,<span class="string">&quot;Mango&quot;</span>,<span class="string">&quot;Banana&quot;</span>,<span class="string">&quot;Orange&quot;</span>,<span class="string">&quot;Apple&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> a = fruits.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;Apple&quot;</span>,<span class="number">4</span>); <span class="comment">//2</span></span><br><span class="line">#返回值：</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure><br><h3 id="splice"><a href="#splice" class="headerlink" title="splice()"></a><strong><font color='red'>splice()</font></strong></h3><p>**改变原数组，**可以实现删除、插入和替换元素。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># 语法：array.<span class="title function_">splice</span>(index,howmany,item1,.....,itemX)</span><br><span class="line">      <span class="attr">index</span>: 必需。规定从何处添加/删除元素。该参数是开始插入和（或）删除的数组元素的索引，必须是数字。</span><br><span class="line">      howmany：可选。删除的项数(删除多少元素)。必须是数字，<span class="number">0</span>就是不删除。如果未规定此参数，则删除从 index    开始到原数组结尾的所有元素。</span><br><span class="line">      item1, ..., itemX：可选。要添加到数组的新元素</span><br><span class="line">   </span><br><span class="line">      </span><br><span class="line">删除：可以删除任意数量的项，只需指定<span class="number">2</span>个参数：要删除的第一项的位置和要删除的项数。例如， <span class="title function_">splice</span>(<span class="number">0</span>,<span class="number">2</span>)会删除数组中的前两项。</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spliceArray = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> spliceArrayRemoveed = spliceArray.<span class="title function_">splice</span>(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArray)  <span class="comment">// [&#x27;orange&#x27;, &#x27;pineapple&#x27;, &#x27;apple&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArrayRemoveed) <span class="comment">//  [&#x27;mango&#x27;, &#x27;apple&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spliceArrayRemoveed = spliceArray.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArray)  <span class="comment">// [&#x27;mango&#x27;, &#x27;pineapple&#x27;, &#x27;apple&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArrayRemoveed) <span class="comment">//  [&#x27;apple&#x27;, &#x27;orange&#x27;]</span></span><br><span class="line"></span><br><span class="line">插入：可以向指定位置插入任意数量的项，只需提供<span class="number">3</span>个参数：起始位置、 <span class="number">0</span>（要删除的项数）和 要插入的项。例如，<span class="title function_">splice</span>(<span class="number">2</span>,<span class="number">0</span>,<span class="string">&#x27;lemon&#x27;</span>,<span class="string">&#x27;6&#x27;</span>)会从当前数组的索引<span class="number">2</span>开始插入lemon和<span class="number">6</span>。</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spliceArray = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> spliceArrayRemoveed = spliceArray.<span class="title function_">splice</span>(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&#x27;lemon&#x27;</span>, <span class="string">&#x27;6&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArray)  </span><br><span class="line"><span class="comment">// [&#x27;mango&#x27;, &#x27;apple&#x27;, &#x27;lemon&#x27;, &#x27;6&#x27;, &#x27;orange&#x27;, &#x27;pineapple&#x27;, &#x27;apple&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArrayRemoveed) <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">替换：可以向指定位置插入任意数量的项，且同时删除任意数量的项，只需指定 <span class="number">3</span> 个参数：起始位置、要删除的项数和要插入的任意数量的项。插入的项数不必与删除的项数相等。例如，<span class="title function_">splice</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;lemon&#x27;</span>)会删除当前数组位置 <span class="number">1</span> 的项，然后再从位置 <span class="number">2</span> 开始插入<span class="string">&#x27;lemon&#x27;</span>。</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spliceArray = [<span class="string">&#x27;mango&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;pineapple&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> spliceArrayRemoveed = spliceArray.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;lemon&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArray) <span class="comment">// [&#x27;mango&#x27;, &#x27;lemon&#x27;, &#x27;pineapple&#x27;, &#x27;apple&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceArrayRemoveed) <span class="comment">// [&#x27;apple&#x27;, &#x27;orange&#x27;]</span></span><br></pre></td></tr></table></figure><br><h3 id="slice"><a href="#slice" class="headerlink" title="slice()"></a><strong><font color='red'>slice()</font></strong></h3><p>**返回新的数组，**取数组的某个部分</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> heroes = [<span class="string">&quot;李白&quot;</span>, <span class="string">&#x27;蔡文姬&#x27;</span>, <span class="string">&#x27;韩信&#x27;</span>, <span class="string">&#x27;赵云&#x27;</span>, <span class="string">&#x27;甄姬&#x27;</span>, <span class="string">&#x27;阿珂&#x27;</span>, <span class="string">&#x27;貂蝉&#x27;</span>, <span class="string">&#x27;妲己&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> neWheroes = heroes.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">3</span>) <span class="comment">// 从索引0开始截取(包含)，截取到索引3(不包含)</span></span><br><span class="line">#返回值：</span><br><span class="line">[<span class="string">&#x27;李白&#x27;</span>, <span class="string">&#x27;蔡文姬&#x27;</span>, <span class="string">&#x27;韩信&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> neWheroes = heroes.<span class="title function_">slice</span>(<span class="number">2</span>, -<span class="number">1</span>) <span class="comment">// 从索引2开始截取(包含)，-1代表截取到倒数第一位（不含）</span></span><br><span class="line">#返回值：</span><br><span class="line">[<span class="string">&#x27;韩信&#x27;</span>, <span class="string">&#x27;赵云&#x27;</span>, <span class="string">&#x27;甄姬&#x27;</span>, <span class="string">&#x27;阿珂&#x27;</span>, <span class="string">&#x27;貂蝉&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> neWheroes = heroes.<span class="title function_">slice</span>(-<span class="number">4</span>) <span class="comment">// 截取后四位</span></span><br><span class="line">#返回值：[<span class="string">&#x27;赵云&#x27;</span>, <span class="string">&#x27;甄姬&#x27;</span>, <span class="string">&#x27;阿珂&#x27;</span>, <span class="string">&#x27;貂蝉&#x27;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach() "></a><strong><font color='red'>forEach() </font></strong></h3><p>遍历数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">#原生的foreach是无法跳出循环的  <span class="keyword">for</span>遍历用<span class="keyword">break</span>跳出循环   jq的each的用<span class="keyword">return</span> falsel来替代<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">#forEach</span><br><span class="line"><span class="keyword">let</span> paymentMethodIndex = <span class="string">&#x27;&#x27;</span></span><br><span class="line">students.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    paymentMethodIndex = index;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 退出不了循环</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(paymentMethodIndex) <span class="comment">// 打印5</span></span><br><span class="line"></span><br><span class="line">#<span class="keyword">for</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; students.<span class="property">length</span>; index++) &#123;</span><br><span class="line">    paymentMethodIndex = index</span><br><span class="line">    <span class="keyword">break</span> <span class="comment">// 遍历第一次就终止循环了</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(paymentMethodIndex); <span class="comment">// 打印0</span></span><br><span class="line"></span><br><span class="line">#$.each</span><br><span class="line">$.<span class="title function_">each</span>(students, <span class="keyword">function</span> (<span class="params">index, item</span>) &#123;</span><br><span class="line">    paymentMethodIndex = index</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// 遍历第一次就终止循环了</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(paymentMethodIndex); <span class="comment">// 打印0</span></span><br><span class="line"></span><br><span class="line"># 利用forEach给遍历出来的对象添加属性</span><br><span class="line"><span class="keyword">let</span> list1 = []</span><br><span class="line">students.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> newList = item <span class="comment">// 直接给item赋值会报错</span></span><br><span class="line">    newList.<span class="property">value</span> = index.<span class="title function_">toString</span>();</span><br><span class="line">    list1 = [...list1, newList]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(list1);</span><br><span class="line">返回值：</span><br><span class="line"><span class="keyword">const</span> students = [</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;0&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;sam&#x27;</span>, <span class="attr">age</span>: <span class="number">26</span>, <span class="attr">score</span>: <span class="number">80</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;john&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>, <span class="attr">score</span>: <span class="number">86</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;dean&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>, <span class="attr">score</span>: <span class="number">78</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;3&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">score</span>: <span class="number">95</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;4&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;frank&#x27;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">score</span>: <span class="number">67</span> &#125;,</span><br><span class="line">&#123; <span class="attr">value</span>: <span class="string">&#x27;5&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;timothy&#x27;</span>, <span class="attr">age</span>: <span class="number">8</span>, <span class="attr">score</span>: <span class="number">30</span> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><br><h3 id="join"><a href="#join" class="headerlink" title="join()"></a><strong><font color='red'>join()</font></strong></h3><p><strong>返回新的数组</strong>，用于把数组中的所有元素用指定的字符串连接起来（数组转字符串）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> energy = fruits.<span class="title function_">join</span>();</span><br><span class="line">#返回值</span><br><span class="line"><span class="title class_">Banana</span>,<span class="title class_">Orange</span>,<span class="title class_">Apple</span>,<span class="title class_">Mango</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> energy = fruits.<span class="title function_">join</span>(<span class="string">&quot; / &quot;</span>); </span><br><span class="line">#返回值</span><br><span class="line"><span class="title class_">Banana</span> / <span class="title class_">Orange</span> / <span class="title class_">Apple</span> / <span class="title class_">Mango</span></span><br></pre></td></tr></table></figure><br><h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString() "></a><strong><font color='red'>toString() </font></strong></h3><p>**返回新数组，**把数组转换为字符串，并返回结果。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fruitArr = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> fruitString = fruits.<span class="title function_">toString</span>();</span><br><span class="line">#返回值</span><br><span class="line"><span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span></span><br></pre></td></tr></table></figure><br><h3 id="fill"><a href="#fill" class="headerlink" title="fill() "></a><strong><font color='red'>fill() </font></strong></h3><p>**改变原数组，**用一个值替换数组中的元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#array.<span class="title function_">fill</span>(value, start, end)</span><br><span class="line">value：必需。填充的值（替换数组中的值）。</span><br><span class="line">start：可选。开始填充位置。已经填充</span><br><span class="line">end：可选。停止填充位置 (默认为 array.<span class="property">length</span>) 没填充</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">fill</span>(<span class="string">&quot;88&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&#x27;88&#x27;</span>, <span class="string">&#x27;88&#x27;</span>, <span class="string">&#x27;88&#x27;</span>, <span class="string">&#x27;88&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">fill</span>(<span class="string">&quot;66&quot;</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;66&quot;</span>, <span class="string">&quot;Mango&quot;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="from"><a href="#from" class="headerlink" title="from()"></a><strong><font color='red'>from()</font></strong></h3><p><strong>1、用来将两种对象转换成数组转换成数组（ES6）</strong></p><p>两种对象：</p><p>（1）.部署了Iterator接口的对象，比如：Set，Map，Array。</p><p>（2）.类数组对象，什么叫类数组对象，就是一个对象必须有length属性，没有length，转出来的就是空数组，类数组对象的属性名必须为数值型或字符串型的数字（属性名不是数值或字符串数值返回的是一个都是undefined的数组）。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">  .<span class="title function_">set</span>(<span class="string">&#x27;k1&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">  .<span class="title function_">set</span>(<span class="string">&#x27;k2&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">  .<span class="title function_">set</span>(<span class="string">&#x27;k3&#x27;</span>, <span class="number">3</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(map));</span><br><span class="line">#返回值</span><br><span class="line">[[<span class="string">&#x27;k1&#x27;</span>, <span class="number">1</span>],[<span class="string">&#x27;k2&#x27;</span>, <span class="number">2</span>],[<span class="string">&#x27;k3&#x27;</span>, <span class="number">3</span>]]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br><span class="line">  .<span class="title function_">add</span>(<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  .<span class="title function_">add</span>(<span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">  .<span class="title function_">add</span>(<span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">from</span>(set));</span><br><span class="line">#返回值</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arrayLike = &#123; <span class="number">0</span>: <span class="string">&#x27;tom&#x27;</span>, <span class="number">1</span>: [<span class="string">&#x27;john&#x27;</span>,<span class="string">&#x27;Mary&#x27;</span>], <span class="string">&#x27;length&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&#x27;tom&#x27;</span>,[<span class="string">&#x27;john&#x27;</span>,<span class="string">&#x27;Mary&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arrayLike = &#123;  <span class="comment">// 属性名不是数字或字符串数值，因此不是类数组</span></span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;tom&#x27;</span>, </span><br><span class="line">    <span class="string">&#x27;friends&#x27;</span>: [<span class="string">&#x27;john&#x27;</span>,<span class="string">&#x27;Mary&#x27;</span>],</span><br><span class="line">    <span class="attr">length</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike)</span><br><span class="line">#返回值</span><br><span class="line"><span class="comment">// [ undefined, undefined ]</span></span><br></pre></td></tr></table></figure><p><strong>2、<code>Array.from</code>还可以接受第二个参数，作用类似于数组的<code>map</code>方法，用来对每个元素进行处理，将处理后的值放入返回的数组。</strong></p><p><strong>返回新的数组</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>(arr)</span><br><span class="line"><span class="keyword">let</span> newArr = <span class="title class_">Array</span>.<span class="title function_">from</span>(set, <span class="function"><span class="params">item</span> =&gt;</span> item + <span class="number">1</span>)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure><br><h3 id="isArray"><a href="#isArray" class="headerlink" title="isArray() "></a><strong><font color='red'>isArray() </font></strong></h3><p>**返回一个布尔值，**用于判断一个对象是否为数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> x = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(fruits);</span><br><span class="line">#返回值</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure><br><h3 id="reverse"><a href="#reverse" class="headerlink" title="reverse() "></a><strong><font color='red'>reverse() </font></strong></h3><p>**改变原数组，**颠倒数组中元素的顺序</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">reverse</span>()</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&#x27;Mango&#x27;</span>, <span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Orange&#x27;</span>, <span class="string">&#x27;Banana&#x27;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="sort"><a href="#sort" class="headerlink" title="sort() "></a><strong><font color='red'>sort() </font></strong></h3><p>**改变原数组，**对数组的元素进行排序，默认排序顺序为按字母或数字(个位数)升序。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">sort</span>();</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;Apple&quot;</span>,<span class="string">&quot;Banana&quot;</span>,<span class="string">&quot;Mango&quot;</span>,<span class="string">&quot;Orange&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">4</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">arr.<span class="title function_">sort</span>();</span><br><span class="line">#返回值</span><br><span class="line"><span class="comment">//[1,2,3,4,5,6,7]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// a遍历出来是降序 100 40 25 10 5 1</span></span><br><span class="line"><span class="comment">// b遍历出来是升序 1 5 10 25 40 100</span></span><br><span class="line"><span class="keyword">var</span> points = [<span class="number">40</span>, <span class="number">100</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">25</span>, <span class="number">10</span>];</span><br><span class="line">points.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a); <span class="comment">// 降序</span></span><br><span class="line">#返回值</span><br><span class="line"><span class="comment">//[100, 40, 25, 10, 5, 1]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> points = [<span class="number">40</span>, <span class="number">100</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">25</span>, <span class="number">10</span>];</span><br><span class="line">points.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);  <span class="comment">// 升序</span></span><br><span class="line">#返回值</span><br><span class="line"><span class="comment">//[1,5,10,25,40,100]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr1 = [</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;张飞&#x27;</span>, <span class="attr">age</span>:<span class="number">34</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;曹操&#x27;</span>, <span class="attr">age</span>:<span class="number">20</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;关旭&#x27;</span>, <span class="attr">age</span>:<span class="number">60</span>&#125;</span><br><span class="line">]</span><br><span class="line">arr1.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.<span class="property">age</span> - b.<span class="property">age</span>)</span><br><span class="line">#返回值</span><br><span class="line">[</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;曹操&#x27;</span>, <span class="attr">age</span>:<span class="number">20</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;张飞&#x27;</span>, <span class="attr">age</span>:<span class="number">34</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">nama</span>: <span class="string">&#x27;关旭&#x27;</span>, <span class="attr">age</span>:<span class="number">60</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><br><h3 id="push"><a href="#push" class="headerlink" title="push() "></a><strong><font color='red'>push() </font></strong></h3><p>**改变原数组，**向数组的尾部添加一个或更多元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">push</span>(<span class="string">&quot;11&quot;</span>)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>, <span class="string">&quot;11&quot;</span>];</span><br></pre></td></tr></table></figure><br><h3 id="pop"><a href="#pop" class="headerlink" title="pop()"></a><strong><font color='red'>pop()</font></strong></h3><p>**改变原数组，**删除数组的尾部最后一个元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> res = fruits.<span class="title function_">pop</span>()</span><br><span class="line">#返回值</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits) <span class="comment">// [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// &#x27;Mango&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="shift"><a href="#shift" class="headerlink" title="shift() "></a><strong><font color='red'>shift() </font></strong></h3><p>**改变原数组，**把数组的第一个元素从其中删除</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> res = fruits.<span class="title function_">shift</span>()</span><br><span class="line">#返回值</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits) <span class="comment">// [&#x27;Orange&#x27;, &#x27;Apple&#x27;, &#x27;Mango&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// &#x27;Banana&#x27;</span></span><br></pre></td></tr></table></figure><br><h3 id="unshift"><a href="#unshift" class="headerlink" title="unshift()"></a><strong><font color='red'>unshift()</font></strong></h3><p>**改变原数组，**向数组的开头添加一个或更多元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">unshift</span>(<span class="string">&quot;Lemon&quot;</span>,<span class="string">&quot;Pineapple&quot;</span>);</span><br><span class="line">#返回值</span><br><span class="line"><span class="title class_">Lemon</span>,<span class="title class_">Pineapple</span>,<span class="title class_">Banana</span>,<span class="title class_">Orange</span>,<span class="title class_">Apple</span>,<span class="title class_">Mango</span></span><br></pre></td></tr></table></figure><br><h3 id="copyWithin"><a href="#copyWithin" class="headerlink" title="copyWithin()"></a><strong><font color='red'>copyWithin()</font></strong></h3><p>**返回新数组，**用于从数组的指定位置拷贝元素到数组的另一个指定位置中。  原数组长度保持不变。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># array.<span class="title function_">copyWithin</span>(target, start, end)</span><br><span class="line">target：必需。复制到指定目标索引位置。</span><br><span class="line">start：可选。元素复制的起始位置。</span><br><span class="line">end：可选。停止复制的索引位置 (默认为 array.<span class="property">length</span>)。如果为负值，表示倒数。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;你&quot;</span>, <span class="string">&quot;真&quot;</span>, <span class="string">&quot;的&quot;</span>, <span class="string">&quot;好&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> n = fruits.<span class="title function_">copyWithin</span>(<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;你&quot;</span>, <span class="string">&quot;真&quot;</span>, <span class="string">&quot;你&quot;</span>, <span class="string">&quot;真&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;你&quot;</span>, <span class="string">&quot;是&quot;</span>, <span class="string">&quot;真&quot;</span>, <span class="string">&quot;的&quot;</span>, <span class="string">&quot;好&quot;</span>, <span class="string">&quot;吗&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> n = fruits.<span class="title function_">copyWithin</span>(<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;你&quot;</span>, <span class="string">&quot;是&quot;</span>,<span class="string">&quot;你&quot;</span>, <span class="string">&quot;是&quot;</span>,<span class="string">&quot;好&quot;</span>, <span class="string">&quot;吗&quot;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="entries"><a href="#entries" class="headerlink" title="entries() "></a><strong><font color='red'>entries() </font></strong></h3><p>**返回新的数组，**返回一个数组的迭代对象，该对象包含数组的键值对 (key&#x2F;value)。</p><p>迭代对象中数组的索引值作为 key， 数组元素作为 value。</p><p><strong>可迭代对象：可以使用for循环遍历的对象,我们称之为可迭代对象.</strong></p><p><code>Object.entries()</code> 可以把一个对象的键值以数组的形式遍历出来，结果和 <code>for...in</code> 一致，但不会遍历原型属性。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&#x27;你&#x27;</span>, <span class="string">&#x27;啊&#x27;</span>, <span class="string">&#x27;的&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> newArr = <span class="title class_">Object</span>.<span class="title function_">entries</span>(arr)</span><br><span class="line">#返回值</span><br><span class="line">[[<span class="string">&quot;0&quot;</span>, <span class="string">&quot;你&quot;</span>],[<span class="string">&quot;1&quot;</span>, <span class="string">&quot;啊&quot;</span>],[<span class="string">&quot;2&quot;</span>, <span class="string">&quot;的&quot;</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">baz</span>: <span class="string">&#x27;abc&#x27;</span> &#125;; </span><br><span class="line"><span class="keyword">const</span> newobjr = <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)</span><br><span class="line">#返回值</span><br><span class="line">[[<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>], [<span class="string">&#x27;baz&#x27;</span>, <span class="string">&#x27;abc&#x27;</span>]]</span><br></pre></td></tr></table></figure><br><h3 id="keys"><a href="#keys" class="headerlink" title="keys() "></a><strong><font color='red'>keys() </font></strong></h3><p>**返回新的数组，**用于从数组创建一个包含数组键的可迭代对象。</p><p>如果对象是数组返回 true，否则返回 false。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="string">&#x27;a&#x27;</span>: <span class="number">123</span>, <span class="string">&quot;b&quot;</span>: <span class="number">456</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> newObj = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;asfdw&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> newstr = <span class="title class_">Object</span>.<span class="title function_">keys</span>(str)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">24</span>, <span class="number">45</span>, <span class="number">67</span>];</span><br><span class="line"><span class="keyword">let</span> newArr = <span class="title class_">Object</span>.<span class="title function_">keys</span>(arr)</span><br><span class="line">#返回值</span><br><span class="line">[<span class="string">&quot;0&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>]</span><br></pre></td></tr></table></figure><br><h3 id="flat"><a href="#flat" class="headerlink" title="flat()"></a><strong><font color='red'>flat()</font></strong></h3><p>**返回新的数组，**用于将嵌套的数组“拉平</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#array.<span class="title function_">fill</span>(num)</span><br><span class="line">num：默认<span class="number">1</span>，<span class="number">1</span>拉平一层数组  <span class="number">2</span>拉平两层数组  <span class="title class_">Infinity</span>拉平多层</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>,[<span class="number">11</span>]]</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">flat</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>,[<span class="number">11</span>, [<span class="number">666</span>]]]</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">flat</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, [<span class="number">11</span>, [<span class="number">666</span>, [<span class="string">&#x27;qqq&#x27;</span>]]]]</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">flat</span>(<span class="title class_">Infinity</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;**改变原数组(变异)：**push()和pop()，shift() 和 unshift()，sort()，splice()，reverse()&lt;/p&gt;
&lt;p&gt;**返回新数组(非变异)：**join()，concat()，slice()… …等&lt;/p&gt;
&lt;h3 id=&quot;ma</summary>
      
    
    
    
    <category term="HTML/CSS/JS" scheme="http://example.com/categories/HTML-CSS-JS/"/>
    
    
    <category term="javaScript" scheme="http://example.com/tags/javaScript/"/>
    
  </entry>
  
</feed>
